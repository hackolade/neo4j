"use strict";var gS=Object.defineProperty;var s=(r,t)=>gS(r,"name",{value:t,configurable:!0});var h=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var Ih=h((N6,Ch)=>{"use strict";var Iu={},SS=s(r=>{Iu.lodash=r.require("lodash"),Iu.async=r.require("async")},"setDependencies");Ch.exports={setDependencies:SS,dependencies:Iu}});var It=h((D6,on)=>{function ES(r){return r&&r.__esModule?r:{default:r}}s(ES,"_interopRequireDefault");on.exports=ES,on.exports.__esModule=!0,on.exports.default=on.exports});var hr=h((M6,sn)=>{function wS(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}s(wS,"_classCallCheck");sn.exports=wS,sn.exports.__esModule=!0,sn.exports.default=sn.exports});var jo=h((U6,ze)=>{function Ru(r){"@babel/helpers - typeof";return ze.exports=Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ze.exports.__esModule=!0,ze.exports.default=ze.exports,Ru(r)}s(Ru,"_typeof");ze.exports=Ru,ze.exports.__esModule=!0,ze.exports.default=ze.exports});var Ah=h((F6,un)=>{var Rh=jo().default;function TS(r,t){if(Rh(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(Rh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}s(TS,"toPrimitive");un.exports=TS,un.exports.__esModule=!0,un.exports.default=un.exports});var jh=h((V6,an)=>{var PS=jo().default,CS=Ah();function IS(r){var t=CS(r,"string");return PS(t)=="symbol"?t:t+""}s(IS,"toPropertyKey");an.exports=IS,an.exports.__esModule=!0,an.exports.default=an.exports});var pr=h((H6,cn)=>{var RS=jh();function Nh(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,RS(n.key),n)}}s(Nh,"_defineProperties");function AS(r,t,e){return t&&Nh(r.prototype,t),e&&Nh(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}s(AS,"_createClass");cn.exports=AS,cn.exports.__esModule=!0,cn.exports.default=cn.exports});var qh=h((Y6,Ye)=>{function Au(r,t){return Ye.exports=Au=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Ye.exports.__esModule=!0,Ye.exports.default=Ye.exports,Au(r,t)}s(Au,"_setPrototypeOf");Ye.exports=Au,Ye.exports.__esModule=!0,Ye.exports.default=Ye.exports});var Dh=h((K6,ln)=>{var jS=qh();function NS(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&jS(r,t)}s(NS,"_inherits");ln.exports=NS,ln.exports.__esModule=!0,ln.exports.default=ln.exports});var xh=h((Q6,fn)=>{function qS(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}s(qS,"_assertThisInitialized");fn.exports=qS,fn.exports.__esModule=!0,fn.exports.default=fn.exports});var Mh=h((X6,hn)=>{var DS=jo().default,xS=xh();function MS(r,t){if(t&&(DS(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xS(r)}s(MS,"_possibleConstructorReturn");hn.exports=MS,hn.exports.__esModule=!0,hn.exports.default=hn.exports});var kh=h((e3,Ze)=>{function ju(r){return Ze.exports=ju=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports,ju(r)}s(ju,"_getPrototypeOf");Ze.exports=ju,Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports});var ae=h(ue=>{"use strict";var kS=ue&&ue.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ue,"__esModule",{value:!0});ue.PROTOCOL_ERROR=ue.SESSION_EXPIRED=ue.SERVICE_UNAVAILABLE=ue.Neo4jError=ue.newError=void 0;var US="ServiceUnavailable";ue.SERVICE_UNAVAILABLE=US;var LS="SessionExpired";ue.SESSION_EXPIRED=LS;var FS="ProtocolError";ue.PROTOCOL_ERROR=FS;var BS="N/A",Uh=function(r){kS(t,r);function t(e,n){var i=r.call(this,e)||this;return i.constructor=t,i.__proto__=t.prototype,i.code=n,i.name="Neo4jError",i}return s(t,"Neo4jError"),t}(Error);ue.Neo4jError=Uh;function VS(r,t){return new Uh(r,t??BS)}s(VS,"newError");ue.newError=VS});var At=h(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.toString=de.toNumber=de.inSafeRange=de.isInt=de.int=void 0;var pn=ae(),Lh=new Map,pt=function(){function r(t,e){this.low=t||0,this.high=e||0}return s(r,"Integer"),r.prototype.inSafeRange=function(){return this.greaterThanOrEqual(r.MIN_SAFE_VALUE)&&this.lessThanOrEqual(r.MAX_SAFE_VALUE)},r.prototype.toInt=function(){return this.low},r.prototype.toNumber=function(){return this.high*Rt+(this.low>>>0)},r.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(Rt)+BigInt(this.low>>>0);var t=this.negate();return BigInt(-1)*(BigInt(t.high>>>0)*BigInt(Rt)+BigInt(t.low>>>0))},r.prototype.toNumberOrInfinity=function(){return this.lessThan(r.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(r.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},r.prototype.toString=function(t){if(t=t||10,t<2||t>36)throw RangeError("radix out of range: "+t);if(this.isZero())return"0";var e;if(this.isNegative())if(this.equals(r.MIN_VALUE)){var n=r.fromNumber(t),i=this.div(n);return e=i.multiply(n).subtract(this),i.toString(t)+e.toInt().toString(t)}else return"-"+this.negate().toString(t);var o=r.fromNumber(Math.pow(t,6));e=this;for(var u="";;){var a=e.div(o),l=e.subtract(a.multiply(o)).toInt()>>>0,c=l.toString(t);if(e=a,e.isZero())return c+u;for(;c.length<6;)c="0"+c;u=""+c+u}},r.prototype.getHighBits=function(){return this.high},r.prototype.getLowBits=function(){return this.low},r.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(r.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var t=this.high!==0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!==0?e+33:e+1},r.prototype.isZero=function(){return this.high===0&&this.low===0},r.prototype.isNegative=function(){return this.high<0},r.prototype.isPositive=function(){return this.high>=0},r.prototype.isOdd=function(){return(this.low&1)===1},r.prototype.isEven=function(){return(this.low&1)===0},r.prototype.equals=function(t){var e=r.fromValue(t);return this.high===e.high&&this.low===e.low},r.prototype.notEquals=function(t){return!this.equals(t)},r.prototype.lessThan=function(t){return this.compare(t)<0},r.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},r.prototype.greaterThan=function(t){return this.compare(t)>0},r.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},r.prototype.compare=function(t){var e=r.fromValue(t);if(this.equals(e))return 0;var n=this.isNegative(),i=e.isNegative();return n&&!i?-1:!n&&i?1:this.subtract(e).isNegative()?-1:1},r.prototype.negate=function(){return this.equals(r.MIN_VALUE)?r.MIN_VALUE:this.not().add(r.ONE)},r.prototype.add=function(t){var e=r.fromValue(t),n=this.high>>>16,i=this.high&65535,o=this.low>>>16,u=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,f=e.low&65535,p=0,_=0,m=0,g=0;return g+=u+f,m+=g>>>16,g&=65535,m+=o+c,_+=m>>>16,m&=65535,_+=i+l,p+=_>>>16,_&=65535,p+=n+a,p&=65535,r.fromBits(m<<16|g,p<<16|_)},r.prototype.subtract=function(t){var e=r.fromValue(t);return this.add(e.negate())},r.prototype.multiply=function(t){if(this.isZero())return r.ZERO;var e=r.fromValue(t);if(e.isZero())return r.ZERO;if(this.equals(r.MIN_VALUE))return e.isOdd()?r.MIN_VALUE:r.ZERO;if(e.equals(r.MIN_VALUE))return this.isOdd()?r.MIN_VALUE:r.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(Vh)&&e.lessThan(Vh))return r.fromNumber(this.toNumber()*e.toNumber());var n=this.high>>>16,i=this.high&65535,o=this.low>>>16,u=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,f=e.low&65535,p=0,_=0,m=0,g=0;return g+=u*f,m+=g>>>16,g&=65535,m+=o*f,_+=m>>>16,m&=65535,m+=u*c,_+=m>>>16,m&=65535,_+=i*f,p+=_>>>16,_&=65535,_+=o*c,p+=_>>>16,_&=65535,_+=u*l,p+=_>>>16,_&=65535,p+=n*f+i*c+o*l+u*a,p&=65535,r.fromBits(m<<16|g,p<<16|_)},r.prototype.div=function(t){var e=r.fromValue(t);if(e.isZero())throw(0,pn.newError)("division by zero");if(this.isZero())return r.ZERO;var n,i,o;if(this.equals(r.MIN_VALUE)){if(e.equals(r.ONE)||e.equals(r.NEG_ONE))return r.MIN_VALUE;if(e.equals(r.MIN_VALUE))return r.ONE;var u=this.shiftRight(1);return n=u.div(e).shiftLeft(1),n.equals(r.ZERO)?e.isNegative()?r.ONE:r.NEG_ONE:(i=this.subtract(e.multiply(n)),o=n.add(i.div(e)),o)}else if(e.equals(r.MIN_VALUE))return r.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(o=r.ZERO,i=this;i.greaterThanOrEqual(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),l=a<=48?1:Math.pow(2,a-48),c=r.fromNumber(n),f=c.multiply(e);f.isNegative()||f.greaterThan(i);)n-=l,c=r.fromNumber(n),f=c.multiply(e);c.isZero()&&(c=r.ONE),o=o.add(c),i=i.subtract(f)}return o},r.prototype.modulo=function(t){var e=r.fromValue(t);return this.subtract(this.div(e).multiply(e))},r.prototype.not=function(){return r.fromBits(~this.low,~this.high)},r.prototype.and=function(t){var e=r.fromValue(t);return r.fromBits(this.low&e.low,this.high&e.high)},r.prototype.or=function(t){var e=r.fromValue(t);return r.fromBits(this.low|e.low,this.high|e.high)},r.prototype.xor=function(t){var e=r.fromValue(t);return r.fromBits(this.low^e.low,this.high^e.high)},r.prototype.shiftLeft=function(t){var e=r.toNumber(t);return(e&=63)===0?r.ZERO:e<32?r.fromBits(this.low<<e,this.high<<e|this.low>>>32-e):r.fromBits(0,this.low<<e-32)},r.prototype.shiftRight=function(t){var e=r.toNumber(t);return(e&=63)===0?r.ZERO:t<32?r.fromBits(this.low>>>e|this.high<<32-e,this.high>>e):r.fromBits(this.high>>e-32,this.high>=0?0:-1)},r.isInteger=function(t){return(t&&t.__isInteger__)===!0},r.fromInt=function(t){var e,n;return t=t|0,t>=-128&&t<128&&(n=Lh.get(t),n)?n:(e=new r(t,t<0?-1:0),t>=-128&&t<128&&Lh.set(t,e),e)},r.fromBits=function(t,e){return new r(t,e)},r.fromNumber=function(t){return isNaN(t)||!isFinite(t)?r.ZERO:t<=-Bh?r.MIN_VALUE:t+1>=Bh?r.MAX_VALUE:t<0?r.fromNumber(-t).negate():new r(t%Rt|0,t/Rt|0)},r.fromString=function(t,e,n){var i=n===void 0?{}:n,o=i.strictStringValidation;if(t.length===0)throw(0,pn.newError)("number format error: empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return r.ZERO;if(e=e||10,e<2||e>36)throw(0,pn.newError)("radix out of range: "+e);var u;if((u=t.indexOf("-"))>0)throw(0,pn.newError)('number format error: interior "-" character: '+t);if(u===0)return r.fromString(t.substring(1),e).negate();for(var a=r.fromNumber(Math.pow(e,8)),l=r.ZERO,c=0;c<t.length;c+=8){var f=Math.min(8,t.length-c),p=t.substring(c,c+f),_=parseInt(p,e);if(o===!0&&!HS(p,_,e))throw(0,pn.newError)('number format error: "'+p+'" is NaN in radix '+e+": "+t);if(f<8){var m=r.fromNumber(Math.pow(e,f));l=l.multiply(m).add(r.fromNumber(_))}else l=l.multiply(a),l=l.add(r.fromNumber(_))}return l},r.fromValue=function(t,e){return e===void 0&&(e={}),t instanceof r?t:typeof t=="number"?r.fromNumber(t):typeof t=="string"?r.fromString(t,void 0,e):typeof t=="bigint"?r.fromString(t.toString()):new r(t.low,t.high)},r.toNumber=function(t){switch(typeof t){case"number":return t;case"bigint":return Number(t);default:return r.fromValue(t).toNumber()}},r.toString=function(t,e){return r.fromValue(t).toString(e)},r.inSafeRange=function(t){return r.fromValue(t).inSafeRange()},r.ZERO=r.fromInt(0),r.ONE=r.fromInt(1),r.NEG_ONE=r.fromInt(-1),r.MAX_VALUE=r.fromBits(-1,2147483647),r.MIN_VALUE=r.fromBits(0,-2147483648),r.MIN_SAFE_VALUE=r.fromBits(1,-2097152),r.MAX_SAFE_VALUE=r.fromBits(-1,2097151),r.__isInteger__=!0,r}();function WS(r,t,e){var n=r.toString(t),i=Math.max(e-n.length,0),o="0".repeat(i);return""+o+n}s(WS,"_convertNumberToString");function HS(r,t,e){return!Number.isNaN(r)&&!Number.isNaN(t)&&WS(t,e,r.length)===r.toLowerCase()}s(HS,"_isValidNumberFromString");Object.defineProperty(pt.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var Fh=65536,zS=1<<24,Rt=Fh*Fh,YS=Rt*Rt,Bh=YS/2,Vh=pt.fromInt(zS),ZS=pt.fromValue;de.int=ZS;var KS=pt.isInteger;de.isInt=KS;var GS=pt.inSafeRange;de.inSafeRange=GS;var QS=pt.toNumber;de.toNumber=QS;var $S=pt.toString;de.toString=$S;de.default=pt});var Nu=h(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.getBrokenObjectReason=_t.isBrokenObject=_t.createBrokenObject=void 0;var Wh="__isBrokenObject__",Hh="__reason__";function XS(r,t){t===void 0&&(t={});var e=s(function(){throw r},"fail");return new Proxy(t,{get:function(n,i){if(i===Wh)return!0;if(i===Hh)return r;if(i==="toJSON")return;e()},set:e,apply:e,construct:e,defineProperty:e,deleteProperty:e,getOwnPropertyDescriptor:e,getPrototypeOf:e,has:e,isExtensible:e,ownKeys:e,preventExtensions:e,setPrototypeOf:e})}s(XS,"createBrokenObject");_t.createBrokenObject=XS;function JS(r){return r!==null&&typeof r=="object"&&r[Wh]===!0}s(JS,"isBrokenObject");_t.isBrokenObject=JS;function eE(r){return r[Hh]}s(eE,"getBrokenObjectReason");_t.getBrokenObjectReason=eE});var qo=h(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.stringify=void 0;var zh=Nu();function tE(r){return JSON.stringify(r,function(t,e){return(0,zh.isBrokenObject)(e)?{__isBrokenObject__:!0,__reason__:(0,zh.getBrokenObjectReason)(e)}:typeof e=="bigint"?e+"n":e})}s(tE,"stringify");No.stringify=tE});var ve=h(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.ENCRYPTION_OFF=k.ENCRYPTION_ON=k.validateQueryAndParameters=k.assertValidDate=k.assertNumberOrInteger=k.assertNumber=k.assertString=k.assertObject=k.isString=k.isObject=k.isEmptyObjectOrNull=void 0;var rE=At(),_r=qo(),nE="ENCRYPTION_ON";k.ENCRYPTION_ON=nE;var iE="ENCRYPTION_OFF";k.ENCRYPTION_OFF=iE;function oE(r){if(r===null)return!0;if(!Do(r))return!1;for(var t in r)if(Object.prototype.hasOwnProperty.bind(r,t))return!1;return!0}s(oE,"isEmptyObjectOrNull");k.isEmptyObjectOrNull=oE;function Do(r){return typeof r=="object"&&!Array.isArray(r)&&r!==null}s(Do,"isObject");k.isObject=Do;function sE(r,t,e){var n="",i=t||{},o=(e==null?void 0:e.skipAsserts)||!1;return typeof r=="string"?n=r:r instanceof String?n=r.toString():typeof r=="object"&&r.text&&(n=r.text,i=r.parameters||{}),o||(fE(n),hE(i)),{validatedQuery:n,params:i}}s(sE,"validateQueryAndParameters");k.validateQueryAndParameters=sE;function uE(r,t){if(!Do(r))throw new TypeError(t+" expected to be an object but was: "+(0,_r.stringify)(r));return r}s(uE,"assertObject");k.assertObject=uE;function Yh(r,t){if(!Zh(r))throw new TypeError(t+" expected to be string but was: "+(0,_r.stringify)(r));return r}s(Yh,"assertString");k.assertString=Yh;function aE(r,t){if(typeof r!="number")throw new TypeError(t+" expected to be a number but was: "+(0,_r.stringify)(r));return r}s(aE,"assertNumber");k.assertNumber=aE;function cE(r,t){if(typeof r!="number"&&typeof r!="bigint"&&!(0,rE.isInt)(r))throw new TypeError(t+" expected to be either a number or an Integer object but was: "+(0,_r.stringify)(r));return r}s(cE,"assertNumberOrInteger");k.assertNumberOrInteger=cE;function lE(r,t){if(Object.prototype.toString.call(r)!=="[object Date]")throw new TypeError(t+" expected to be a standard JavaScript Date but was: "+(0,_r.stringify)(r));if(Number.isNaN(r.getTime()))throw new TypeError(t+" expected to be valid JavaScript Date but its time was NaN: "+(0,_r.stringify)(r));return r}s(lE,"assertValidDate");k.assertValidDate=lE;function fE(r){if(Yh(r,"Cypher query"),r.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}s(fE,"assertCypherQuery");function hE(r){if(!Do(r)){var t=r.constructor?" "+r.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:"+t+" "+r)}}s(hE,"assertQueryParameters");function Zh(r){return Object.prototype.toString.call(r)==="[object String]"}s(Zh,"isString");k.isString=Zh});var xu=h(d=>{"use strict";var pE=d&&d.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),_E=d&&d.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),dE=d&&d.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&pE(t,r,e);return _E(t,r),t};Object.defineProperty(d,"__esModule",{value:!0});d.floorMod=d.floorDiv=d.assertValidZoneId=d.assertValidNanosecond=d.assertValidSecond=d.assertValidMinute=d.assertValidHour=d.assertValidDay=d.assertValidMonth=d.assertValidYear=d.timeZoneOffsetInSeconds=d.totalNanoseconds=d.newDate=d.toStandardDate=d.isoStringToStandardDate=d.dateToIsoString=d.timeZoneOffsetToIsoString=d.timeToIsoString=d.durationToIsoString=d.dateToEpochDay=d.localDateTimeToEpochSecond=d.localTimeToNanoOfDay=d.normalizeNanosecondsForDuration=d.normalizeSecondsForDuration=d.SECONDS_PER_DAY=d.DAYS_PER_400_YEAR_CYCLE=d.DAYS_0000_TO_1970=d.NANOS_PER_HOUR=d.NANOS_PER_MINUTE=d.NANOS_PER_MILLISECOND=d.NANOS_PER_SECOND=d.SECONDS_PER_HOUR=d.SECONDS_PER_MINUTE=d.MINUTES_PER_HOUR=d.NANOSECOND_OF_SECOND_RANGE=d.SECOND_OF_MINUTE_RANGE=d.MINUTE_OF_HOUR_RANGE=d.HOUR_OF_DAY_RANGE=d.DAY_OF_MONTH_RANGE=d.MONTH_OF_YEAR_RANGE=d.YEAR_RANGE=void 0;var D=dE(At()),Kh=ae(),vE=ve(),jt=function(){function r(t,e){this._minNumber=t,this._maxNumber=e,this._minInteger=(0,D.int)(t),this._maxInteger=(0,D.int)(e)}return s(r,"ValueRange"),r.prototype.contains=function(t){if((0,D.isInt)(t)&&t instanceof D.default)return t.greaterThanOrEqual(this._minInteger)&&t.lessThanOrEqual(this._maxInteger);if(typeof t=="bigint"){var e=(0,D.int)(t);return e.greaterThanOrEqual(this._minInteger)&&e.lessThanOrEqual(this._maxInteger)}else return t>=this._minNumber&&t<=this._maxNumber},r.prototype.toString=function(){return"["+this._minNumber+", "+this._maxNumber+"]"},r}();d.YEAR_RANGE=new jt(-999999999,999999999);d.MONTH_OF_YEAR_RANGE=new jt(1,12);d.DAY_OF_MONTH_RANGE=new jt(1,31);d.HOUR_OF_DAY_RANGE=new jt(0,23);d.MINUTE_OF_HOUR_RANGE=new jt(0,59);d.SECOND_OF_MINUTE_RANGE=new jt(0,59);d.NANOSECOND_OF_SECOND_RANGE=new jt(0,999999999);d.MINUTES_PER_HOUR=60;d.SECONDS_PER_MINUTE=60;d.SECONDS_PER_HOUR=d.SECONDS_PER_MINUTE*d.MINUTES_PER_HOUR;d.NANOS_PER_SECOND=1e9;d.NANOS_PER_MILLISECOND=1e6;d.NANOS_PER_MINUTE=d.NANOS_PER_SECOND*d.SECONDS_PER_MINUTE;d.NANOS_PER_HOUR=d.NANOS_PER_MINUTE*d.MINUTES_PER_HOUR;d.DAYS_0000_TO_1970=719528;d.DAYS_PER_400_YEAR_CYCLE=146097;d.SECONDS_PER_DAY=86400;function bE(r,t){return(0,D.int)(r).add(Du(t,d.NANOS_PER_SECOND))}s(bE,"normalizeSecondsForDuration");d.normalizeSecondsForDuration=bE;function yE(r){return Qh(r,d.NANOS_PER_SECOND)}s(yE,"normalizeNanosecondsForDuration");d.normalizeNanosecondsForDuration=yE;function mE(r,t,e,n){r=(0,D.int)(r),t=(0,D.int)(t),e=(0,D.int)(e),n=(0,D.int)(n);var i=r.multiply(d.NANOS_PER_HOUR);return i=i.add(t.multiply(d.NANOS_PER_MINUTE)),i=i.add(e.multiply(d.NANOS_PER_SECOND)),i.add(n)}s(mE,"localTimeToNanoOfDay");d.localTimeToNanoOfDay=mE;function OE(r,t,e,n,i,o,u){var a=Gh(r,t,e),l=UE(n,i,o);return a.multiply(d.SECONDS_PER_DAY).add(l)}s(OE,"localDateTimeToEpochSecond");d.localDateTimeToEpochSecond=OE;function Gh(r,t,e){r=(0,D.int)(r),t=(0,D.int)(t),e=(0,D.int)(e);var n=r.multiply(365);return r.greaterThanOrEqual(0)?n=n.add(r.add(3).div(4).subtract(r.add(99).div(100)).add(r.add(399).div(400))):n=n.subtract(r.div(-4).subtract(r.div(-100)).add(r.div(-400))),n=n.add(t.multiply(367).subtract(362).div(12)),n=n.add(e.subtract(1)),t.greaterThan(2)&&(n=n.subtract(1),LE(r)||(n=n.subtract(1))),n.subtract(d.DAYS_0000_TO_1970)}s(Gh,"dateToEpochDay");d.dateToEpochDay=Gh;function gE(r,t,e,n){var i=be(r),o=be(t),u=FE(e,n);return"P"+i+"M"+o+"DT"+u+"S"}s(gE,"durationToIsoString");d.durationToIsoString=gE;function SE(r,t,e,n){var i=be(r,2),o=be(t,2),u=be(e,2),a=qu(n);return i+":"+o+":"+u+a}s(SE,"timeToIsoString");d.timeToIsoString=SE;function EE(r){if(r=(0,D.int)(r),r.equals(0))return"Z";var t=r.isNegative();t&&(r=r.multiply(-1));var e=t?"-":"+",n=be(r.div(d.SECONDS_PER_HOUR),2),i=be(r.div(d.SECONDS_PER_MINUTE).modulo(d.MINUTES_PER_HOUR),2),o=r.modulo(d.SECONDS_PER_MINUTE),u=o.equals(0)?null:be(o,2);return u?""+e+n+":"+i+":"+u:""+e+n+":"+i}s(EE,"timeZoneOffsetToIsoString");d.timeZoneOffsetToIsoString=EE;function wE(r,t,e){var n=BE(r),i=be(t,2),o=be(e,2);return n+"-"+i+"-"+o}s(wE,"dateToIsoString");d.dateToIsoString=wE;function TE(r){return new Date(r)}s(TE,"isoStringToStandardDate");d.isoStringToStandardDate=TE;function PE(r){return new Date(r)}s(PE,"toStandardDate");d.toStandardDate=PE;function CE(r){return new Date(r)}s(CE,"newDate");d.newDate=CE;function IE(r,t){t=t||0;var e=r.getMilliseconds()*d.NANOS_PER_MILLISECOND;return VE(t,e)}s(IE,"totalNanoseconds");d.totalNanoseconds=IE;function RE(r){var t=r.getSeconds()>=r.getUTCSeconds()?r.getSeconds()-r.getUTCSeconds():r.getSeconds()-r.getUTCSeconds()+60,e=r.getTimezoneOffset();return e===0?0+t:-1*e*d.SECONDS_PER_MINUTE+t}s(RE,"timeZoneOffsetInSeconds");d.timeZoneOffsetInSeconds=RE;function AE(r){return Nt(r,d.YEAR_RANGE,"Year")}s(AE,"assertValidYear");d.assertValidYear=AE;function jE(r){return Nt(r,d.MONTH_OF_YEAR_RANGE,"Month")}s(jE,"assertValidMonth");d.assertValidMonth=jE;function NE(r){return Nt(r,d.DAY_OF_MONTH_RANGE,"Day")}s(NE,"assertValidDay");d.assertValidDay=NE;function qE(r){return Nt(r,d.HOUR_OF_DAY_RANGE,"Hour")}s(qE,"assertValidHour");d.assertValidHour=qE;function DE(r){return Nt(r,d.MINUTE_OF_HOUR_RANGE,"Minute")}s(DE,"assertValidMinute");d.assertValidMinute=DE;function xE(r){return Nt(r,d.SECOND_OF_MINUTE_RANGE,"Second")}s(xE,"assertValidSecond");d.assertValidSecond=xE;function ME(r){return Nt(r,d.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")}s(ME,"assertValidNanosecond");d.assertValidNanosecond=ME;function kE(r,t){try{Intl.DateTimeFormat(void 0,{timeZone:t})}catch{throw(0,Kh.newError)(r+' is expected to be a valid ZoneId but was: "'+t+'"')}}s(kE,"assertValidZoneId");d.assertValidZoneId=kE;function Nt(r,t,e){if((0,vE.assertNumberOrInteger)(r,e),!t.contains(r))throw(0,Kh.newError)(e+" is expected to be in range "+t+" but was: "+r);return r}s(Nt,"assertValidTemporalValue");function UE(r,t,e){r=(0,D.int)(r),t=(0,D.int)(t),e=(0,D.int)(e);var n=r.multiply(d.SECONDS_PER_HOUR);return n=n.add(t.multiply(d.SECONDS_PER_MINUTE)),n.add(e)}s(UE,"localTimeToSecondOfDay");function LE(r){return r=(0,D.int)(r),r.modulo(4).equals(0)?r.modulo(100).equals(0)?!!r.modulo(400).equals(0):!0:!1}s(LE,"isLeapYear");function Du(r,t){r=(0,D.int)(r),t=(0,D.int)(t);var e=r.div(t);return r.isPositive()!==t.isPositive()&&e.multiply(t).notEquals(r)&&(e=e.subtract(1)),e}s(Du,"floorDiv");d.floorDiv=Du;function Qh(r,t){return r=(0,D.int)(r),t=(0,D.int)(t),r.subtract(Du(r,t).multiply(t))}s(Qh,"floorMod");d.floorMod=Qh;function FE(r,t){r=(0,D.int)(r),t=(0,D.int)(t);var e,n,i=r.isNegative(),o=t.greaterThan(0);return i&&o?r.equals(-1)?e="-0":e=r.add(1).toString():e=r.toString(),o&&(i?n=qu(t.negate().add(2*d.NANOS_PER_SECOND).modulo(d.NANOS_PER_SECOND)):n=qu(t.add(d.NANOS_PER_SECOND).modulo(d.NANOS_PER_SECOND))),n?e+n:e}s(FE,"formatSecondsAndNanosecondsForDuration");function qu(r){return r=(0,D.int)(r),r.equals(0)?"":"."+be(r,9)}s(qu,"formatNanosecond");function BE(r){var t=(0,D.int)(r);return t.isNegative()||t.greaterThan(9999)?be(t,6,{usePositiveSign:!0}):be(t,4)}s(BE,"formatYear");function be(r,t,e){r=(0,D.int)(r);var n=r.isNegative();n&&(r=r.negate());var i=r.toString();if(t)for(;i.length<t;)i="0"+i;return n?"-"+i:(e==null?void 0:e.usePositiveSign)===!0?"+"+i:i}s(be,"formatNumber");function VE(r,t){return r instanceof D.default?r.add(t):typeof r=="bigint"?r+BigInt(t):r+t}s(VE,"add")});var fp=h(A=>{"use strict";var WE=A&&A.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),HE=A&&A.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),$h=A&&A.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&WE(t,r,e);return HE(t,r),t},zE=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){u={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o};Object.defineProperty(A,"__esModule",{value:!0});A.isDateTime=A.DateTime=A.isLocalDateTime=A.LocalDateTime=A.isDate=A.Date=A.isTime=A.Time=A.isLocalTime=A.LocalTime=A.isDuration=A.Duration=void 0;var C=$h(xu()),Ke=ve(),YE=ae(),_n=$h(At()),dr={value:!0,enumerable:!1,configurable:!1,writable:!1},Xh="__isDuration__",Jh="__isLocalTime__",ep="__isTime__",tp="__isDate__",rp="__isLocalDateTime__",np="__isDateTime__",ip=function(){function r(t,e,n,i){this.months=(0,Ke.assertNumberOrInteger)(t,"Months"),this.days=(0,Ke.assertNumberOrInteger)(e,"Days"),(0,Ke.assertNumberOrInteger)(n,"Seconds"),(0,Ke.assertNumberOrInteger)(i,"Nanoseconds"),this.seconds=C.normalizeSecondsForDuration(n,i),this.nanoseconds=C.normalizeNanosecondsForDuration(i),Object.freeze(this)}return s(r,"Duration"),r.prototype.toString=function(){return C.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},r}();A.Duration=ip;Object.defineProperty(ip.prototype,Xh,dr);function ZE(r){return vr(r,Xh)}s(ZE,"isDuration");A.isDuration=ZE;var op=function(){function r(t,e,n,i){this.hour=C.assertValidHour(t),this.minute=C.assertValidMinute(e),this.second=C.assertValidSecond(n),this.nanosecond=C.assertValidNanosecond(i),Object.freeze(this)}return s(r,"LocalTime"),r.fromStandardDate=function(t,e){dn(t,e);var n=C.totalNanoseconds(t,e);return new r(t.getHours(),t.getMinutes(),t.getSeconds(),n instanceof _n.default?n.toInt():typeof n=="bigint"?(0,_n.int)(n).toInt():n)},r.prototype.toString=function(){return C.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},r}();A.LocalTime=op;Object.defineProperty(op.prototype,Jh,dr);function KE(r){return vr(r,Jh)}s(KE,"isLocalTime");A.isLocalTime=KE;var sp=function(){function r(t,e,n,i,o){this.hour=C.assertValidHour(t),this.minute=C.assertValidMinute(e),this.second=C.assertValidSecond(n),this.nanosecond=C.assertValidNanosecond(i),this.timeZoneOffsetSeconds=(0,Ke.assertNumberOrInteger)(o,"Time zone offset in seconds"),Object.freeze(this)}return s(r,"Time"),r.fromStandardDate=function(t,e){return dn(t,e),new r(t.getHours(),t.getMinutes(),t.getSeconds(),(0,_n.toNumber)(C.totalNanoseconds(t,e)),C.timeZoneOffsetInSeconds(t))},r.prototype.toString=function(){return C.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+C.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},r}();A.Time=sp;Object.defineProperty(sp.prototype,ep,dr);function GE(r){return vr(r,ep)}s(GE,"isTime");A.isTime=GE;var up=function(){function r(t,e,n){this.year=C.assertValidYear(t),this.month=C.assertValidMonth(e),this.day=C.assertValidDay(n),Object.freeze(this)}return s(r,"Date"),r.fromStandardDate=function(t){return dn(t),new r(t.getFullYear(),t.getMonth()+1,t.getDate())},r.prototype.toString=function(){return C.dateToIsoString(this.year,this.month,this.day)},r}();A.Date=up;Object.defineProperty(up.prototype,tp,dr);function QE(r){return vr(r,tp)}s(QE,"isDate");A.isDate=QE;var ap=function(){function r(t,e,n,i,o,u,a){this.year=C.assertValidYear(t),this.month=C.assertValidMonth(e),this.day=C.assertValidDay(n),this.hour=C.assertValidHour(i),this.minute=C.assertValidMinute(o),this.second=C.assertValidSecond(u),this.nanosecond=C.assertValidNanosecond(a),Object.freeze(this)}return s(r,"LocalDateTime"),r.fromStandardDate=function(t,e){return dn(t,e),new r(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),(0,_n.toNumber)(C.totalNanoseconds(t,e)))},r.prototype.toString=function(){return lp(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},r}();A.LocalDateTime=ap;Object.defineProperty(ap.prototype,rp,dr);function $E(r){return vr(r,rp)}s($E,"isLocalDateTime");A.isLocalDateTime=$E;var cp=function(){function r(t,e,n,i,o,u,a,l,c){this.year=C.assertValidYear(t),this.month=C.assertValidMonth(e),this.day=C.assertValidDay(n),this.hour=C.assertValidHour(i),this.minute=C.assertValidMinute(o),this.second=C.assertValidSecond(u),this.nanosecond=C.assertValidNanosecond(a);var f=zE(JE(l,c),2),p=f[0],_=f[1];this.timeZoneOffsetSeconds=p,this.timeZoneId=_||void 0,Object.freeze(this)}return s(r,"DateTime"),r.fromStandardDate=function(t,e){return dn(t,e),new r(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),(0,_n.toNumber)(C.totalNanoseconds(t,e)),C.timeZoneOffsetInSeconds(t),null)},r.prototype.toString=function(){var t=lp(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),e=this.timeZoneId?"["+this.timeZoneId+"]":C.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds||0);return t+e},r}();A.DateTime=cp;Object.defineProperty(cp.prototype,np,dr);function XE(r){return vr(r,np)}s(XE,"isDateTime");A.isDateTime=XE;function vr(r,t){return(r&&r[t])===!0}s(vr,"hasIdentifierProperty");function lp(r,t,e,n,i,o,u){return C.dateToIsoString(r,t,e)+"T"+C.timeToIsoString(n,i,o,u)}s(lp,"localDateTimeToString");function JE(r,t){var e=r||r===0,n=t&&t!=="";if(!e&&!n)throw(0,YE.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: "+r+" and id: "+t);var i=[void 0,void 0];return e&&((0,Ke.assertNumberOrInteger)(r,"Time zone offset in seconds"),i[0]=r),n&&((0,Ke.assertString)(t,"Time zone ID"),C.assertValidZoneId("Time zone ID",t),i[1]=t),i}s(JE,"verifyTimeZoneArguments");function dn(r,t){(0,Ke.assertValidDate)(r,"Standard date"),t!=null&&(0,Ke.assertNumberOrInteger)(t,"Nanosecond")}s(dn,"verifyStandardDateAndNanos")});var gp=h(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.isPathSegment=W.PathSegment=W.isPath=W.Path=W.isUnboundRelationship=W.UnboundRelationship=W.isRelationship=W.Relationship=W.isNode=W.Node=void 0;var Mu=qo(),vn={value:!0,enumerable:!1,configurable:!1,writable:!1},hp="__isNode__",pp="__isRelationship__",_p="__isUnboundRelationship__",dp="__isPath__",vp="__isPathSegment__";function bn(r,t){return(r&&r[t])===!0}s(bn,"hasIdentifierProperty");var bp=function(){function r(t,e,n){this.identity=t,this.labels=e,this.properties=n}return s(r,"Node"),r.prototype.toString=function(){for(var t="("+this.identity,e=0;e<this.labels.length;e++)t+=":"+this.labels[e];var n=Object.keys(this.properties);if(n.length>0){t+=" {";for(var e=0;e<n.length;e++)e>0&&(t+=","),t+=n[e]+":"+(0,Mu.stringify)(this.properties[n[e]]);t+="}"}return t+=")",t},r}();W.Node=bp;Object.defineProperty(bp.prototype,hp,vn);function ew(r){return bn(r,hp)}s(ew,"isNode");W.isNode=ew;var ku=function(){function r(t,e,n,i,o){this.identity=t,this.start=e,this.end=n,this.type=i,this.properties=o}return s(r,"Relationship"),r.prototype.toString=function(){var t="("+this.start+")-[:"+this.type,e=Object.keys(this.properties);if(e.length>0){t+=" {";for(var n=0;n<e.length;n++)n>0&&(t+=","),t+=e[n]+":"+(0,Mu.stringify)(this.properties[e[n]]);t+="}"}return t+="]->("+this.end+")",t},r}();W.Relationship=ku;Object.defineProperty(ku.prototype,pp,vn);function tw(r){return bn(r,pp)}s(tw,"isRelationship");W.isRelationship=tw;var yp=function(){function r(t,e,n){this.identity=t,this.type=e,this.properties=n}return s(r,"UnboundRelationship"),r.prototype.bind=function(t,e){return new ku(this.identity,t,e,this.type,this.properties)},r.prototype.toString=function(){var t="-[:"+this.type,e=Object.keys(this.properties);if(e.length>0){t+=" {";for(var n=0;n<e.length;n++)n>0&&(t+=","),t+=e[n]+":"+(0,Mu.stringify)(this.properties[e[n]]);t+="}"}return t+="]->",t},r}();W.UnboundRelationship=yp;Object.defineProperty(yp.prototype,_p,vn);function rw(r){return bn(r,_p)}s(rw,"isUnboundRelationship");W.isUnboundRelationship=rw;var mp=function(){function r(t,e,n){this.start=t,this.relationship=e,this.end=n}return s(r,"PathSegment"),r}();W.PathSegment=mp;Object.defineProperty(mp.prototype,vp,vn);function nw(r){return bn(r,vp)}s(nw,"isPathSegment");W.isPathSegment=nw;var Op=function(){function r(t,e,n){this.start=t,this.end=e,this.segments=n,this.length=n.length}return s(r,"Path"),r}();W.Path=Op;Object.defineProperty(Op.prototype,dp,vn);function iw(r){return bn(r,dp)}s(iw,"isPath");W.isPath=iw});var Ep=h(Ge=>{"use strict";var Uu=Ge&&Ge.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(f){return l([c,f])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Lu=Ge&&Ge.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fu=Ge&&Ge.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){u={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o};Object.defineProperty(Ge,"__esModule",{value:!0});var Sp=ae();function ow(r){var t={};return r.forEach(function(e,n){t[e]=n}),t}s(ow,"generateFieldLookup");var sw=function(){function r(t,e,n){this.keys=t,this.length=t.length,this._fields=e,this._fieldLookup=n||ow(t)}return s(r,"Record"),r.prototype.forEach=function(t){var e,n;try{for(var i=Lu(this.entries()),o=i.next();!o.done;o=i.next()){var u=Fu(o.value,2),a=u[0],l=u[1];t(l,a,this)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},r.prototype.map=function(t){var e,n,i=[];try{for(var o=Lu(this.entries()),u=o.next();!u.done;u=o.next()){var a=Fu(u.value,2),l=a[0],c=a[1];i.push(t(c,l,this))}}catch(f){e={error:f}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},r.prototype.entries=function(){var t;return Uu(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,[this.keys[t],this._fields[t]]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},r.prototype.values=function(){var t;return Uu(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},r.prototype[Symbol.iterator]=function(){var t;return Uu(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},r.prototype.toObject=function(){var t,e,n={};try{for(var i=Lu(this.entries()),o=i.next();!o.done;o=i.next()){var u=Fu(o.value,2),a=u[0],l=u[1];n[a]=l}}catch(c){t={error:c}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return n},r.prototype.get=function(t){var e;if(typeof t!="number"){if(e=this._fieldLookup[t],e===void 0)throw(0,Sp.newError)("This record has no field with key '"+t+"', available key are: ["+this.keys+"].")}else e=t;if(e>this._fields.length-1||e<0)throw(0,Sp.newError)("This record has no field with index '"+e+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[e]},r.prototype.has=function(t){return typeof t=="number"?t>=0&&t<this._fields.length:this._fieldLookup[t]!==void 0},r}();Ge.default=sw});var Pp=h(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.isPoint=br.Point=void 0;var xo=ve(),wp="__isPoint__",Tp=function(){function r(t,e,n,i){this.srid=(0,xo.assertNumberOrInteger)(t,"SRID"),this.x=(0,xo.assertNumber)(e,"X coordinate"),this.y=(0,xo.assertNumber)(n,"Y coordinate"),this.z=i==null?i:(0,xo.assertNumber)(i,"Z coordinate"),Object.freeze(this)}return s(r,"Point"),r.prototype.toString=function(){return this.z||this.z===0?"Point{srid="+qt(this.srid)+", x="+qt(this.x)+", y="+qt(this.y)+", z="+qt(this.z)+"}":"Point{srid="+qt(this.srid)+", x="+qt(this.x)+", y="+qt(this.y)+"}"},r}();br.Point=Tp;function qt(r){return Number.isInteger(r)?r+".0":r.toString()}s(qt,"formatAsFloat");Object.defineProperty(Tp.prototype,wp,{value:!0,enumerable:!1,configurable:!1,writable:!1});function uw(r){return(r&&r[wp])===!0}s(uw,"isPoint");br.isPoint=uw});var Wu=h(L=>{"use strict";var aw=L&&L.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),cw=L&&L.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),lw=L&&L.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&aw(t,r,e);return cw(t,r),t};Object.defineProperty(L,"__esModule",{value:!0});L.Stats=L.QueryStatistics=L.ProfiledPlan=L.Plan=L.Notification=L.ServerInfo=L.queryType=void 0;var Cp=lw(At()),fw=function(){function r(t,e,n,i){this.query={text:t,parameters:e},this.queryType=n.type,this.counters=new Ip(n.stats||{}),this.updateStatistics=this.counters,this.plan=n.plan||n.profile?new Bu(n.plan||n.profile):!1,this.profile=n.profile?new Vu(n.profile):!1,this.notifications=this._buildNotifications(n.notifications),this.server=new Ap(n.server,i),this.resultConsumedAfter=n.result_consumed_after,this.resultAvailableAfter=n.result_available_after,this.database={name:n.db||null}}return s(r,"ResultSummary"),r.prototype._buildNotifications=function(t){return t?t.map(function(e){return new Rp(e)}):[]},r.prototype.hasPlan=function(){return this.plan instanceof Bu},r.prototype.hasProfile=function(){return this.profile instanceof Vu},r}(),Bu=function(){function r(t){this.operatorType=t.operatorType,this.identifiers=t.identifiers,this.arguments=t.args,this.children=t.children?t.children.map(function(e){return new r(e)}):[]}return s(r,"Plan"),r}();L.Plan=Bu;var Vu=function(){function r(t){this.operatorType=t.operatorType,this.identifiers=t.identifiers,this.arguments=t.args,this.dbHits=yr("dbHits",t),this.rows=yr("rows",t),this.pageCacheMisses=yr("pageCacheMisses",t),this.pageCacheHits=yr("pageCacheHits",t),this.pageCacheHitRatio=yr("pageCacheHitRatio",t),this.time=yr("time",t),this.children=t.children?t.children.map(function(e){return new r(e)}):[]}return s(r,"ProfiledPlan"),r.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},r}();L.ProfiledPlan=Vu;var hw=function(){function r(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}return s(r,"Stats"),r}();L.Stats=hw;var Ip=function(){function r(t){var e=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(t).forEach(function(n){var i=n.replace(/(-\w)/g,function(o){return o[1].toUpperCase()});i in e._stats?e._stats[i]=mr(t[n]):i==="systemUpdates"?e._systemUpdates=mr(t[n]):i==="containsSystemUpdates"?e._containsSystemUpdates=t[n]:i==="containsUpdates"&&(e._containsUpdates=t[n])}),this._stats=Object.freeze(this._stats)}return s(r,"QueryStatistics"),r.prototype.containsUpdates=function(){var t=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(e,n){return e+t._stats[n]},0)>0},r.prototype.updates=function(){return this._stats},r.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},r.prototype.systemUpdates=function(){return this._systemUpdates},r}();L.QueryStatistics=Ip;var Rp=function(){function r(t){this.code=t.code,this.title=t.title,this.description=t.description,this.severity=t.severity,this.position=r._constructPosition(t.position)}return s(r,"Notification"),r._constructPosition=function(t){return t?{offset:mr(t.offset),line:mr(t.line),column:mr(t.column)}:{}},r}();L.Notification=Rp;var Ap=function(){function r(t,e){t&&(this.address=t.address,this.version=t.version,this.agent=t.version),this.protocolVersion=e}return s(r,"ServerInfo"),r}();L.ServerInfo=Ap;function mr(r){return r instanceof Cp.default?r.toInt():typeof r=="bigint"?(0,Cp.int)(r).toInt():r}s(mr,"intValue");function yr(r,t,e){if(e===void 0&&(e=0),r in t){var n=t[r];return mr(n)}else return e}s(yr,"valueOrDefault");var pw={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};L.queryType=pw;L.default=fw});var Mo=h(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.FailedObserver=Or.CompletedObserver=void 0;var _w=function(){function r(){}return s(r,"CompletedObserver"),r.prototype.subscribe=function(t){yn(t,t.onKeys,[]),yn(t,t.onCompleted,{})},r.prototype.cancel=function(){},r.prototype.prepareToHandleSingleResponse=function(){},r.prototype.markCompleted=function(){},r.prototype.onError=function(t){throw Error("CompletedObserver not supposed to call onError")},r}();Or.CompletedObserver=_w;var dw=function(){function r(t){var e=t.error,n=t.onError;this._error=e,this._beforeError=n,this._observers=[],this.onError(e)}return s(r,"FailedObserver"),r.prototype.subscribe=function(t){yn(t,t.onError,this._error),this._observers.push(t)},r.prototype.onError=function(t){var e=this;Promise.resolve(yn(this,this._beforeError,t)).then(function(){return e._observers.forEach(function(n){return yn(n,n.onError,t)})})},r.prototype.cancel=function(){},r.prototype.prepareToHandleSingleResponse=function(){},r.prototype.markCompleted=function(){},r}();Or.FailedObserver=dw;function yn(r,t,e){t&&t.bind(r)(e)}s(yn,"apply")});var gr=h(Ue=>{"use strict";var vw=Ue&&Ue.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),bw=Ue&&Ue.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),yw=Ue&&Ue.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&vw(t,r,e);return bw(t,r),t};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.Bookmark=void 0;var jp=yw(ve()),mw="bookmarks",Np=function(){function r(t){this._values=gw(t)}return s(r,"Bookmark"),r.empty=function(){return Ow},r.prototype.isEmpty=function(){return this._values.length===0},r.prototype.values=function(){return this._values},r.prototype.asBeginTransactionParameters=function(){var t;return this.isEmpty()?{}:(t={},t[mw]=this._values,t)},r}();Ue.Bookmark=Np;var Ow=new Np(null);function gw(r){if(!r)return[];if(jp.isString(r))return[r];if(Array.isArray(r)){for(var t=[],e=qp(r),n=0;n<e.length;n++){var i=e[n];if(i!=null){if(!jp.isString(i))throw new TypeError("Bookmark value should be a string, given: '"+i+"'");t.push(i)}}return t}throw new TypeError("Bookmark should either be a string or a string array, given: '"+r+"'")}s(gw,"asStringArray");function qp(r){return r.reduce(function(t,e){return Array.isArray(e)?t.concat(qp(e)):t.concat(e)},[])}s(qp,"flattenArray")});var Sr=h(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.BOLT_PROTOCOL_V4_4=x.BOLT_PROTOCOL_V4_3=x.BOLT_PROTOCOL_V4_2=x.BOLT_PROTOCOL_V4_1=x.BOLT_PROTOCOL_V4_0=x.BOLT_PROTOCOL_V3=x.BOLT_PROTOCOL_V2=x.BOLT_PROTOCOL_V1=x.DEFAULT_POOL_MAX_SIZE=x.DEFAULT_POOL_ACQUISITION_TIMEOUT=x.ACCESS_MODE_WRITE=x.ACCESS_MODE_READ=x.FETCH_ALL=void 0;var Sw=-1;x.FETCH_ALL=Sw;var Ew=60*1e3;x.DEFAULT_POOL_ACQUISITION_TIMEOUT=Ew;var ww=100;x.DEFAULT_POOL_MAX_SIZE=ww;var Tw="READ";x.ACCESS_MODE_READ=Tw;var Pw="WRITE";x.ACCESS_MODE_WRITE=Pw;var Cw=1;x.BOLT_PROTOCOL_V1=Cw;var Iw=2;x.BOLT_PROTOCOL_V2=Iw;var Rw=3;x.BOLT_PROTOCOL_V3=Rw;var Aw=4;x.BOLT_PROTOCOL_V4_0=Aw;var jw=4.1;x.BOLT_PROTOCOL_V4_1=jw;var Nw=4.2;x.BOLT_PROTOCOL_V4_2=Nw;var qw=4.3;x.BOLT_PROTOCOL_V4_3=qw;var Dw=4.4;x.BOLT_PROTOCOL_V4_4=Dw});var mn=h(Ce=>{"use strict";var xp=Ce&&Ce.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ce,"__esModule",{value:!0});Ce.EMPTY_CONNECTION_HOLDER=Ce.ReadOnlyConnectionHolder=Ce.ConnectionHolder=void 0;var xw=ae(),Mw=ve(),kw=Sr(),Uw=gr(),Hu=function(){function r(t){var e=t===void 0?{}:t,n=e.mode,i=n===void 0?kw.ACCESS_MODE_WRITE:n,o=e.database,u=o===void 0?"":o,a=e.bookmark,l=e.connectionProvider,c=e.impersonatedUser,f=e.onDatabaseNameResolved;this._mode=i,this._database=u?(0,Mw.assertString)(u,"database"):"",this._bookmark=a||Uw.Bookmark.empty(),this._connectionProvider=l,this._impersonatedUser=c,this._referenceCount=0,this._connectionPromise=Promise.resolve(),this._onDatabaseNameResolved=f}return s(r,"ConnectionHolder"),r.prototype.mode=function(){return this._mode},r.prototype.database=function(){return this._database},r.prototype.setDatabase=function(t){this._database=t},r.prototype.bookmark=function(){return this._bookmark},r.prototype.connectionProvider=function(){return this._connectionProvider},r.prototype.referenceCount=function(){return this._referenceCount},r.prototype.initializeConnection=function(){if(this._referenceCount===0&&this._connectionProvider)this._connectionPromise=this._connectionProvider.acquireConnection({accessMode:this._mode,database:this._database,bookmarks:this._bookmark,impersonatedUser:this._impersonatedUser,onDatabaseNameResolved:this._onDatabaseNameResolved});else return this._referenceCount++,!1;return this._referenceCount++,!0},r.prototype.getConnection=function(){return this._connectionPromise},r.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},r.prototype.close=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection())},r.prototype._releaseConnection=function(){return this._connectionPromise=this._connectionPromise.then(function(t){return t?t.isOpen()?t.resetAndFlush().catch(Dp).then(function(){return t._release()}):t._release():Promise.resolve()}).catch(Dp),this._connectionPromise},r}();Ce.ConnectionHolder=Hu;var Mp=function(r){xp(t,r);function t(e){var n=r.call(this,{mode:e.mode(),database:e.database(),bookmark:e.bookmark(),connectionProvider:e.connectionProvider()})||this;return n._connectionHolder=e,n}return s(t,"ReadOnlyConnectionHolder"),t.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},t.prototype.getConnection=function(){return this._connectionHolder.getConnection()},t.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},t.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},t}(Hu);Ce.ReadOnlyConnectionHolder=Mp;Ce.default=Mp;var Lw=function(r){xp(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"EmptyConnectionHolder"),t.prototype.mode=function(){},t.prototype.database=function(){},t.prototype.initializeConnection=function(){return!0},t.prototype.getConnection=function(){return Promise.reject((0,xw.newError)("This connection holder does not serve connections"))},t.prototype.releaseConnection=function(){return Promise.resolve()},t.prototype.close=function(){return Promise.resolve()},t}(Hu),Fw=new Lw;Ce.EMPTY_CONNECTION_HOLDER=Fw;function Dp(r){}s(Dp,"ignoreError")});var ko=h(Le=>{"use strict";var Bw=Le&&Le.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),Vw=Le&&Le.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Ww=Le&&Le.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&Bw(t,r,e);return Vw(t,r),t};Object.defineProperty(Le,"__esModule",{value:!0});Le.TxConfig=void 0;var On=Ww(ve()),kp=ae(),Hw=At(),Up=function(){function r(t){Kw(t),this.timeout=Yw(t),this.metadata=Zw(t)}return s(r,"TxConfig"),r.empty=function(){return zw},r.prototype.isEmpty=function(){return Object.values(this).every(function(t){return t==null})},r}();Le.TxConfig=Up;var zw=new Up({});function Yw(r){if(On.isObject(r)&&(r.timeout||r.timeout===0)){On.assertNumberOrInteger(r.timeout,"Transaction timeout");var t=(0,Hw.int)(r.timeout);if(t.isZero())throw(0,kp.newError)("Transaction timeout should not be zero");if(t.isNegative())throw(0,kp.newError)("Transaction timeout should not be negative");return t}return null}s(Yw,"extractTimeout");function Zw(r){if(On.isObject(r)&&r.metadata){var t=r.metadata;if(On.assertObject(t,"config.metadata"),Object.keys(t).length!==0)return t}return null}s(Zw,"extractMetadata");function Kw(r){r&&On.assertObject(r,"Transaction config")}s(Kw,"assertValidConfig")});var Yu=h(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.canRetryOn=void 0;var zu=ae();function Gw(r){return r&&r instanceof zu.Neo4jError&&r.code&&(r.code===zu.SERVICE_UNAVAILABLE||r.code===zu.SESSION_EXPIRED||$w(r)||Qw(r))}s(Gw,"canRetryOn");Uo.canRetryOn=Gw;function Qw(r){var t=r.code;return t.indexOf("TransientError")>=0?!(t==="Neo.TransientError.Transaction.Terminated"||t==="Neo.TransientError.Transaction.LockClientStopped"):!1}s(Qw,"_isTransientError");function $w(r){return r.code==="Neo.ClientError.Security.AuthorizationExpired"}s($w,"_isAuthorizationExpired")});var Zu=h(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.TransactionExecutor=void 0;var Lo=ae(),Xw=Yu(),Jw=30*1e3,e0=1e3,t0=2,r0=.2,n0=function(){function r(t,e,n,i){this._maxRetryTimeMs=Fo(t,Jw),this._initialRetryDelayMs=Fo(e,e0),this._multiplier=Fo(n,t0),this._jitterFactor=Fo(i,r0),this._inFlightTimeoutIds=[],this._verifyAfterConstruction()}return s(r,"TransactionExecutor"),r.prototype.execute=function(t,e){var n=this;return new Promise(function(i,o){n._executeTransactionInsidePromise(t,e,i,o)}).catch(function(i){var o=Date.now(),u=n._initialRetryDelayMs;return n._retryTransactionPromise(t,e,i,o,u)})},r.prototype.close=function(){this._inFlightTimeoutIds.forEach(function(t){return clearTimeout(t)}),this._inFlightTimeoutIds=[]},r.prototype._retryTransactionPromise=function(t,e,n,i,o){var u=this,a=Date.now()-i;return a>this._maxRetryTimeMs||!(0,Xw.canRetryOn)(n)?Promise.reject(n):new Promise(function(l,c){var f=u._computeDelayWithJitter(o),p=setTimeout(function(){u._inFlightTimeoutIds=u._inFlightTimeoutIds.filter(function(_){return _!==p}),u._executeTransactionInsidePromise(t,e,l,c)},f);u._inFlightTimeoutIds.push(p)}).catch(function(l){var c=o*u._multiplier;return u._retryTransactionPromise(t,e,l,i,c)})},r.prototype._executeTransactionInsidePromise=function(t,e,n,i){var o=this,u;try{u=t()}catch(l){i(l);return}var a=this._safeExecuteTransactionWork(u,e);a.then(function(l){return o._handleTransactionWorkSuccess(l,u,n,i)}).catch(function(l){return o._handleTransactionWorkFailure(l,u,i)})},r.prototype._safeExecuteTransactionWork=function(t,e){try{var n=e(t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}},r.prototype._handleTransactionWorkSuccess=function(t,e,n,i){e.isOpen()?e.commit().then(function(){n(t)}).catch(function(o){i(o)}):n(t)},r.prototype._handleTransactionWorkFailure=function(t,e,n){e.isOpen()?e.rollback().catch(function(i){}).then(function(){return n(t)}):n(t)},r.prototype._computeDelayWithJitter=function(t){var e=t*this._jitterFactor,n=t-e,i=t+e;return Math.random()*(i-n)+n},r.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,Lo.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs);if(this._initialRetryDelayMs<0)throw(0,Lo.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs);if(this._multiplier<1)throw(0,Lo.newError)("Multiplier should be >= 1.0: "+this._multiplier);if(this._jitterFactor<0||this._jitterFactor>1)throw(0,Lo.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor)},r}();Bo.TransactionExecutor=n0;function Fo(r,t){return r||r===0?r:t}s(Fo,"_valueOrDefault")});var Ku=h(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.ConnectivityVerifier=void 0;var i0=mn(),o0=Sr(),s0=ae(),u0=function(){function r(t){this._connectionProvider=t}return s(r,"ConnectivityVerifier"),r.prototype.verify=function(t){var e=t===void 0?{}:t,n=e.database,i=n===void 0?"":n;return a0(this._connectionProvider,i)},r}();Vo.ConnectivityVerifier=u0;function a0(r,t){var e=new i0.ConnectionHolder({mode:o0.ACCESS_MODE_READ,database:t,connectionProvider:r});return e.initializeConnection(),e.getConnection().then(function(n){if(!n)throw(0,s0.newError)("Unexpected error acquiring transaction");return e.close().then(function(){return n.server})}).catch(function(n){return e.close().catch(function(i){}).then(function(){return Promise.reject(n)})})}s(a0,"acquireAndReleaseDummyConnection")});var Xu=h(wr=>{"use strict";var c0=wr&&wr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Er;Object.defineProperty(wr,"__esModule",{value:!0});wr.Logger=void 0;var Lp=ae(),Gu="error",Qu="warn",gn="info",$u="debug",l0=gn,Ho=(Er={},Er[Gu]=0,Er[Qu]=1,Er[gn]=2,Er[$u]=3,Er),Fp=function(){function r(t,e){this._level=t,this._loggerFunction=e}return s(r,"Logger"),r.create=function(t){if(t&&t.logging){var e=t.logging,n=p0(e),i=_0(e);return new r(n,i)}return this.noOp()},r.noOp=function(){return h0},r.prototype.isErrorEnabled=function(){return Wo(this._level,Gu)},r.prototype.error=function(t){this.isErrorEnabled()&&this._loggerFunction(Gu,t)},r.prototype.isWarnEnabled=function(){return Wo(this._level,Qu)},r.prototype.warn=function(t){this.isWarnEnabled()&&this._loggerFunction(Qu,t)},r.prototype.isInfoEnabled=function(){return Wo(this._level,gn)},r.prototype.info=function(t){this.isInfoEnabled()&&this._loggerFunction(gn,t)},r.prototype.isDebugEnabled=function(){return Wo(this._level,$u)},r.prototype.debug=function(t){this.isDebugEnabled()&&this._loggerFunction($u,t)},r}();wr.Logger=Fp;var f0=function(r){c0(t,r);function t(){return r.call(this,gn,function(e,n){})||this}return s(t,"NoOpLogger"),t.prototype.isErrorEnabled=function(){return!1},t.prototype.error=function(e){},t.prototype.isWarnEnabled=function(){return!1},t.prototype.warn=function(e){},t.prototype.isInfoEnabled=function(){return!1},t.prototype.info=function(e){},t.prototype.isDebugEnabled=function(){return!1},t.prototype.debug=function(e){},t}(Fp),h0=new f0;function Wo(r,t){return Ho[r]>=Ho[t]}s(Wo,"isLevelEnabled");function p0(r){if(r&&r.level){var t=r.level,e=Ho[t];if(!e&&e!==0)throw(0,Lp.newError)("Illegal logging level: "+t+". Supported levels are: "+Object.keys(Ho));return t}return l0}s(p0,"extractConfiguredLevel");function _0(r){if(r&&r.logger){var t=r.logger;if(t&&typeof t=="function")return t}throw(0,Lp.newError)("Illegal logger function: "+r.logger)}s(_0,"extractConfiguredLogger")});var Ju=h($=>{"use strict";var zo=$&&$.__assign||function(){return zo=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},zo.apply(this,arguments)},Vp=$&&$.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){u={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o};Object.defineProperty($,"__esModule",{value:!0});$.Url=$.formatIPv6Address=$.formatIPv4Address=$.defaultPortForScheme=$.parseDatabaseUrl=void 0;var d0=ve(),v0=7687,b0=7474,y0=7473,Wp=function(){function r(t,e,n,i,o){this.scheme=t,this.host=e,this.port=n,this.hostAndPort=i,this.query=o}return s(r,"Url"),r}();$.Url=Wp;function m0(r){(0,d0.assertString)(r,"URL");var t=g0(r),e=A0(t.url),n=t.schemeMissing?null:S0(e.scheme),i=E0(e.host),o=C0(i),u=w0(e.port,n),a=o+":"+u,l=T0(e.query||O0(e.resourceName),r);return new Wp(n,i,u,a,l)}s(m0,"parseDatabaseUrl");$.parseDatabaseUrl=m0;function O0(r){if(typeof r!="string")return null;var t=Vp(r.split("?"),2),e=t[0],n=t[1];return n}s(O0,"extractResourceQueryString");function g0(r){return r=r.trim(),r.indexOf("://")===-1?{schemeMissing:!0,url:"none://"+r}:{schemeMissing:!1,url:r}}s(g0,"sanitizeUrl");function S0(r){return r?(r=r.trim(),r.charAt(r.length-1)===":"&&(r=r.substring(0,r.length-1)),r):null}s(S0,"extractScheme");function E0(r,t){if(!r)throw new Error("Unable to extract host from "+t);return r.trim()}s(E0,"extractHost");function w0(r,t){var e=typeof r=="string"?parseInt(r,10):r;return e===0||e?e:zp(t)}s(w0,"extractPort");function T0(r,t){var e=r?P0(r):null,n={};return e&&e.split("&").forEach(function(i){var o=i.split("=");if(o.length!==2)throw new Error("Invalid parameters: '"+o+"' in URL '"+t+"'.");var u=Bp(o[0],"key",t),a=Bp(o[1],"value",t);if(n[u])throw new Error("Duplicated query parameters with key '"+u+"' in URL '"+t+"'");n[u]=a}),n}s(T0,"extractQuery");function P0(r){return r=(r||"").trim(),r&&r.charAt(0)==="?"&&(r=r.substring(1,r.length)),r}s(P0,"trimAndSanitizeQuery");function Bp(r,t,e){if(r=(r||"").trim(),!r)throw new Error("Illegal empty "+t+" in URL query '"+e+"'");return r}s(Bp,"trimAndVerifyQueryElement");function Hp(r){var t=r.charAt(0)==="[",e=r.charAt(r.length-1)==="]";if(!t&&!e)return"["+r+"]";if(t&&e)return r;throw new Error("Illegal IPv6 address "+r)}s(Hp,"escapeIPv6Address");function C0(r){if(!r)throw new Error("Illegal host "+r);var t=r.indexOf(":")>=0;return t?Hp(r):r}s(C0,"formatHost");function I0(r,t){return r+":"+t}s(I0,"formatIPv4Address");$.formatIPv4Address=I0;function R0(r,t){var e=Hp(r);return e+":"+t}s(R0,"formatIPv6Address");$.formatIPv6Address=R0;function zp(r){return r==="http"?b0:r==="https"?y0:v0}s(zp,"defaultPortForScheme");$.defaultPortForScheme=zp;function A0(r){function t(a,l){var c=a.indexOf(l);return c>=0?[a.substring(0,c),a[c],a.substring(c+1)]:[a,"",""]}s(t,"partition");function e(a,l){var c=a.lastIndexOf(l);return c>=0?[a.substring(0,c),a[c],a.substring(c+1)]:["","",a]}s(e,"rpartition");function n(a,l,c){var f=t(a,l),p=t(f[2],c);return[p[0],p[2]]}s(n,"between");function i(a){var l={},c;c=e(a,"@"),c[1]==="@"&&(l.userInfo=decodeURIComponent(c[0]),a=c[2]);var f=Vp(n(a,"[","]"),2),p=f[0],_=f[1];return p!==""?(l.host=p,c=t(_,":")):(c=t(a,":"),l.host=c[0]),c[1]===":"&&(l.port=c[2]),l}s(i,"parseAuthority");var o={},u;return u=t(r,":"),u[1]===":"&&(o.scheme=decodeURIComponent(u[0]),r=u[2]),u=t(r,"#"),u[1]==="#"&&(o.fragment=decodeURIComponent(u[2]),r=u[0]),u=t(r,"?"),u[1]==="?"&&(o.query=u[2],r=u[0]),r.startsWith("//")?(u=t(r.substr(2),"/"),o=zo(zo({},o),i(u[0])),o.path=u[1]+u[2]):o.path=r,o}s(A0,"uriJsParse")});var ta=h(Fe=>{"use strict";var j0=Fe&&Fe.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),N0=Fe&&Fe.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),q0=Fe&&Fe.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&j0(t,r,e);return N0(t,r),t};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.ServerAddress=void 0;var ea=ve(),D0=q0(Ju()),x0=function(){function r(t,e,n,i){this._host=(0,ea.assertString)(t,"host"),this._resolved=e?(0,ea.assertString)(e,"resolved"):null,this._port=(0,ea.assertNumber)(n,"port"),this._hostPort=i,this._stringValue=e?i+"("+e+")":""+i}return s(r,"ServerAddress"),r.prototype.host=function(){return this._host},r.prototype.resolvedHost=function(){return this._resolved?this._resolved:this._host},r.prototype.port=function(){return this._port},r.prototype.resolveWith=function(t){return new r(this._host,t,this._port,this._hostPort)},r.prototype.asHostPort=function(){return this._hostPort},r.prototype.asKey=function(){return this._hostPort},r.prototype.toString=function(){return this._stringValue},r.fromUrl=function(t){var e=D0.parseDatabaseUrl(t);return new r(e.host,null,e.port,e.hostAndPort)},r}();Fe.ServerAddress=x0});var Yp=h(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});var M0=function(){function r(){}return s(r,"BaseHostNameResolver"),r.prototype.resolve=function(){throw new Error("Abstract function")},r.prototype._resolveToItself=function(t){return Promise.resolve([t])},r}();ra.default=M0});var ia=h(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});var k0=ta();function U0(r){return Promise.resolve([r])}s(U0,"resolveToSelf");var L0=function(){function r(t){this._resolverFunction=t||U0}return s(r,"ConfiguredCustomResolver"),r.prototype.resolve=function(t){var e=this;return new Promise(function(n){return n(e._resolverFunction(t.asHostPort()))}).then(function(n){if(!Array.isArray(n))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+("Each address is '<host>:<port>'. Got: "+n));return n.map(function(i){return k0.ServerAddress.fromUrl(i)})})},r}();na.default=L0});var Kp=h(dt=>{"use strict";var Zp=dt&&dt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(dt,"__esModule",{value:!0});dt.ConfiguredCustomResolver=dt.BaseHostNameResolver=void 0;var F0=Zp(Yp());dt.BaseHostNameResolver=F0.default;var B0=Zp(ia());dt.ConfiguredCustomResolver=B0.default});var oa=h(I=>{"use strict";var V0=I&&I.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),W0=I&&I.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),te=I&&I.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&V0(t,r,e);return W0(t,r),t};Object.defineProperty(I,"__esModule",{value:!0});I.objectUtil=I.retryStrategy=I.resolver=I.serverAddress=I.urlUtil=I.logger=I.connectivityVerifier=I.transactionExecutor=I.txConfig=I.connectionHolder=I.constants=I.bookmark=I.observer=I.temporalUtil=I.util=void 0;var H0=te(ve());I.util=H0;var z0=te(xu());I.temporalUtil=z0;var Y0=te(Mo());I.observer=Y0;var Z0=te(gr());I.bookmark=Z0;var K0=te(Sr());I.constants=K0;var G0=te(mn());I.connectionHolder=G0;var Q0=te(ko());I.txConfig=Q0;var $0=te(Zu());I.transactionExecutor=$0;var X0=te(Ku());I.connectivityVerifier=X0;var J0=te(Xu());I.logger=J0;var eT=te(Ju());I.urlUtil=eT;var tT=te(ta());I.serverAddress=tT;var rT=te(Kp());I.resolver=rT;var nT=te(Yu());I.retryStrategy=nT;var iT=te(Nu());I.objectUtil=iT});var Yo=h(Sn=>{"use strict";var oT=Sn&&Sn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Sn,"__esModule",{value:!0});var sT=oT(Wu()),Gp=oa(),uT=Gp.connectionHolder.EMPTY_CONNECTION_HOLDER,aT=s(function(r){console.log("Uncaught error when processing result: "+r)},"DEFAULT_ON_ERROR"),cT=s(function(r){},"DEFAULT_ON_COMPLETED"),lT=function(){function r(t,e,n,i){this._stack=fT(),this._streamObserverPromise=t,this._p=null,this._query=e,this._parameters=n||{},this._connectionHolder=i||uT}return s(r,"Result"),r.prototype.keys=function(){var t=this;return new Promise(function(e,n){t._streamObserverPromise.then(function(i){return i.subscribe({onKeys:function(o){return e(o)},onError:function(o){return n(o)}})}).catch(n)})},r.prototype.summary=function(){var t=this;return new Promise(function(e,n){t._streamObserverPromise.then(function(i){i.cancel(),i.subscribe({onCompleted:function(o){return t._createSummary(o).then(e,n)},onError:function(o){return n(o)}})}).catch(n)})},r.prototype._getOrCreatePromise=function(){var t=this;return this._p||(this._p=new Promise(function(e,n){var i=[],o={onNext:function(u){i.push(u)},onCompleted:function(u){e({records:i,summary:u})},onError:function(u){n(u)}};t.subscribe(o)})),this._p},r.prototype.then=function(t,e){return this._getOrCreatePromise().then(t,e)},r.prototype.catch=function(t){return this._getOrCreatePromise().catch(t)},r.prototype.finally=function(t){return this._getOrCreatePromise().finally(t)},r.prototype.subscribe=function(t){var e=this,n=t.onCompleted||cT,i=s(function(a){e._createSummary(a).then(function(l){return n.call(t,l)})},"onCompletedWrapper");t.onCompleted=i;var o=t.onError||aT,u=s(function(a){e._connectionHolder.releaseConnection().then(function(){hT(a,e._stack),o.call(t,a)})},"onErrorWrapper");t.onError=u,this._streamObserverPromise.then(function(a){return a.subscribe(t)}).catch(function(a){return t.onError(a)})},r.prototype._cancel=function(){this._streamObserverPromise.then(function(t){return t.cancel()})},r.prototype._createSummary=function(t){var e=Gp.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),n=e.validatedQuery,i=e.params,o=this._connectionHolder;return o.getConnection().then(function(u){return o.releaseConnection().then(function(){return u?u.protocol().version:void 0})},function(u){}).then(function(u){return new sT.default(n,i,t,u)})},r}();function fT(){var r=new Error("");return r.stack?r.stack.replace(/^Error(\n\r)*/,""):null}s(fT,"captureStacktrace");function hT(r,t){t&&(r.stack=r.toString()+`
`+t)}s(hT,"replaceStacktrace");Sn.default=lT});var Qp=h(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});var pT=function(){function r(){}return s(r,"ConnectionProvider"),r.prototype.acquireConnection=function(t){throw Error("Not implemented")},r.prototype.supportsMultiDb=function(){throw Error("Not implemented")},r.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},r.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},r.prototype.close=function(){throw Error("Not implemented")},r}();sa.default=pT});var $p=h(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});var _T=function(){function r(){this.id="",this.databaseId=""}return s(r,"Connection"),r.prototype.isOpen=function(){return!1},r.prototype.protocol=function(){throw Error("Not implemented")},r.prototype.connect=function(t,e){throw Error("Not implemented")},r.prototype.write=function(t,e,n){throw Error("Not implemented")},r.prototype.resetAndFlush=function(){throw Error("Not implemented")},r.prototype.close=function(){throw Error("Not implemented")},r.prototype._release=function(){return Promise.resolve()},r}();ua.default=_T});var ca=h(Qe=>{"use strict";var dT=Qe&&Qe.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function a(f){try{c(n.next(f))}catch(p){u(p)}}s(a,"fulfilled");function l(f){try{c(n.throw(f))}catch(p){u(p)}}s(l,"rejected");function c(f){f.done?o(f.value):i(f.value).then(a,l)}s(c,"step"),c((n=n.apply(r,t||[])).next())})},vT=Qe&&Qe.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(f){return l([c,f])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},bT=Qe&&Qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qe,"__esModule",{value:!0});var yT=ve(),aa=mn(),Jp=gr(),mT=ko(),Ie=Mo(),Re=ae(),e_=bT(Yo()),OT=function(){function r(t){var e=t.connectionHolder,n=t.onClose,i=t.onBookmark,o=t.onConnection,u=t.reactive,a=t.fetchSize,l=t.impersonatedUser;this._connectionHolder=e,this._reactive=u,this._state=Ae.ACTIVE,this._onClose=n,this._onBookmark=i,this._onConnection=o,this._onError=this._onErrorCallback.bind(this),this._onComplete=this._onCompleteCallback.bind(this),this._fetchSize=a,this._results=[],this._impersonatedUser=l}return s(r,"Transaction"),r.prototype._begin=function(t,e){var n=this;this._connectionHolder.getConnection().then(function(i){if(n._onConnection(),i)return i.protocol().beginTransaction({bookmark:t,txConfig:e,mode:n._connectionHolder.mode(),database:n._connectionHolder.database(),impersonatedUser:n._impersonatedUser,beforeError:n._onError,afterComplete:n._onComplete});throw(0,Re.newError)("No connection available")}).catch(function(i){return n._onError(i)})},r.prototype.run=function(t,e){var n=(0,yT.validateQueryAndParameters)(t,e),i=n.validatedQuery,o=n.params,u=this._state.run(i,o,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize});return this._results.push(u),u},r.prototype.commit=function(){var t=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=t.state,this._onClose(),new Promise(function(e,n){t.result.subscribe({onCompleted:function(){return e()},onError:function(i){return n(i)}})})},r.prototype.rollback=function(){var t=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=t.state,this._onClose(),new Promise(function(e,n){t.result.subscribe({onCompleted:function(){return e()},onError:function(i){return n(i)}})})},r.prototype.isOpen=function(){return this._state===Ae.ACTIVE},r.prototype.close=function(){return dT(this,void 0,void 0,function(){return vT(this,function(t){switch(t.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},r.prototype._onErrorCallback=function(t){return this._state=Ae.FAILED,this._onClose(),this._connectionHolder.releaseConnection()},r.prototype._onCompleteCallback=function(t){this._onBookmark(new Jp.Bookmark(t.bookmark))},r}(),Ae={ACTIVE:{commit:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete,i=r.onConnection,o=r.pendingResults;return{result:Xp(!0,t,e,n,i,o),state:Ae.SUCCEEDED}},rollback:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete,i=r.onConnection,o=r.pendingResults;return{result:Xp(!1,t,e,n,i,o),state:Ae.ROLLED_BACK}},run:function(r,t,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete,u=e.onConnection,a=e.reactive,l=e.fetchSize,c=n.getConnection().then(function(f){if(u(),f)return f.protocol().run(r,t,{bookmark:Jp.Bookmark.empty(),txConfig:mT.TxConfig.empty(),beforeError:i,afterComplete:o,reactive:a,fetchSize:l});throw(0,Re.newError)("No connection available")}).catch(function(f){return new Ie.FailedObserver({error:f,onError:i})});return Be(c,r,t,n)}},FAILED:{commit:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:Be(new Ie.FailedObserver({error:(0,Re.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:e}),"COMMIT",{},t),state:Ae.FAILED}},rollback:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:Be(new Ie.CompletedObserver,"ROLLBACK",{},t),state:Ae.FAILED}},run:function(r,t,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete;return Be(new Ie.FailedObserver({error:(0,Re.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:i}),r,t,n)}},SUCCEEDED:{commit:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:Be(new Ie.FailedObserver({error:(0,Re.newError)("Cannot commit this transaction, because it has already been committed."),onError:e}),"COMMIT",{}),state:Ae.SUCCEEDED,connectionHolder:t}},rollback:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:Be(new Ie.FailedObserver({error:(0,Re.newError)("Cannot rollback this transaction, because it has already been committed."),onError:e}),"ROLLBACK",{}),state:Ae.SUCCEEDED,connectionHolder:t}},run:function(r,t,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete;return Be(new Ie.FailedObserver({error:(0,Re.newError)("Cannot run query in this transaction, because it has already been committed."),onError:i}),r,t,n)}},ROLLED_BACK:{commit:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:Be(new Ie.FailedObserver({error:(0,Re.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:e}),"COMMIT",{},t),state:Ae.ROLLED_BACK}},rollback:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:Be(new Ie.FailedObserver({error:(0,Re.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},t),state:Ae.ROLLED_BACK}},run:function(r,t,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete;return Be(new Ie.FailedObserver({error:(0,Re.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:i}),r,t,n)}}};function Xp(r,t,e,n,i,o){var u=t.getConnection().then(function(a){return i(),o.forEach(function(l){return l._cancel()}),Promise.all(o).then(function(l){if(a)return r?a.protocol().commitTransaction({beforeError:e,afterComplete:n}):a.protocol().rollbackTransaction({beforeError:e,afterComplete:n});throw(0,Re.newError)("No connection available")})}).catch(function(a){return new Ie.FailedObserver({error:a,onError:e})});return new e_.default(u,r?"COMMIT":"ROLLBACK",{},t)}s(Xp,"finishTransaction");function Be(r,t,e,n){return n===void 0&&(n=aa.EMPTY_CONNECTION_HOLDER),new e_.default(Promise.resolve(r),t,e,new aa.ReadOnlyConnectionHolder(n||aa.EMPTY_CONNECTION_HOLDER))}s(Be,"newCompletedResult");Qe.default=OT});var pa=h(Je=>{"use strict";var la=Je&&Je.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function a(f){try{c(n.next(f))}catch(p){u(p)}}s(a,"fulfilled");function l(f){try{c(n.throw(f))}catch(p){u(p)}}s(l,"rejected");function c(f){f.done?o(f.value):i(f.value).then(a,l)}s(c,"step"),c((n=n.apply(r,t||[])).next())})},fa=Je&&Je.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(f){return l([c,f])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},n_=Je&&Je.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Je,"__esModule",{value:!0});var ha=Mo(),gT=ve(),$e=ae(),ST=n_(Yo()),ET=n_(ca()),t_=mn(),Xe=Sr(),wT=Zu(),r_=gr(),Tr=ko(),TT=function(){function r(t){var e=t.mode,n=t.connectionProvider,i=t.bookmark,o=t.database,u=t.config,a=t.reactive,l=t.fetchSize,c=t.impersonatedUser;this._mode=e,this._database=o,this._reactive=a,this._fetchSize=l,this._onDatabaseNameResolved=this._onDatabaseNameResolved.bind(this),this._readConnectionHolder=new t_.ConnectionHolder({mode:Xe.ACCESS_MODE_READ,database:o,bookmark:i,connectionProvider:n,impersonatedUser:c,onDatabaseNameResolved:this._onDatabaseNameResolved}),this._writeConnectionHolder=new t_.ConnectionHolder({mode:Xe.ACCESS_MODE_WRITE,database:o,bookmark:i,connectionProvider:n,impersonatedUser:c,onDatabaseNameResolved:this._onDatabaseNameResolved}),this._open=!0,this._hasTx=!1,this._impersonatedUser=c,this._lastBookmark=i||r_.Bookmark.empty(),this._transactionExecutor=PT(u),this._onComplete=this._onCompleteCallback.bind(this),this._databaseNameResolved=this._database!==""}return s(r,"Session"),r.prototype.run=function(t,e,n){var i=this,o=(0,gT.validateQueryAndParameters)(t,e),u=o.validatedQuery,a=o.params,l=n?new Tr.TxConfig(n):Tr.TxConfig.empty();return this._run(u,a,function(c){return i._assertSessionIsOpen(),c.protocol().run(u,a,{bookmark:i._lastBookmark,txConfig:l,mode:i._mode,database:i._database,impersonatedUser:i._impersonatedUser,afterComplete:i._onComplete,reactive:i._reactive,fetchSize:i._fetchSize})})},r.prototype._run=function(t,e,n){var i=this._connectionHolderWithMode(this._mode),o;return this._open?!this._hasTx&&i.initializeConnection()?o=i.getConnection().then(function(u){return n(u)}).catch(function(u){return Promise.resolve(new ha.FailedObserver({error:u}))}):o=Promise.resolve(new ha.FailedObserver({error:(0,$e.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")})):o=Promise.resolve(new ha.FailedObserver({error:(0,$e.newError)("Cannot run query in a closed session.")})),new ST.default(o,t,e,i)},r.prototype._acquireConnection=function(t){return la(this,void 0,void 0,function(){var e,n,i=this;return fa(this,function(o){return n=this._connectionHolderWithMode(this._mode),this._open?!this._hasTx&&n.initializeConnection()?e=n.getConnection().then(function(u){return t(u)}).then(function(u){return la(i,void 0,void 0,function(){return fa(this,function(a){switch(a.label){case 0:return[4,n.releaseConnection()];case 1:return a.sent(),[2,u]}})})}):e=Promise.reject((0,$e.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):e=Promise.reject((0,$e.newError)("Cannot run query in a closed session.")),[2,e]})})},r.prototype.beginTransaction=function(t){var e=t,n=Tr.TxConfig.empty();return e&&(n=new Tr.TxConfig(e)),this._beginTransaction(this._mode,n)},r.prototype._beginTransaction=function(t,e){if(!this._open)throw(0,$e.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,$e.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var n=r._validateSessionMode(t),i=this._connectionHolderWithMode(n);i.initializeConnection(),this._hasTx=!0;var o=new ET.default({connectionHolder:i,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmark:this._updateBookmark.bind(this),onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize});return o._begin(this._lastBookmark,e),o},r.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,$e.newError)("You cannot run more transactions on a closed session.")},r.prototype._transactionClosed=function(){this._hasTx=!1},r.prototype.lastBookmark=function(){return this._lastBookmark.values()},r.prototype.readTransaction=function(t,e){var n=new Tr.TxConfig(e);return this._runTransaction(Xe.ACCESS_MODE_READ,n,t)},r.prototype.writeTransaction=function(t,e){var n=new Tr.TxConfig(e);return this._runTransaction(Xe.ACCESS_MODE_WRITE,n,t)},r.prototype._runTransaction=function(t,e,n){var i=this;return this._transactionExecutor.execute(function(){return i._beginTransaction(t,e)},n)},r.prototype._onDatabaseNameResolved=function(t){if(!this._databaseNameResolved){var e=t||"";this._database=e,this._readConnectionHolder.setDatabase(e),this._writeConnectionHolder.setDatabase(e),this._databaseNameResolved=!0}},r.prototype._updateBookmark=function(t){t&&!t.isEmpty()&&(this._lastBookmark=t)},r.prototype.close=function(){return la(this,void 0,void 0,function(){return fa(this,function(t){switch(t.label){case 0:return this._open?(this._open=!1,this._transactionExecutor.close(),[4,this._readConnectionHolder.close()]):[3,3];case 1:return t.sent(),[4,this._writeConnectionHolder.close()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},r.prototype._connectionHolderWithMode=function(t){if(t===Xe.ACCESS_MODE_READ)return this._readConnectionHolder;if(t===Xe.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,$e.newError)("Unknown access mode: "+t)},r.prototype._onCompleteCallback=function(t){this._updateBookmark(new r_.Bookmark(t.bookmark))},r._validateSessionMode=function(t){var e=t||Xe.ACCESS_MODE_WRITE;if(e!==Xe.ACCESS_MODE_READ&&e!==Xe.ACCESS_MODE_WRITE)throw(0,$e.newError)("Illegal session mode "+e);return e},r}();function PT(r){var t=r&&r.maxTransactionRetryTime?r.maxTransactionRetryTime:null;return new wT.TransactionExecutor(t)}s(PT,"_createTransactionExecutor");Je.default=TT});var l_=h(je=>{"use strict";var s_=je&&je.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(je,"__esModule",{value:!0});je.WRITE=je.READ=je.Driver=void 0;var i_=gr(),CT=Ku(),IT=s_(ia()),Pr=Sr(),RT=Xu(),o_=s_(pa()),AT=ve(),jT=60*60*1e3,NT=1e3,qT=Pr.ACCESS_MODE_READ;je.READ=qT;var u_=Pr.ACCESS_MODE_WRITE;je.WRITE=u_;var DT=0,a_=function(){function r(t,e,n,i){e===void 0&&(e={}),i===void 0&&(i=s(function(o){return new o_.default(o)},"createSession")),MT(e),xT(e),this._id=DT++,this._meta=t,this._config=e,this._log=RT.Logger.create(e),this._createConnectionProvider=n,this._createSession=i,this._connectionProvider=null,this._afterConstruction()}return s(r,"Driver"),r.prototype.verifyConnectivity=function(t){var e=t===void 0?{}:t,n=e.database,i=n===void 0?"":n,o=this._getOrCreateConnectionProvider(),u=new CT.ConnectivityVerifier(o);return u.verify({database:i})},r.prototype.supportsMultiDb=function(){var t=this._getOrCreateConnectionProvider();return t.supportsMultiDb()},r.prototype.supportsTransactionConfig=function(){var t=this._getOrCreateConnectionProvider();return t.supportsTransactionConfig()},r.prototype.supportsUserImpersonation=function(){var t=this._getOrCreateConnectionProvider();return t.supportsUserImpersonation()},r.prototype._supportsRouting=function(){return this._meta.routing},r.prototype._isEncrypted=function(){return this._config.encrypted===AT.ENCRYPTION_ON},r.prototype._getTrust=function(){return this._config.trust},r.prototype.session=function(t){var e=t===void 0?{}:t,n=e.defaultAccessMode,i=n===void 0?u_:n,o=e.bookmarks,u=e.database,a=u===void 0?"":u,l=e.impersonatedUser,c=e.fetchSize;return this._newSession({defaultAccessMode:i,bookmarkOrBookmarks:o,database:a,reactive:!1,impersonatedUser:l,fetchSize:c_(c,this._config.fetchSize)})},r.prototype.close=function(){return this._log.info("Driver "+this._id+" closing"),this._connectionProvider?this._connectionProvider.close():Promise.resolve()},r.prototype._afterConstruction=function(){this._log.info(this._meta.typename+" driver "+this._id+" created for server address "+this._meta.address)},r.prototype._newSession=function(t){var e=t.defaultAccessMode,n=t.bookmarkOrBookmarks,i=t.database,o=t.reactive,u=t.impersonatedUser,a=t.fetchSize,l=o_.default._validateSessionMode(e),c=this._getOrCreateConnectionProvider(),f=n?new i_.Bookmark(n):i_.Bookmark.empty();return this._createSession({mode:l,database:i||"",connectionProvider:c,bookmark:f,config:this._config,reactive:o,impersonatedUser:u,fetchSize:a})},r.prototype._getOrCreateConnectionProvider=function(){return this._connectionProvider||(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,kT(this._config))),this._connectionProvider},r}();je.Driver=a_;function xT(r){var t=r.resolver;if(t&&typeof t!="function")throw new TypeError("Configured resolver should be a function. Got: "+t);return r}s(xT,"validateConfig");function MT(r){r.maxConnectionLifetime=_a(r.maxConnectionLifetime,jT),r.maxConnectionPoolSize=_a(r.maxConnectionPoolSize,Pr.DEFAULT_POOL_MAX_SIZE),r.connectionAcquisitionTimeout=_a(r.connectionAcquisitionTimeout,Pr.DEFAULT_POOL_ACQUISITION_TIMEOUT),r.fetchSize=c_(r.fetchSize,NT)}s(MT,"sanitizeConfig");function _a(r,t){var e=parseInt(r,10);return e>0||e===0?e:e<0?Number.MAX_SAFE_INTEGER:t}s(_a,"sanitizeIntValue");function c_(r,t){var e=parseInt(r,10);if(e>0||e===Pr.FETCH_ALL)return e;if(e===0||e<0)throw new Error("The fetch size can only be a positive value or "+Pr.FETCH_ALL+" for ALL. However fetchSize = "+e);return t}s(c_,"validateFetchSizeValue");function kT(r){return new IT.default(r.resolver)}s(kT,"createHostNameResolver");je.default=a_});var f_=h(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});var UT={basic:function(r,t,e){return e?{scheme:"basic",principal:r,credentials:t,realm:e}:{scheme:"basic",principal:r,credentials:t}},kerberos:function(r){return{scheme:"kerberos",principal:"",credentials:r}},bearer:function(r){return{scheme:"bearer",credentials:r}},custom:function(r,t,e,n,i){return i?{scheme:n,principal:r,credentials:t,realm:e,parameters:i}:{scheme:n,principal:r,credentials:t,realm:e}}};da.default=UT});var p_=h(h_=>{"use strict";Object.defineProperty(h_,"__esModule",{value:!0})});var R=h(v=>{"use strict";var LT=v&&v.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),FT=v&&v.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Cr=v&&v.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&LT(t,r,e);return FT(t,r),t},xt=v&&v.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(v,"__esModule",{value:!0});v.types=v.Driver=v.Session=v.Transaction=v.Connection=v.ConnectionProvider=v.Result=v.Stats=v.QueryStatistics=v.ProfiledPlan=v.Plan=v.Notification=v.ServerInfo=v.queryType=v.ResultSummary=v.Record=v.isPathSegment=v.PathSegment=v.isPath=v.Path=v.isUnboundRelationship=v.UnboundRelationship=v.isRelationship=v.Relationship=v.isNode=v.Node=v.Time=v.LocalTime=v.LocalDateTime=v.isTime=v.isLocalTime=v.isLocalDateTime=v.isDuration=v.isDateTime=v.isDate=v.Duration=v.DateTime=v.Date=v.Point=v.isPoint=v.internal=v.toString=v.toNumber=v.inSafeRange=v.isInt=v.int=v.Integer=v.error=v.Neo4jError=v.newError=void 0;v.auth=v.json=v.driver=void 0;var Dt=ae();Object.defineProperty(v,"newError",{enumerable:!0,get:function(){return Dt.newError}});Object.defineProperty(v,"Neo4jError",{enumerable:!0,get:function(){return Dt.Neo4jError}});var Se=Cr(At());v.Integer=Se.default;Object.defineProperty(v,"int",{enumerable:!0,get:function(){return Se.int}});Object.defineProperty(v,"isInt",{enumerable:!0,get:function(){return Se.isInt}});Object.defineProperty(v,"inSafeRange",{enumerable:!0,get:function(){return Se.inSafeRange}});Object.defineProperty(v,"toNumber",{enumerable:!0,get:function(){return Se.toNumber}});Object.defineProperty(v,"toString",{enumerable:!0,get:function(){return Se.toString}});var U=fp();Object.defineProperty(v,"Date",{enumerable:!0,get:function(){return U.Date}});Object.defineProperty(v,"DateTime",{enumerable:!0,get:function(){return U.DateTime}});Object.defineProperty(v,"Duration",{enumerable:!0,get:function(){return U.Duration}});Object.defineProperty(v,"isDate",{enumerable:!0,get:function(){return U.isDate}});Object.defineProperty(v,"isDateTime",{enumerable:!0,get:function(){return U.isDateTime}});Object.defineProperty(v,"isDuration",{enumerable:!0,get:function(){return U.isDuration}});Object.defineProperty(v,"isLocalDateTime",{enumerable:!0,get:function(){return U.isLocalDateTime}});Object.defineProperty(v,"isLocalTime",{enumerable:!0,get:function(){return U.isLocalTime}});Object.defineProperty(v,"isTime",{enumerable:!0,get:function(){return U.isTime}});Object.defineProperty(v,"LocalDateTime",{enumerable:!0,get:function(){return U.LocalDateTime}});Object.defineProperty(v,"LocalTime",{enumerable:!0,get:function(){return U.LocalTime}});Object.defineProperty(v,"Time",{enumerable:!0,get:function(){return U.Time}});var K=gp();Object.defineProperty(v,"Node",{enumerable:!0,get:function(){return K.Node}});Object.defineProperty(v,"isNode",{enumerable:!0,get:function(){return K.isNode}});Object.defineProperty(v,"Relationship",{enumerable:!0,get:function(){return K.Relationship}});Object.defineProperty(v,"isRelationship",{enumerable:!0,get:function(){return K.isRelationship}});Object.defineProperty(v,"UnboundRelationship",{enumerable:!0,get:function(){return K.UnboundRelationship}});Object.defineProperty(v,"isUnboundRelationship",{enumerable:!0,get:function(){return K.isUnboundRelationship}});Object.defineProperty(v,"Path",{enumerable:!0,get:function(){return K.Path}});Object.defineProperty(v,"isPath",{enumerable:!0,get:function(){return K.isPath}});Object.defineProperty(v,"PathSegment",{enumerable:!0,get:function(){return K.PathSegment}});Object.defineProperty(v,"isPathSegment",{enumerable:!0,get:function(){return K.isPathSegment}});var __=xt(Ep());v.Record=__.default;var Zo=Pp();Object.defineProperty(v,"isPoint",{enumerable:!0,get:function(){return Zo.isPoint}});Object.defineProperty(v,"Point",{enumerable:!0,get:function(){return Zo.Point}});var X=Cr(Wu());v.ResultSummary=X.default;Object.defineProperty(v,"queryType",{enumerable:!0,get:function(){return X.queryType}});Object.defineProperty(v,"ServerInfo",{enumerable:!0,get:function(){return X.ServerInfo}});Object.defineProperty(v,"Notification",{enumerable:!0,get:function(){return X.Notification}});Object.defineProperty(v,"Plan",{enumerable:!0,get:function(){return X.Plan}});Object.defineProperty(v,"ProfiledPlan",{enumerable:!0,get:function(){return X.ProfiledPlan}});Object.defineProperty(v,"QueryStatistics",{enumerable:!0,get:function(){return X.QueryStatistics}});Object.defineProperty(v,"Stats",{enumerable:!0,get:function(){return X.Stats}});var d_=xt(Yo());v.Result=d_.default;var BT=xt(Qp());v.ConnectionProvider=BT.default;var v_=xt($p());v.Connection=v_.default;var b_=xt(ca());v.Transaction=b_.default;var y_=xt(pa());v.Session=y_.default;var va=Cr(l_()),m_=va;v.Driver=va.default;v.driver=m_;var O_=xt(f_());v.auth=O_.default;var g_=Cr(p_());v.types=g_;var S_=Cr(qo());v.json=S_;var E_=Cr(oa());v.internal=E_;var w_={SERVICE_UNAVAILABLE:Dt.SERVICE_UNAVAILABLE,SESSION_EXPIRED:Dt.SESSION_EXPIRED,PROTOCOL_ERROR:Dt.PROTOCOL_ERROR};v.error=w_;var VT={newError:Dt.newError,Neo4jError:Dt.Neo4jError,error:w_,Integer:Se.default,int:Se.int,isInt:Se.isInt,inSafeRange:Se.inSafeRange,toNumber:Se.toNumber,toString:Se.toString,internal:E_,isPoint:Zo.isPoint,Point:Zo.Point,Date:U.Date,DateTime:U.DateTime,Duration:U.Duration,isDate:U.isDate,isDateTime:U.isDateTime,isDuration:U.isDuration,isLocalDateTime:U.isLocalDateTime,isLocalTime:U.isLocalTime,isTime:U.isTime,LocalDateTime:U.LocalDateTime,LocalTime:U.LocalTime,Time:U.Time,Node:K.Node,isNode:K.isNode,Relationship:K.Relationship,isRelationship:K.isRelationship,UnboundRelationship:K.UnboundRelationship,isUnboundRelationship:K.isUnboundRelationship,Path:K.Path,isPath:K.isPath,PathSegment:K.PathSegment,isPathSegment:K.isPathSegment,Record:__.default,ResultSummary:X.default,queryType:X.queryType,ServerInfo:X.ServerInfo,Notification:X.Notification,Plan:X.Plan,ProfiledPlan:X.ProfiledPlan,QueryStatistics:X.QueryStatistics,Stats:X.Stats,Result:d_.default,Transaction:b_.default,Session:y_.default,Driver:va.default,Connection:v_.default,types:g_,driver:m_,json:S_,auth:O_.default};v.default=VT});var Ir=h(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});function WT(r){return typeof r=="function"}s(WT,"isFunction");ba.isFunction=WT});var En=h(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});var ya=!1;ma.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var t=new Error;console.warn(`DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: 
`+t.stack)}else ya&&console.log("RxJS: Back to a better error behavior. Thank you. <3");ya=r},get useDeprecatedSynchronousErrorHandling(){return ya}}});var Ko=h(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});function HT(r){setTimeout(function(){throw r},0)}s(HT,"hostReportError");Oa.hostReportError=HT});var Sa=h(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});var zT=En(),YT=Ko();ga.empty={closed:!0,next:function(r){},error:function(r){if(zT.config.useDeprecatedSynchronousErrorHandling)throw r;YT.hostReportError(r)},complete:function(){}}});var re=h(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.isArray=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}()});var Go=h(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});function ZT(r){return r!==null&&typeof r=="object"}s(ZT,"isObject");wa.isObject=ZT});var Pa=h(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});var KT=function(){function r(t){return Error.call(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,n){return n+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t,this}return s(r,"UnsubscriptionErrorImpl"),r.prototype=Object.create(Error.prototype),r}();Ta.UnsubscriptionError=KT});var G=h(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});var GT=re(),QT=Go(),$T=Ir(),Qo=Pa(),XT=function(){function r(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return s(r,"Subscription"),r.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this,n=e._parentOrParents,i=e._ctorUnsubscribe,o=e._unsubscribe,u=e._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof r)n.remove(this);else if(n!==null)for(var a=0;a<n.length;++a){var l=n[a];l.remove(this)}if($T.isFunction(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(p){t=p instanceof Qo.UnsubscriptionError?T_(p.errors):[p]}}if(GT.isArray(u))for(var a=-1,c=u.length;++a<c;){var f=u[a];if(QT.isObject(f))try{f.unsubscribe()}catch(_){t=t||[],_ instanceof Qo.UnsubscriptionError?t=t.concat(T_(_.errors)):t.push(_)}}if(t)throw new Qo.UnsubscriptionError(t)}},r.prototype.add=function(t){var e=t;if(!t)return r.EMPTY;switch(typeof t){case"function":e=new r(t);case"object":if(e===this||e.closed||typeof e.unsubscribe!="function")return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof r)){var n=e;e=new r,e._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=e._parentOrParents;if(i===null)e._parentOrParents=this;else if(i instanceof r){if(i===this)return e;e._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return e;var o=this._subscriptions;return o===null?this._subscriptions=[e]:o.push(e),e},r.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}},r.EMPTY=function(t){return t.closed=!0,t}(new r),r}();Ca.Subscription=XT;function T_(r){return r.reduce(function(t,e){return t.concat(e instanceof Qo.UnsubscriptionError?e.errors:e)},[])}s(T_,"flattenUnsubscriptionErrors")});var $o=h(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}();wn.$$rxSubscriber=wn.rxSubscriber});var w=h(Ar=>{"use strict";var C_=Ar&&Ar.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ar,"__esModule",{value:!0});var P_=Ir(),Ia=Sa(),JT=G(),eP=$o(),Rr=En(),Xo=Ko(),I_=function(r){C_(t,r);function t(e,n,i){var o=r.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=Ia.empty;break;case 1:if(!e){o.destination=Ia.empty;break}if(typeof e=="object"){e instanceof t?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(o)):(o.syncErrorThrowable=!0,o.destination=new Ra(o,e));break}default:o.syncErrorThrowable=!0,o.destination=new Ra(o,e,n,i);break}return o}return s(t,"Subscriber"),t.prototype[eP.rxSubscriber]=function(){return this},t.create=function(e,n,i){var o=new t(e,n,i);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(JT.Subscription);Ar.Subscriber=I_;var Ra=function(r){C_(t,r);function t(e,n,i,o){var u=r.call(this)||this;u._parentSubscriber=e;var a,l=u;return P_.isFunction(n)?a=n:n&&(a=n.next,i=n.error,o=n.complete,n!==Ia.empty&&(l=Object.create(n),P_.isFunction(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(u))),u._context=l,u._next=a,u._error=i,u._complete=o,u}return s(t,"SafeSubscriber"),t.prototype.next=function(e){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!Rr.config.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,e):this.__tryOrSetError(n,this._next,e)&&this.unsubscribe()}},t.prototype.error=function(e){if(!this.isStopped){var n=this._parentSubscriber,i=Rr.config.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,e),this.unsubscribe()):(this.__tryOrSetError(n,this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=e,n.syncErrorThrown=!0):Xo.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;Xo.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=s(function(){return e._complete.call(e._context)},"wrappedComplete");!Rr.config.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,n){try{e.call(this._context,n)}catch(i){if(this.unsubscribe(),Rr.config.useDeprecatedSynchronousErrorHandling)throw i;Xo.hostReportError(i)}},t.prototype.__tryOrSetError=function(e,n,i){if(!Rr.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(o){return Rr.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=o,e.syncErrorThrown=!0,!0):(Xo.hostReportError(o),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(I_);Ar.SafeSubscriber=Ra});var Jo=h(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});var tP=w();function rP(r){for(;r;){var t=r,e=t.closed,n=t.destination,i=t.isStopped;if(e||i)return!1;n&&n instanceof tP.Subscriber?r=n:r=null}return!0}s(rP,"canReportError");Aa.canReportError=rP});var A_=h(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});var ja=w(),R_=$o(),nP=Sa();function iP(r,t,e){if(r){if(r instanceof ja.Subscriber)return r;if(r[R_.rxSubscriber])return r[R_.rxSubscriber]()}return!r&&!t&&!e?new ja.Subscriber(nP.empty):new ja.Subscriber(r,t,e)}s(iP,"toSubscriber");Na.toSubscriber=iP});var Mt=h(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}()});var vt=h(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});function oP(r){return r}s(oP,"identity");Da.identity=oP});var ts=h(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});var sP=vt();function uP(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return j_(r)}s(uP,"pipe");es.pipe=uP;function j_(r){return r.length===0?sP.identity:r.length===1?r[0]:s(function(e){return r.reduce(function(n,i){return i(n)},e)},"piped")}s(j_,"pipeFromArray");es.pipeFromArray=j_});var j=h(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});var aP=Jo(),cP=A_(),lP=Mt(),fP=ts(),rs=En(),hP=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return s(r,"Observable"),r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,n){var i=this.operator,o=cP.toSubscriber(t,e,n);if(i?o.add(i.call(o,this.source)):o.add(this.source||rs.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),rs.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){rs.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),aP.canReportError(t)?t.error(e):console.warn(e)}},r.prototype.forEach=function(t,e){var n=this;return e=N_(e),new e(function(i,o){var u;u=n.subscribe(function(a){try{t(a)}catch(l){o(l),u&&u.unsubscribe()}},o,i)})},r.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},r.prototype[lP.observable]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?this:fP.pipeFromArray(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=N_(t),new t(function(n,i){var o;e.subscribe(function(u){return o=u},function(u){return i(u)},function(){return n(o)})})},r.create=function(t){return new r(t)},r}();xa.Observable=hP;function N_(r){if(r||(r=rs.config.Promise||Promise),!r)throw new Error("no Promise impl found");return r}s(N_,"getPromiseCtor")});var Tn=h(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});var pP=function(){function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return s(r,"ObjectUnsubscribedErrorImpl"),r.prototype=Object.create(Error.prototype),r}();Ma.ObjectUnsubscribedError=pP});var ka=h(Pn=>{"use strict";var _P=Pn&&Pn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Pn,"__esModule",{value:!0});var dP=G(),vP=function(r){_P(t,r);function t(e,n){var i=r.call(this)||this;return i.subject=e,i.subscriber=n,i.closed=!1,i}return s(t,"SubjectSubscription"),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,n=e.observers;if(this.subject=null,!(!n||n.length===0||e.isStopped||e.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},t}(dP.Subscription);Pn.SubjectSubscription=vP});var J=h(kt=>{"use strict";var Fa=kt&&kt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(kt,"__esModule",{value:!0});var q_=j(),bP=w(),Ua=G(),Cn=Tn(),yP=ka(),mP=$o(),D_=function(r){Fa(t,r);function t(e){var n=r.call(this,e)||this;return n.destination=e,n}return s(t,"SubjectSubscriber"),t}(bP.Subscriber);kt.SubjectSubscriber=D_;var x_=function(r){Fa(t,r);function t(){var e=r.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return s(t,"Subject"),t.prototype[mP.rxSubscriber]=function(){return new D_(this)},t.prototype.lift=function(e){var n=new La(this,this);return n.operator=e,n},t.prototype.next=function(e){if(this.closed)throw new Cn.ObjectUnsubscribedError;if(!this.isStopped)for(var n=this.observers,i=n.length,o=n.slice(),u=0;u<i;u++)o[u].next(e)},t.prototype.error=function(e){if(this.closed)throw new Cn.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var n=this.observers,i=n.length,o=n.slice(),u=0;u<i;u++)o[u].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new Cn.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),o=0;o<n;o++)i[o].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(e){if(this.closed)throw new Cn.ObjectUnsubscribedError;return r.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){if(this.closed)throw new Cn.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),Ua.Subscription.EMPTY):this.isStopped?(e.complete(),Ua.Subscription.EMPTY):(this.observers.push(e),new yP.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new q_.Observable;return e.source=this,e},t.create=function(e,n){return new La(e,n)},t}(q_.Observable);kt.Subject=x_;var La=function(r){Fa(t,r);function t(e,n){var i=r.call(this)||this;return i.destination=e,i.source=n,i}return s(t,"AnonymousSubject"),t.prototype.next=function(e){var n=this.destination;n&&n.next&&n.next(e)},t.prototype.error=function(e){var n=this.destination;n&&n.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var n=this.source;return n?this.source.subscribe(e):Ua.Subscription.EMPTY},t}(x_);kt.AnonymousSubject=La});var ns=h(In=>{"use strict";var OP=In&&In.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(In,"__esModule",{value:!0});var gP=w();function SP(){return s(function(t){return t.lift(new EP(t))},"refCountOperatorFunction")}s(SP,"refCount");In.refCount=SP;var EP=function(){function r(t){this.connectable=t}return s(r,"RefCountOperator"),r.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var i=new wP(t,n),o=e.subscribe(i);return i.closed||(i.connection=n.connect()),o},r}(),wP=function(r){OP(t,r);function t(e,n){var i=r.call(this,e)||this;return i.connectable=n,i}return s(t,"RefCountSubscriber"),t.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var n=e._refCount;if(n<=0){this.connection=null;return}if(e._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,o=e._connection;this.connection=null,o&&(!i||o===i)&&o.unsubscribe()},t}(gP.Subscriber)});var Va=h(jr=>{"use strict";var Ba=jr&&jr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(jr,"__esModule",{value:!0});var TP=J(),PP=j(),CP=w(),M_=G(),IP=ns(),k_=function(r){Ba(t,r);function t(e,n){var i=r.call(this)||this;return i.source=e,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return s(t,"ConnectableObservable"),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new M_.Subscription,e.add(this.source.subscribe(new RP(this.getSubject(),this))),e.closed&&(this._connection=null,e=M_.Subscription.EMPTY)),e},t.prototype.refCount=function(){return IP.refCount()(this)},t}(PP.Observable);jr.ConnectableObservable=k_;jr.connectableObservableDescriptor=function(){var r=k_.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:r._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}}}();var RP=function(r){Ba(t,r);function t(e,n){var i=r.call(this,e)||this;return i.connectable=n,i}return s(t,"ConnectableSubscriber"),t.prototype._error=function(e){this._unsubscribe(),r.prototype._error.call(this,e)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}},t}(TP.SubjectSubscriber),Zz=function(){function r(t){this.connectable=t}return s(r,"RefCountOperator"),r.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var i=new AP(t,n),o=e.subscribe(i);return i.closed||(i.connection=n.connect()),o},r}(),AP=function(r){Ba(t,r);function t(e,n){var i=r.call(this,e)||this;return i.connectable=n,i}return s(t,"RefCountSubscriber"),t.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var n=e._refCount;if(n<=0){this.connection=null;return}if(e._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,o=e._connection;this.connection=null,o&&(!i||o===i)&&o.unsubscribe()},t}(CP.Subscriber)});var Ha=h(Nr=>{"use strict";var is=Nr&&Nr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Nr,"__esModule",{value:!0});var U_=w(),L_=G(),jP=j(),NP=J();function qP(r,t,e,n){return function(i){return i.lift(new DP(r,t,e,n))}}s(qP,"groupBy");Nr.groupBy=qP;var DP=function(){function r(t,e,n,i){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=i}return s(r,"GroupByOperator"),r.prototype.call=function(t,e){return e.subscribe(new xP(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},r}(),xP=function(r){is(t,r);function t(e,n,i,o,u){var a=r.call(this,e)||this;return a.keySelector=n,a.elementSelector=i,a.durationSelector=o,a.subjectSelector=u,a.groups=null,a.attemptedToUnsubscribe=!1,a.count=0,a}return s(t,"GroupBySubscriber"),t.prototype._next=function(e){var n;try{n=this.keySelector(e)}catch(i){this.error(i);return}this._group(e,n)},t.prototype._group=function(e,n){var i=this.groups;i||(i=this.groups=new Map);var o=i.get(n),u;if(this.elementSelector)try{u=this.elementSelector(e)}catch(c){this.error(c)}else u=e;if(!o){o=this.subjectSelector?this.subjectSelector():new NP.Subject,i.set(n,o);var a=new Wa(n,o,this);if(this.destination.next(a),this.durationSelector){var l=void 0;try{l=this.durationSelector(new Wa(n,o))}catch(c){this.error(c);return}this.add(l.subscribe(new MP(n,o,this)))}}o.closed||o.next(u)},t.prototype._error=function(e){var n=this.groups;n&&(n.forEach(function(i,o){i.error(e)}),n.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach(function(n,i){n.complete()}),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&r.prototype.unsubscribe.call(this))},t}(U_.Subscriber),MP=function(r){is(t,r);function t(e,n,i){var o=r.call(this,n)||this;return o.key=e,o.group=n,o.parent=i,o}return s(t,"GroupDurationSubscriber"),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this,n=e.parent,i=e.key;this.key=this.parent=null,n&&n.removeGroup(i)},t}(U_.Subscriber),Wa=function(r){is(t,r);function t(e,n,i){var o=r.call(this)||this;return o.key=e,o.groupSubject=n,o.refCountSubscription=i,o}return s(t,"GroupedObservable"),t.prototype._subscribe=function(e){var n=new L_.Subscription,i=this,o=i.refCountSubscription,u=i.groupSubject;return o&&!o.closed&&n.add(new kP(o)),n.add(u.subscribe(e)),n},t}(jP.Observable);Nr.GroupedObservable=Wa;var kP=function(r){is(t,r);function t(e){var n=r.call(this)||this;return n.parent=e,e.count++,n}return s(t,"InnerRefCountSubscription"),t.prototype.unsubscribe=function(){var e=this.parent;!e.closed&&!this.closed&&(r.prototype.unsubscribe.call(this),e.count-=1,e.count===0&&e.attemptedToUnsubscribe&&e.unsubscribe())},t}(L_.Subscription)});var za=h(Rn=>{"use strict";var UP=Rn&&Rn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Rn,"__esModule",{value:!0});var LP=J(),FP=Tn(),BP=function(r){UP(t,r);function t(e){var n=r.call(this)||this;return n._value=e,n}return s(t,"BehaviorSubject"),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(e){var n=r.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new FP.ObjectUnsubscribedError;return this._value},t.prototype.next=function(e){r.prototype.next.call(this,this._value=e)},t}(LP.Subject);Rn.BehaviorSubject=BP});var F_=h(An=>{"use strict";var VP=An&&An.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(An,"__esModule",{value:!0});var WP=G(),HP=function(r){VP(t,r);function t(e,n){return r.call(this)||this}return s(t,"Action"),t.prototype.schedule=function(e,n){return n===void 0&&(n=0),this},t}(WP.Subscription);An.Action=HP});var qr=h(jn=>{"use strict";var zP=jn&&jn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(jn,"__esModule",{value:!0});var YP=F_(),ZP=function(r){zP(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.pending=!1,i}return s(t,"AsyncAction"),t.prototype.schedule=function(e,n){if(n===void 0&&(n=0),this.closed)return this;this.state=e;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(o,this.id,n),this},t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),setInterval(e.flush.bind(e,this),i)},t.prototype.recycleAsyncId=function(e,n,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return n;clearInterval(n)},t.prototype.execute=function(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,n){var i=!1,o=void 0;try{this.work(e)}catch(u){i=!0,o=!!u&&u||new Error(u)}if(i)return this.unsubscribe(),o},t.prototype._unsubscribe=function(){var e=this.id,n=this.scheduler,i=n.actions,o=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,o!==-1&&i.splice(o,1),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null},t}(YP.Action);jn.AsyncAction=ZP});var B_=h(Nn=>{"use strict";var KP=Nn&&Nn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Nn,"__esModule",{value:!0});var GP=qr(),QP=function(r){KP(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i}return s(t,"QueueAction"),t.prototype.schedule=function(e,n){return n===void 0&&(n=0),n>0?r.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},t.prototype.execute=function(e,n){return n>0||this.closed?r.prototype.execute.call(this,e,n):this._execute(e,n)},t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?r.prototype.requestAsyncId.call(this,e,n,i):e.flush(this)},t}(GP.AsyncAction);Nn.QueueAction=QP});var Za=h(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});var $P=function(){function r(t,e){e===void 0&&(e=r.now),this.SchedulerAction=t,this.now=e}return s(r,"Scheduler"),r.prototype.schedule=function(t,e,n){return e===void 0&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},r.now=function(){return Date.now()},r}();Ya.Scheduler=$P});var Dr=h(qn=>{"use strict";var XP=qn&&qn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(qn,"__esModule",{value:!0});var V_=Za(),JP=function(r){XP(t,r);function t(e,n){n===void 0&&(n=V_.Scheduler.now);var i=r.call(this,e,function(){return t.delegate&&t.delegate!==i?t.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return s(t,"AsyncScheduler"),t.prototype.schedule=function(e,n,i){return n===void 0&&(n=0),t.delegate&&t.delegate!==this?t.delegate.schedule(e,n,i):r.prototype.schedule.call(this,e,n,i)},t.prototype.flush=function(e){var n=this.actions;if(this.active){n.push(e);return}var i;this.active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this.active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}},t}(V_.Scheduler);qn.AsyncScheduler=JP});var W_=h(Dn=>{"use strict";var eC=Dn&&Dn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Dn,"__esModule",{value:!0});var tC=Dr(),rC=function(r){eC(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"QueueScheduler"),t}(tC.AsyncScheduler);Dn.QueueScheduler=rC});var Ka=h(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});var nC=B_(),iC=W_();xn.queueScheduler=new iC.QueueScheduler(nC.QueueAction);xn.queue=xn.queueScheduler});var Ne=h(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});var H_=j();Mn.EMPTY=new H_.Observable(function(r){return r.complete()});function oC(r){return r?sC(r):Mn.EMPTY}s(oC,"empty");Mn.empty=oC;function sC(r){return new H_.Observable(function(t){return r.schedule(function(){return t.complete()})})}s(sC,"emptyScheduled")});var qe=h(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});function uC(r){return r&&typeof r.schedule=="function"}s(uC,"isScheduler");Ga.isScheduler=uC});var $a=h(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.subscribeToArray=function(r){return function(t){for(var e=0,n=r.length;e<n&&!t.closed;e++)t.next(r[e]);t.complete()}}});var os=h(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});var aC=j(),cC=G();function lC(r,t){return new aC.Observable(function(e){var n=new cC.Subscription,i=0;return n.add(t.schedule(function(){if(i===r.length){e.complete();return}e.next(r[i++]),e.closed||n.add(this.schedule())})),n})}s(lC,"scheduleArray");Xa.scheduleArray=lC});var xr=h(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});var fC=j(),hC=$a(),pC=os();function _C(r,t){return t?pC.scheduleArray(r,t):new fC.Observable(hC.subscribeToArray(r))}s(_C,"fromArray");Ja.fromArray=_C});var kn=h(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});var dC=qe(),vC=xr(),bC=os();function yC(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return dC.isScheduler(e)?(r.pop(),bC.scheduleArray(r,e)):vC.fromArray(r)}s(yC,"of");ec.of=yC});var ss=h(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});var z_=j();function mC(r,t){return t?new z_.Observable(function(e){return t.schedule(OC,0,{error:r,subscriber:e})}):new z_.Observable(function(e){return e.error(r)})}s(mC,"throwError");tc.throwError=mC;function OC(r){var t=r.error,e=r.subscriber;e.error(t)}s(OC,"dispatch")});var Ln=h(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});var gC=Ne(),SC=kn(),EC=ss(),wC;(function(r){r.NEXT="N",r.ERROR="E",r.COMPLETE="C"})(wC=Un.NotificationKind||(Un.NotificationKind={}));var TC=function(){function r(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue=t==="N"}return s(r,"Notification"),r.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},r.prototype.do=function(t,e,n){var i=this.kind;switch(i){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},r.prototype.accept=function(t,e,n){return t&&typeof t.next=="function"?this.observe(t):this.do(t,e,n)},r.prototype.toObservable=function(){var t=this.kind;switch(t){case"N":return SC.of(this.value);case"E":return EC.throwError(this.error);case"C":return gC.empty()}throw new Error("unexpected notification kind value")},r.createNext=function(t){return typeof t<"u"?new r("N",t):r.undefinedValueNotification},r.createError=function(t){return new r("E",void 0,t)},r.createComplete=function(){return r.completeNotification},r.completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r}();Un.Notification=TC});var nc=h(bt=>{"use strict";var PC=bt&&bt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(bt,"__esModule",{value:!0});var CC=w(),rc=Ln();function IC(r,t){return t===void 0&&(t=0),s(function(n){return n.lift(new Y_(r,t))},"observeOnOperatorFunction")}s(IC,"observeOn");bt.observeOn=IC;var Y_=function(){function r(t,e){e===void 0&&(e=0),this.scheduler=t,this.delay=e}return s(r,"ObserveOnOperator"),r.prototype.call=function(t,e){return e.subscribe(new Z_(t,this.scheduler,this.delay))},r}();bt.ObserveOnOperator=Y_;var Z_=function(r){PC(t,r);function t(e,n,i){i===void 0&&(i=0);var o=r.call(this,e)||this;return o.scheduler=n,o.delay=i,o}return s(t,"ObserveOnSubscriber"),t.dispatch=function(e){var n=e.notification,i=e.destination;n.observe(i),this.unsubscribe()},t.prototype.scheduleMessage=function(e){var n=this.destination;n.add(this.scheduler.schedule(t.dispatch,this.delay,new K_(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(rc.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(rc.Notification.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(rc.Notification.createComplete()),this.unsubscribe()},t}(CC.Subscriber);bt.ObserveOnSubscriber=Z_;var K_=function(){function r(t,e){this.notification=t,this.destination=e}return s(r,"ObserveOnMessage"),r}();bt.ObserveOnMessage=K_});var us=h(Fn=>{"use strict";var RC=Fn&&Fn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Fn,"__esModule",{value:!0});var AC=J(),jC=Ka(),NC=G(),qC=nc(),DC=Tn(),xC=ka(),MC=function(r){RC(t,r);function t(e,n,i){e===void 0&&(e=Number.POSITIVE_INFINITY),n===void 0&&(n=Number.POSITIVE_INFINITY);var o=r.call(this)||this;return o.scheduler=i,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=e<1?1:e,o._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return s(t,"ReplaySubject"),t.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}r.prototype.next.call(this,e)},t.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new kC(this._getNow(),e)),this._trimBufferThenGetEvents()),r.prototype.next.call(this,e)},t.prototype._subscribe=function(e){var n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,u=i.length,a;if(this.closed)throw new DC.ObjectUnsubscribedError;if(this.isStopped||this.hasError?a=NC.Subscription.EMPTY:(this.observers.push(e),a=new xC.SubjectSubscription(this,e)),o&&e.add(e=new qC.ObserveOnSubscriber(e,o)),n)for(var l=0;l<u&&!e.closed;l++)e.next(i[l]);else for(var l=0;l<u&&!e.closed;l++)e.next(i[l].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),a},t.prototype._getNow=function(){return(this.scheduler||jC.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),n=this._bufferSize,i=this._windowTime,o=this._events,u=o.length,a=0;a<u&&!(e-o[a].time<i);)a++;return u>n&&(a=Math.max(a,u-n)),a>0&&o.splice(0,a),o},t}(AC.Subject);Fn.ReplaySubject=MC;var kC=function(){function r(t,e){this.time=t,this.value=e}return s(r,"ReplayEvent"),r}()});var Vn=h(Bn=>{"use strict";var UC=Bn&&Bn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Bn,"__esModule",{value:!0});var LC=J(),G_=G(),FC=function(r){UC(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return s(t,"AsyncSubject"),t.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),G_.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),G_.Subscription.EMPTY):r.prototype._subscribe.call(this,e)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(e){this.hasCompleted||r.prototype.error.call(this,e)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&r.prototype.next.call(this,this.value),r.prototype.complete.call(this)},t}(LC.Subject);Bn.AsyncSubject=FC});var $_=h(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});var BC=1,VC=function(){return Promise.resolve()}(),as={};function Q_(r){return r in as?(delete as[r],!0):!1}s(Q_,"findAndClearHandle");cs.Immediate={setImmediate:function(r){var t=BC++;return as[t]=!0,VC.then(function(){return Q_(t)&&r()}),t},clearImmediate:function(r){Q_(r)}};cs.TestTools={pending:function(){return Object.keys(as).length}}});var J_=h(Wn=>{"use strict";var WC=Wn&&Wn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Wn,"__esModule",{value:!0});var X_=$_(),HC=qr(),zC=function(r){WC(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i}return s(t,"AsapAction"),t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),i!==null&&i>0?r.prototype.requestAsyncId.call(this,e,n,i):(e.actions.push(this),e.scheduled||(e.scheduled=X_.Immediate.setImmediate(e.flush.bind(e,null))))},t.prototype.recycleAsyncId=function(e,n,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,e,n,i);e.actions.length===0&&(X_.Immediate.clearImmediate(n),e.scheduled=void 0)},t}(HC.AsyncAction);Wn.AsapAction=zC});var ed=h(Hn=>{"use strict";var YC=Hn&&Hn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Hn,"__esModule",{value:!0});var ZC=Dr(),KC=function(r){YC(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"AsapScheduler"),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var n=this.actions,i,o=-1,u=n.length;e=e||n.shift();do if(i=e.execute(e.state,e.delay))break;while(++o<u&&(e=n.shift()));if(this.active=!1,i){for(;++o<u&&(e=n.shift());)e.unsubscribe();throw i}},t}(ZC.AsyncScheduler);Hn.AsapScheduler=KC});var ic=h(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});var GC=J_(),QC=ed();zn.asapScheduler=new QC.AsapScheduler(GC.AsapAction);zn.asap=zn.asapScheduler});var ne=h(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});var $C=qr(),XC=Dr();Yn.asyncScheduler=new XC.AsyncScheduler($C.AsyncAction);Yn.async=Yn.asyncScheduler});var td=h(Zn=>{"use strict";var JC=Zn&&Zn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Zn,"__esModule",{value:!0});var eI=qr(),tI=function(r){JC(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i}return s(t,"AnimationFrameAction"),t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),i!==null&&i>0?r.prototype.requestAsyncId.call(this,e,n,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},t.prototype.recycleAsyncId=function(e,n,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,e,n,i);e.actions.length===0&&(cancelAnimationFrame(n),e.scheduled=void 0)},t}(eI.AsyncAction);Zn.AnimationFrameAction=tI});var rd=h(Kn=>{"use strict";var rI=Kn&&Kn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Kn,"__esModule",{value:!0});var nI=Dr(),iI=function(r){rI(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"AnimationFrameScheduler"),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var n=this.actions,i,o=-1,u=n.length;e=e||n.shift();do if(i=e.execute(e.state,e.delay))break;while(++o<u&&(e=n.shift()));if(this.active=!1,i){for(;++o<u&&(e=n.shift());)e.unsubscribe();throw i}},t}(nI.AsyncScheduler);Kn.AnimationFrameScheduler=iI});var nd=h(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});var oI=td(),sI=rd();Gn.animationFrameScheduler=new sI.AnimationFrameScheduler(oI.AnimationFrameAction);Gn.animationFrame=Gn.animationFrameScheduler});var sd=h(Mr=>{"use strict";var id=Mr&&Mr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Mr,"__esModule",{value:!0});var uI=qr(),aI=Dr(),cI=function(r){id(t,r);function t(e,n){e===void 0&&(e=od),n===void 0&&(n=Number.POSITIVE_INFINITY);var i=r.call(this,e,function(){return i.frame})||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return s(t,"VirtualTimeScheduler"),t.prototype.flush=function(){for(var e=this,n=e.actions,i=e.maxFrames,o,u;(u=n[0])&&u.delay<=i&&(n.shift(),this.frame=u.delay,!(o=u.execute(u.state,u.delay))););if(o){for(;u=n.shift();)u.unsubscribe();throw o}},t.frameTimeFactor=10,t}(aI.AsyncScheduler);Mr.VirtualTimeScheduler=cI;var od=function(r){id(t,r);function t(e,n,i){i===void 0&&(i=e.index+=1);var o=r.call(this,e,n)||this;return o.scheduler=e,o.work=n,o.index=i,o.active=!0,o.index=e.index=i,o}return s(t,"VirtualAction"),t.prototype.schedule=function(e,n){if(n===void 0&&(n=0),!this.id)return r.prototype.schedule.call(this,e,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(e,n)},t.prototype.requestAsyncId=function(e,n,i){i===void 0&&(i=0),this.delay=e.frame+i;var o=e.actions;return o.push(this),o.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,n,i){i===void 0&&(i=0)},t.prototype._execute=function(e,n){if(this.active===!0)return r.prototype._execute.call(this,e,n)},t.sortActions=function(e,n){return e.delay===n.delay?e.index===n.index?0:e.index>n.index?1:-1:e.delay>n.delay?1:-1},t}(uI.AsyncAction);Mr.VirtualAction=od});var ls=h(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});function lI(){}s(lI,"noop");oc.noop=lI});var ud=h(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});var fI=j();function hI(r){return!!r&&(r instanceof fI.Observable||typeof r.lift=="function"&&typeof r.subscribe=="function")}s(hI,"isObservable");sc.isObservable=hI});var kr=h(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});var pI=function(){function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return s(r,"ArgumentOutOfRangeErrorImpl"),r.prototype=Object.create(Error.prototype),r}();uc.ArgumentOutOfRangeError=pI});var Ur=h(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});var _I=function(){function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return s(r,"EmptyErrorImpl"),r.prototype=Object.create(Error.prototype),r}();ac.EmptyError=_I});var lc=h(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});var dI=function(){function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return s(r,"TimeoutErrorImpl"),r.prototype=Object.create(Error.prototype),r}();cc.TimeoutError=dI});var ye=h(Lr=>{"use strict";var vI=Lr&&Lr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Lr,"__esModule",{value:!0});var bI=w();function yI(r,t){return s(function(n){if(typeof r!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new ad(r,t))},"mapOperation")}s(yI,"map");Lr.map=yI;var ad=function(){function r(t,e){this.project=t,this.thisArg=e}return s(r,"MapOperator"),r.prototype.call=function(t,e){return e.subscribe(new mI(t,this.project,this.thisArg))},r}();Lr.MapOperator=ad;var mI=function(r){vI(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=i||o,o}return s(t,"MapSubscriber"),t.prototype._next=function(e){var n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(bI.Subscriber)});var fd=h(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});var OI=j(),cd=Vn(),gI=ye(),SI=Jo(),EI=re(),wI=qe();function ld(r,t,e){if(t)if(wI.isScheduler(t))e=t;else return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return ld(r,e).apply(void 0,n).pipe(gI.map(function(o){return EI.isArray(o)?t.apply(void 0,o):t(o)}))};return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=this,u,a={context:o,subject:u,callbackFunc:r,scheduler:e};return new OI.Observable(function(l){if(e){var f={args:n,subscriber:l,params:a};return e.schedule(TI,0,f)}else{if(!u){u=new cd.AsyncSubject;var c=s(function(){for(var p=[],_=0;_<arguments.length;_++)p[_]=arguments[_];u.next(p.length<=1?p[0]:p),u.complete()},"handler");try{r.apply(o,n.concat([c]))}catch(p){SI.canReportError(u)?u.error(p):console.warn(p)}}return u.subscribe(l)}})}}s(ld,"bindCallback");fc.bindCallback=ld;function TI(r){var t=this,e=this,n=r.args,i=r.subscriber,o=r.params,u=o.callbackFunc,a=o.context,l=o.scheduler,c=o.subject;if(!c){c=o.subject=new cd.AsyncSubject;var f=s(function(){for(var p=[],_=0;_<arguments.length;_++)p[_]=arguments[_];var m=p.length<=1?p[0]:p;t.add(l.schedule(PI,0,{value:m,subject:c}))},"handler");try{u.apply(a,n.concat([f]))}catch(p){c.error(p)}}this.add(c.subscribe(i))}s(TI,"dispatch");function PI(r){var t=r.value,e=r.subject;e.next(t),e.complete()}s(PI,"dispatchNext")});var dd=h(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});var CI=j(),pd=Vn(),II=ye(),RI=Jo(),AI=qe(),jI=re();function _d(r,t,e){if(t)if(AI.isScheduler(t))e=t;else return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return _d(r,e).apply(void 0,n).pipe(II.map(function(o){return jI.isArray(o)?t.apply(void 0,o):t(o)}))};return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o={subject:void 0,args:n,callbackFunc:r,scheduler:e,context:this};return new CI.Observable(function(u){var a=o.context,l=o.subject;if(e)return e.schedule(NI,0,{params:o,subscriber:u,context:a});if(!l){l=o.subject=new pd.AsyncSubject;var c=s(function(){for(var f=[],p=0;p<arguments.length;p++)f[p]=arguments[p];var _=f.shift();if(_){l.error(_);return}l.next(f.length<=1?f[0]:f),l.complete()},"handler");try{r.apply(a,n.concat([c]))}catch(f){RI.canReportError(l)?l.error(f):console.warn(f)}}return l.subscribe(u)})}}s(_d,"bindNodeCallback");hc.bindNodeCallback=_d;function NI(r){var t=this,e=r.params,n=r.subscriber,i=r.context,o=e.callbackFunc,u=e.args,a=e.scheduler,l=e.subject;if(!l){l=e.subject=new pd.AsyncSubject;var c=s(function(){for(var f=[],p=0;p<arguments.length;p++)f[p]=arguments[p];var _=f.shift();if(_)t.add(a.schedule(hd,0,{err:_,subject:l}));else{var m=f.length<=1?f[0]:f;t.add(a.schedule(qI,0,{value:m,subject:l}))}},"handler");try{o.apply(i,u.concat([c]))}catch(f){this.add(a.schedule(hd,0,{err:f,subject:l}))}}this.add(l.subscribe(n))}s(NI,"dispatch");function qI(r){var t=r.value,e=r.subject;e.next(t),e.complete()}s(qI,"dispatchNext");function hd(r){var t=r.err,e=r.subject;e.error(t)}s(hd,"dispatchError")});var yt=h(Qn=>{"use strict";var DI=Qn&&Qn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Qn,"__esModule",{value:!0});var xI=w(),MI=function(r){DI(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"OuterSubscriber"),t.prototype.notifyNext=function(e,n,i,o,u){this.destination.next(n)},t.prototype.notifyError=function(e,n){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(xI.Subscriber);Qn.OuterSubscriber=MI});var vd=h($n=>{"use strict";var kI=$n&&$n.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty($n,"__esModule",{value:!0});var UI=w(),LI=function(r){kI(t,r);function t(e,n,i){var o=r.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=i,o.index=0,o}return s(t,"InnerSubscriber"),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(UI.Subscriber);$n.InnerSubscriber=LI});var bd=h(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});var FI=Ko();pc.subscribeToPromise=function(r){return function(t){return r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,FI.hostReportError),t}}});var Br=h(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});function yd(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}s(yd,"getSymbolIterator");Fr.getSymbolIterator=yd;Fr.iterator=yd();Fr.$$iterator=Fr.iterator});var md=h(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});var BI=Br();_c.subscribeToIterable=function(r){return function(t){var e=r[BI.iterator]();do{var n=void 0;try{n=e.next()}catch(i){return t.error(i),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}while(!0);return typeof e.return=="function"&&t.add(function(){e.return&&e.return()}),t}}});var Od=h(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});var VI=Mt();dc.subscribeToObservable=function(r){return function(t){var e=r[VI.observable]();if(typeof e.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}}});var bc=h(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.isArrayLike=function(r){return r&&typeof r.length=="number"&&typeof r!="function"}});var mc=h(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});function WI(r){return!!r&&typeof r.subscribe!="function"&&typeof r.then=="function"}s(WI,"isPromise");yc.isPromise=WI});var Xn=h(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});var HI=$a(),zI=bd(),YI=md(),ZI=Od(),KI=bc(),GI=mc(),QI=Go(),$I=Br(),XI=Mt();Oc.subscribeTo=function(r){if(r&&typeof r[XI.observable]=="function")return ZI.subscribeToObservable(r);if(KI.isArrayLike(r))return HI.subscribeToArray(r);if(GI.isPromise(r))return zI.subscribeToPromise(r);if(r&&typeof r[$I.iterator]=="function")return YI.subscribeToIterable(r);var t=QI.isObject(r)?"an invalid object":"'"+r+"'",e="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(e)}});var mt=h(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});var JI=vd(),e1=Xn(),t1=j();function r1(r,t,e,n,i){if(i===void 0&&(i=new JI.InnerSubscriber(r,e,n)),!i.closed)return t instanceof t1.Observable?t.subscribe(i):e1.subscribeTo(t)(i)}s(r1,"subscribeToResult");gc.subscribeToResult=r1});var fs=h(Ut=>{"use strict";var n1=Ut&&Ut.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ut,"__esModule",{value:!0});var i1=qe(),o1=re(),s1=yt(),u1=mt(),a1=xr(),gd={};function c1(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=void 0,n=void 0;return i1.isScheduler(r[r.length-1])&&(n=r.pop()),typeof r[r.length-1]=="function"&&(e=r.pop()),r.length===1&&o1.isArray(r[0])&&(r=r[0]),a1.fromArray(r,n).lift(new Sd(e))}s(c1,"combineLatest");Ut.combineLatest=c1;var Sd=function(){function r(t){this.resultSelector=t}return s(r,"CombineLatestOperator"),r.prototype.call=function(t,e){return e.subscribe(new Ed(t,this.resultSelector))},r}();Ut.CombineLatestOperator=Sd;var Ed=function(r){n1(t,r);function t(e,n){var i=r.call(this,e)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return s(t,"CombineLatestSubscriber"),t.prototype._next=function(e){this.values.push(gd),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,n=e.length;if(n===0)this.destination.complete();else{this.active=n,this.toRespond=n;for(var i=0;i<n;i++){var o=e[i];this.add(u1.subscribeToResult(this,o,void 0,i))}}},t.prototype.notifyComplete=function(e){(this.active-=1)===0&&this.destination.complete()},t.prototype.notifyNext=function(e,n,i){var o=this.values,u=o[i],a=this.toRespond?u===gd?--this.toRespond:this.toRespond:0;o[i]=n,a===0&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var n;try{n=this.resultSelector.apply(this,e)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(s1.OuterSubscriber);Ut.CombineLatestSubscriber=Ed});var wd=h(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});var l1=j(),f1=G(),h1=Mt();function p1(r,t){return new l1.Observable(function(e){var n=new f1.Subscription;return n.add(t.schedule(function(){var i=r[h1.observable]();n.add(i.subscribe({next:function(o){n.add(t.schedule(function(){return e.next(o)}))},error:function(o){n.add(t.schedule(function(){return e.error(o)}))},complete:function(){n.add(t.schedule(function(){return e.complete()}))}}))})),n})}s(p1,"scheduleObservable");Sc.scheduleObservable=p1});var Td=h(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});var _1=j(),d1=G();function v1(r,t){return new _1.Observable(function(e){var n=new d1.Subscription;return n.add(t.schedule(function(){return r.then(function(i){n.add(t.schedule(function(){e.next(i),n.add(t.schedule(function(){return e.complete()}))}))},function(i){n.add(t.schedule(function(){return e.error(i)}))})})),n})}s(v1,"schedulePromise");Ec.schedulePromise=v1});var Pd=h(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});var b1=j(),y1=G(),m1=Br();function O1(r,t){if(!r)throw new Error("Iterable cannot be null");return new b1.Observable(function(e){var n=new y1.Subscription,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(t.schedule(function(){i=r[m1.iterator](),n.add(t.schedule(function(){if(!e.closed){var o,u;try{var a=i.next();o=a.value,u=a.done}catch(l){e.error(l);return}u?e.complete():(e.next(o),this.schedule())}}))})),n})}s(O1,"scheduleIterable");wc.scheduleIterable=O1});var Cd=h(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});var g1=Mt();function S1(r){return r&&typeof r[g1.observable]=="function"}s(S1,"isInteropObservable");Tc.isInteropObservable=S1});var Id=h(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});var E1=Br();function w1(r){return r&&typeof r[E1.iterator]=="function"}s(w1,"isIterable");Pc.isIterable=w1});var Ic=h(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});var T1=wd(),P1=Td(),C1=os(),I1=Pd(),R1=Cd(),A1=mc(),j1=bc(),N1=Id();function q1(r,t){if(r!=null){if(R1.isInteropObservable(r))return T1.scheduleObservable(r,t);if(A1.isPromise(r))return P1.schedulePromise(r,t);if(j1.isArrayLike(r))return C1.scheduleArray(r,t);if(N1.isIterable(r)||typeof r=="string")return I1.scheduleIterable(r,t)}throw new TypeError((r!==null&&typeof r||r)+" is not observable")}s(q1,"scheduled");Cc.scheduled=q1});var De=h(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});var Rd=j(),D1=Xn(),x1=Ic();function M1(r,t){return t?x1.scheduled(r,t):r instanceof Rd.Observable?r:new Rd.Observable(D1.subscribeTo(r))}s(M1,"from");Rc.from=M1});var F=h(et=>{"use strict";var hs=et&&et.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(et,"__esModule",{value:!0});var ps=w(),k1=j(),U1=Xn(),L1=function(r){hs(t,r);function t(e){var n=r.call(this)||this;return n.parent=e,n}return s(t,"SimpleInnerSubscriber"),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(ps.Subscriber);et.SimpleInnerSubscriber=L1;var F1=function(r){hs(t,r);function t(e,n,i){var o=r.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=i,o}return s(t,"ComplexInnerSubscriber"),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(ps.Subscriber);et.ComplexInnerSubscriber=F1;var B1=function(r){hs(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"SimpleOuterSubscriber"),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(ps.Subscriber);et.SimpleOuterSubscriber=B1;var V1=function(r){hs(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"ComplexOuterSubscriber"),t.prototype.notifyNext=function(e,n,i,o){this.destination.next(n)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(ps.Subscriber);et.ComplexOuterSubscriber=V1;function W1(r,t){if(!t.closed){if(r instanceof k1.Observable)return r.subscribe(t);var e;try{e=U1.subscribeTo(r)(t)}catch(n){t.error(n)}return e}}s(W1,"innerSubscribe");et.innerSubscribe=W1});var Jn=h(Ot=>{"use strict";var H1=Ot&&Ot.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ot,"__esModule",{value:!0});var z1=ye(),Y1=De(),Ac=F();function jc(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),typeof t=="function"?function(n){return n.pipe(jc(function(i,o){return Y1.from(r(i,o)).pipe(z1.map(function(u,a){return t(i,u,o,a)}))},e))}:(typeof t=="number"&&(e=t),function(n){return n.lift(new Ad(r,e))})}s(jc,"mergeMap");Ot.mergeMap=jc;var Ad=function(){function r(t,e){e===void 0&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return s(r,"MergeMapOperator"),r.prototype.call=function(t,e){return e.subscribe(new jd(t,this.project,this.concurrent))},r}();Ot.MergeMapOperator=Ad;var jd=function(r){H1(t,r);function t(e,n,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var o=r.call(this,e)||this;return o.project=n,o.concurrent=i,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return s(t,"MergeMapSubscriber"),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var n,i=this.index++;try{n=this.project(e,i)}catch(o){this.destination.error(o);return}this.active++,this._innerSub(n)},t.prototype._innerSub=function(e){var n=new Ac.SimpleInnerSubscriber(this),i=this.destination;i.add(n);var o=Ac.innerSubscribe(e,n);o!==n&&i.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},t}(Ac.SimpleOuterSubscriber);Ot.MergeMapSubscriber=jd;Ot.flatMap=jc});var _s=h(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});var Z1=Jn(),K1=vt();function G1(r){return r===void 0&&(r=Number.POSITIVE_INFINITY),Z1.mergeMap(K1.identity,r)}s(G1,"mergeAll");Nc.mergeAll=G1});var Dc=h(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});var Q1=_s();function $1(){return Q1.mergeAll(1)}s($1,"concatAll");qc.concatAll=$1});var ei=h(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});var X1=kn(),J1=Dc();function eR(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return J1.concatAll()(X1.of.apply(void 0,r))}s(eR,"concat");xc.concat=eR});var ds=h(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});var tR=j(),rR=De(),nR=Ne();function iR(r){return new tR.Observable(function(t){var e;try{e=r()}catch(i){t.error(i);return}var n=e?rR.from(e):nR.empty();return n.subscribe(t)})}s(iR,"defer");Mc.defer=iR});var qd=h(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});var oR=j(),Nd=re(),sR=ye(),uR=Go(),aR=De();function cR(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1){var e=r[0];if(Nd.isArray(e))return vs(e,null);if(uR.isObject(e)&&Object.getPrototypeOf(e)===Object.prototype){var n=Object.keys(e);return vs(n.map(function(o){return e[o]}),n)}}if(typeof r[r.length-1]=="function"){var i=r.pop();return r=r.length===1&&Nd.isArray(r[0])?r[0]:r,vs(r,null).pipe(sR.map(function(o){return i.apply(void 0,o)}))}return vs(r,null)}s(cR,"forkJoin");kc.forkJoin=cR;function vs(r,t){return new oR.Observable(function(e){var n=r.length;if(n===0){e.complete();return}for(var i=new Array(n),o=0,u=0,a=s(function(c){var f=aR.from(r[c]),p=!1;e.add(f.subscribe({next:function(_){p||(p=!0,u++),i[c]=_},error:function(_){return e.error(_)},complete:function(){o++,(o===n||!p)&&(u===n&&e.next(t?t.reduce(function(_,m,g){return _[m]=i[g],_},{}):i),e.complete())}}))},"_loop_1"),l=0;l<n;l++)a(l)})}s(vs,"forkJoinInternal")});var Md=h(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});var lR=j(),fR=re(),hR=Ir(),pR=ye();function Dd(r,t,e,n){return hR.isFunction(e)&&(n=e,e=void 0),n?Dd(r,t,e).pipe(pR.map(function(i){return fR.isArray(i)?n.apply(void 0,i):n(i)})):new lR.Observable(function(i){function o(u){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(u)}s(o,"handler"),xd(r,t,o,i,e)})}s(Dd,"fromEvent");Uc.fromEvent=Dd;function xd(r,t,e,n,i){var o;if(vR(r)){var u=r;r.addEventListener(t,e,i),o=s(function(){return u.removeEventListener(t,e,i)},"unsubscribe")}else if(dR(r)){var a=r;r.on(t,e),o=s(function(){return a.off(t,e)},"unsubscribe")}else if(_R(r)){var l=r;r.addListener(t,e),o=s(function(){return l.removeListener(t,e)},"unsubscribe")}else if(r&&r.length)for(var c=0,f=r.length;c<f;c++)xd(r[c],t,e,n,i);else throw new TypeError("Invalid event target");n.add(o)}s(xd,"setupSubscription");function _R(r){return r&&typeof r.addListener=="function"&&typeof r.removeListener=="function"}s(_R,"isNodeStyleEventEmitter");function dR(r){return r&&typeof r.on=="function"&&typeof r.off=="function"}s(dR,"isJQueryStyleEventEmitter");function vR(r){return r&&typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}s(vR,"isEventTarget")});var Ud=h(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});var bR=j(),yR=re(),mR=Ir(),OR=ye();function kd(r,t,e){return e?kd(r,t).pipe(OR.map(function(n){return yR.isArray(n)?e.apply(void 0,n):e(n)})):new bR.Observable(function(n){var i=s(function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];return n.next(u.length===1?u[0]:u)},"handler"),o;try{o=r(i)}catch(u){n.error(u);return}if(mR.isFunction(t))return function(){return t(i,o)}})}s(kd,"fromEventPattern");Lc.fromEventPattern=kd});var Fd=h(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});var gR=j(),Ld=vt(),SR=qe();function ER(r,t,e,n,i){var o,u;if(arguments.length==1){var a=r;u=a.initialState,t=a.condition,e=a.iterate,o=a.resultSelector||Ld.identity,i=a.scheduler}else n===void 0||SR.isScheduler(n)?(u=r,o=Ld.identity,i=n):(u=r,o=n);return new gR.Observable(function(l){var c=u;if(i)return i.schedule(wR,0,{subscriber:l,iterate:e,condition:t,resultSelector:o,state:c});do{if(t){var f=void 0;try{f=t(c)}catch(_){l.error(_);return}if(!f){l.complete();break}}var p=void 0;try{p=o(c)}catch(_){l.error(_);return}if(l.next(p),l.closed)break;try{c=e(c)}catch(_){l.error(_);return}}while(!0)})}s(ER,"generate");Fc.generate=ER;function wR(r){var t=r.subscriber,e=r.condition;if(!t.closed){if(r.needIterate)try{r.state=r.iterate(r.state)}catch(o){t.error(o);return}else r.needIterate=!0;if(e){var n=void 0;try{n=e(r.state)}catch(o){t.error(o);return}if(!n){t.complete();return}if(t.closed)return}var i;try{i=r.resultSelector(r.state)}catch(o){t.error(o);return}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(r)}}s(wR,"dispatch")});var Vd=h(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});var TR=ds(),Bd=Ne();function PR(r,t,e){return t===void 0&&(t=Bd.EMPTY),e===void 0&&(e=Bd.EMPTY),TR.defer(function(){return r()?t:e})}s(PR,"iif");Bc.iif=PR});var ti=h(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});var CR=re();function IR(r){return!CR.isArray(r)&&r-parseFloat(r)+1>=0}s(IR,"isNumeric");Vc.isNumeric=IR});var Hd=h(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});var RR=j(),Wd=ne(),AR=ti();function jR(r,t){return r===void 0&&(r=0),t===void 0&&(t=Wd.async),(!AR.isNumeric(r)||r<0)&&(r=0),(!t||typeof t.schedule!="function")&&(t=Wd.async),new RR.Observable(function(e){return e.add(t.schedule(NR,r,{subscriber:e,counter:0,period:r})),e})}s(jR,"interval");Wc.interval=jR;function NR(r){var t=r.subscriber,e=r.counter,n=r.period;t.next(e),this.schedule({subscriber:t,counter:e+1,period:n},n)}s(NR,"dispatch")});var zc=h(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});var qR=j(),DR=qe(),xR=_s(),MR=xr();function kR(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=Number.POSITIVE_INFINITY,n=null,i=r[r.length-1];return DR.isScheduler(i)?(n=r.pop(),r.length>1&&typeof r[r.length-1]=="number"&&(e=r.pop())):typeof i=="number"&&(e=r.pop()),n===null&&r.length===1&&r[0]instanceof qR.Observable?r[0]:xR.mergeAll(e)(MR.fromArray(r,n))}s(kR,"merge");Hc.merge=kR});var Yc=h(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});var UR=j(),LR=ls();ri.NEVER=new UR.Observable(LR.noop);function FR(){return ri.NEVER}s(FR,"never");ri.never=FR});var zd=h(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});var BR=j(),VR=De(),WR=re(),HR=Ne();function Zc(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===0)return HR.EMPTY;var e=r[0],n=r.slice(1);return r.length===1&&WR.isArray(e)?Zc.apply(void 0,e):new BR.Observable(function(i){var o=s(function(){return i.add(Zc.apply(void 0,n).subscribe(i))},"subNext");return VR.from(e).subscribe({next:function(u){i.next(u)},error:o,complete:o})})}s(Zc,"onErrorResumeNext");Kc.onErrorResumeNext=Zc});var Kd=h(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});var Yd=j(),zR=G();function YR(r,t){return t?new Yd.Observable(function(e){var n=Object.keys(r),i=new zR.Subscription;return i.add(t.schedule(Zd,0,{keys:n,index:0,subscriber:e,subscription:i,obj:r})),i}):new Yd.Observable(function(e){for(var n=Object.keys(r),i=0;i<n.length&&!e.closed;i++){var o=n[i];r.hasOwnProperty(o)&&e.next([o,r[o]])}e.complete()})}s(YR,"pairs");bs.pairs=YR;function Zd(r){var t=r.keys,e=r.index,n=r.subscriber,i=r.subscription,o=r.obj;if(!n.closed)if(e<t.length){var u=t[e];n.next([u,o[u]]),i.add(this.schedule({keys:t,index:e+1,subscriber:n,subscription:i,obj:o}))}else n.complete()}s(Zd,"dispatch");bs.dispatch=Zd});var Qc=h(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});function ZR(r,t){function e(){return!e.pred.apply(e.thisArg,arguments)}return s(e,"notPred"),e.pred=r,e.thisArg=t,e}s(ZR,"not");Gc.not=ZR});var Lt=h(ni=>{"use strict";var KR=ni&&ni.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ni,"__esModule",{value:!0});var GR=w();function QR(r,t){return s(function(n){return n.lift(new $R(r,t))},"filterOperatorFunction")}s(QR,"filter");ni.filter=QR;var $R=function(){function r(t,e){this.predicate=t,this.thisArg=e}return s(r,"FilterOperator"),r.prototype.call=function(t,e){return e.subscribe(new XR(t,this.predicate,this.thisArg))},r}(),XR=function(r){KR(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.predicate=n,o.thisArg=i,o.count=0,o}return s(t,"FilterSubscriber"),t.prototype._next=function(e){var n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(i){this.destination.error(i);return}n&&this.destination.next(e)},t}(GR.Subscriber)});var Xd=h($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});var JR=Qc(),Gd=Xn(),Qd=Lt(),$d=j();function eA(r,t,e){return[Qd.filter(t,e)(new $d.Observable(Gd.subscribeTo(r))),Qd.filter(JR.not(t,e))(new $d.Observable(Gd.subscribeTo(r)))]}s(eA,"partition");$c.partition=eA});var Xc=h(Ft=>{"use strict";var tA=Ft&&Ft.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ft,"__esModule",{value:!0});var rA=re(),nA=xr(),iA=yt(),oA=mt();function sA(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1)if(rA.isArray(r[0]))r=r[0];else return r[0];return nA.fromArray(r,void 0).lift(new Jd)}s(sA,"race");Ft.race=sA;var Jd=function(){function r(){}return s(r,"RaceOperator"),r.prototype.call=function(t,e){return e.subscribe(new ev(t))},r}();Ft.RaceOperator=Jd;var ev=function(r){tA(t,r);function t(e){var n=r.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return s(t,"RaceSubscriber"),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,n=e.length;if(n===0)this.destination.complete();else{for(var i=0;i<n&&!this.hasFirst;i++){var o=e[i],u=oA.subscribeToResult(this,o,void 0,i);this.subscriptions&&this.subscriptions.push(u),this.add(u)}this.observables=null}},t.prototype.notifyNext=function(e,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==i){var u=this.subscriptions[o];u.unsubscribe(),this.remove(u)}this.subscriptions=null}this.destination.next(n)},t}(iA.OuterSubscriber);Ft.RaceSubscriber=ev});var rv=h(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});var uA=j();function aA(r,t,e){return r===void 0&&(r=0),new uA.Observable(function(n){t===void 0&&(t=r,r=0);var i=0,o=r;if(e)return e.schedule(tv,0,{index:i,count:t,start:r,subscriber:n});do{if(i++>=t){n.complete();break}if(n.next(o++),n.closed)break}while(!0)})}s(aA,"range");ys.range=aA;function tv(r){var t=r.start,e=r.index,n=r.count,i=r.subscriber;if(e>=n){i.complete();return}i.next(t),!i.closed&&(r.index=e+1,r.start=t+1,this.schedule(r))}s(tv,"dispatch");ys.dispatch=tv});var el=h(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});var cA=j(),lA=ne(),nv=ti(),iv=qe();function fA(r,t,e){r===void 0&&(r=0);var n=-1;return nv.isNumeric(t)?n=Number(t)<1&&1||Number(t):iv.isScheduler(t)&&(e=t),iv.isScheduler(e)||(e=lA.async),new cA.Observable(function(i){var o=nv.isNumeric(r)?r:+r-e.now();return e.schedule(hA,o,{index:0,period:n,subscriber:i})})}s(fA,"timer");Jc.timer=fA;function hA(r){var t=r.index,e=r.period,n=r.subscriber;if(n.next(t),!n.closed){if(e===-1)return n.complete();r.index=t+1,this.schedule(r,e)}}s(hA,"dispatch")});var ov=h(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});var pA=j(),_A=De(),dA=Ne();function vA(r,t){return new pA.Observable(function(e){var n;try{n=r()}catch(a){e.error(a);return}var i;try{i=t(n)}catch(a){e.error(a);return}var o=i?_A.from(i):dA.EMPTY,u=o.subscribe(e);return function(){u.unsubscribe(),n&&n.unsubscribe()}})}s(vA,"using");tl.using=vA});var Os=h(Bt=>{"use strict";var sv=Bt&&Bt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Bt,"__esModule",{value:!0});var bA=xr(),yA=re(),mA=w(),ms=Br(),rl=F();function OA(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return typeof e=="function"&&r.pop(),bA.fromArray(r,void 0).lift(new uv(e))}s(OA,"zip");Bt.zip=OA;var uv=function(){function r(t){this.resultSelector=t}return s(r,"ZipOperator"),r.prototype.call=function(t,e){return e.subscribe(new av(t,this.resultSelector))},r}();Bt.ZipOperator=uv;var av=function(r){sv(t,r);function t(e,n,i){i===void 0&&(i=Object.create(null));var o=r.call(this,e)||this;return o.resultSelector=n,o.iterators=[],o.active=0,o.resultSelector=typeof n=="function"?n:void 0,o}return s(t,"ZipSubscriber"),t.prototype._next=function(e){var n=this.iterators;yA.isArray(e)?n.push(new SA(e)):typeof e[ms.iterator]=="function"?n.push(new gA(e[ms.iterator]())):n.push(new EA(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,n=e.length;if(this.unsubscribe(),n===0){this.destination.complete();return}this.active=n;for(var i=0;i<n;i++){var o=e[i];if(o.stillUnsubscribed){var u=this.destination;u.add(o.subscribe())}else this.active--}},t.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,n=e.length,i=this.destination,o=0;o<n;o++){var u=e[o];if(typeof u.hasValue=="function"&&!u.hasValue())return}for(var a=!1,l=[],o=0;o<n;o++){var u=e[o],c=u.next();if(u.hasCompleted()&&(a=!0),c.done){i.complete();return}l.push(c.value)}this.resultSelector?this._tryresultSelector(l):i.next(l),a&&i.complete()},t.prototype._tryresultSelector=function(e){var n;try{n=this.resultSelector.apply(this,e)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(mA.Subscriber);Bt.ZipSubscriber=av;var gA=function(){function r(t){this.iterator=t,this.nextResult=t.next()}return s(r,"StaticIterator"),r.prototype.hasValue=function(){return!0},r.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},r.prototype.hasCompleted=function(){var t=this.nextResult;return!!(t&&t.done)},r}(),SA=function(){function r(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return s(r,"StaticArrayIterator"),r.prototype[ms.iterator]=function(){return this},r.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},r.prototype.hasValue=function(){return this.array.length>this.index},r.prototype.hasCompleted=function(){return this.array.length===this.index},r}(),EA=function(r){sv(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.parent=n,o.observable=i,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return s(t,"ZipBufferIterator"),t.prototype[ms.iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return e.length===0&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return rl.innerSubscribe(this.observable,new rl.SimpleInnerSubscriber(this))},t}(rl.SimpleOuterSubscriber)});var ii=h(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});var wA=j();O.Observable=wA.Observable;var TA=Va();O.ConnectableObservable=TA.ConnectableObservable;var PA=Ha();O.GroupedObservable=PA.GroupedObservable;var CA=Mt();O.observable=CA.observable;var IA=J();O.Subject=IA.Subject;var RA=za();O.BehaviorSubject=RA.BehaviorSubject;var AA=us();O.ReplaySubject=AA.ReplaySubject;var jA=Vn();O.AsyncSubject=jA.AsyncSubject;var cv=ic();O.asap=cv.asap;O.asapScheduler=cv.asapScheduler;var lv=ne();O.async=lv.async;O.asyncScheduler=lv.asyncScheduler;var fv=Ka();O.queue=fv.queue;O.queueScheduler=fv.queueScheduler;var hv=nd();O.animationFrame=hv.animationFrame;O.animationFrameScheduler=hv.animationFrameScheduler;var pv=sd();O.VirtualTimeScheduler=pv.VirtualTimeScheduler;O.VirtualAction=pv.VirtualAction;var NA=Za();O.Scheduler=NA.Scheduler;var qA=G();O.Subscription=qA.Subscription;var DA=w();O.Subscriber=DA.Subscriber;var _v=Ln();O.Notification=_v.Notification;O.NotificationKind=_v.NotificationKind;var xA=ts();O.pipe=xA.pipe;var MA=ls();O.noop=MA.noop;var kA=vt();O.identity=kA.identity;var UA=ud();O.isObservable=UA.isObservable;var LA=kr();O.ArgumentOutOfRangeError=LA.ArgumentOutOfRangeError;var FA=Ur();O.EmptyError=FA.EmptyError;var BA=Tn();O.ObjectUnsubscribedError=BA.ObjectUnsubscribedError;var VA=Pa();O.UnsubscriptionError=VA.UnsubscriptionError;var WA=lc();O.TimeoutError=WA.TimeoutError;var HA=fd();O.bindCallback=HA.bindCallback;var zA=dd();O.bindNodeCallback=zA.bindNodeCallback;var YA=fs();O.combineLatest=YA.combineLatest;var ZA=ei();O.concat=ZA.concat;var KA=ds();O.defer=KA.defer;var GA=Ne();O.empty=GA.empty;var QA=qd();O.forkJoin=QA.forkJoin;var $A=De();O.from=$A.from;var XA=Md();O.fromEvent=XA.fromEvent;var JA=Ud();O.fromEventPattern=JA.fromEventPattern;var ej=Fd();O.generate=ej.generate;var tj=Vd();O.iif=tj.iif;var rj=Hd();O.interval=rj.interval;var nj=zc();O.merge=nj.merge;var ij=Yc();O.never=ij.never;var oj=kn();O.of=oj.of;var sj=zd();O.onErrorResumeNext=sj.onErrorResumeNext;var uj=Kd();O.pairs=uj.pairs;var aj=Xd();O.partition=aj.partition;var cj=Xc();O.race=cj.race;var lj=rv();O.range=lj.range;var fj=ss();O.throwError=fj.throwError;var hj=el();O.timer=hj.timer;var pj=ov();O.using=pj.using;var _j=Os();O.zip=_j.zip;var dj=Ic();O.scheduled=dj.scheduled;var vj=Ne();O.EMPTY=vj.EMPTY;var bj=Yc();O.NEVER=bj.NEVER;var yj=En();O.config=yj.config});var il=h(oi=>{"use strict";var mj=oi&&oi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(oi,"__esModule",{value:!0});var nl=F();function Oj(r){return s(function(e){return e.lift(new gj(r))},"auditOperatorFunction")}s(Oj,"audit");oi.audit=Oj;var gj=function(){function r(t){this.durationSelector=t}return s(r,"AuditOperator"),r.prototype.call=function(t,e){return e.subscribe(new Sj(t,this.durationSelector))},r}(),Sj=function(r){mj(t,r);function t(e,n){var i=r.call(this,e)||this;return i.durationSelector=n,i.hasValue=!1,i}return s(t,"AuditSubscriber"),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var n=void 0;try{var i=this.durationSelector;n=i(e)}catch(u){return this.destination.error(u)}var o=nl.innerSubscribe(n,new nl.SimpleInnerSubscriber(this));!o||o.closed?this.clearThrottle():this.add(this.throttled=o)}},t.prototype.clearThrottle=function(){var e=this,n=e.value,i=e.hasValue,o=e.throttled;o&&(this.remove(o),this.throttled=void 0,o.unsubscribe()),i&&(this.value=void 0,this.hasValue=!1,this.destination.next(n))},t.prototype.notifyNext=function(){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(nl.SimpleOuterSubscriber)});var dv=h(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});var Ej=ne(),wj=il(),Tj=el();function Pj(r,t){return t===void 0&&(t=Ej.async),wj.audit(function(){return Tj.timer(r,t)})}s(Pj,"auditTime");ol.auditTime=Pj});var vv=h(si=>{"use strict";var Cj=si&&si.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(si,"__esModule",{value:!0});var sl=F();function Ij(r){return s(function(e){return e.lift(new Rj(r))},"bufferOperatorFunction")}s(Ij,"buffer");si.buffer=Ij;var Rj=function(){function r(t){this.closingNotifier=t}return s(r,"BufferOperator"),r.prototype.call=function(t,e){return e.subscribe(new Aj(t,this.closingNotifier))},r}(),Aj=function(r){Cj(t,r);function t(e,n){var i=r.call(this,e)||this;return i.buffer=[],i.add(sl.innerSubscribe(n,new sl.SimpleInnerSubscriber(i))),i}return s(t,"BufferSubscriber"),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(){var e=this.buffer;this.buffer=[],this.destination.next(e)},t}(sl.SimpleOuterSubscriber)});var mv=h(ui=>{"use strict";var bv=ui&&ui.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ui,"__esModule",{value:!0});var yv=w();function jj(r,t){return t===void 0&&(t=null),s(function(n){return n.lift(new Nj(r,t))},"bufferCountOperatorFunction")}s(jj,"bufferCount");ui.bufferCount=jj;var Nj=function(){function r(t,e){this.bufferSize=t,this.startBufferEvery=e,!e||t===e?this.subscriberClass=qj:this.subscriberClass=Dj}return s(r,"BufferCountOperator"),r.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},r}(),qj=function(r){bv(t,r);function t(e,n){var i=r.call(this,e)||this;return i.bufferSize=n,i.buffer=[],i}return s(t,"BufferCountSubscriber"),t.prototype._next=function(e){var n=this.buffer;n.push(e),n.length==this.bufferSize&&(this.destination.next(n),this.buffer=[])},t.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),r.prototype._complete.call(this)},t}(yv.Subscriber),Dj=function(r){bv(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.bufferSize=n,o.startBufferEvery=i,o.buffers=[],o.count=0,o}return s(t,"BufferSkipCountSubscriber"),t.prototype._next=function(e){var n=this,i=n.bufferSize,o=n.startBufferEvery,u=n.buffers,a=n.count;this.count++,a%o===0&&u.push([]);for(var l=u.length;l--;){var c=u[l];c.push(e),c.length===i&&(u.splice(l,1),this.destination.next(c))}},t.prototype._complete=function(){for(var e=this,n=e.buffers,i=e.destination;n.length>0;){var o=n.shift();o.length>0&&i.next(o)}r.prototype._complete.call(this)},t}(yv.Subscriber)});var Sv=h(ai=>{"use strict";var xj=ai&&ai.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ai,"__esModule",{value:!0});var Mj=ne(),kj=w(),Uj=qe();function Lj(r){var t=arguments.length,e=Mj.async;Uj.isScheduler(arguments[arguments.length-1])&&(e=arguments[arguments.length-1],t--);var n=null;t>=2&&(n=arguments[1]);var i=Number.POSITIVE_INFINITY;return t>=3&&(i=arguments[2]),s(function(u){return u.lift(new Fj(r,n,i,e))},"bufferTimeOperatorFunction")}s(Lj,"bufferTime");ai.bufferTime=Lj;var Fj=function(){function r(t,e,n,i){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=i}return s(r,"BufferTimeOperator"),r.prototype.call=function(t,e){return e.subscribe(new Vj(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},r}(),Bj=function(){function r(){this.buffer=[]}return s(r,"Context"),r}(),Vj=function(r){xj(t,r);function t(e,n,i,o,u){var a=r.call(this,e)||this;a.bufferTimeSpan=n,a.bufferCreationInterval=i,a.maxBufferSize=o,a.scheduler=u,a.contexts=[];var l=a.openContext();if(a.timespanOnly=i==null||i<0,a.timespanOnly){var c={subscriber:a,context:l,bufferTimeSpan:n};a.add(l.closeAction=u.schedule(Ov,n,c))}else{var f={subscriber:a,context:l},p={bufferTimeSpan:n,bufferCreationInterval:i,subscriber:a,scheduler:u};a.add(l.closeAction=u.schedule(gv,n,f)),a.add(u.schedule(Wj,i,p))}return a}return s(t,"BufferTimeSubscriber"),t.prototype._next=function(e){for(var n=this.contexts,i=n.length,o,u=0;u<i;u++){var a=n[u],l=a.buffer;l.push(e),l.length==this.maxBufferSize&&(o=a)}o&&this.onBufferFull(o)},t.prototype._error=function(e){this.contexts.length=0,r.prototype._error.call(this,e)},t.prototype._complete=function(){for(var e=this,n=e.contexts,i=e.destination;n.length>0;){var o=n.shift();i.next(o.buffer)}r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var n=e.closeAction;if(n.unsubscribe(),this.remove(n),!this.closed&&this.timespanOnly){e=this.openContext();var i=this.bufferTimeSpan,o={subscriber:this,context:e,bufferTimeSpan:i};this.add(e.closeAction=this.scheduler.schedule(Ov,i,o))}},t.prototype.openContext=function(){var e=new Bj;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var n=this.contexts,i=n?n.indexOf(e):-1;i>=0&&n.splice(n.indexOf(e),1)},t}(kj.Subscriber);function Ov(r){var t=r.subscriber,e=r.context;e&&t.closeContext(e),t.closed||(r.context=t.openContext(),r.context.closeAction=this.schedule(r,r.bufferTimeSpan))}s(Ov,"dispatchBufferTimeSpanOnly");function Wj(r){var t=r.bufferCreationInterval,e=r.bufferTimeSpan,n=r.subscriber,i=r.scheduler,o=n.openContext(),u=this;n.closed||(n.add(o.closeAction=i.schedule(gv,e,{subscriber:n,context:o})),u.schedule(r,t))}s(Wj,"dispatchBufferCreation");function gv(r){var t=r.subscriber,e=r.context;t.closeContext(e)}s(gv,"dispatchBufferClose")});var wv=h(ci=>{"use strict";var Hj=ci&&ci.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ci,"__esModule",{value:!0});var zj=G(),Ev=mt(),Yj=yt();function Zj(r,t){return s(function(n){return n.lift(new Kj(r,t))},"bufferToggleOperatorFunction")}s(Zj,"bufferToggle");ci.bufferToggle=Zj;var Kj=function(){function r(t,e){this.openings=t,this.closingSelector=e}return s(r,"BufferToggleOperator"),r.prototype.call=function(t,e){return e.subscribe(new Gj(t,this.openings,this.closingSelector))},r}(),Gj=function(r){Hj(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.closingSelector=i,o.contexts=[],o.add(Ev.subscribeToResult(o,n)),o}return s(t,"BufferToggleSubscriber"),t.prototype._next=function(e){for(var n=this.contexts,i=n.length,o=0;o<i;o++)n[o].buffer.push(e)},t.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var i=n.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,r.prototype._error.call(this,e)},t.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,r.prototype._complete.call(this)},t.prototype.notifyNext=function(e,n){e?this.closeBuffer(e):this.openBuffer(n)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var n=this.closingSelector,i=n.call(this,e);i&&this.trySubscribe(i)}catch(o){this._error(o)}},t.prototype.closeBuffer=function(e){var n=this.contexts;if(n&&e){var i=e.buffer,o=e.subscription;this.destination.next(i),n.splice(n.indexOf(e),1),this.remove(o),o.unsubscribe()}},t.prototype.trySubscribe=function(e){var n=this.contexts,i=[],o=new zj.Subscription,u={buffer:i,subscription:o};n.push(u);var a=Ev.subscribeToResult(this,e,u);!a||a.closed?this.closeBuffer(u):(a.context=u,this.add(a),o.add(a))},t}(Yj.OuterSubscriber)});var Tv=h(li=>{"use strict";var Qj=li&&li.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(li,"__esModule",{value:!0});var $j=G(),ul=F();function Xj(r){return function(t){return t.lift(new Jj(r))}}s(Xj,"bufferWhen");li.bufferWhen=Xj;var Jj=function(){function r(t){this.closingSelector=t}return s(r,"BufferWhenOperator"),r.prototype.call=function(t,e){return e.subscribe(new eN(t,this.closingSelector))},r}(),eN=function(r){Qj(t,r);function t(e,n){var i=r.call(this,e)||this;return i.closingSelector=n,i.subscribing=!1,i.openBuffer(),i}return s(t,"BufferWhenSubscriber"),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},t.prototype.notifyNext=function(){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];var i;try{var o=this.closingSelector;i=o()}catch(u){return this.error(u)}e=new $j.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(ul.innerSubscribe(i,new ul.SimpleInnerSubscriber(this))),this.subscribing=!1},t}(ul.SimpleOuterSubscriber)});var Pv=h(fi=>{"use strict";var tN=fi&&fi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(fi,"__esModule",{value:!0});var al=F();function rN(r){return s(function(e){var n=new nN(r),i=e.lift(n);return n.caught=i},"catchErrorOperatorFunction")}s(rN,"catchError");fi.catchError=rN;var nN=function(){function r(t){this.selector=t}return s(r,"CatchOperator"),r.prototype.call=function(t,e){return e.subscribe(new iN(t,this.selector,this.caught))},r}(),iN=function(r){tN(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.selector=n,o.caught=i,o}return s(t,"CatchSubscriber"),t.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(u){r.prototype.error.call(this,u);return}this._unsubscribeAndRecycle();var i=new al.SimpleInnerSubscriber(this);this.add(i);var o=al.innerSubscribe(n,i);o!==i&&this.add(o)}},t}(al.SimpleOuterSubscriber)});var Cv=h(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});var oN=fs();function sN(r){return function(t){return t.lift(new oN.CombineLatestOperator(r))}}s(sN,"combineAll");cl.combineAll=sN});var Iv=h(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});var uN=re(),aN=fs(),cN=De();function lN(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=null;return typeof r[r.length-1]=="function"&&(e=r.pop()),r.length===1&&uN.isArray(r[0])&&(r=r[0].slice()),function(n){return n.lift.call(cN.from([n].concat(r)),new aN.CombineLatestOperator(e))}}s(lN,"combineLatest");ll.combineLatest=lN});var Rv=h(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var fN=ei();function hN(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return e.lift.call(fN.concat.apply(void 0,[e].concat(r)))}}s(hN,"concat");fl.concat=hN});var pl=h(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});var pN=Jn();function _N(r,t){return pN.mergeMap(r,t,1)}s(_N,"concatMap");hl.concatMap=_N});var Av=h(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});var dN=pl();function vN(r,t){return dN.concatMap(function(){return r},t)}s(vN,"concatMapTo");_l.concatMapTo=vN});var jv=h(hi=>{"use strict";var bN=hi&&hi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(hi,"__esModule",{value:!0});var yN=w();function mN(r){return function(t){return t.lift(new ON(r,t))}}s(mN,"count");hi.count=mN;var ON=function(){function r(t,e){this.predicate=t,this.source=e}return s(r,"CountOperator"),r.prototype.call=function(t,e){return e.subscribe(new gN(t,this.predicate,this.source))},r}(),gN=function(r){bN(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.predicate=n,o.source=i,o.count=0,o.index=0,o}return s(t,"CountSubscriber"),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var n;try{n=this.predicate(e,this.index++,this.source)}catch(i){this.destination.error(i);return}n&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(yN.Subscriber)});var Nv=h(pi=>{"use strict";var SN=pi&&pi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(pi,"__esModule",{value:!0});var dl=F();function EN(r){return function(t){return t.lift(new wN(r))}}s(EN,"debounce");pi.debounce=EN;var wN=function(){function r(t){this.durationSelector=t}return s(r,"DebounceOperator"),r.prototype.call=function(t,e){return e.subscribe(new TN(t,this.durationSelector))},r}(),TN=function(r){SN(t,r);function t(e,n){var i=r.call(this,e)||this;return i.durationSelector=n,i.hasValue=!1,i}return s(t,"DebounceSubscriber"),t.prototype._next=function(e){try{var n=this.durationSelector.call(this,e);n&&this._tryNext(e,n)}catch(i){this.destination.error(i)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,n){var i=this.durationSubscription;this.value=e,this.hasValue=!0,i&&(i.unsubscribe(),this.remove(i)),i=dl.innerSubscribe(n,new dl.SimpleInnerSubscriber(this)),i&&!i.closed&&this.add(this.durationSubscription=i)},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=void 0,n.unsubscribe(),this.remove(n)),this.value=void 0,this.hasValue=!1,r.prototype._next.call(this,e)}},t}(dl.SimpleOuterSubscriber)});var qv=h(_i=>{"use strict";var PN=_i&&_i.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(_i,"__esModule",{value:!0});var CN=w(),IN=ne();function RN(r,t){return t===void 0&&(t=IN.async),function(e){return e.lift(new AN(r,t))}}s(RN,"debounceTime");_i.debounceTime=RN;var AN=function(){function r(t,e){this.dueTime=t,this.scheduler=e}return s(r,"DebounceTimeOperator"),r.prototype.call=function(t,e){return e.subscribe(new jN(t,this.dueTime,this.scheduler))},r}(),jN=function(r){PN(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.dueTime=n,o.scheduler=i,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return s(t,"DebounceTimeSubscriber"),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(NN,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;e!==null&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(CN.Subscriber);function NN(r){r.debouncedNext()}s(NN,"dispatchNext")});var Vr=h(di=>{"use strict";var qN=di&&di.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(di,"__esModule",{value:!0});var DN=w();function xN(r){return r===void 0&&(r=null),function(t){return t.lift(new MN(r))}}s(xN,"defaultIfEmpty");di.defaultIfEmpty=xN;var MN=function(){function r(t){this.defaultValue=t}return s(r,"DefaultIfEmptyOperator"),r.prototype.call=function(t,e){return e.subscribe(new kN(t,this.defaultValue))},r}(),kN=function(r){qN(t,r);function t(e,n){var i=r.call(this,e)||this;return i.defaultValue=n,i.isEmpty=!0,i}return s(t,"DefaultIfEmptySubscriber"),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(DN.Subscriber)});var bl=h(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});function UN(r){return r instanceof Date&&!isNaN(+r)}s(UN,"isDate");vl.isDate=UN});var xv=h(vi=>{"use strict";var LN=vi&&vi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(vi,"__esModule",{value:!0});var FN=ne(),BN=bl(),VN=w(),Dv=Ln();function WN(r,t){t===void 0&&(t=FN.async);var e=BN.isDate(r),n=e?+r-t.now():Math.abs(r);return function(i){return i.lift(new HN(n,t))}}s(WN,"delay");vi.delay=WN;var HN=function(){function r(t,e){this.delay=t,this.scheduler=e}return s(r,"DelayOperator"),r.prototype.call=function(t,e){return e.subscribe(new zN(t,this.delay,this.scheduler))},r}(),zN=function(r){LN(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.delay=n,o.scheduler=i,o.queue=[],o.active=!1,o.errored=!1,o}return s(t,"DelaySubscriber"),t.dispatch=function(e){for(var n=e.source,i=n.queue,o=e.scheduler,u=e.destination;i.length>0&&i[0].time-o.now()<=0;)i.shift().notification.observe(u);if(i.length>0){var a=Math.max(0,i[0].time-o.now());this.schedule(e,a)}else this.unsubscribe(),n.active=!1},t.prototype._schedule=function(e){this.active=!0;var n=this.destination;n.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(this.errored!==!0){var n=this.scheduler,i=new YN(n.now()+this.delay,e);this.queue.push(i),this.active===!1&&this._schedule(n)}},t.prototype._next=function(e){this.scheduleNotification(Dv.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(Dv.Notification.createComplete()),this.unsubscribe()},t}(VN.Subscriber),YN=function(){function r(t,e){this.time=t,this.notification=e}return s(r,"DelayMessage"),r}()});var kv=h(bi=>{"use strict";var yl=bi&&bi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(bi,"__esModule",{value:!0});var ZN=w(),KN=j(),GN=yt(),QN=mt();function $N(r,t){return t?function(e){return new JN(e,t).lift(new Mv(r))}:function(e){return e.lift(new Mv(r))}}s($N,"delayWhen");bi.delayWhen=$N;var Mv=function(){function r(t){this.delayDurationSelector=t}return s(r,"DelayWhenOperator"),r.prototype.call=function(t,e){return e.subscribe(new XN(t,this.delayDurationSelector))},r}(),XN=function(r){yl(t,r);function t(e,n){var i=r.call(this,e)||this;return i.delayDurationSelector=n,i.completed=!1,i.delayNotifierSubscriptions=[],i.index=0,i}return s(t,"DelayWhenSubscriber"),t.prototype.notifyNext=function(e,n,i,o,u){this.destination.next(e),this.removeSubscription(u),this.tryComplete()},t.prototype.notifyError=function(e,n){this._error(e)},t.prototype.notifyComplete=function(e){var n=this.removeSubscription(e);n&&this.destination.next(n),this.tryComplete()},t.prototype._next=function(e){var n=this.index++;try{var i=this.delayDurationSelector(e,n);i&&this.tryDelay(i,e)}catch(o){this.destination.error(o)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},t.prototype.removeSubscription=function(e){e.unsubscribe();var n=this.delayNotifierSubscriptions.indexOf(e);return n!==-1&&this.delayNotifierSubscriptions.splice(n,1),e.outerValue},t.prototype.tryDelay=function(e,n){var i=QN.subscribeToResult(this,e,n);if(i&&!i.closed){var o=this.destination;o.add(i),this.delayNotifierSubscriptions.push(i)}},t.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},t}(GN.OuterSubscriber),JN=function(r){yl(t,r);function t(e,n){var i=r.call(this)||this;return i.source=e,i.subscriptionDelay=n,i}return s(t,"SubscriptionDelayObservable"),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new eq(e,this.source))},t}(KN.Observable),eq=function(r){yl(t,r);function t(e,n){var i=r.call(this)||this;return i.parent=e,i.source=n,i.sourceSubscribed=!1,i}return s(t,"SubscriptionDelaySubscriber"),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(ZN.Subscriber)});var Uv=h(yi=>{"use strict";var tq=yi&&yi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(yi,"__esModule",{value:!0});var rq=w();function nq(){return s(function(t){return t.lift(new iq)},"dematerializeOperatorFunction")}s(nq,"dematerialize");yi.dematerialize=nq;var iq=function(){function r(){}return s(r,"DeMaterializeOperator"),r.prototype.call=function(t,e){return e.subscribe(new oq(t))},r}(),oq=function(r){tq(t,r);function t(e){return r.call(this,e)||this}return s(t,"DeMaterializeSubscriber"),t.prototype._next=function(e){e.observe(this.destination)},t}(rq.Subscriber)});var Fv=h(Wr=>{"use strict";var sq=Wr&&Wr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Wr,"__esModule",{value:!0});var ml=F();function uq(r,t){return function(e){return e.lift(new aq(r,t))}}s(uq,"distinct");Wr.distinct=uq;var aq=function(){function r(t,e){this.keySelector=t,this.flushes=e}return s(r,"DistinctOperator"),r.prototype.call=function(t,e){return e.subscribe(new Lv(t,this.keySelector,this.flushes))},r}(),Lv=function(r){sq(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.keySelector=n,o.values=new Set,i&&o.add(ml.innerSubscribe(i,new ml.SimpleInnerSubscriber(o))),o}return s(t,"DistinctSubscriber"),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var n,i=this.destination;try{n=this.keySelector(e)}catch(o){i.error(o);return}this._finalizeNext(n,e)},t.prototype._finalizeNext=function(e,n){var i=this.values;i.has(e)||(i.add(e),this.destination.next(n))},t}(ml.SimpleOuterSubscriber);Wr.DistinctSubscriber=Lv});var Ol=h(mi=>{"use strict";var cq=mi&&mi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mi,"__esModule",{value:!0});var lq=w();function fq(r,t){return function(e){return e.lift(new hq(r,t))}}s(fq,"distinctUntilChanged");mi.distinctUntilChanged=fq;var hq=function(){function r(t,e){this.compare=t,this.keySelector=e}return s(r,"DistinctUntilChangedOperator"),r.prototype.call=function(t,e){return e.subscribe(new pq(t,this.compare,this.keySelector))},r}(),pq=function(r){cq(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.keySelector=i,o.hasKey=!1,typeof n=="function"&&(o.compare=n),o}return s(t,"DistinctUntilChangedSubscriber"),t.prototype.compare=function(e,n){return e===n},t.prototype._next=function(e){var n;try{var i=this.keySelector;n=i?i(e):e}catch(a){return this.destination.error(a)}var o=!1;if(this.hasKey)try{var u=this.compare;o=u(this.key,n)}catch(a){return this.destination.error(a)}else this.hasKey=!0;o||(this.key=n,this.destination.next(e))},t}(lq.Subscriber)});var Bv=h(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});var _q=Ol();function dq(r,t){return _q.distinctUntilChanged(function(e,n){return t?t(e[r],n[r]):e[r]===n[r]})}s(dq,"distinctUntilKeyChanged");gl.distinctUntilKeyChanged=dq});var gi=h(Oi=>{"use strict";var vq=Oi&&Oi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Oi,"__esModule",{value:!0});var bq=Ur(),yq=w();function mq(r){return r===void 0&&(r=Sq),function(t){return t.lift(new Oq(r))}}s(mq,"throwIfEmpty");Oi.throwIfEmpty=mq;var Oq=function(){function r(t){this.errorFactory=t}return s(r,"ThrowIfEmptyOperator"),r.prototype.call=function(t,e){return e.subscribe(new gq(t,this.errorFactory))},r}(),gq=function(r){vq(t,r);function t(e,n){var i=r.call(this,e)||this;return i.errorFactory=n,i.hasValue=!1,i}return s(t,"ThrowIfEmptySubscriber"),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(n){e=n}this.destination.error(e)},t}(yq.Subscriber);function Sq(){return new bq.EmptyError}s(Sq,"defaultErrorFactory")});var gs=h(Si=>{"use strict";var Eq=Si&&Si.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Si,"__esModule",{value:!0});var wq=w(),Tq=kr(),Pq=Ne();function Cq(r){return function(t){return r===0?Pq.empty():t.lift(new Iq(r))}}s(Cq,"take");Si.take=Cq;var Iq=function(){function r(t){if(this.total=t,this.total<0)throw new Tq.ArgumentOutOfRangeError}return s(r,"TakeOperator"),r.prototype.call=function(t,e){return e.subscribe(new Rq(t,this.total))},r}(),Rq=function(r){Eq(t,r);function t(e,n){var i=r.call(this,e)||this;return i.total=n,i.count=0,i}return s(t,"TakeSubscriber"),t.prototype._next=function(e){var n=this.total,i=++this.count;i<=n&&(this.destination.next(e),i===n&&(this.destination.complete(),this.unsubscribe()))},t}(wq.Subscriber)});var Wv=h(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});var Vv=kr(),Aq=Lt(),jq=gi(),Nq=Vr(),qq=gs();function Dq(r,t){if(r<0)throw new Vv.ArgumentOutOfRangeError;var e=arguments.length>=2;return function(n){return n.pipe(Aq.filter(function(i,o){return o===r}),qq.take(1),e?Nq.defaultIfEmpty(t):jq.throwIfEmpty(function(){return new Vv.ArgumentOutOfRangeError}))}}s(Dq,"elementAt");Sl.elementAt=Dq});var Hv=h(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});var xq=ei(),Mq=kn();function kq(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return xq.concat(e,Mq.of.apply(void 0,r))}}s(kq,"endWith");El.endWith=kq});var zv=h(Ei=>{"use strict";var Uq=Ei&&Ei.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ei,"__esModule",{value:!0});var Lq=w();function Fq(r,t){return function(e){return e.lift(new Bq(r,t,e))}}s(Fq,"every");Ei.every=Fq;var Bq=function(){function r(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return s(r,"EveryOperator"),r.prototype.call=function(t,e){return e.subscribe(new Vq(t,this.predicate,this.thisArg,this.source))},r}(),Vq=function(r){Uq(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.predicate=n,u.thisArg=i,u.source=o,u.index=0,u.thisArg=i||u,u}return s(t,"EverySubscriber"),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var n=!1;try{n=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(i){this.destination.error(i);return}n||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(Lq.Subscriber)});var Yv=h(wi=>{"use strict";var Wq=wi&&wi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(wi,"__esModule",{value:!0});var wl=F();function Hq(){return function(r){return r.lift(new zq)}}s(Hq,"exhaust");wi.exhaust=Hq;var zq=function(){function r(){}return s(r,"SwitchFirstOperator"),r.prototype.call=function(t,e){return e.subscribe(new Yq(t))},r}(),Yq=function(r){Wq(t,r);function t(e){var n=r.call(this,e)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return s(t,"SwitchFirstSubscriber"),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(wl.innerSubscribe(e,new wl.SimpleInnerSubscriber(this))))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(wl.SimpleOuterSubscriber)});var Kv=h(Ti=>{"use strict";var Zq=Ti&&Ti.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ti,"__esModule",{value:!0});var Kq=ye(),Gq=De(),Tl=F();function Zv(r,t){return t?function(e){return e.pipe(Zv(function(n,i){return Gq.from(r(n,i)).pipe(Kq.map(function(o,u){return t(n,o,i,u)}))}))}:function(e){return e.lift(new Qq(r))}}s(Zv,"exhaustMap");Ti.exhaustMap=Zv;var Qq=function(){function r(t){this.project=t}return s(r,"ExhaustMapOperator"),r.prototype.call=function(t,e){return e.subscribe(new $q(t,this.project))},r}(),$q=function(r){Zq(t,r);function t(e,n){var i=r.call(this,e)||this;return i.project=n,i.hasSubscription=!1,i.hasCompleted=!1,i.index=0,i}return s(t,"ExhaustMapSubscriber"),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var n,i=this.index++;try{n=this.project(e,i)}catch(o){this.destination.error(o);return}this.hasSubscription=!0,this._innerSub(n)},t.prototype._innerSub=function(e){var n=new Tl.SimpleInnerSubscriber(this),i=this.destination;i.add(n);var o=Tl.innerSubscribe(e,n);o!==n&&i.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(Tl.SimpleOuterSubscriber)});var $v=h(Vt=>{"use strict";var Xq=Vt&&Vt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Vt,"__esModule",{value:!0});var Pl=F();function Jq(r,t,e){return t===void 0&&(t=Number.POSITIVE_INFINITY),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(n){return n.lift(new Gv(r,t,e))}}s(Jq,"expand");Vt.expand=Jq;var Gv=function(){function r(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return s(r,"ExpandOperator"),r.prototype.call=function(t,e){return e.subscribe(new Qv(t,this.project,this.concurrent,this.scheduler))},r}();Vt.ExpandOperator=Gv;var Qv=function(r){Xq(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.project=n,u.concurrent=i,u.scheduler=o,u.index=0,u.active=0,u.hasCompleted=!1,i<Number.POSITIVE_INFINITY&&(u.buffer=[]),u}return s(t,"ExpandSubscriber"),t.dispatch=function(e){var n=e.subscriber,i=e.result,o=e.value,u=e.index;n.subscribeToProjection(i,o,u)},t.prototype._next=function(e){var n=this.destination;if(n.closed){this._complete();return}var i=this.index++;if(this.active<this.concurrent){n.next(e);try{var o=this.project,u=o(e,i);if(!this.scheduler)this.subscribeToProjection(u,e,i);else{var a={subscriber:this,result:u,value:e,index:i},l=this.destination;l.add(this.scheduler.schedule(t.dispatch,0,a))}}catch(c){n.error(c)}}else this.buffer.push(e)},t.prototype.subscribeToProjection=function(e,n,i){this.active++;var o=this.destination;o.add(Pl.innerSubscribe(e,new Pl.SimpleInnerSubscriber(this)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this._next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},t}(Pl.SimpleOuterSubscriber);Vt.ExpandSubscriber=Qv});var Xv=h(Pi=>{"use strict";var eD=Pi&&Pi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Pi,"__esModule",{value:!0});var tD=w(),rD=G();function nD(r){return function(t){return t.lift(new iD(r))}}s(nD,"finalize");Pi.finalize=nD;var iD=function(){function r(t){this.callback=t}return s(r,"FinallyOperator"),r.prototype.call=function(t,e){return e.subscribe(new oD(t,this.callback))},r}(),oD=function(r){eD(t,r);function t(e,n){var i=r.call(this,e)||this;return i.add(new rD.Subscription(n)),i}return s(t,"FinallySubscriber"),t}(tD.Subscriber)});var Cl=h(Wt=>{"use strict";var sD=Wt&&Wt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Wt,"__esModule",{value:!0});var uD=w();function aD(r,t){if(typeof r!="function")throw new TypeError("predicate is not a function");return function(e){return e.lift(new Jv(r,e,!1,t))}}s(aD,"find");Wt.find=aD;var Jv=function(){function r(t,e,n,i){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=i}return s(r,"FindValueOperator"),r.prototype.call=function(t,e){return e.subscribe(new eb(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},r}();Wt.FindValueOperator=Jv;var eb=function(r){sD(t,r);function t(e,n,i,o,u){var a=r.call(this,e)||this;return a.predicate=n,a.source=i,a.yieldIndex=o,a.thisArg=u,a.index=0,a}return s(t,"FindValueSubscriber"),t.prototype.notifyComplete=function(e){var n=this.destination;n.next(e),n.complete(),this.unsubscribe()},t.prototype._next=function(e){var n=this,i=n.predicate,o=n.thisArg,u=this.index++;try{var a=i.call(o||this,e,u,this.source);a&&this.notifyComplete(this.yieldIndex?u:e)}catch(l){this.destination.error(l)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(uD.Subscriber);Wt.FindValueSubscriber=eb});var tb=h(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});var cD=Cl();function lD(r,t){return function(e){return e.lift(new cD.FindValueOperator(r,e,!0,t))}}s(lD,"findIndex");Il.findIndex=lD});var rb=h(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});var fD=Ur(),hD=Lt(),pD=gs(),_D=Vr(),dD=gi(),vD=vt();function bD(r,t){var e=arguments.length>=2;return function(n){return n.pipe(r?hD.filter(function(i,o){return r(i,o,n)}):vD.identity,pD.take(1),e?_D.defaultIfEmpty(t):dD.throwIfEmpty(function(){return new fD.EmptyError}))}}s(bD,"first");Rl.first=bD});var nb=h(Ci=>{"use strict";var yD=Ci&&Ci.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ci,"__esModule",{value:!0});var mD=w();function OD(){return s(function(t){return t.lift(new gD)},"ignoreElementsOperatorFunction")}s(OD,"ignoreElements");Ci.ignoreElements=OD;var gD=function(){function r(){}return s(r,"IgnoreElementsOperator"),r.prototype.call=function(t,e){return e.subscribe(new SD(t))},r}(),SD=function(r){yD(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"IgnoreElementsSubscriber"),t.prototype._next=function(e){},t}(mD.Subscriber)});var ib=h(Ii=>{"use strict";var ED=Ii&&Ii.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ii,"__esModule",{value:!0});var wD=w();function TD(){return function(r){return r.lift(new PD)}}s(TD,"isEmpty");Ii.isEmpty=TD;var PD=function(){function r(){}return s(r,"IsEmptyOperator"),r.prototype.call=function(t,e){return e.subscribe(new CD(t))},r}(),CD=function(r){ED(t,r);function t(e){return r.call(this,e)||this}return s(t,"IsEmptySubscriber"),t.prototype.notifyComplete=function(e){var n=this.destination;n.next(e),n.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(wD.Subscriber)});var Ss=h(Ri=>{"use strict";var ID=Ri&&Ri.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ri,"__esModule",{value:!0});var RD=w(),AD=kr(),jD=Ne();function ND(r){return s(function(e){return r===0?jD.empty():e.lift(new qD(r))},"takeLastOperatorFunction")}s(ND,"takeLast");Ri.takeLast=ND;var qD=function(){function r(t){if(this.total=t,this.total<0)throw new AD.ArgumentOutOfRangeError}return s(r,"TakeLastOperator"),r.prototype.call=function(t,e){return e.subscribe(new DD(t,this.total))},r}(),DD=function(r){ID(t,r);function t(e,n){var i=r.call(this,e)||this;return i.total=n,i.ring=new Array,i.count=0,i}return s(t,"TakeLastSubscriber"),t.prototype._next=function(e){var n=this.ring,i=this.total,o=this.count++;if(n.length<i)n.push(e);else{var u=o%i;n[u]=e}},t.prototype._complete=function(){var e=this.destination,n=this.count;if(n>0)for(var i=this.count>=this.total?this.total:this.count,o=this.ring,u=0;u<i;u++){var a=n++%i;e.next(o[a])}e.complete()},t}(RD.Subscriber)});var ob=h(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});var xD=Ur(),MD=Lt(),kD=Ss(),UD=gi(),LD=Vr(),FD=vt();function BD(r,t){var e=arguments.length>=2;return function(n){return n.pipe(r?MD.filter(function(i,o){return r(i,o,n)}):FD.identity,kD.takeLast(1),e?LD.defaultIfEmpty(t):UD.throwIfEmpty(function(){return new xD.EmptyError}))}}s(BD,"last");Al.last=BD});var sb=h(Ai=>{"use strict";var VD=Ai&&Ai.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ai,"__esModule",{value:!0});var WD=w();function HD(r){return function(t){return t.lift(new zD(r))}}s(HD,"mapTo");Ai.mapTo=HD;var zD=function(){function r(t){this.value=t}return s(r,"MapToOperator"),r.prototype.call=function(t,e){return e.subscribe(new YD(t,this.value))},r}(),YD=function(r){VD(t,r);function t(e,n){var i=r.call(this,e)||this;return i.value=n,i}return s(t,"MapToSubscriber"),t.prototype._next=function(e){this.destination.next(this.value)},t}(WD.Subscriber)});var ub=h(ji=>{"use strict";var ZD=ji&&ji.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ji,"__esModule",{value:!0});var KD=w(),jl=Ln();function GD(){return s(function(t){return t.lift(new QD)},"materializeOperatorFunction")}s(GD,"materialize");ji.materialize=GD;var QD=function(){function r(){}return s(r,"MaterializeOperator"),r.prototype.call=function(t,e){return e.subscribe(new $D(t))},r}(),$D=function(r){ZD(t,r);function t(e){return r.call(this,e)||this}return s(t,"MaterializeSubscriber"),t.prototype._next=function(e){this.destination.next(jl.Notification.createNext(e))},t.prototype._error=function(e){var n=this.destination;n.next(jl.Notification.createError(e)),n.complete()},t.prototype._complete=function(){var e=this.destination;e.next(jl.Notification.createComplete()),e.complete()},t}(KD.Subscriber)});var Es=h(Ni=>{"use strict";var XD=Ni&&Ni.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ni,"__esModule",{value:!0});var JD=w();function ex(r,t){var e=!1;return arguments.length>=2&&(e=!0),s(function(i){return i.lift(new tx(r,t,e))},"scanOperatorFunction")}s(ex,"scan");Ni.scan=ex;var tx=function(){function r(t,e,n){n===void 0&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return s(r,"ScanOperator"),r.prototype.call=function(t,e){return e.subscribe(new rx(t,this.accumulator,this.seed,this.hasSeed))},r}(),rx=function(r){XD(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.accumulator=n,u._seed=i,u.hasSeed=o,u.index=0,u}return s(t,"ScanSubscriber"),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(!this.hasSeed)this.seed=e,this.destination.next(e);else return this._tryNext(e)},t.prototype._tryNext=function(e){var n=this.index++,i;try{i=this.accumulator(this.seed,e,n)}catch(o){this.destination.error(o)}this.seed=i,this.destination.next(i)},t}(JD.Subscriber)});var qi=h(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});var ab=Es(),cb=Ss(),nx=Vr(),lb=ts();function ix(r,t){return arguments.length>=2?s(function(n){return lb.pipe(ab.scan(r,t),cb.takeLast(1),nx.defaultIfEmpty(t))(n)},"reduceOperatorFunctionWithSeed"):s(function(n){return lb.pipe(ab.scan(function(i,o,u){return r(i,o,u+1)}),cb.takeLast(1))(n)},"reduceOperatorFunction")}s(ix,"reduce");Nl.reduce=ix});var fb=h(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});var ox=qi();function sx(r){var t=typeof r=="function"?function(e,n){return r(e,n)>0?e:n}:function(e,n){return e>n?e:n};return ox.reduce(t)}s(sx,"max");ql.max=sx});var hb=h(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});var ux=zc();function ax(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return e.lift.call(ux.merge.apply(void 0,[e].concat(r)))}}s(ax,"merge");Dl.merge=ax});var _b=h(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});var pb=Jn();function cx(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),typeof t=="function"?pb.mergeMap(function(){return r},t,e):(typeof t=="number"&&(e=t),pb.mergeMap(function(){return r},e))}s(cx,"mergeMapTo");xl.mergeMapTo=cx});var bb=h(Ht=>{"use strict";var lx=Ht&&Ht.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ht,"__esModule",{value:!0});var Ml=F();function fx(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),function(n){return n.lift(new db(r,t,e))}}s(fx,"mergeScan");Ht.mergeScan=fx;var db=function(){function r(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return s(r,"MergeScanOperator"),r.prototype.call=function(t,e){return e.subscribe(new vb(t,this.accumulator,this.seed,this.concurrent))},r}();Ht.MergeScanOperator=db;var vb=function(r){lx(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.accumulator=n,u.acc=i,u.concurrent=o,u.hasValue=!1,u.hasCompleted=!1,u.buffer=[],u.active=0,u.index=0,u}return s(t,"MergeScanSubscriber"),t.prototype._next=function(e){if(this.active<this.concurrent){var n=this.index++,i=this.destination,o=void 0;try{var u=this.accumulator;o=u(this.acc,e,n)}catch(a){return i.error(a)}this.active++,this._innerSub(o)}else this.buffer.push(e)},t.prototype._innerSub=function(e){var n=new Ml.SimpleInnerSubscriber(this),i=this.destination;i.add(n);var o=Ml.innerSubscribe(e,n);o!==n&&i.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},t.prototype.notifyNext=function(e){var n=this.destination;this.acc=e,this.hasValue=!0,n.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},t}(Ml.SimpleOuterSubscriber);Ht.MergeScanSubscriber=vb});var yb=h(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});var hx=qi();function px(r){var t=typeof r=="function"?function(e,n){return r(e,n)<0?e:n}:function(e,n){return e<n?e:n};return hx.reduce(t)}s(px,"min");kl.min=px});var zt=h(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});var _x=Va();function dx(r,t){return s(function(n){var i;if(typeof r=="function"?i=r:i=s(function(){return r},"subjectFactory"),typeof t=="function")return n.lift(new mb(i,t));var o=Object.create(n,_x.connectableObservableDescriptor);return o.source=n,o.subjectFactory=i,o},"multicastOperatorFunction")}s(dx,"multicast");ws.multicast=dx;var mb=function(){function r(t,e){this.subjectFactory=t,this.selector=e}return s(r,"MulticastOperator"),r.prototype.call=function(t,e){var n=this.selector,i=this.subjectFactory(),o=n(i).subscribe(t);return o.add(e.subscribe(i)),o},r}();ws.MulticastOperator=mb});var Sb=h(Hr=>{"use strict";var vx=Hr&&Hr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Hr,"__esModule",{value:!0});var bx=De(),Ob=re(),Ul=F();function yx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return r.length===1&&Ob.isArray(r[0])&&(r=r[0]),function(e){return e.lift(new gb(r))}}s(yx,"onErrorResumeNext");Hr.onErrorResumeNext=yx;function mx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=void 0;return r.length===1&&Ob.isArray(r[0])&&(r=r[0]),e=r.shift(),bx.from(e).lift(new gb(r))}s(mx,"onErrorResumeNextStatic");Hr.onErrorResumeNextStatic=mx;var gb=function(){function r(t){this.nextSources=t}return s(r,"OnErrorResumeNextOperator"),r.prototype.call=function(t,e){return e.subscribe(new Ox(t,this.nextSources))},r}(),Ox=function(r){vx(t,r);function t(e,n){var i=r.call(this,e)||this;return i.destination=e,i.nextSources=n,i}return s(t,"OnErrorResumeNextSubscriber"),t.prototype.notifyError=function(){this.subscribeToNextSource()},t.prototype.notifyComplete=function(){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource(),this.unsubscribe()},t.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();if(e){var n=new Ul.SimpleInnerSubscriber(this),i=this.destination;i.add(n);var o=Ul.innerSubscribe(e,n);o!==n&&i.add(o)}else this.destination.complete()},t}(Ul.SimpleOuterSubscriber)});var Eb=h(Di=>{"use strict";var gx=Di&&Di.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Di,"__esModule",{value:!0});var Sx=w();function Ex(){return function(r){return r.lift(new wx)}}s(Ex,"pairwise");Di.pairwise=Ex;var wx=function(){function r(){}return s(r,"PairwiseOperator"),r.prototype.call=function(t,e){return e.subscribe(new Tx(t))},r}(),Tx=function(r){gx(t,r);function t(e){var n=r.call(this,e)||this;return n.hasPrev=!1,n}return s(t,"PairwiseSubscriber"),t.prototype._next=function(e){var n;this.hasPrev?n=[this.prev,e]:this.hasPrev=!0,this.prev=e,n&&this.destination.next(n)},t}(Sx.Subscriber)});var Tb=h(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});var Px=Qc(),wb=Lt();function Cx(r,t){return function(e){return[wb.filter(r,t)(e),wb.filter(Px.not(r,t))(e)]}}s(Cx,"partition");Ll.partition=Cx});var Pb=h(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});var Ix=ye();function Rx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r.length;if(e===0)throw new Error("list of properties cannot be empty.");return function(n){return Ix.map(Ax(r,e))(n)}}s(Rx,"pluck");Fl.pluck=Rx;function Ax(r,t){var e=s(function(n){for(var i=n,o=0;o<t;o++){var u=i!=null?i[r[o]]:void 0;if(u!==void 0)i=u;else return}return i},"mapper");return e}s(Ax,"plucker")});var Rb=h(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});var Cb=J(),Ib=zt();function jx(r){return r?Ib.multicast(function(){return new Cb.Subject},r):Ib.multicast(new Cb.Subject)}s(jx,"publish");Bl.publish=jx});var Ab=h(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});var Nx=za(),qx=zt();function Dx(r){return function(t){return qx.multicast(new Nx.BehaviorSubject(r))(t)}}s(Dx,"publishBehavior");Vl.publishBehavior=Dx});var jb=h(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});var xx=Vn(),Mx=zt();function kx(){return function(r){return Mx.multicast(new xx.AsyncSubject)(r)}}s(kx,"publishLast");Wl.publishLast=kx});var Nb=h(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});var Ux=us(),Lx=zt();function Fx(r,t,e,n){e&&typeof e!="function"&&(n=e);var i=typeof e=="function"?e:void 0,o=new Ux.ReplaySubject(r,t,n);return function(u){return Lx.multicast(function(){return o},i)(u)}}s(Fx,"publishReplay");Hl.publishReplay=Fx});var qb=h(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});var Bx=re(),Vx=Xc();function Wx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return s(function(n){return r.length===1&&Bx.isArray(r[0])&&(r=r[0]),n.lift.call(Vx.race.apply(void 0,[n].concat(r)))},"raceOperatorFunction")}s(Wx,"race");zl.race=Wx});var xb=h(xi=>{"use strict";var Hx=xi&&xi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(xi,"__esModule",{value:!0});var zx=w(),Yx=Ne();function Zx(r){return r===void 0&&(r=-1),function(t){return r===0?Yx.empty():r<0?t.lift(new Db(-1,t)):t.lift(new Db(r-1,t))}}s(Zx,"repeat");xi.repeat=Zx;var Db=function(){function r(t,e){this.count=t,this.source=e}return s(r,"RepeatOperator"),r.prototype.call=function(t,e){return e.subscribe(new Kx(t,this.count,this.source))},r}(),Kx=function(r){Hx(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.count=n,o.source=i,o}return s(t,"RepeatSubscriber"),t.prototype.complete=function(){if(!this.isStopped){var e=this,n=e.source,i=e.count;if(i===0)return r.prototype.complete.call(this);i>-1&&(this.count=i-1),n.subscribe(this._unsubscribeAndRecycle())}},t}(zx.Subscriber)});var Mb=h(Mi=>{"use strict";var Gx=Mi&&Mi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Mi,"__esModule",{value:!0});var Qx=J(),Yl=F();function $x(r){return function(t){return t.lift(new Xx(r))}}s($x,"repeatWhen");Mi.repeatWhen=$x;var Xx=function(){function r(t){this.notifier=t}return s(r,"RepeatWhenOperator"),r.prototype.call=function(t,e){return e.subscribe(new Jx(t,this.notifier,e))},r}(),Jx=function(r){Gx(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.notifier=n,o.source=i,o.sourceIsBeingSubscribedTo=!0,o}return s(t,"RepeatWhenSubscriber"),t.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return r.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return r.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},t.prototype._unsubscribe=function(){var e=this,n=e.notifications,i=e.retriesSubscription;n&&(n.unsubscribe(),this.notifications=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,r.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},t.prototype.subscribeToRetries=function(){this.notifications=new Qx.Subject;var e;try{var n=this.notifier;e=n(this.notifications)}catch{return r.prototype.complete.call(this)}this.retries=e,this.retriesSubscription=Yl.innerSubscribe(e,new Yl.SimpleInnerSubscriber(this))},t}(Yl.SimpleOuterSubscriber)});var kb=h(ki=>{"use strict";var eM=ki&&ki.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ki,"__esModule",{value:!0});var tM=w();function rM(r){return r===void 0&&(r=-1),function(t){return t.lift(new nM(r,t))}}s(rM,"retry");ki.retry=rM;var nM=function(){function r(t,e){this.count=t,this.source=e}return s(r,"RetryOperator"),r.prototype.call=function(t,e){return e.subscribe(new iM(t,this.count,this.source))},r}(),iM=function(r){eM(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.count=n,o.source=i,o}return s(t,"RetrySubscriber"),t.prototype.error=function(e){if(!this.isStopped){var n=this,i=n.source,o=n.count;if(o===0)return r.prototype.error.call(this,e);o>-1&&(this.count=o-1),i.subscribe(this._unsubscribeAndRecycle())}},t}(tM.Subscriber)});var Ub=h(Ui=>{"use strict";var oM=Ui&&Ui.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ui,"__esModule",{value:!0});var sM=J(),Zl=F();function uM(r){return function(t){return t.lift(new aM(r,t))}}s(uM,"retryWhen");Ui.retryWhen=uM;var aM=function(){function r(t,e){this.notifier=t,this.source=e}return s(r,"RetryWhenOperator"),r.prototype.call=function(t,e){return e.subscribe(new cM(t,this.notifier,this.source))},r}(),cM=function(r){oM(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.notifier=n,o.source=i,o}return s(t,"RetryWhenSubscriber"),t.prototype.error=function(e){if(!this.isStopped){var n=this.errors,i=this.retries,o=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{n=new sM.Subject;try{var u=this.notifier;i=u(n)}catch(a){return r.prototype.error.call(this,a)}o=Zl.innerSubscribe(i,new Zl.SimpleInnerSubscriber(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=i,this.retriesSubscription=o,n.next(e)}},t.prototype._unsubscribe=function(){var e=this,n=e.errors,i=e.retriesSubscription;n&&(n.unsubscribe(),this.errors=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(Zl.SimpleOuterSubscriber)});var Lb=h(Li=>{"use strict";var lM=Li&&Li.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Li,"__esModule",{value:!0});var Kl=F();function fM(r){return function(t){return t.lift(new hM(r))}}s(fM,"sample");Li.sample=fM;var hM=function(){function r(t){this.notifier=t}return s(r,"SampleOperator"),r.prototype.call=function(t,e){var n=new pM(t),i=e.subscribe(n);return i.add(Kl.innerSubscribe(this.notifier,new Kl.SimpleInnerSubscriber(n))),i},r}(),pM=function(r){lM(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.hasValue=!1,e}return s(t,"SampleSubscriber"),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(Kl.SimpleOuterSubscriber)});var Fb=h(Fi=>{"use strict";var _M=Fi&&Fi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Fi,"__esModule",{value:!0});var dM=w(),vM=ne();function bM(r,t){return t===void 0&&(t=vM.async),function(e){return e.lift(new yM(r,t))}}s(bM,"sampleTime");Fi.sampleTime=bM;var yM=function(){function r(t,e){this.period=t,this.scheduler=e}return s(r,"SampleTimeOperator"),r.prototype.call=function(t,e){return e.subscribe(new mM(t,this.period,this.scheduler))},r}(),mM=function(r){_M(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.period=n,o.scheduler=i,o.hasValue=!1,o.add(i.schedule(OM,n,{subscriber:o,period:n})),o}return s(t,"SampleTimeSubscriber"),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(dM.Subscriber);function OM(r){var t=r.subscriber,e=r.period;t.notifyNext(),this.schedule(r,e)}s(OM,"dispatchNotification")});var zb=h(Yt=>{"use strict";var Bb=Yt&&Yt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Yt,"__esModule",{value:!0});var Vb=w();function gM(r,t){return function(e){return e.lift(new Wb(r,t))}}s(gM,"sequenceEqual");Yt.sequenceEqual=gM;var Wb=function(){function r(t,e){this.compareTo=t,this.comparator=e}return s(r,"SequenceEqualOperator"),r.prototype.call=function(t,e){return e.subscribe(new Hb(t,this.compareTo,this.comparator))},r}();Yt.SequenceEqualOperator=Wb;var Hb=function(r){Bb(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.compareTo=n,o.comparator=i,o._a=[],o._b=[],o._oneComplete=!1,o.destination.add(n.subscribe(new SM(e,o))),o}return s(t,"SequenceEqualSubscriber"),t.prototype._next=function(e){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},t.prototype.checkValues=function(){for(var e=this,n=e._a,i=e._b,o=e.comparator;n.length>0&&i.length>0;){var u=n.shift(),a=i.shift(),l=!1;try{l=o?o(u,a):u===a}catch(c){this.destination.error(c)}l||this.emit(!1)}},t.prototype.emit=function(e){var n=this.destination;n.next(e),n.complete()},t.prototype.nextB=function(e){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(e),this.checkValues())},t.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},t}(Vb.Subscriber);Yt.SequenceEqualSubscriber=Hb;var SM=function(r){Bb(t,r);function t(e,n){var i=r.call(this,e)||this;return i.parent=n,i}return s(t,"SequenceEqualCompareToSubscriber"),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},t}(Vb.Subscriber)});var Yb=h(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});var EM=zt(),wM=ns(),TM=J();function PM(){return new TM.Subject}s(PM,"shareSubjectFactory");function CM(){return function(r){return wM.refCount()(EM.multicast(PM)(r))}}s(CM,"share");Gl.share=CM});var Zb=h(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});var IM=us();function RM(r,t,e){var n;return r&&typeof r=="object"?n=r:n={bufferSize:r,windowTime:t,refCount:!1,scheduler:e},function(i){return i.lift(AM(n))}}s(RM,"shareReplay");Ql.shareReplay=RM;function AM(r){var t=r.bufferSize,e=t===void 0?Number.POSITIVE_INFINITY:t,n=r.windowTime,i=n===void 0?Number.POSITIVE_INFINITY:n,o=r.refCount,u=r.scheduler,a,l=0,c,f=!1,p=!1;return s(function(m){l++;var g;!a||f?(f=!1,a=new IM.ReplaySubject(e,i,u),g=a.subscribe(this),c=m.subscribe({next:function(T){a.next(T)},error:function(T){f=!0,a.error(T)},complete:function(){p=!0,c=void 0,a.complete()}}),p&&(c=void 0)):g=a.subscribe(this),this.add(function(){l--,g.unsubscribe(),g=void 0,c&&!p&&o&&l===0&&(c.unsubscribe(),c=void 0,a=void 0)})},"shareReplayOperation")}s(AM,"shareReplayOperator")});var Kb=h(Bi=>{"use strict";var jM=Bi&&Bi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Bi,"__esModule",{value:!0});var NM=w(),qM=Ur();function DM(r){return function(t){return t.lift(new xM(r,t))}}s(DM,"single");Bi.single=DM;var xM=function(){function r(t,e){this.predicate=t,this.source=e}return s(r,"SingleOperator"),r.prototype.call=function(t,e){return e.subscribe(new MM(t,this.predicate,this.source))},r}(),MM=function(r){jM(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.predicate=n,o.source=i,o.seenValue=!1,o.index=0,o}return s(t,"SingleSubscriber"),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var n=this.index++;this.predicate?this.tryNext(e,n):this.applySingleValue(e)},t.prototype.tryNext=function(e,n){try{this.predicate(e,n,this.source)&&this.applySingleValue(e)}catch(i){this.destination.error(i)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new qM.EmptyError)},t}(NM.Subscriber)});var Gb=h(Vi=>{"use strict";var kM=Vi&&Vi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Vi,"__esModule",{value:!0});var UM=w();function LM(r){return function(t){return t.lift(new FM(r))}}s(LM,"skip");Vi.skip=LM;var FM=function(){function r(t){this.total=t}return s(r,"SkipOperator"),r.prototype.call=function(t,e){return e.subscribe(new BM(t,this.total))},r}(),BM=function(r){kM(t,r);function t(e,n){var i=r.call(this,e)||this;return i.total=n,i.count=0,i}return s(t,"SkipSubscriber"),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(UM.Subscriber)});var $b=h(Wi=>{"use strict";var VM=Wi&&Wi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Wi,"__esModule",{value:!0});var Qb=w(),WM=kr();function HM(r){return function(t){return t.lift(new zM(r))}}s(HM,"skipLast");Wi.skipLast=HM;var zM=function(){function r(t){if(this._skipCount=t,this._skipCount<0)throw new WM.ArgumentOutOfRangeError}return s(r,"SkipLastOperator"),r.prototype.call=function(t,e){return this._skipCount===0?e.subscribe(new Qb.Subscriber(t)):e.subscribe(new YM(t,this._skipCount))},r}(),YM=function(r){VM(t,r);function t(e,n){var i=r.call(this,e)||this;return i._skipCount=n,i._count=0,i._ring=new Array(n),i}return s(t,"SkipLastSubscriber"),t.prototype._next=function(e){var n=this._skipCount,i=this._count++;if(i<n)this._ring[i]=e;else{var o=i%n,u=this._ring,a=u[o];u[o]=e,this.destination.next(a)}},t}(Qb.Subscriber)});var Xb=h(Hi=>{"use strict";var ZM=Hi&&Hi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Hi,"__esModule",{value:!0});var $l=F();function KM(r){return function(t){return t.lift(new GM(r))}}s(KM,"skipUntil");Hi.skipUntil=KM;var GM=function(){function r(t){this.notifier=t}return s(r,"SkipUntilOperator"),r.prototype.call=function(t,e){return e.subscribe(new QM(t,this.notifier))},r}(),QM=function(r){ZM(t,r);function t(e,n){var i=r.call(this,e)||this;i.hasValue=!1;var o=new $l.SimpleInnerSubscriber(i);i.add(o),i.innerSubscription=o;var u=$l.innerSubscribe(n,o);return u!==o&&(i.add(u),i.innerSubscription=u),i}return s(t,"SkipUntilSubscriber"),t.prototype._next=function(e){this.hasValue&&r.prototype._next.call(this,e)},t.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},t.prototype.notifyComplete=function(){},t}($l.SimpleOuterSubscriber)});var Jb=h(zi=>{"use strict";var $M=zi&&zi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(zi,"__esModule",{value:!0});var XM=w();function JM(r){return function(t){return t.lift(new ek(r))}}s(JM,"skipWhile");zi.skipWhile=JM;var ek=function(){function r(t){this.predicate=t}return s(r,"SkipWhileOperator"),r.prototype.call=function(t,e){return e.subscribe(new tk(t,this.predicate))},r}(),tk=function(r){$M(t,r);function t(e,n){var i=r.call(this,e)||this;return i.predicate=n,i.skipping=!0,i.index=0,i}return s(t,"SkipWhileSubscriber"),t.prototype._next=function(e){var n=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||n.next(e)},t.prototype.tryCallPredicate=function(e){try{var n=this.predicate(e,this.index++);this.skipping=!!n}catch(i){this.destination.error(i)}},t}(XM.Subscriber)});var ty=h(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});var ey=ei(),rk=qe();function nk(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return rk.isScheduler(e)?(r.pop(),function(n){return ey.concat(r,n,e)}):function(n){return ey.concat(r,n)}}s(nk,"startWith");Xl.startWith=nk});var ry=h(Yi=>{"use strict";var ik=Yi&&Yi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Yi,"__esModule",{value:!0});var ok=j(),Jl=ic(),sk=ti(),uk=function(r){ik(t,r);function t(e,n,i){n===void 0&&(n=0),i===void 0&&(i=Jl.asap);var o=r.call(this)||this;return o.source=e,o.delayTime=n,o.scheduler=i,(!sk.isNumeric(n)||n<0)&&(o.delayTime=0),(!i||typeof i.schedule!="function")&&(o.scheduler=Jl.asap),o}return s(t,"SubscribeOnObservable"),t.create=function(e,n,i){return n===void 0&&(n=0),i===void 0&&(i=Jl.asap),new t(e,n,i)},t.dispatch=function(e){var n=e.source,i=e.subscriber;return this.add(n.subscribe(i))},t.prototype._subscribe=function(e){var n=this.delayTime,i=this.source,o=this.scheduler;return o.schedule(t.dispatch,n,{source:i,subscriber:e})},t}(ok.Observable);Yi.SubscribeOnObservable=uk});var ny=h(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});var ak=ry();function ck(r,t){return t===void 0&&(t=0),s(function(n){return n.lift(new lk(r,t))},"subscribeOnOperatorFunction")}s(ck,"subscribeOn");ef.subscribeOn=ck;var lk=function(){function r(t,e){this.scheduler=t,this.delay=e}return s(r,"SubscribeOnOperator"),r.prototype.call=function(t,e){return new ak.SubscribeOnObservable(e,this.delay,this.scheduler).subscribe(t)},r}()});var Ts=h(Zi=>{"use strict";var fk=Zi&&Zi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Zi,"__esModule",{value:!0});var hk=ye(),pk=De(),tf=F();function iy(r,t){return typeof t=="function"?function(e){return e.pipe(iy(function(n,i){return pk.from(r(n,i)).pipe(hk.map(function(o,u){return t(n,o,i,u)}))}))}:function(e){return e.lift(new _k(r))}}s(iy,"switchMap");Zi.switchMap=iy;var _k=function(){function r(t){this.project=t}return s(r,"SwitchMapOperator"),r.prototype.call=function(t,e){return e.subscribe(new dk(t,this.project))},r}(),dk=function(r){fk(t,r);function t(e,n){var i=r.call(this,e)||this;return i.project=n,i.index=0,i}return s(t,"SwitchMapSubscriber"),t.prototype._next=function(e){var n,i=this.index++;try{n=this.project(e,i)}catch(o){this.destination.error(o);return}this._innerSub(n)},t.prototype._innerSub=function(e){var n=this.innerSubscription;n&&n.unsubscribe();var i=new tf.SimpleInnerSubscriber(this),o=this.destination;o.add(i),this.innerSubscription=tf.innerSubscribe(e,i),this.innerSubscription!==i&&o.add(this.innerSubscription)},t.prototype._complete=function(){var e=this.innerSubscription;(!e||e.closed)&&r.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&r.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(tf.SimpleOuterSubscriber)});var oy=h(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});var vk=Ts(),bk=vt();function yk(){return vk.switchMap(bk.identity)}s(yk,"switchAll");rf.switchAll=yk});var uy=h(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});var sy=Ts();function mk(r,t){return t?sy.switchMap(function(){return r},t):sy.switchMap(function(){return r})}s(mk,"switchMapTo");nf.switchMapTo=mk});var ay=h(Ki=>{"use strict";var Ok=Ki&&Ki.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ki,"__esModule",{value:!0});var of=F();function gk(r){return function(t){return t.lift(new Sk(r))}}s(gk,"takeUntil");Ki.takeUntil=gk;var Sk=function(){function r(t){this.notifier=t}return s(r,"TakeUntilOperator"),r.prototype.call=function(t,e){var n=new Ek(t),i=of.innerSubscribe(this.notifier,new of.SimpleInnerSubscriber(n));return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n},r}(),Ek=function(r){Ok(t,r);function t(e){var n=r.call(this,e)||this;return n.seenValue=!1,n}return s(t,"TakeUntilSubscriber"),t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(of.SimpleOuterSubscriber)});var cy=h(Gi=>{"use strict";var wk=Gi&&Gi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Gi,"__esModule",{value:!0});var Tk=w();function Pk(r,t){return t===void 0&&(t=!1),function(e){return e.lift(new Ck(r,t))}}s(Pk,"takeWhile");Gi.takeWhile=Pk;var Ck=function(){function r(t,e){this.predicate=t,this.inclusive=e}return s(r,"TakeWhileOperator"),r.prototype.call=function(t,e){return e.subscribe(new Ik(t,this.predicate,this.inclusive))},r}(),Ik=function(r){wk(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.predicate=n,o.inclusive=i,o.index=0,o}return s(t,"TakeWhileSubscriber"),t.prototype._next=function(e){var n=this.destination,i;try{i=this.predicate(e,this.index++)}catch(o){n.error(o);return}this.nextOrComplete(e,i)},t.prototype.nextOrComplete=function(e,n){var i=this.destination;n?i.next(e):(this.inclusive&&i.next(e),i.complete())},t}(Tk.Subscriber)});var ly=h(Qi=>{"use strict";var Rk=Qi&&Qi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Qi,"__esModule",{value:!0});var Ak=w(),gt=ls(),jk=Ir();function Nk(r,t,e){return s(function(i){return i.lift(new qk(r,t,e))},"tapOperatorFunction")}s(Nk,"tap");Qi.tap=Nk;var qk=function(){function r(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return s(r,"DoOperator"),r.prototype.call=function(t,e){return e.subscribe(new Dk(t,this.nextOrObserver,this.error,this.complete))},r}(),Dk=function(r){Rk(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u._tapNext=gt.noop,u._tapError=gt.noop,u._tapComplete=gt.noop,u._tapError=i||gt.noop,u._tapComplete=o||gt.noop,jk.isFunction(n)?(u._context=u,u._tapNext=n):n&&(u._context=n,u._tapNext=n.next||gt.noop,u._tapError=n.error||gt.noop,u._tapComplete=n.complete||gt.noop),u}return s(t,"TapSubscriber"),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(n){this.destination.error(n);return}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(n){this.destination.error(n);return}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){this.destination.error(e);return}return this.destination.complete()},t}(Ak.Subscriber)});var uf=h(Zt=>{"use strict";var xk=Zt&&Zt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Zt,"__esModule",{value:!0});var sf=F();Zt.defaultThrottleConfig={leading:!0,trailing:!1};function Mk(r,t){return t===void 0&&(t=Zt.defaultThrottleConfig),function(e){return e.lift(new kk(r,!!t.leading,!!t.trailing))}}s(Mk,"throttle");Zt.throttle=Mk;var kk=function(){function r(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return s(r,"ThrottleOperator"),r.prototype.call=function(t,e){return e.subscribe(new Uk(t,this.durationSelector,this.leading,this.trailing))},r}(),Uk=function(r){xk(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.destination=e,u.durationSelector=n,u._leading=i,u._trailing=o,u._hasValue=!1,u}return s(t,"ThrottleSubscriber"),t.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},t.prototype.send=function(){var e=this,n=e._hasValue,i=e._sendValue;n&&(this.destination.next(i),this.throttle(i)),this._hasValue=!1,this._sendValue=void 0},t.prototype.throttle=function(e){var n=this.tryDurationSelector(e);n&&this.add(this._throttled=sf.innerSubscribe(n,new sf.SimpleInnerSubscriber(this)))},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(n){return this.destination.error(n),null}},t.prototype.throttlingDone=function(){var e=this,n=e._throttled,i=e._trailing;n&&n.unsubscribe(),this._throttled=void 0,i&&this.send()},t.prototype.notifyNext=function(){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()},t}(sf.SimpleOuterSubscriber)});var fy=h($i=>{"use strict";var Lk=$i&&$i.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty($i,"__esModule",{value:!0});var Fk=w(),Bk=ne(),Vk=uf();function Wk(r,t,e){return t===void 0&&(t=Bk.async),e===void 0&&(e=Vk.defaultThrottleConfig),function(n){return n.lift(new Hk(r,t,e.leading,e.trailing))}}s(Wk,"throttleTime");$i.throttleTime=Wk;var Hk=function(){function r(t,e,n,i){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=i}return s(r,"ThrottleTimeOperator"),r.prototype.call=function(t,e){return e.subscribe(new zk(t,this.duration,this.scheduler,this.leading,this.trailing))},r}(),zk=function(r){Lk(t,r);function t(e,n,i,o,u){var a=r.call(this,e)||this;return a.duration=n,a.scheduler=i,a.leading=o,a.trailing=u,a._hasTrailingValue=!1,a._trailingValue=null,a}return s(t,"ThrottleTimeSubscriber"),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Yk,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(Fk.Subscriber);function Yk(r){var t=r.subscriber;t.clearThrottle()}s(Yk,"dispatchNext")});var py=h(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});var Zk=ne(),Kk=Es(),Gk=ds(),Qk=ye();function $k(r){return r===void 0&&(r=Zk.async),function(t){return Gk.defer(function(){return t.pipe(Kk.scan(function(e,n){var i=e.current;return{value:n,current:r.now(),last:i}},{current:r.now(),value:void 0,last:void 0}),Qk.map(function(e){var n=e.current,i=e.last,o=e.value;return new hy(o,n-i)}))})}}s($k,"timeInterval");Ps.timeInterval=$k;var hy=function(){function r(t,e){this.value=t,this.interval=e}return s(r,"TimeInterval"),r}();Ps.TimeInterval=hy});var cf=h(Xi=>{"use strict";var Xk=Xi&&Xi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Xi,"__esModule",{value:!0});var Jk=ne(),eU=bl(),af=F();function tU(r,t,e){return e===void 0&&(e=Jk.async),function(n){var i=eU.isDate(r),o=i?+r-e.now():Math.abs(r);return n.lift(new rU(o,i,t,e))}}s(tU,"timeoutWith");Xi.timeoutWith=tU;var rU=function(){function r(t,e,n,i){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=i}return s(r,"TimeoutWithOperator"),r.prototype.call=function(t,e){return e.subscribe(new nU(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},r}(),nU=function(r){Xk(t,r);function t(e,n,i,o,u){var a=r.call(this,e)||this;return a.absoluteTimeout=n,a.waitFor=i,a.withObservable=o,a.scheduler=u,a.scheduleTimeout(),a}return s(t,"TimeoutWithSubscriber"),t.dispatchTimeout=function(e){var n=e.withObservable;e._unsubscribeAndRecycle(),e.add(af.innerSubscribe(n,new af.SimpleInnerSubscriber(e)))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),r.prototype._next.call(this,e)},t.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},t}(af.SimpleOuterSubscriber)});var _y=h(lf=>{"use strict";Object.defineProperty(lf,"__esModule",{value:!0});var iU=ne(),oU=lc(),sU=cf(),uU=ss();function aU(r,t){return t===void 0&&(t=iU.async),sU.timeoutWith(r,uU.throwError(new oU.TimeoutError),t)}s(aU,"timeout");lf.timeout=aU});var vy=h(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});var cU=ne(),lU=ye();function fU(r){return r===void 0&&(r=cU.async),lU.map(function(t){return new dy(t,r.now())})}s(fU,"timestamp");Cs.timestamp=fU;var dy=function(){function r(t,e){this.value=t,this.timestamp=e}return s(r,"Timestamp"),r}();Cs.Timestamp=dy});var by=h(ff=>{"use strict";Object.defineProperty(ff,"__esModule",{value:!0});var hU=qi();function pU(r,t,e){return e===0?[t]:(r.push(t),r)}s(pU,"toArrayReducer");function _U(){return hU.reduce(pU,[])}s(_U,"toArray");ff.toArray=_U});var my=h(Ji=>{"use strict";var dU=Ji&&Ji.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ji,"__esModule",{value:!0});var yy=J(),hf=F();function vU(r){return s(function(e){return e.lift(new bU(r))},"windowOperatorFunction")}s(vU,"window");Ji.window=vU;var bU=function(){function r(t){this.windowBoundaries=t}return s(r,"WindowOperator"),r.prototype.call=function(t,e){var n=new yU(t),i=e.subscribe(n);return i.closed||n.add(hf.innerSubscribe(this.windowBoundaries,new hf.SimpleInnerSubscriber(n))),i},r}(),yU=function(r){dU(t,r);function t(e){var n=r.call(this,e)||this;return n.window=new yy.Subject,e.next(n.window),n}return s(t,"WindowSubscriber"),t.prototype.notifyNext=function(){this.openWindow()},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var n=this.destination,i=this.window=new yy.Subject;n.next(i)},t}(hf.SimpleOuterSubscriber)});var gy=h(eo=>{"use strict";var mU=eo&&eo.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(eo,"__esModule",{value:!0});var OU=w(),Oy=J();function gU(r,t){return t===void 0&&(t=0),s(function(n){return n.lift(new SU(r,t))},"windowCountOperatorFunction")}s(gU,"windowCount");eo.windowCount=gU;var SU=function(){function r(t,e){this.windowSize=t,this.startWindowEvery=e}return s(r,"WindowCountOperator"),r.prototype.call=function(t,e){return e.subscribe(new EU(t,this.windowSize,this.startWindowEvery))},r}(),EU=function(r){mU(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.destination=e,o.windowSize=n,o.startWindowEvery=i,o.windows=[new Oy.Subject],o.count=0,e.next(o.windows[0]),o}return s(t,"WindowCountSubscriber"),t.prototype._next=function(e){for(var n=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,i=this.destination,o=this.windowSize,u=this.windows,a=u.length,l=0;l<a&&!this.closed;l++)u[l].next(e);var c=this.count-o+1;if(c>=0&&c%n===0&&!this.closed&&u.shift().complete(),++this.count%n===0&&!this.closed){var f=new Oy.Subject;u.push(f),i.next(f)}},t.prototype._error=function(e){var n=this.windows;if(n)for(;n.length>0&&!this.closed;)n.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(OU.Subscriber)});var Ty=h(to=>{"use strict";var Ey=to&&to.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(to,"__esModule",{value:!0});var wU=J(),TU=ne(),PU=w(),Sy=ti(),pf=qe();function CU(r){var t=TU.async,e=null,n=Number.POSITIVE_INFINITY;return pf.isScheduler(arguments[3])&&(t=arguments[3]),pf.isScheduler(arguments[2])?t=arguments[2]:Sy.isNumeric(arguments[2])&&(n=Number(arguments[2])),pf.isScheduler(arguments[1])?t=arguments[1]:Sy.isNumeric(arguments[1])&&(e=Number(arguments[1])),s(function(o){return o.lift(new IU(r,e,n,t))},"windowTimeOperatorFunction")}s(CU,"windowTime");to.windowTime=CU;var IU=function(){function r(t,e,n,i){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=i}return s(r,"WindowTimeOperator"),r.prototype.call=function(t,e){return e.subscribe(new AU(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},r}(),RU=function(r){Ey(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return s(t,"CountedSubject"),t.prototype.next=function(e){this._numberOfNextedValues++,r.prototype.next.call(this,e)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(wU.Subject),AU=function(r){Ey(t,r);function t(e,n,i,o,u){var a=r.call(this,e)||this;a.destination=e,a.windowTimeSpan=n,a.windowCreationInterval=i,a.maxWindowSize=o,a.scheduler=u,a.windows=[];var l=a.openWindow();if(i!==null&&i>=0){var c={subscriber:a,window:l,context:null},f={windowTimeSpan:n,windowCreationInterval:i,subscriber:a,scheduler:u};a.add(u.schedule(wy,n,c)),a.add(u.schedule(NU,i,f))}else{var p={subscriber:a,window:l,windowTimeSpan:n};a.add(u.schedule(jU,n,p))}return a}return s(t,"WindowTimeSubscriber"),t.prototype._next=function(e){for(var n=this.windows,i=n.length,o=0;o<i;o++){var u=n[o];u.closed||(u.next(e),u.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(u))}},t.prototype._error=function(e){for(var n=this.windows;n.length>0;)n.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var n=e.shift();n.closed||n.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new RU;this.windows.push(e);var n=this.destination;return n.next(e),e},t.prototype.closeWindow=function(e){e.complete();var n=this.windows;n.splice(n.indexOf(e),1)},t}(PU.Subscriber);function jU(r){var t=r.subscriber,e=r.windowTimeSpan,n=r.window;n&&t.closeWindow(n),r.window=t.openWindow(),this.schedule(r,e)}s(jU,"dispatchWindowTimeSpanOnly");function NU(r){var t=r.windowTimeSpan,e=r.subscriber,n=r.scheduler,i=r.windowCreationInterval,o=e.openWindow(),u=this,a={action:u,subscription:null},l={subscriber:e,window:o,context:a};a.subscription=n.schedule(wy,t,l),u.add(a.subscription),u.schedule(r,i)}s(NU,"dispatchWindowCreation");function wy(r){var t=r.subscriber,e=r.window,n=r.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),t.closeWindow(e)}s(wy,"dispatchWindowClose")});var Cy=h(ro=>{"use strict";var qU=ro&&ro.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ro,"__esModule",{value:!0});var DU=J(),xU=G(),MU=yt(),Py=mt();function kU(r,t){return function(e){return e.lift(new UU(r,t))}}s(kU,"windowToggle");ro.windowToggle=kU;var UU=function(){function r(t,e){this.openings=t,this.closingSelector=e}return s(r,"WindowToggleOperator"),r.prototype.call=function(t,e){return e.subscribe(new LU(t,this.openings,this.closingSelector))},r}(),LU=function(r){qU(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.openings=n,o.closingSelector=i,o.contexts=[],o.add(o.openSubscription=Py.subscribeToResult(o,n,n)),o}return s(t,"WindowToggleSubscriber"),t.prototype._next=function(e){var n=this.contexts;if(n)for(var i=n.length,o=0;o<i;o++)n[o].window.next(e)},t.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var i=n.length,o=-1;++o<i;){var u=n[o];u.window.error(e),u.subscription.unsubscribe()}r.prototype._error.call(this,e)},t.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,i=-1;++i<n;){var o=e[i];o.window.complete(),o.subscription.unsubscribe()}r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,i=-1;++i<n;){var o=e[i];o.window.unsubscribe(),o.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,n,i,o,u){if(e===this.openings){var a=void 0;try{var l=this.closingSelector;a=l(n)}catch(m){return this.error(m)}var c=new DU.Subject,f=new xU.Subscription,p={window:c,subscription:f};this.contexts.push(p);var _=Py.subscribeToResult(this,a,p);_.closed?this.closeWindow(this.contexts.length-1):(_.context=p,f.add(_)),this.destination.next(c)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(e!==-1){var n=this.contexts,i=n[e],o=i.window,u=i.subscription;n.splice(e,1),o.complete(),u.unsubscribe()}},t}(MU.OuterSubscriber)});var Iy=h(no=>{"use strict";var FU=no&&no.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(no,"__esModule",{value:!0});var BU=J(),VU=yt(),WU=mt();function HU(r){return s(function(e){return e.lift(new zU(r))},"windowWhenOperatorFunction")}s(HU,"windowWhen");no.windowWhen=HU;var zU=function(){function r(t){this.closingSelector=t}return s(r,"WindowOperator"),r.prototype.call=function(t,e){return e.subscribe(new YU(t,this.closingSelector))},r}(),YU=function(r){FU(t,r);function t(e,n){var i=r.call(this,e)||this;return i.destination=e,i.closingSelector=n,i.openWindow(),i}return s(t,"WindowSubscriber"),t.prototype.notifyNext=function(e,n,i,o,u){this.openWindow(u)},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){e===void 0&&(e=null),e&&(this.remove(e),e.unsubscribe());var n=this.window;n&&n.complete();var i=this.window=new BU.Subject;this.destination.next(i);var o;try{var u=this.closingSelector;o=u()}catch(a){this.destination.error(a),this.window.error(a);return}this.add(this.closingNotification=WU.subscribeToResult(this,o))},t}(VU.OuterSubscriber)});var Ry=h(io=>{"use strict";var ZU=io&&io.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(io,"__esModule",{value:!0});var KU=yt(),GU=mt();function QU(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){var n;typeof r[r.length-1]=="function"&&(n=r.pop());var i=r;return e.lift(new $U(i,n))}}s(QU,"withLatestFrom");io.withLatestFrom=QU;var $U=function(){function r(t,e){this.observables=t,this.project=e}return s(r,"WithLatestFromOperator"),r.prototype.call=function(t,e){return e.subscribe(new XU(t,this.observables,this.project))},r}(),XU=function(r){ZU(t,r);function t(e,n,i){var o=r.call(this,e)||this;o.observables=n,o.project=i,o.toRespond=[];var u=n.length;o.values=new Array(u);for(var a=0;a<u;a++)o.toRespond.push(a);for(var a=0;a<u;a++){var l=n[a];o.add(GU.subscribeToResult(o,l,void 0,a))}return o}return s(t,"WithLatestFromSubscriber"),t.prototype.notifyNext=function(e,n,i){this.values[i]=n;var o=this.toRespond;if(o.length>0){var u=o.indexOf(i);u!==-1&&o.splice(u,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(this.toRespond.length===0){var n=[e].concat(this.values);this.project?this._tryProject(n):this.destination.next(n)}},t.prototype._tryProject=function(e){var n;try{n=this.project.apply(this,e)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(KU.OuterSubscriber)});var Ay=h(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});var JU=Os();function eL(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return s(function(n){return n.lift.call(JU.zip.apply(void 0,[n].concat(r)))},"zipOperatorFunction")}s(eL,"zip");_f.zip=eL});var jy=h(df=>{"use strict";Object.defineProperty(df,"__esModule",{value:!0});var tL=Os();function rL(r){return function(t){return t.lift(new tL.ZipOperator(r))}}s(rL,"zipAll");df.zipAll=rL});var Is=h(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var nL=il();b.audit=nL.audit;var iL=dv();b.auditTime=iL.auditTime;var oL=vv();b.buffer=oL.buffer;var sL=mv();b.bufferCount=sL.bufferCount;var uL=Sv();b.bufferTime=uL.bufferTime;var aL=wv();b.bufferToggle=aL.bufferToggle;var cL=Tv();b.bufferWhen=cL.bufferWhen;var lL=Pv();b.catchError=lL.catchError;var fL=Cv();b.combineAll=fL.combineAll;var hL=Iv();b.combineLatest=hL.combineLatest;var pL=Rv();b.concat=pL.concat;var _L=Dc();b.concatAll=_L.concatAll;var dL=pl();b.concatMap=dL.concatMap;var vL=Av();b.concatMapTo=vL.concatMapTo;var bL=jv();b.count=bL.count;var yL=Nv();b.debounce=yL.debounce;var mL=qv();b.debounceTime=mL.debounceTime;var OL=Vr();b.defaultIfEmpty=OL.defaultIfEmpty;var gL=xv();b.delay=gL.delay;var SL=kv();b.delayWhen=SL.delayWhen;var EL=Uv();b.dematerialize=EL.dematerialize;var wL=Fv();b.distinct=wL.distinct;var TL=Ol();b.distinctUntilChanged=TL.distinctUntilChanged;var PL=Bv();b.distinctUntilKeyChanged=PL.distinctUntilKeyChanged;var CL=Wv();b.elementAt=CL.elementAt;var IL=Hv();b.endWith=IL.endWith;var RL=zv();b.every=RL.every;var AL=Yv();b.exhaust=AL.exhaust;var jL=Kv();b.exhaustMap=jL.exhaustMap;var NL=$v();b.expand=NL.expand;var qL=Lt();b.filter=qL.filter;var DL=Xv();b.finalize=DL.finalize;var xL=Cl();b.find=xL.find;var ML=tb();b.findIndex=ML.findIndex;var kL=rb();b.first=kL.first;var UL=Ha();b.groupBy=UL.groupBy;var LL=nb();b.ignoreElements=LL.ignoreElements;var FL=ib();b.isEmpty=FL.isEmpty;var BL=ob();b.last=BL.last;var VL=ye();b.map=VL.map;var WL=sb();b.mapTo=WL.mapTo;var HL=ub();b.materialize=HL.materialize;var zL=fb();b.max=zL.max;var YL=hb();b.merge=YL.merge;var ZL=_s();b.mergeAll=ZL.mergeAll;var Ny=Jn();b.mergeMap=Ny.mergeMap;b.flatMap=Ny.flatMap;var KL=_b();b.mergeMapTo=KL.mergeMapTo;var GL=bb();b.mergeScan=GL.mergeScan;var QL=yb();b.min=QL.min;var $L=zt();b.multicast=$L.multicast;var XL=nc();b.observeOn=XL.observeOn;var JL=Sb();b.onErrorResumeNext=JL.onErrorResumeNext;var eF=Eb();b.pairwise=eF.pairwise;var tF=Tb();b.partition=tF.partition;var rF=Pb();b.pluck=rF.pluck;var nF=Rb();b.publish=nF.publish;var iF=Ab();b.publishBehavior=iF.publishBehavior;var oF=jb();b.publishLast=oF.publishLast;var sF=Nb();b.publishReplay=sF.publishReplay;var uF=qb();b.race=uF.race;var aF=qi();b.reduce=aF.reduce;var cF=xb();b.repeat=cF.repeat;var lF=Mb();b.repeatWhen=lF.repeatWhen;var fF=kb();b.retry=fF.retry;var hF=Ub();b.retryWhen=hF.retryWhen;var pF=ns();b.refCount=pF.refCount;var _F=Lb();b.sample=_F.sample;var dF=Fb();b.sampleTime=dF.sampleTime;var vF=Es();b.scan=vF.scan;var bF=zb();b.sequenceEqual=bF.sequenceEqual;var yF=Yb();b.share=yF.share;var mF=Zb();b.shareReplay=mF.shareReplay;var OF=Kb();b.single=OF.single;var gF=Gb();b.skip=gF.skip;var SF=$b();b.skipLast=SF.skipLast;var EF=Xb();b.skipUntil=EF.skipUntil;var wF=Jb();b.skipWhile=wF.skipWhile;var TF=ty();b.startWith=TF.startWith;var PF=ny();b.subscribeOn=PF.subscribeOn;var CF=oy();b.switchAll=CF.switchAll;var IF=Ts();b.switchMap=IF.switchMap;var RF=uy();b.switchMapTo=RF.switchMapTo;var AF=gs();b.take=AF.take;var jF=Ss();b.takeLast=jF.takeLast;var NF=ay();b.takeUntil=NF.takeUntil;var qF=cy();b.takeWhile=qF.takeWhile;var DF=ly();b.tap=DF.tap;var xF=uf();b.throttle=xF.throttle;var MF=fy();b.throttleTime=MF.throttleTime;var kF=gi();b.throwIfEmpty=kF.throwIfEmpty;var UF=py();b.timeInterval=UF.timeInterval;var LF=_y();b.timeout=LF.timeout;var FF=cf();b.timeoutWith=FF.timeoutWith;var BF=vy();b.timestamp=BF.timestamp;var VF=by();b.toArray=VF.toArray;var WF=my();b.window=WF.window;var HF=gy();b.windowCount=HF.windowCount;var zF=Ty();b.windowTime=zF.windowTime;var YF=Cy();b.windowToggle=YF.windowToggle;var ZF=Iy();b.windowWhen=ZF.windowWhen;var KF=Ry();b.withLatestFrom=KF.withLatestFrom;var GF=Ay();b.zip=GF.zip;var QF=jy();b.zipAll=QF.zipAll});var As=h(Rs=>{"use strict";var qy=It();Object.defineProperty(Rs,"__esModule",{value:!0});Rs.default=void 0;var $F=qy(hr()),XF=qy(pr()),JF=R(),oo=ii(),Kt=Is(),so={READY:0,STREAMING:1,COMPLETED:2},eB=function(){function r(t){(0,$F.default)(this,r);var e=t.pipe((0,Kt.publishReplay)(1),(0,Kt.refCount)());this._result=e,this._keys=e.pipe((0,Kt.flatMap)(function(n){return(0,oo.from)(n.keys())}),(0,Kt.publishReplay)(1),(0,Kt.refCount)()),this._records=new oo.Subject,this._summary=new oo.ReplaySubject,this._state=so.READY}return s(r,"RxResult"),(0,XF.default)(r,[{key:"keys",value:s(function(){return this._keys},"keys")},{key:"records",value:s(function(){var e=this;return this._result.pipe((0,Kt.flatMap)(function(n){return new oo.Observable(function(i){return e._startStreaming({result:n,recordsObserver:i})})}))},"records")},{key:"consume",value:s(function(){var e=this;return this._result.pipe((0,Kt.flatMap)(function(n){return new oo.Observable(function(i){return e._startStreaming({result:n,summaryObserver:i})})}))},"consume")},{key:"_startStreaming",value:s(function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.result,o=n.recordsObserver,u=o===void 0?null:o,a=n.summaryObserver,l=a===void 0?null:a,c=[];return l&&c.push(this._summary.subscribe(l)),this._state<so.STREAMING?(this._state=so.STREAMING,u&&c.push(this._records.subscribe(u)),c.push({unsubscribe:s(function(){i._cancel&&i._cancel()},"unsubscribe")}),this._records.observers.length===0&&i._cancel(),i.subscribe({onNext:s(function(p){e._records.next(p)},"onNext"),onCompleted:s(function(p){e._records.complete(),e._summary.next(p),e._summary.complete(),e._state=so.COMPLETED},"onCompleted"),onError:s(function(p){e._records.error(p),e._summary.error(p),e._state=so.COMPLETED},"onError")})):u&&u.error((0,JF.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){c.forEach(function(f){return f.unsubscribe()})}},"_startStreaming")}]),r}();Rs.default=eB});var vf=h(qs=>{"use strict";var Ns=It();Object.defineProperty(qs,"__esModule",{value:!0});qs.default=void 0;var tB=Ns(hr()),rB=Ns(pr()),js=ii(),nB=Ns(As()),OQ=Ns(R()),iB=function(){function r(t){(0,tB.default)(this,r),this._txc=t}return s(r,"RxTransaction"),(0,rB.default)(r,[{key:"run",value:s(function(e,n){var i=this;return new nB.default(new js.Observable(function(o){try{o.next(i._txc.run(e,n)),o.complete()}catch(u){o.error(u)}return function(){}}))},"run")},{key:"commit",value:s(function(){var e=this;return new js.Observable(function(n){e._txc.commit().then(function(){n.complete()}).catch(function(i){return n.error(i)})})},"commit")},{key:"rollback",value:s(function(){var e=this;return new js.Observable(function(n){e._txc.rollback().then(function(){n.complete()}).catch(function(i){return n.error(i)})})},"rollback")},{key:"close",value:s(function(){var e=this;return new js.Observable(function(n){e._txc.close().then(function(){n.complete()}).catch(function(i){return n.error(i)})})},"close")}]),r}();qs.default=iB});var Ly=h(xs=>{"use strict";var Uy=It();Object.defineProperty(xs,"__esModule",{value:!0});xs.default=void 0;var oB=Uy(hr()),sB=Uy(pr()),uo=R(),bf=ii(),yf=Is(),EQ=uo.internal.logger.Logger,uB=uo.internal.retryStrategy.canRetryOn,aB=uo.error.SERVICE_UNAVAILABLE,wQ=uo.error.SESSION_EXPIRED,Dy=30*1e3,xy=1e3,My=2,ky=.2,cB=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.maxRetryTimeout,n=e===void 0?Dy:e,i=t.initialDelay,o=i===void 0?xy:i,u=t.delayMultiplier,a=u===void 0?My:u,l=t.delayJitter,c=l===void 0?ky:l,f=t.logger,p=f===void 0?null:f;(0,oB.default)(this,r),this._maxRetryTimeout=Ds(n,Dy),this._initialDelay=Ds(o,xy),this._delayMultiplier=Ds(a,My),this._delayJitter=Ds(c,ky),this._logger=p}return s(r,"RxRetryLogic"),(0,sB.default)(r,[{key:"retry",value:s(function(e){var n=this;return e.pipe((0,yf.retryWhen)(function(i){var o=[],u=Date.now(),a=1,l=n._initialDelay;return i.pipe((0,yf.flatMap)(function(c){if(!uB(c))return(0,bf.throwError)(c);if(o.push(c),a>=2&&Date.now()-u>=n._maxRetryTimeout){var f=(0,uo.newError)("Failed after retried for ".concat(a," times in ").concat(n._maxRetryTimeout," ms. Make sure that your database is online and retry again."),aB);return f.seenErrors=o,(0,bf.throwError)(f)}var p=n._computeNextDelay(l);return l=l*n._delayMultiplier,a++,n._logger&&n._logger.warn("Transaction failed and will be retried in ".concat(p)),(0,bf.of)(1).pipe((0,yf.delay)(p))}))}))},"retry")},{key:"_computeNextDelay",value:s(function(e){var n=e*this._delayJitter;return e-n+2*n*Math.random()},"_computeNextDelay")}]),r}();xs.default=cB;function Ds(r,t){return r||r===0?r:t}s(Ds,"valueOrDefault")});var mf=h(Us=>{"use strict";var ao=It();Object.defineProperty(Us,"__esModule",{value:!0});Us.default=void 0;var lB=ao(hr()),fB=ao(pr()),zr=ii(),Ms=Is(),hB=ao(As()),Fy=R(),pB=ao(vf()),_B=ao(Ly()),By=Fy.internal.constants,dB=By.ACCESS_MODE_READ,vB=By.ACCESS_MODE_WRITE,ks=Fy.internal.txConfig.TxConfig,bB=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.session,n=t.config;(0,lB.default)(this,r),this._session=e,this._retryLogic=yB(n)}return s(r,"RxSession"),(0,fB.default)(r,[{key:"run",value:s(function(e,n,i){var o=this;return new hB.default(new zr.Observable(function(u){try{u.next(o._session.run(e,n,i)),u.complete()}catch(a){u.error(a)}return function(){}}))},"run")},{key:"beginTransaction",value:s(function(e){return this._beginTransaction(this._session._mode,e)},"beginTransaction")},{key:"readTransaction",value:s(function(e,n){return this._runTransaction(dB,e,n)},"readTransaction")},{key:"writeTransaction",value:s(function(e,n){return this._runTransaction(vB,e,n)},"writeTransaction")},{key:"close",value:s(function(){var e=this;return new zr.Observable(function(n){e._session.close().then(function(){n.complete()}).catch(function(i){return n.error(i)})})},"close")},{key:"lastBookmark",value:s(function(){return this._session.lastBookmark()},"lastBookmark")},{key:"_beginTransaction",value:s(function(e,n){var i=this,o=ks.empty();return n&&(o=new ks(n)),new zr.Observable(function(u){try{u.next(new pB.default(i._session._beginTransaction(e,o))),u.complete()}catch(a){u.error(a)}return function(){}})},"_beginTransaction")},{key:"_runTransaction",value:s(function(e,n,i){var o=ks.empty();return i&&(o=new ks(i)),this._retryLogic.retry(this._beginTransaction(e,i).pipe((0,Ms.flatMap)(function(u){return(0,zr.defer)(function(){try{return n(u)}catch(a){return(0,zr.throwError)(a)}}).pipe((0,Ms.catchError)(function(a){return u.rollback().pipe((0,Ms.concat)((0,zr.throwError)(a)))}),(0,Ms.concat)(u.commit()))})))},"_runTransaction")}]),r}();Us.default=bB;function yB(r){var t=r&&r.maxTransactionRetryTime?r.maxTransactionRetryTime:null;return new _B.default({maxRetryTimeout:t})}s(yB,"_createRetryLogic")});var Yy=h(Ve=>{"use strict";var Yr=It();Object.defineProperty(Ve,"__esModule",{value:!0});Ve.default=Ve.WRITE=Ve.READ=Ve.Driver=void 0;var mB=Yr(hr()),OB=Yr(pr()),gB=Yr(Dh()),SB=Yr(Mh()),Vy=Yr(kh()),Ls=R(),EB=Yr(mf());function wB(r){var t=TB();return s(function(){var n=(0,Vy.default)(r),i;if(t){var o=(0,Vy.default)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,SB.default)(this,i)},"_createSuperInternal")}s(wB,"_createSuper");function TB(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}s(TB,"_isNativeReflectConstruct");var Wy=Ls.internal.constants.FETCH_ALL,PB=Ls.driver.READ,Hy=Ls.driver.WRITE;Ve.WRITE=Hy;Ve.READ=PB;var zy=function(r){(0,gB.default)(e,r);var t=wB(e);function e(){return(0,mB.default)(this,e),t.apply(this,arguments)}return s(e,"Driver"),(0,OB.default)(e,[{key:"rxSession",value:s(function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.defaultAccessMode,u=o===void 0?Hy:o,a=i.bookmarks,l=i.database,c=l===void 0?"":l,f=i.fetchSize,p=i.impersonatedUser;return new EB.default({session:this._newSession({defaultAccessMode:u,bookmarkOrBookmarks:a,database:c,impersonatedUser:p,reactive:!0,fetchSize:CB(f,this._config.fetchSize)}),config:this._config})},"rxSession")}]),e}(Ls.Driver);Ve.Driver=zy;function CB(r,t){var e=parseInt(r,10);if(e>0||e===Wy)return e;if(e===0||e<0)throw new Error("The fetch size can only be a positive value or ".concat(Wy," for ALL. However fetchSize = ").concat(e));return t}s(CB,"validateFetchSizeValue");var IB=zy;Ve.default=IB});var Zy=h(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.default=void 0;var RB="4.4.10";Fs.default=RB});var gf=h(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});var AB=function(){function r(){}return s(r,"LoadBalancingStrategy"),r.prototype.selectReader=function(t){throw new Error("Abstract function")},r.prototype.selectWriter=function(t){throw new Error("Abstract function")},r}();Of.default=AB});var Ky=h(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});var jB=function(){function r(t){this._offset=t||0}return s(r,"RoundRobinArrayIndex"),r.prototype.next=function(t){if(t===0)return-1;var e=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),e%t},r}();Sf.default=jB});var $y=h(Gt=>{"use strict";var NB=Gt&&Gt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Qy=Gt&&Gt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gt,"__esModule",{value:!0});var Gy=Qy(Ky()),qB=Qy(gf()),DB=function(r){NB(t,r);function t(e){var n=r.call(this)||this;return n._readersIndex=new Gy.default,n._writersIndex=new Gy.default,n._connectionPool=e,n}return s(t,"LeastConnectedLoadBalancingStrategy"),t.prototype.selectReader=function(e){return this._select(e,this._readersIndex)},t.prototype.selectWriter=function(e){return this._select(e,this._writersIndex)},t.prototype._select=function(e,n){var i=e.length;if(i===0)return null;var o=n.next(i),u=o,a=null,l=Number.MAX_SAFE_INTEGER;do{var c=e[u],f=this._connectionPool.activeResourceCount(c);f<l&&(a=c,l=f),u===i-1?u=0:u++}while(u!==o);return a},t}(qB.default);Gt.default=DB});var Ef=h(tt=>{"use strict";var Xy=tt&&tt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(tt,"__esModule",{value:!0});tt.LeastConnectedLoadBalancingStrategy=tt.LoadBalancingStrategy=void 0;var xB=Xy(gf());tt.LoadBalancingStrategy=xB.default;var Jy=Xy($y());tt.LeastConnectedLoadBalancingStrategy=Jy.default;tt.default=Jy.default});var wf=h(co=>{"use strict";var MB=co&&co.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(co,"__esModule",{value:!0});var em=function(){function r(t){this.position=0,this.length=t}return s(r,"BaseBuffer"),r.prototype.getUInt8=function(t){throw new Error("Not implemented")},r.prototype.getInt8=function(t){throw new Error("Not implemented")},r.prototype.getFloat64=function(t){throw new Error("Not implemented")},r.prototype.putUInt8=function(t,e){throw new Error("Not implemented")},r.prototype.putInt8=function(t,e){throw new Error("Not implemented")},r.prototype.putFloat64=function(t,e){throw new Error("Not implemented")},r.prototype.getInt16=function(t){return this.getInt8(t)<<8|this.getUInt8(t+1)},r.prototype.getUInt16=function(t){return this.getUInt8(t)<<8|this.getUInt8(t+1)},r.prototype.getInt32=function(t){return this.getInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)},r.prototype.getUInt32=function(t){return this.getUInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)},r.prototype.getInt64=function(t){return this.getInt8(t)<<56|this.getUInt8(t+1)<<48|this.getUInt8(t+2)<<40|this.getUInt8(t+3)<<32|this.getUInt8(t+4)<<24|this.getUInt8(t+5)<<16|this.getUInt8(t+6)<<8|this.getUInt8(t+7)},r.prototype.getSlice=function(t,e){return new kB(t,e,this)},r.prototype.putInt16=function(t,e){this.putInt8(t,e>>8),this.putUInt8(t+1,e&255)},r.prototype.putUInt16=function(t,e){this.putUInt8(t,e>>8&255),this.putUInt8(t+1,e&255)},r.prototype.putInt32=function(t,e){this.putInt8(t,e>>24),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,e&255)},r.prototype.putUInt32=function(t,e){this.putUInt8(t,e>>24&255),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,e&255)},r.prototype.putInt64=function(t,e){this.putInt8(t,e>>48),this.putUInt8(t+1,e>>42&255),this.putUInt8(t+2,e>>36&255),this.putUInt8(t+3,e>>30&255),this.putUInt8(t+4,e>>24&255),this.putUInt8(t+5,e>>16&255),this.putUInt8(t+6,e>>8&255),this.putUInt8(t+7,e&255)},r.prototype.putBytes=function(t,e){for(var n=0,i=e.remaining();n<i;n++)this.putUInt8(t+n,e.readUInt8())},r.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},r.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},r.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},r.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},r.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},r.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},r.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},r.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},r.prototype.writeUInt8=function(t){this.putUInt8(this._updatePos(1),t)},r.prototype.writeInt8=function(t){this.putInt8(this._updatePos(1),t)},r.prototype.writeInt16=function(t){this.putInt16(this._updatePos(2),t)},r.prototype.writeInt32=function(t){this.putInt32(this._updatePos(4),t)},r.prototype.writeUInt32=function(t){this.putUInt32(this._updatePos(4),t)},r.prototype.writeInt64=function(t){this.putInt64(this._updatePos(8),t)},r.prototype.writeFloat64=function(t){this.putFloat64(this._updatePos(8),t)},r.prototype.writeBytes=function(t){this.putBytes(this._updatePos(t.remaining()),t)},r.prototype.readSlice=function(t){return this.getSlice(this._updatePos(t),t)},r.prototype._updatePos=function(t){var e=this.position;return this.position+=t,e},r.prototype.remaining=function(){return this.length-this.position},r.prototype.hasRemaining=function(){return this.remaining()>0},r.prototype.reset=function(){this.position=0},r.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},r.prototype.toHex=function(){for(var t="",e=0;e<this.length;e++){var n=this.getUInt8(e).toString(16);n.length===1&&(n="0"+n),t+=n,e!==this.length-1&&(t+=" ")}return t},r}();co.default=em;var kB=function(r){MB(t,r);function t(e,n,i){var o=r.call(this,n)||this;return o._start=e,o._inner=i,o}return s(t,"SliceBuffer"),t.prototype.putUInt8=function(e,n){this._inner.putUInt8(this._start+e,n)},t.prototype.getUInt8=function(e){return this._inner.getUInt8(this._start+e)},t.prototype.putInt8=function(e,n){this._inner.putInt8(this._start+e,n)},t.prototype.putFloat64=function(e,n){this._inner.putFloat64(this._start+e,n)},t.prototype.getInt8=function(e){return this._inner.getInt8(this._start+e)},t.prototype.getFloat64=function(e){return this._inner.getFloat64(this._start+e)},t}(em)});var Bs=h(Qt=>{"use strict";var UB=Qt&&Qt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.BaseBuffer=void 0;var tm=UB(wf());Qt.BaseBuffer=tm.default;Qt.default=tm.default});var Zr=h(rt=>{"use strict";var LB=rt&&rt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),rm=rt&&rt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rt,"__esModule",{value:!0});rt.alloc=void 0;var Vs=rm(require("buffer")),FB=rm(Bs()),nm=function(r){LB(t,r);function t(e){var n=this,i=VB(e);return n=r.call(this,i.length)||this,n._buffer=i,n}return s(t,"ChannelBuffer"),t.prototype.getUInt8=function(e){return this._buffer.readUInt8(e)},t.prototype.getInt8=function(e){return this._buffer.readInt8(e)},t.prototype.getFloat64=function(e){return this._buffer.readDoubleBE(e)},t.prototype.putUInt8=function(e,n){this._buffer.writeUInt8(n,e)},t.prototype.putInt8=function(e,n){this._buffer.writeInt8(n,e)},t.prototype.putFloat64=function(e,n){this._buffer.writeDoubleBE(n,e)},t.prototype.putBytes=function(e,n){if(n instanceof t){var i=Math.min(n.length-n.position,this.length-e);n._buffer.copy(this._buffer,e,n.position,n.position+i),n.position+=i}else r.prototype.putBytes.call(this,e,n)},t.prototype.getSlice=function(e,n){return new t(this._buffer.slice(e,e+n))},t}(FB.default);rt.default=nm;function BB(r){return new nm(r)}s(BB,"alloc");rt.alloc=BB;function VB(r){return r instanceof Vs.default.Buffer?r:typeof r=="number"&&typeof Vs.default.Buffer.alloc=="function"?Vs.default.Buffer.alloc(r):new Vs.default.Buffer(r)}s(VB,"newChannelJSBuffer")});var sm=h(fo=>{"use strict";var Hs=fo&&fo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fo,"__esModule",{value:!0});var WB=Hs(require("net")),Tf=Hs(require("tls")),HB=Hs(require("fs")),im=Hs(Zr()),xe=R(),Cf=xe.internal.util,lo=Cf.ENCRYPTION_OFF,zB=Cf.ENCRYPTION_ON,YB=Cf.isEmptyObjectOrNull,ZB=0,om={TRUST_CUSTOM_CA_SIGNED_CERTIFICATES:function(r,t,e){if(!r.trustedCertificates||r.trustedCertificates.length===0){e((0,xe.newError)('You are using TRUST_CUSTOM_CA_SIGNED_CERTIFICATES as the method to verify trust for encrypted  connections, but have not configured any trustedCertificates. You  must specify the path to at least one trusted X.509 certificate for this to work. Two other alternatives is to use TRUST_ALL_CERTIFICATES or to disable encryption by setting encrypted="'+lo+'"in your driver configuration.'));return}var n=Pf(r.address.host(),r.trustedCertificates.map(function(o){return HB.default.readFileSync(o)})),i=Tf.default.connect(r.address.port(),r.address.resolvedHost(),n,function(){i.authorized?t():e((0,xe.newError)("Server certificate is not trusted. If you trust the database you are connecting to, add the signing certificate, or the server certificate, to the list of certificates trusted by this driver using `neo4j.driver(.., { trustedCertificates:['path/to/certificate.crt']}). This  is a security measure to protect against man-in-the-middle attacks. If you are just trying  Neo4j out and are not concerned about encryption, simply disable it using `encrypted=\""+lo+'"` in the driver options. Socket responded with: '+i.authorizationError))});return i.on("error",e),Ws(i)},TRUST_SYSTEM_CA_SIGNED_CERTIFICATES:function(r,t,e){var n=Pf(r.address.host()),i=Tf.default.connect(r.address.port(),r.address.resolvedHost(),n,function(){i.authorized?t():e((0,xe.newError)("Server certificate is not trusted. If you trust the database you are connecting to, use TRUST_CUSTOM_CA_SIGNED_CERTIFICATES and add the signing certificate, or the server certificate, to the list of certificates trusted by this driver using `neo4j.driver(.., { trustedCertificates:['path/to/certificate.crt']}). This  is a security measure to protect against man-in-the-middle attacks. If you are just trying  Neo4j out and are not concerned about encryption, simply disable it using `encrypted=\""+lo+'"` in the driver options. Socket responded with: '+i.authorizationError))});return i.on("error",e),Ws(i)},TRUST_ALL_CERTIFICATES:function(r,t,e){var n=Pf(r.address.host()),i=Tf.default.connect(r.address.port(),r.address.resolvedHost(),n,function(){var o=i.getPeerCertificate();YB(o)?e((0,xe.newError)('Secure connection was successful but server did not return any valid certificates. Such connection can not be trusted. If you are just trying  Neo4j out and are not concerned about encryption, simply disable it using `encrypted="'+lo+'"` in the driver options. Socket responded with: '+i.authorizationError)):t()});return i.on("error",e),Ws(i)}};function KB(r,t,e){e===void 0&&(e=s(function(){return null},"onFailure"));var n=QB(r);if(GB(r)){if(om[n])return om[n](r,t,e);e((0,xe.newError)("Unknown trust strategy: "+r.trust+". Please use either trust:'TRUST_CUSTOM_CA_SIGNED_CERTIFICATES' or trust:'TRUST_ALL_CERTIFICATES' in your driver configuration. Alternatively, you can disable encryption by setting `encrypted:\""+lo+'"`. There is no mechanism to use encryption without trust verification, because this incurs the overhead of encryption without improving security. If the driver does not verify that the peer it is connected to is really Neo4j, it is very easy for an attacker to bypass the encryption by pretending to be Neo4j.'))}else{var i=WB.default.connect(r.address.port(),r.address.resolvedHost(),t);return i.on("error",e),Ws(i)}}s(KB,"_connect");function GB(r){var t=r.encrypted==null||r.encrypted===void 0;return t?!1:r.encrypted===!0||r.encrypted===zB}s(GB,"isEncrypted");function QB(r){return r.trust?r.trust:"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"}s(QB,"trustStrategyName");function Pf(r,t){return t===void 0&&(t=void 0),{rejectUnauthorized:!1,servername:r,ca:t}}s(Pf,"newTlsOptions");function Ws(r){return r.setKeepAlive(!0),r}s(Ws,"configureSocket");var $B=function(){function r(t,e){e===void 0&&(e=KB);var n=this;this.id=ZB++,this._pending=[],this._open=!0,this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._handleConnectionTerminated=this._handleConnectionTerminated.bind(this),this._connectionErrorCode=t.connectionErrorCode,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._conn=e(t,function(){if(n._open){n._conn.on("data",function(u){n.onmessage&&n.onmessage(new im.default(u))}),n._conn.on("error",n._handleConnectionError),n._conn.on("end",n._handleConnectionTerminated);var i=n._pending;n._pending=null;for(var o=0;o<i.length;o++)n.write(i[o])}},this._handleConnectionError),this._setupConnectionTimeout(t,this._conn)}return s(r,"NodeChannel"),r.prototype._handleConnectionError=function(t){var e="Failed to connect to server. Please ensure that your database is listening on the correct host and port and that you have compatible encryption settings both on Neo4j server and driver. Note that the default encryption setting has changed in Neo4j 4.0.";t.message&&(e+=" Caused by: "+t.message),this._error=(0,xe.newError)(e,this._connectionErrorCode),this.onerror&&this.onerror(this._error)},r.prototype._handleConnectionTerminated=function(){this._open=!1,this._error=(0,xe.newError)("Connection was closed by server",this._connectionErrorCode),this.onerror&&this.onerror(this._error)},r.prototype._setupConnectionTimeout=function(t,e){var n=this,i=t.connectionTimeout;if(i){var o=s(function(){e.setTimeout(0)},"connectListener_1"),u=s(function(){e.setTimeout(0),e.destroy((0,xe.newError)("Failed to establish connection in "+i+"ms",t.connectionErrorCode))},"timeoutListener_1");e.on("connect",o),e.on("timeout",u),this._removeConnectionTimeoutListeners=function(){n._conn.off("connect",o),n._conn.off("timeout",u)},e.setTimeout(i)}},r.prototype.setupReceiveTimeout=function(t){var e=this;this._removeConnectionTimeoutListeners&&this._removeConnectionTimeoutListeners(),this._conn.on("timeout",function(){e._conn.destroy((0,xe.newError)("Connection lost. Server didn't respond in "+t+"ms",e._connectionErrorCode))}),this._receiveTimeout=t},r.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._conn.setTimeout(0))},r.prototype.startReceiveTimeout=function(){this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._conn.setTimeout(this._receiveTimeout))},r.prototype.write=function(t){if(this._pending!==null)this._pending.push(t);else if(t instanceof im.default)this._conn.write(t._buffer);else throw(0,xe.newError)("Don't know how to write: "+t)},r.prototype.close=function(){var t=this;return new Promise(function(e,n){var i=s(function(){t._conn.destroyed||t._conn.destroy(),e()},"cleanup");t._open?(t._open=!1,t._conn.removeListener("end",t._handleConnectionTerminated),t._conn.on("end",function(){return i()}),t._conn.on("close",function(){return i()}),t._conn.end(),t._conn.destroy()):i()})},r}();fo.default=$B});var um=h($t=>{"use strict";var XB=$t&&$t.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),JB=$t&&$t.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($t,"__esModule",{value:!0});var eV=JB(require("dns")),tV=R(),rV=tV.internal.resolver.BaseHostNameResolver,nV=function(r){XB(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"NodeHostNameResolver"),t.prototype.resolve=function(e){return new Promise(function(n){eV.default.lookup(e.host(),{all:!0},function(i,o){if(i)n([e]);else{var u=o.map(function(a){return e.resolveWith(a.address)});n(u)}})})},t}(rV);$t.default=nV});var cm=h(St=>{"use strict";var am=St&&St.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(St,"__esModule",{value:!0});St.HostNameResolver=St.Channel=void 0;var iV=am(sm()),oV=am(um());St.Channel=iV.default;St.HostNameResolver=oV.default});var lm=h(ho=>{"use strict";var sV=ho&&ho.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ho,"__esModule",{value:!0});var uV=Bs(),aV=Zr(),cV=function(r){sV(t,r);function t(e){for(var n=this,i=0,o=0;o<e.length;o++)i+=e[o].length;return n=r.call(this,i)||this,n._buffers=e,n}return s(t,"CombinedBuffer"),t.prototype.getUInt8=function(e){for(var n=0;n<this._buffers.length;n++){var i=this._buffers[n];if(e>=i.length)e-=i.length;else return i.getUInt8(e)}},t.prototype.getInt8=function(e){for(var n=0;n<this._buffers.length;n++){var i=this._buffers[n];if(e>=i.length)e-=i.length;else return i.getInt8(e)}},t.prototype.getFloat64=function(e){for(var n=(0,aV.alloc)(8),i=0;i<8;i++)n.putUInt8(i,this.getUInt8(e+i));return n.getFloat64(0)},t}(uV.BaseBuffer);ho.default=cV});var pm=h(We=>{"use strict";var lV=We&&We.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),hm=We&&We.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(We,"__esModule",{value:!0});We.Dechunker=We.Chunker=void 0;var fV=hm(wf()),fm=Zr(),hV=hm(lm()),zs=2,pV=0,_V=1400,dV=function(r){lV(t,r);function t(e,n){var i=r.call(this,0)||this;return i._bufferSize=n||_V,i._ch=e,i._buffer=(0,fm.alloc)(i._bufferSize),i._currentChunkStart=0,i._chunkOpen=!1,i}return s(t,"Chunker"),t.prototype.putUInt8=function(e,n){this._ensure(1),this._buffer.writeUInt8(n)},t.prototype.putInt8=function(e,n){this._ensure(1),this._buffer.writeInt8(n)},t.prototype.putFloat64=function(e,n){this._ensure(8),this._buffer.writeFloat64(n)},t.prototype.putBytes=function(e,n){for(;n.remaining()>0;)this._ensure(1),this._buffer.remaining()>n.remaining()?this._buffer.writeBytes(n):this._buffer.writeBytes(n.readSlice(this._buffer.remaining()));return this},t.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var e=this._buffer;this._buffer=null,this._ch.write(e.getSlice(0,e.position)),this._buffer=(0,fm.alloc)(this._bufferSize),this._chunkOpen=!1}return this},t.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<zs&&this.flush(),this._buffer.writeInt16(pV)},t.prototype._ensure=function(e){var n=this._chunkOpen?e:e+zs;this._buffer.remaining()<n&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+zs,this._chunkOpen=!0)},t.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var e=this._buffer.position-(this._currentChunkStart+zs);this._buffer.putUInt16(this._currentChunkStart,e),this._chunkOpen=!1}},t}(fV.default);We.Chunker=dV;var vV=function(){function r(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return s(r,"Dechunker"),r.prototype.AWAITING_CHUNK=function(t){return t.remaining()>=2?this._onHeader(t.readUInt16()):(this._partialChunkHeader=t.readUInt8()<<8,this.IN_HEADER)},r.prototype.IN_HEADER=function(t){return this._onHeader((this._partialChunkHeader|t.readUInt8())&65535)},r.prototype.IN_CHUNK=function(t){return this._chunkSize<=t.remaining()?(this._currentMessage.push(t.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=t.remaining(),this._currentMessage.push(t.readSlice(t.remaining())),this.IN_CHUNK)},r.prototype.CLOSED=function(t){},r.prototype._onHeader=function(t){if(t===0){var e=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:e=this._currentMessage[0];break;default:e=new hV.default(this._currentMessage);break}return this._currentMessage=[],this.onmessage(e),this.AWAITING_CHUNK}else return this._chunkSize=t,this.IN_CHUNK},r.prototype.write=function(t){for(;t.hasRemaining();)this._state=this._state(t)},r}();We.Dechunker=vV});var bm=h(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});var Ys=R(),vm=Ys.internal.util,bV=vm.ENCRYPTION_OFF,yV=vm.ENCRYPTION_ON,mV=Ys.error.SERVICE_UNAVAILABLE,OV=3e4,_m=[null,void 0,!0,!1,yV,bV],dm=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],gV=function(){function r(t,e,n){this.address=t,this.encrypted=SV(e),this.trust=EV(e),this.trustedCertificates=wV(e),this.knownHostsPath=TV(e),this.connectionErrorCode=n||mV,this.connectionTimeout=PV(e)}return s(r,"ChannelConfig"),r}();If.default=gV;function SV(r){var t=r.encrypted;if(_m.indexOf(t)===-1)throw(0,Ys.newError)("Illegal value of the encrypted setting "+t+". Expected one of "+_m);return t}s(SV,"extractEncrypted");function EV(r){var t=r.trust;if(dm.indexOf(t)===-1)throw(0,Ys.newError)("Illegal value of the trust setting "+t+". Expected one of "+dm);return t}s(EV,"extractTrust");function wV(r){return r.trustedCertificates||[]}s(wV,"extractTrustedCertificates");function TV(r){return r.knownHosts||null}s(TV,"extractKnownHostsPath");function PV(r){var t=parseInt(r.connectionTimeout,10);return t===0||t&&t<0?null:t||OV}s(PV,"extractConnectionTimeout")});var Om=h(po=>{"use strict";var mm=po&&po.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(po,"__esModule",{value:!0});var CV=mm(Zr()),IV=R(),Rf=mm(require("buffer")),RV=require("string_decoder"),ym=new RV.StringDecoder("utf8");function AV(r){return new CV.default(xV(r))}s(AV,"encode");function jV(r,t){if(Object.prototype.hasOwnProperty.call(r,"_buffer"))return NV(r,t);if(Object.prototype.hasOwnProperty.call(r,"_buffers"))return qV(r,t);throw(0,IV.newError)("Don't know how to decode strings from '"+r+"'")}s(jV,"decode");function NV(r,t){var e=r.position,n=e+t;return r.position=Math.min(n,r.length),r._buffer.toString("utf8",e,n)}s(NV,"decodeChannelBuffer");function qV(r,t){return DV(r,t,function(e){return ym.write(e._buffer)},function(){return ym.end()})}s(qV,"decodeCombinedBuffer");function DV(r,t,e,n){var i=t,o=r.position;r._updatePos(Math.min(t,r.length-o));var u=r._buffers.reduce(function(a,l){if(i<=0)return a;if(o>=l.length)return o-=l.length,"";l._updatePos(o-l.position);var c=Math.min(l.length-o,i),f=l.readSlice(c);return l._updatePos(c),i=Math.max(i-f.length,0),o=0,a+e(f)},"");return u+n()}s(DV,"streamDecodeCombinedBuffer");function xV(r){return typeof Rf.default.Buffer.from=="function"?Rf.default.Buffer.from(r,"utf8"):new Rf.default.Buffer(r,"utf8")}s(xV,"newBuffer");po.default={encode:AV,decode:jV}});var Kr=h(ee=>{"use strict";var MV=ee&&ee.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),gm=ee&&ee.__exportStar||function(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&MV(t,r,e)},Sm=ee&&ee.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ee,"__esModule",{value:!0});ee.utf8=ee.alloc=ee.ChannelConfig=void 0;gm(cm(),ee);gm(pm(),ee);var kV=bm();Object.defineProperty(ee,"ChannelConfig",{enumerable:!0,get:function(){return Sm(kV).default}});var UV=Zr();Object.defineProperty(ee,"alloc",{enumerable:!0,get:function(){return UV.alloc}});var LV=Om();Object.defineProperty(ee,"utf8",{enumerable:!0,get:function(){return Sm(LV).default}})});var wm=h(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});var FV=Kr(),Em=R(),BV=1616949271;function _o(r,t){return{major:r,minor:t}}s(_o,"version");function VV(r){if(r.length>4)throw(0,Em.newError)("It should not have more than 4 versions of the protocol");var t=(0,FV.alloc)(5*4);return t.writeInt32(BV),r.forEach(function(e){if(e instanceof Array){var n=e[0],i=n.major,o=n.minor,u=e[1].minor,a=o-u;t.writeInt32(a<<16|o<<8|i)}else{var i=e.major,o=e.minor;t.writeInt32(o<<8|i)}}),t.reset(),t}s(VV,"createHandshakeMessage");function WV(r){var t=[r.readUInt8(),r.readUInt8(),r.readUInt8(),r.readUInt8()];if(t[0]===72&&t[1]===84&&t[2]===84&&t[3]===80)throw(0,Em.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(t[3]+"."+t[2])}s(WV,"parseNegotiatedResponse");function HV(){return VV([[_o(4,4),_o(4,2)],_o(4,1),_o(4,0),_o(3,0)])}s(HV,"newHandshakeBuffer");function zV(r){var t=this;return new Promise(function(e,n){var i=s(function(o){n(o)},"handshakeErrorHandler");r.onerror=i.bind(t),r._error&&i(r._error),r.onmessage=function(o){try{var u=WV(o);e({protocolVersion:u,consumeRemainingBuffer:function(a){o.hasRemaining()&&a(o.readSlice(o.remaining()))}})}catch(a){n(a)}},r.write(HV())})}s(zV,"handshake");Af.default=zV});var Zs=h(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.assertImpersonatedUserIsEmpty=Et.assertTxConfigIsEmpty=Et.assertDatabaseIsEmpty=void 0;var jf=R();function YV(r,t,e){if(t===void 0&&(t=s(function(){},"onProtocolError")),r&&!r.isEmpty()){var n=(0,jf.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw t(n.message),e.onError(n),n}}s(YV,"assertTxConfigIsEmpty");Et.assertTxConfigIsEmpty=YV;function ZV(r,t,e){if(t===void 0&&(t=s(function(){},"onProtocolError")),r){var n=(0,jf.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw t(n.message),e.onError(n),n}}s(ZV,"assertDatabaseIsEmpty");Et.assertDatabaseIsEmpty=ZV;function KV(r,t,e){if(t===void 0&&(t=s(function(){},"onProtocolError")),r){var n=(0,jf.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+("Trying to impersonate "+r+"."));throw t(n.message),e.onError(n),n}}s(KV,"assertImpersonatedUserIsEmpty");Et.assertImpersonatedUserIsEmpty=KV});var qf=h(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.Structure=wt.Unpacker=wt.Packer=void 0;var vo=Kr(),N=R(),GV=N.internal.objectUtil,Tm=N.error.PROTOCOL_ERROR,Pm=128,Cm=144,Im=160,Rm=176,Am=192,jm=193,Nm=194,qm=195,Dm=200,xm=201,Mm=202,km=203,Um=208,Lm=209,Fm=210,Bm=212,Vm=213,Wm=214,Hm=204,zm=205,Ym=206,Zm=216,Km=217,Gm=218,Qm=220,$m=221,QV=78,$V=3,XV=82,JV=5,e4=114,t4=3,r4=80,n4=3,Nf=function(){function r(t,e){this.signature=t,this.fields=e}return s(r,"Structure"),r.prototype.toString=function(){for(var t="",e=0;e<this.fields.length;e++)e>0&&(t+=", "),t+=this.fields[e];return"Structure("+this.signature+", ["+t+"])"},r}();wt.Structure=Nf;var i4=function(){function r(t){this._ch=t,this._byteArraysSupported=!0}return s(r,"Packer"),r.prototype.packable=function(t){var e=this;if(t===null)return function(){return e._ch.writeUInt8(Am)};if(t===!0)return function(){return e._ch.writeUInt8(qm)};if(t===!1)return function(){return e._ch.writeUInt8(Nm)};if(typeof t=="number")return function(){return e.packFloat(t)};if(typeof t=="string")return function(){return e.packString(t)};if(typeof t=="bigint")return function(){return e.packInteger((0,N.int)(t))};if((0,N.isInt)(t))return function(){return e.packInteger(t)};if(t instanceof Int8Array)return function(){return e.packBytes(t)};if(t instanceof Array)return function(){e.packListHeader(t.length);for(var o=0;o<t.length;o++)e.packable(t[o]===void 0?null:t[o])()};if(s4(t))return this.packableIterable(t);if(t instanceof N.Node)return this._nonPackableValue("It is not allowed to pass nodes in query parameters, given: "+t);if(t instanceof N.Relationship)return this._nonPackableValue("It is not allowed to pass relationships in query parameters, given: "+t);if(t instanceof N.Path)return this._nonPackableValue("It is not allowed to pass paths in query parameters, given: "+t);if(t instanceof Nf){for(var n=[],i=0;i<t.fields.length;i++)n[i]=this.packable(t.fields[i]);return function(){return e.packStruct(t.signature,n)}}else return typeof t=="object"?function(){for(var o=Object.keys(t),u=0,a=0;a<o.length;a++)t[o[a]]!==void 0&&u++;e.packMapHeader(u);for(var l=0;l<o.length;l++){var c=o[l];t[c]!==void 0&&(e.packString(c),e.packable(t[c])())}}:this._nonPackableValue("Unable to pack the given value: "+t)},r.prototype.packableIterable=function(t){try{var e=Array.from(t);return this.packable(e)}catch(n){throw(0,N.newError)("Cannot pack given iterable, "+n.message+": "+t)}},r.prototype.packStruct=function(t,e){e=e||[],this.packStructHeader(e.length,t);for(var n=0;n<e.length;n++)e[n]()},r.prototype.packInteger=function(t){var e=t.high,n=t.low;t.greaterThanOrEqual(-16)&&t.lessThan(128)?this._ch.writeInt8(n):t.greaterThanOrEqual(-128)&&t.lessThan(-16)?(this._ch.writeUInt8(Dm),this._ch.writeInt8(n)):t.greaterThanOrEqual(-32768)&&t.lessThan(32768)?(this._ch.writeUInt8(xm),this._ch.writeInt16(n)):t.greaterThanOrEqual(-2147483648)&&t.lessThan(2147483648)?(this._ch.writeUInt8(Mm),this._ch.writeInt32(n)):(this._ch.writeUInt8(km),this._ch.writeInt32(e),this._ch.writeInt32(n))},r.prototype.packFloat=function(t){this._ch.writeUInt8(jm),this._ch.writeFloat64(t)},r.prototype.packString=function(t){var e=vo.utf8.encode(t),n=e.length;if(n<16)this._ch.writeUInt8(Pm|n),this._ch.writeBytes(e);else if(n<256)this._ch.writeUInt8(Um),this._ch.writeUInt8(n),this._ch.writeBytes(e);else if(n<65536)this._ch.writeUInt8(Lm),this._ch.writeUInt8(n/256>>0),this._ch.writeUInt8(n%256),this._ch.writeBytes(e);else if(n<4294967296)this._ch.writeUInt8(Fm),this._ch.writeUInt8((n/16777216>>0)%256),this._ch.writeUInt8((n/65536>>0)%256),this._ch.writeUInt8((n/256>>0)%256),this._ch.writeUInt8(n%256),this._ch.writeBytes(e);else throw(0,N.newError)("UTF-8 strings of size "+n+" are not supported")},r.prototype.packListHeader=function(t){if(t<16)this._ch.writeUInt8(Cm|t);else if(t<256)this._ch.writeUInt8(Bm),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(Vm),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else if(t<4294967296)this._ch.writeUInt8(Wm),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else throw(0,N.newError)("Lists of size "+t+" are not supported")},r.prototype.packBytes=function(t){if(this._byteArraysSupported){this.packBytesHeader(t.length);for(var e=0;e<t.length;e++)this._ch.writeInt8(t[e])}else throw(0,N.newError)("Byte arrays are not supported by the database this driver is connected to")},r.prototype.packBytesHeader=function(t){if(t<256)this._ch.writeUInt8(Hm),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(zm),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else if(t<4294967296)this._ch.writeUInt8(Ym),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else throw(0,N.newError)("Byte arrays of size "+t+" are not supported")},r.prototype.packMapHeader=function(t){if(t<16)this._ch.writeUInt8(Im|t);else if(t<256)this._ch.writeUInt8(Zm),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(Km),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256);else if(t<4294967296)this._ch.writeUInt8(Gm),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else throw(0,N.newError)("Maps of size "+t+" are not supported")},r.prototype.packStructHeader=function(t,e){if(t<16)this._ch.writeUInt8(Rm|t),this._ch.writeUInt8(e);else if(t<256)this._ch.writeUInt8(Qm),this._ch.writeUInt8(t),this._ch.writeUInt8(e);else if(t<65536)this._ch.writeUInt8($m),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256);else throw(0,N.newError)("Structures of size "+t+" are not supported")},r.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},r.prototype._nonPackableValue=function(t){return function(){throw(0,N.newError)(t,Tm)}},r}();wt.Packer=i4;var o4=function(){function r(t,e){t===void 0&&(t=!1),e===void 0&&(e=!1),this._disableLosslessIntegers=t,this._useBigInt=e}return s(r,"Unpacker"),r.prototype.unpack=function(t){var e=t.readUInt8(),n=e&240,i=e&15;if(e===Am)return null;var o=this._unpackBoolean(e);if(o!==null)return o;var u=this._unpackNumberOrInteger(e,t);if(u!==null){if((0,N.isInt)(u)){if(this._useBigInt)return u.toBigInt();if(this._disableLosslessIntegers)return u.toNumberOrInfinity()}return u}var a=this._unpackString(e,n,i,t);if(a!==null)return a;var l=this._unpackList(e,n,i,t);if(l!==null)return l;var c=this._unpackByteArray(e,t);if(c!==null)return c;var f=this._unpackMap(e,n,i,t);if(f!==null)return f;var p=this._unpackStruct(e,n,i,t);if(p!==null)return p;throw(0,N.newError)("Unknown packed value with marker "+e.toString(16))},r.prototype.unpackInteger=function(t){var e=t.readUInt8(),n=this._unpackInteger(e,t);if(n==null)throw(0,N.newError)("Unable to unpack integer value with marker "+e.toString(16));return n},r.prototype._unpackBoolean=function(t){return t===qm?!0:t===Nm?!1:null},r.prototype._unpackNumberOrInteger=function(t,e){return t===jm?e.readFloat64():this._unpackInteger(t,e)},r.prototype._unpackInteger=function(t,e){if(t>=0&&t<128)return(0,N.int)(t);if(t>=240&&t<256)return(0,N.int)(t-256);if(t===Dm)return(0,N.int)(e.readInt8());if(t===xm)return(0,N.int)(e.readInt16());if(t===Mm){var n=e.readInt32();return(0,N.int)(n)}else if(t===km){var i=e.readInt32(),o=e.readInt32();return new N.Integer(o,i)}else return null},r.prototype._unpackString=function(t,e,n,i){return e===Pm?vo.utf8.decode(i,n):t===Um?vo.utf8.decode(i,i.readUInt8()):t===Lm?vo.utf8.decode(i,i.readUInt16()):t===Fm?vo.utf8.decode(i,i.readUInt32()):null},r.prototype._unpackList=function(t,e,n,i){return e===Cm?this._unpackListWithSize(n,i):t===Bm?this._unpackListWithSize(i.readUInt8(),i):t===Vm?this._unpackListWithSize(i.readUInt16(),i):t===Wm?this._unpackListWithSize(i.readUInt32(),i):null},r.prototype._unpackListWithSize=function(t,e){for(var n=[],i=0;i<t;i++)n.push(this.unpack(e));return n},r.prototype._unpackByteArray=function(t,e){return t===Hm?this._unpackByteArrayWithSize(e.readUInt8(),e):t===zm?this._unpackByteArrayWithSize(e.readUInt16(),e):t===Ym?this._unpackByteArrayWithSize(e.readUInt32(),e):null},r.prototype._unpackByteArrayWithSize=function(t,e){for(var n=new Int8Array(t),i=0;i<t;i++)n[i]=e.readInt8();return n},r.prototype._unpackMap=function(t,e,n,i){return e===Im?this._unpackMapWithSize(n,i):t===Zm?this._unpackMapWithSize(i.readUInt8(),i):t===Km?this._unpackMapWithSize(i.readUInt16(),i):t===Gm?this._unpackMapWithSize(i.readUInt32(),i):null},r.prototype._unpackMapWithSize=function(t,e){for(var n={},i=0;i<t;i++){var o=this.unpack(e);n[o]=this.unpack(e)}return n},r.prototype._unpackStruct=function(t,e,n,i){try{return e===Rm?this._unpackStructWithSize(n,i):t===Qm?this._unpackStructWithSize(i.readUInt8(),i):t===$m?this._unpackStructWithSize(i.readUInt16(),i):null}catch(o){return GV.createBrokenObject(o)}},r.prototype._unpackStructWithSize=function(t,e){var n=e.readUInt8();return n===QV?this._unpackNode(t,e):n===XV?this._unpackRelationship(t,e):n===e4?this._unpackUnboundRelationship(t,e):n===r4?this._unpackPath(t,e):this._unpackUnknownStruct(n,t,e)},r.prototype._unpackNode=function(t,e){return this._verifyStructSize("Node",$V,t),new N.Node(this.unpack(e),this.unpack(e),this.unpack(e))},r.prototype._unpackRelationship=function(t,e){return this._verifyStructSize("Relationship",JV,t),new N.Relationship(this.unpack(e),this.unpack(e),this.unpack(e),this.unpack(e),this.unpack(e))},r.prototype._unpackUnboundRelationship=function(t,e){return this._verifyStructSize("UnboundRelationship",t4,t),new N.UnboundRelationship(this.unpack(e),this.unpack(e),this.unpack(e))},r.prototype._unpackPath=function(t,e){this._verifyStructSize("Path",n4,t);for(var n=this.unpack(e),i=this.unpack(e),o=this.unpack(e),u=[],a=n[0],l=0;l<o.length;l+=2){var c=n[o[l+1]],f=(0,N.toNumber)(o[l]),p=void 0;f>0?(p=i[f-1],p instanceof N.UnboundRelationship&&(i[f-1]=p=p.bind(a.identity,c.identity))):(p=i[-f-1],p instanceof N.UnboundRelationship&&(i[-f-1]=p=p.bind(c.identity,a.identity))),u.push(new N.PathSegment(a,p,c)),a=c}return new N.Path(n[0],n[n.length-1],u)},r.prototype._unpackUnknownStruct=function(t,e,n){for(var i=new Nf(t,[]),o=0;o<e;o++)i.fields.push(this.unpack(n));return i},r.prototype._verifyStructSize=function(t,e,n){if(e!==n)throw(0,N.newError)("Wrong struct size for "+t+", expected "+e+" but was "+n,Tm)},r}();wt.Unpacker=o4;function s4(r){return r==null?!1:typeof r[Symbol.iterator]=="function"}s(s4,"isIterable")});var Mf=h(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.epochSecondAndNanoToLocalDateTime=Tt.nanoOfDayToLocalTime=Tt.epochDayToDate=void 0;var Xt=R(),Pt=Xt.internal.temporalUtil,u4=Pt.DAYS_0000_TO_1970,Df=Pt.DAYS_PER_400_YEAR_CYCLE,Xm=Pt.NANOS_PER_HOUR,Jm=Pt.NANOS_PER_MINUTE,xf=Pt.NANOS_PER_SECOND,eO=Pt.SECONDS_PER_DAY,a4=Pt.floorDiv,c4=Pt.floorMod;function tO(r){r=(0,Xt.int)(r);var t=r.add(u4).subtract(60),e=(0,Xt.int)(0);if(t.lessThan(0)){var n=t.add(1).div(Df).subtract(1);e=n.multiply(400),t=t.add(n.multiply(-Df))}var i=t.multiply(400).add(591).div(Df),o=t.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)));o.lessThan(0)&&(i=i.subtract(1),o=t.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)))),i=i.add(e);var u=o,a=u.multiply(5).add(2).div(153),l=a.add(2).modulo(12).add(1),c=u.subtract(a.multiply(306).add(5).div(10)).add(1);return i=i.add(a.div(10)),new Xt.Date(i,l,c)}s(tO,"epochDayToDate");Tt.epochDayToDate=tO;function rO(r){r=(0,Xt.int)(r);var t=r.div(Xm);r=r.subtract(t.multiply(Xm));var e=r.div(Jm);r=r.subtract(e.multiply(Jm));var n=r.div(xf),i=r.subtract(n.multiply(xf));return new Xt.LocalTime(t,e,n,i)}s(rO,"nanoOfDayToLocalTime");Tt.nanoOfDayToLocalTime=rO;function l4(r,t){var e=a4(r,eO),n=c4(r,eO),i=n.multiply(xf).add(t),o=tO(e),u=rO(i);return new Xt.LocalDateTime(o.year,o.month,o.day,u.hour,u.minute,u.second,u.nanosecond)}s(l4,"epochSecondAndNanoToLocalDateTime");Tt.epochSecondAndNanoToLocalDateTime=l4});var iO=h(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.packDateTime=ce.unpackDateTimeWithZoneId=ce.unpackDateTimeWithZoneOffset=ce.DATE_TIME_WITH_ZONE_ID=ce.DATE_TIME_WITH_ZONE_OFFSET=void 0;var me=R(),f4=Mf(),bo=me.internal.temporalUtil.localDateTimeToEpochSecond;ce.DATE_TIME_WITH_ZONE_OFFSET=73;var h4=3;ce.DATE_TIME_WITH_ZONE_ID=105;var p4=3;function _4(r,t,e,n,i){r._verifyStructSize("DateTimeWithZoneOffset",h4,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),a=r.unpackInteger(e),l=(0,me.int)(o).add(a),c=(0,f4.epochSecondAndNanoToLocalDateTime)(l,u),f=new me.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,a,null);return nO(f,n,i)}s(_4,"unpackDateTimeWithZoneOffset");ce.unpackDateTimeWithZoneOffset=_4;function d4(r,t,e,n,i){r._verifyStructSize("DateTimeWithZoneId",p4,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),a=r.unpack(e),l=kf(a,o,u),c=new me.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,(0,me.int)(u),l.timeZoneOffsetSeconds,a);return nO(c,n,i)}s(d4,"unpackDateTimeWithZoneId");ce.unpackDateTimeWithZoneId=d4;function v4(r,t){r.timeZoneId?b4(r,t):y4(r,t)}s(v4,"packDateTime");ce.packDateTime=v4;function b4(r,t){var e=bo(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=r.timeZoneOffsetSeconds!=null?r.timeZoneOffsetSeconds:m4(r.timeZoneId,e,r.nanosecond),i=e.subtract(n),o=(0,me.int)(r.nanosecond),u=r.timeZoneId,a=[t.packable(i),t.packable(o),t.packable(u)];t.packStruct(ce.DATE_TIME_WITH_ZONE_ID,a)}s(b4,"packDateTimeWithZoneId");function y4(r,t){var e=bo(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=(0,me.int)(r.nanosecond),i=(0,me.int)(r.timeZoneOffsetSeconds),o=e.subtract(i),u=[t.packable(o),t.packable(n),t.packable(i)];t.packStruct(ce.DATE_TIME_WITH_ZONE_OFFSET,u)}s(y4,"packDateTimeWithZoneOffset");function m4(r,t,e){var n=kf(r,t,e),i=bo(n.year,n.month,n.day,n.hour,n.minute,n.second,e),o=i.subtract(t),u=t.subtract(o),a=kf(r,u,e),l=bo(a.year,a.month,a.day,a.hour,a.minute,a.second,e),c=l.subtract(u);return c}s(m4,"getOffsetFromZoneId");function kf(r,t,e){var n=new Intl.DateTimeFormat("en-US",{timeZone:r,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"}),i=(0,me.int)(t).multiply(1e3).add((0,me.int)(e).div(1e6)).toNumber(),o=n.formatToParts(i),u=o.reduce(function(l,c){return c.type==="era"?l.adjustEra=c.value.toUpperCase()==="B"?function(f){return f.subtract(1).negate()}:function(f){return f}:c.type==="hour"?l.hour=(0,me.int)(c.value).modulo(24):c.type!=="literal"&&(l[c.type]=(0,me.int)(c.value)),l},{});u.year=u.adjustEra(u.year);var a=bo(u.year,u.month,u.day,u.hour,u.minute,u.second,u.nanosecond);return u.timeZoneOffsetSeconds=a.subtract(t),u.hour=u.hour.modulo(24),u}s(kf,"getTimeInZoneId");function nO(r,t,e){if(!t&&!e)return r;var n=s(function(a){return e?a.toBigInt():a.toNumberOrInfinity()},"convert"),i=Object.create(Object.getPrototypeOf(r));for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)===!0){var u=r[o];i[o]=(0,me.isInt)(u)?n(u):u}return Object.freeze(i),i}s(nO,"convertIntegerPropsIfNeeded")});var yO=h(le=>{"use strict";var oO=le&&le.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),O4=le&&le.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),g4=le&&le.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),sO=le&&le.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&O4(t,r,e);return g4(t,r),t};Object.defineProperty(le,"__esModule",{value:!0});le.Unpacker=le.Packer=void 0;var uO=sO(qf()),yo=sO(iO()),M=R(),Gr=Mf(),Uf=M.internal.temporalUtil,S4=Uf.dateToEpochDay,Lf=Uf.localDateTimeToEpochSecond,aO=Uf.localTimeToNanoOfDay,cO=88,E4=3,lO=89,w4=4,fO=69,T4=4,hO=116,P4=1,pO=84,C4=2,_O=68,I4=1,dO=100,R4=2,vO=70,A4=3,bO=102,j4=3,N4=function(r){oO(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"Packer"),t.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},t.prototype.packable=function(e){var n=this;return(0,M.isPoint)(e)?function(){return D4(e,n)}:(0,M.isDuration)(e)?function(){return L4(e,n)}:(0,M.isLocalTime)(e)?function(){return B4(e,n)}:(0,M.isTime)(e)?function(){return W4(e,n)}:(0,M.isDate)(e)?function(){return z4(e,n)}:(0,M.isLocalDateTime)(e)?function(){return Z4(e,n)}:(0,M.isDateTime)(e)&&this.useUtc?function(){return yo.packDateTime(e,n)}:(0,M.isDateTime)(e)&&!this.useUtc?function(){return G4(e,n)}:r.prototype.packable.call(this,e)},t}(uO.Packer);le.Packer=N4;var q4=function(r){oO(t,r);function t(e,n){return e===void 0&&(e=!1),n===void 0&&(n=!1),r.call(this,e,n)||this}return s(t,"Unpacker"),t.prototype._unpackUnknownStruct=function(e,n,i){return e===cO?k4(this,n,i):e===lO?U4(this,n,i):e===fO?F4(this,n,i):e===hO?V4(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===pO?H4(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===_O?Y4(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===dO?K4(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===yo.DATE_TIME_WITH_ZONE_OFFSET&&this.useUtc?yo.unpackDateTimeWithZoneOffset(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===vO&&!this.useUtc?$4(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===yo.DATE_TIME_WITH_ZONE_ID&&this.useUtc?yo.unpackDateTimeWithZoneId(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===bO&&!this.useUtc?J4(this,n,i,this._disableLosslessIntegers,this._useBigInt):r.prototype._unpackUnknownStruct.call(this,e,n,i,this._disableLosslessIntegers,this._useBigInt)},t}(uO.Unpacker);le.Unpacker=q4;function D4(r,t){var e=r.z===null||r.z===void 0;e?x4(r,t):M4(r,t)}s(D4,"packPoint");function x4(r,t){var e=[t.packable((0,M.int)(r.srid)),t.packable(r.x),t.packable(r.y)];t.packStruct(cO,e)}s(x4,"packPoint2D");function M4(r,t){var e=[t.packable((0,M.int)(r.srid)),t.packable(r.x),t.packable(r.y),t.packable(r.z)];t.packStruct(lO,e)}s(M4,"packPoint3D");function k4(r,t,e){return r._verifyStructSize("Point2D",E4,t),new M.Point(r.unpack(e),r.unpack(e),r.unpack(e),void 0)}s(k4,"unpackPoint2D");function U4(r,t,e){return r._verifyStructSize("Point3D",w4,t),new M.Point(r.unpack(e),r.unpack(e),r.unpack(e),r.unpack(e))}s(U4,"unpackPoint3D");function L4(r,t){var e=(0,M.int)(r.months),n=(0,M.int)(r.days),i=(0,M.int)(r.seconds),o=(0,M.int)(r.nanoseconds),u=[t.packable(e),t.packable(n),t.packable(i),t.packable(o)];t.packStruct(fO,u)}s(L4,"packDuration");function F4(r,t,e){r._verifyStructSize("Duration",T4,t);var n=r.unpack(e),i=r.unpack(e),o=r.unpack(e),u=r.unpack(e);return new M.Duration(n,i,o,u)}s(F4,"unpackDuration");function B4(r,t){var e=aO(r.hour,r.minute,r.second,r.nanosecond),n=[t.packable(e)];t.packStruct(hO,n)}s(B4,"packLocalTime");function V4(r,t,e,n){r._verifyStructSize("LocalTime",P4,t);var i=r.unpackInteger(e),o=(0,Gr.nanoOfDayToLocalTime)(i);return Qr(o,n)}s(V4,"unpackLocalTime");function W4(r,t){var e=aO(r.hour,r.minute,r.second,r.nanosecond),n=(0,M.int)(r.timeZoneOffsetSeconds),i=[t.packable(e),t.packable(n)];t.packStruct(pO,i)}s(W4,"packTime");function H4(r,t,e,n,i){r._verifyStructSize("Time",C4,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),a=(0,Gr.nanoOfDayToLocalTime)(o),l=new M.Time(a.hour,a.minute,a.second,a.nanosecond,u);return Qr(l,n,i)}s(H4,"unpackTime");function z4(r,t){var e=S4(r.year,r.month,r.day),n=[t.packable(e)];t.packStruct(_O,n)}s(z4,"packDate");function Y4(r,t,e,n,i){r._verifyStructSize("Date",I4,t);var o=r.unpackInteger(e),u=(0,Gr.epochDayToDate)(o);return Qr(u,n,i)}s(Y4,"unpackDate");function Z4(r,t){var e=Lf(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=(0,M.int)(r.nanosecond),i=[t.packable(e),t.packable(n)];t.packStruct(dO,i)}s(Z4,"packLocalDateTime");function K4(r,t,e,n,i){r._verifyStructSize("LocalDateTime",R4,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),a=(0,Gr.epochSecondAndNanoToLocalDateTime)(o,u);return Qr(a,n,i)}s(K4,"unpackLocalDateTime");function G4(r,t){r.timeZoneId?X4(r,t):Q4(r,t)}s(G4,"packDateTime");function Q4(r,t){var e=Lf(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=(0,M.int)(r.nanosecond),i=(0,M.int)(r.timeZoneOffsetSeconds),o=[t.packable(e),t.packable(n),t.packable(i)];t.packStruct(vO,o)}s(Q4,"packDateTimeWithZoneOffset");function $4(r,t,e,n,i){r._verifyStructSize("DateTimeWithZoneOffset",A4,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),a=r.unpackInteger(e),l=(0,Gr.epochSecondAndNanoToLocalDateTime)(o,u),c=new M.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,l.nanosecond,a,null);return Qr(c,n,i)}s($4,"unpackDateTimeWithZoneOffset");function X4(r,t){var e=Lf(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=(0,M.int)(r.nanosecond),i=r.timeZoneId,o=[t.packable(e),t.packable(n),t.packable(i)];t.packStruct(bO,o)}s(X4,"packDateTimeWithZoneId");function J4(r,t,e,n,i){r._verifyStructSize("DateTimeWithZoneId",j4,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),a=r.unpack(e),l=(0,Gr.epochSecondAndNanoToLocalDateTime)(o,u),c=new M.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,l.nanosecond,null,a);return Qr(c,n,i)}s(J4,"unpackDateTimeWithZoneId");function Qr(r,t,e){if(!t&&!e)return r;var n=s(function(a){return e?a.toBigInt():a.toNumberOrInfinity()},"convert"),i=Object.create(Object.getPrototypeOf(r));for(var o in r)if(r.hasOwnProperty(o)){var u=r[o];i[o]=(0,M.isInt)(u)?n(u):u}return Object.freeze(i),i}s(Qr,"convertIntegerPropsIfNeeded")});var Ks=h(Oe=>{"use strict";var eW=Oe&&Oe.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),tW=Oe&&Oe.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),mO=Oe&&Oe.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&eW(t,r,e);return tW(t,r),t};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.v2=Oe.v1=void 0;var rW=mO(qf());Oe.v1=rW;var OO=mO(yO());Oe.v2=OO;Oe.default=OO});var Jt=h(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});var ie=R(),PO=ie.internal.constants,nW=PO.ACCESS_MODE_READ,Gs=PO.FETCH_ALL,gO=ie.internal.util.assertString,iW=1,oW=15,SO=16,sW=63,uW=1,aW=2,cW=17,lW=18,fW=19,EO=102,hW=47,pW=63,_W="r",mo=-1,$r=function(){function r(t,e,n){this.signature=t,this.fields=e,this.toString=n}return s(r,"RequestMessage"),r.init=function(t,e){return new r(iW,[t,e],function(){return"INIT "+t+" {...}"})},r.run=function(t,e){return new r(SO,[t,e],function(){return"RUN "+t+" "+ie.json.stringify(e)})},r.pullAll=function(){return dW},r.reset=function(){return vW},r.hello=function(t,e,n,i){n===void 0&&(n=null),i===void 0&&(i=null);var o=Object.assign({user_agent:t},e);return n&&(o.routing=n),i&&(o.patch_bolt=i),new r(uW,[o],function(){return"HELLO {user_agent: '"+t+"', ...}"})},r.begin=function(t){var e=t===void 0?{}:t,n=e.bookmark,i=e.txConfig,o=e.database,u=e.mode,a=e.impersonatedUser,l=wO(n,i,o,u,a);return new r(cW,[l],function(){return"BEGIN "+ie.json.stringify(l)})},r.commit=function(){return bW},r.rollback=function(){return yW},r.runWithMetadata=function(t,e,n){var i=n===void 0?{}:n,o=i.bookmark,u=i.txConfig,a=i.database,l=i.mode,c=i.impersonatedUser,f=wO(o,u,a,l,c);return new r(SO,[t,e,f],function(){return"RUN "+t+" "+ie.json.stringify(e)+" "+ie.json.stringify(f)})},r.goodbye=function(){return mW},r.pull=function(t){var e=t===void 0?{}:t,n=e.stmtId,i=n===void 0?mo:n,o=e.n,u=o===void 0?Gs:o,a=TO(i??mo,u||Gs);return new r(pW,[a],function(){return"PULL "+ie.json.stringify(a)})},r.discard=function(t){var e=t===void 0?{}:t,n=e.stmtId,i=n===void 0?mo:n,o=e.n,u=o===void 0?Gs:o,a=TO(i??mo,u||Gs);return new r(hW,[a],function(){return"DISCARD "+ie.json.stringify(a)})},r.route=function(t,e,n){return t===void 0&&(t={}),e===void 0&&(e=[]),n===void 0&&(n=null),new r(EO,[t,e,n],function(){return"ROUTE "+ie.json.stringify(t)+" "+ie.json.stringify(e)+" "+n})},r.routeV4x4=function(t,e,n){t===void 0&&(t={}),e===void 0&&(e=[]),n===void 0&&(n={});var i={};return n.databaseName&&(i.db=n.databaseName),n.impersonatedUser&&(i.imp_user=n.impersonatedUser),new r(EO,[t,e,i],function(){return"ROUTE "+ie.json.stringify(t)+" "+ie.json.stringify(e)+" "+ie.json.stringify(i)})},r}();Ff.default=$r;function wO(r,t,e,n,i){var o={};return r.isEmpty()||(o.bookmarks=r.values()),t.timeout&&(o.tx_timeout=t.timeout),t.metadata&&(o.tx_metadata=t.metadata),e&&(o.db=gO(e,"database")),i&&(o.imp_user=gO(i,"impersonatedUser")),n===nW&&(o.mode=_W),o}s(wO,"buildTxMetadata");function TO(r,t){var e={n:(0,ie.int)(t)};return r!==mo&&(e.qid=(0,ie.int)(r)),e}s(TO,"buildStreamMetadata");var dW=new $r(sW,[],function(){return"PULL_ALL"}),vW=new $r(oW,[],function(){return"RESET"}),bW=new $r(lW,[],function(){return"COMMIT"}),yW=new $r(fW,[],function(){return"ROLLBACK"}),mW=new $r(aW,[],function(){return"GOODBYE"})});var Vf=h(Oo=>{"use strict";var Bf=Oo&&Oo.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Oo,"__esModule",{value:!0});var Qs=function(){function r(){}return s(r,"RawRoutingTable"),r.ofRecord=function(t){return t===null?r.ofNull():new SW(t)},r.ofMessageResponse=function(t){return t===null?r.ofNull():new OW(t)},r.ofNull=function(){return new gW},Object.defineProperty(r.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),r}();Oo.default=Qs;var OW=function(r){Bf(t,r);function t(e){var n=r.call(this)||this;return n._response=e,n}return s(t,"ResponseRawRoutingTable"),Object.defineProperty(t.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),t}(Qs),gW=function(r){Bf(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"NullRawRoutingTable"),Object.defineProperty(t.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),t}(Qs),SW=function(r){Bf(t,r);function t(e){var n=r.call(this)||this;return n._record=e,n}return s(t,"RecordRawRoutingTable"),Object.defineProperty(t.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),t}(Qs)});var nt=h(H=>{"use strict";var er=H&&H.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),EW=H&&H.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(H,"__esModule",{value:!0});H.ProcedureRouteObserver=H.RouteObserver=H.CompletedObserver=H.FailedObserver=H.ResetObserver=H.LoginObserver=H.ResultStreamObserver=H.StreamObserver=void 0;var Me=R(),IO=EW(Vf()),CO=Me.internal.constants.FETCH_ALL,Xr=Me.error.PROTOCOL_ERROR,Jr=function(){function r(){}return s(r,"StreamObserver"),r.prototype.onNext=function(t){},r.prototype.onError=function(t){},r.prototype.onCompleted=function(t){},r}();H.StreamObserver=Jr;var Wf=function(r){er(t,r);function t(e){var n=e===void 0?{}:e,i=n.reactive,o=i===void 0?!1:i,u=n.moreFunction,a=n.discardFunction,l=n.fetchSize,c=l===void 0?CO:l,f=n.beforeError,p=n.afterError,_=n.beforeKeys,m=n.afterKeys,g=n.beforeComplete,T=n.afterComplete,P=n.server,S=r.call(this)||this;return S._fieldKeys=null,S._fieldLookup=null,S._head=null,S._queuedRecords=[],S._tail=null,S._error=null,S._observers=[],S._meta={},S._server=P,S._beforeError=f,S._afterError=p,S._beforeKeys=_,S._afterKeys=m,S._beforeComplete=g,S._afterComplete=T,S._queryId=null,S._moreFunction=u,S._discardFunction=a,S._discard=!1,S._fetchSize=c,S._setState(o?Ee.READY:Ee.READY_STREAMING),S._setupAuoPull(c),S}return s(t,"ResultStreamObserver"),t.prototype.onNext=function(e){var n=new Me.Record(this._fieldKeys,e,this._fieldLookup);this._observers.some(function(i){return i.onNext})?this._observers.forEach(function(i){i.onNext&&i.onNext(n)}):(this._queuedRecords.push(n),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},t.prototype.onCompleted=function(e){this._state.onSuccess(this,e)},t.prototype.onError=function(e){this._state.onError(this,e)},t.prototype.cancel=function(){this._discard=!0},t.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(Ee.STREAMING)},t.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(Ee.SUCCEEDED)},t.prototype.subscribe=function(e){if(this._error){e.onError(this._error);return}if(this._head&&e.onKeys&&e.onKeys(this._head),this._queuedRecords.length>0&&e.onNext)for(var n=0;n<this._queuedRecords.length;n++)e.onNext(this._queuedRecords[n]),this._queuedRecords.length-n-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===Ee.READY&&this._handleStreaming());this._tail&&e.onCompleted&&e.onCompleted(this._tail),this._observers.push(e),this._state===Ee.READY&&this._handleStreaming()},t.prototype._handleHasMore=function(e){this._setState(Ee.READY),this._handleStreaming(),delete e.has_more},t.prototype._handlePullSuccess=function(e){var n=this;this._setState(Ee.SUCCEEDED);var i=Object.assign(this._server?{server:this._server}:{},this._meta,e),o=null;this._beforeComplete&&(o=this._beforeComplete(i));var u=s(function(){n._tail=i,n._observers.some(function(a){return a.onCompleted})&&n._observers.forEach(function(a){a.onCompleted&&a.onCompleted(i)}),n._afterComplete&&n._afterComplete(i)},"continuation");o?Promise.resolve(o).then(function(){return u()}):u()},t.prototype._handleRunSuccess=function(e,n){var i=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},e.fields&&e.fields.length>0){this._fieldKeys=e.fields;for(var o=0;o<e.fields.length;o++)this._fieldLookup[e.fields[o]]=o;delete e.fields}e.qid!==null&&e.qid!==void 0&&(this._queryId=e.qid,delete e.qid),this._storeMetadataForCompletion(e);var u=null;this._beforeKeys&&(u=this._beforeKeys(this._fieldKeys));var a=s(function(){i._head=i._fieldKeys,i._observers.some(function(l){return l.onKeys})&&i._observers.forEach(function(l){l.onKeys&&l.onKeys(i._fieldKeys)}),i._afterKeys&&i._afterKeys(i._fieldKeys),n()},"continuation_1");u?Promise.resolve(u).then(function(){return a()}):a()}},t.prototype._handleError=function(e){var n=this;this._setState(Ee.FAILED),this._error=e;var i=null;this._beforeError&&(i=this._beforeError(e));var o=s(function(){n._observers.some(function(u){return u.onError})&&n._observers.forEach(function(u){u.onError&&u.onError(e)}),n._afterError&&n._afterError(e)},"continuation");i?Promise.resolve(i).then(function(){return o()}):o()},t.prototype._handleStreaming=function(){this._head&&this._observers.some(function(e){return e.onNext||e.onCompleted})&&(this._discard?(this._discardFunction(this._queryId,this),this._setState(Ee.STREAMING)):this._autoPull&&(this._moreFunction(this._queryId,this._fetchSize,this),this._setState(Ee.STREAMING)))},t.prototype._storeMetadataForCompletion=function(e){for(var n=Object.keys(e),i=n.length,o="";i--;)o=n[i],this._meta[o]=e[o]},t.prototype._setState=function(e){this._state=e},t.prototype._setupAuoPull=function(e){this._autoPull=!0,e===CO?(this._lowRecordWatermark=Number.MAX_VALUE,this._highRecordWatermark=Number.MAX_VALUE):(this._lowRecordWatermark=.3*e,this._highRecordWatermark=.7*e)},t}(Jr);H.ResultStreamObserver=Wf;var wW=function(r){er(t,r);function t(e){var n=e===void 0?{}:e,i=n.onError,o=n.onCompleted,u=r.call(this)||this;return u._onError=i,u._onCompleted=o,u}return s(t,"LoginObserver"),t.prototype.onNext=function(e){this.onError((0,Me.newError)("Received RECORD when initializing "+Me.json.stringify(e)))},t.prototype.onError=function(e){this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(e)},t}(Jr);H.LoginObserver=wW;var TW=function(r){er(t,r);function t(e){var n=e===void 0?{}:e,i=n.onProtocolError,o=n.onError,u=n.onComplete,a=r.call(this)||this;return a._onProtocolError=i,a._onError=o,a._onComplete=u,a}return s(t,"ResetObserver"),t.prototype.onNext=function(e){this.onError((0,Me.newError)("Received RECORD when resetting: received record is: "+Me.json.stringify(e),Xr))},t.prototype.onError=function(e){e.code===Xr&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onComplete&&this._onComplete(e)},t}(Jr);H.ResetObserver=TW;var PW=function(r){er(t,r);function t(e){var n=e.error,i=e.onError,o=r.call(this,{beforeError:i})||this;return o.onError(n),o}return s(t,"FailedObserver"),t}(Wf);H.FailedObserver=PW;var CW=function(r){er(t,r);function t(){var e=r.call(this)||this;return r.prototype.markCompleted.call(e),e}return s(t,"CompletedObserver"),t}(Wf);H.CompletedObserver=CW;var IW=function(r){er(t,r);function t(e){var n=e.resultObserver,i=e.onProtocolError,o=e.onError,u=e.onCompleted,a=r.call(this)||this;return a._resultObserver=n,a._onError=o,a._onCompleted=u,a._records=[],a._onProtocolError=i,n.subscribe(a),a}return s(t,"ProcedureRouteObserver"),t.prototype.onNext=function(e){this._records.push(e)},t.prototype.onError=function(e){e.code===Xr&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},t.prototype.onCompleted=function(){if(this._records!==null&&this._records.length!==1){this.onError((0,Me.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+Me.json.stringify(this._records),Xr));return}this._onCompleted&&this._onCompleted(IO.default.ofRecord(this._records[0]))},t}(Jr);H.ProcedureRouteObserver=IW;var RW=function(r){er(t,r);function t(e){var n=e===void 0?{}:e,i=n.onProtocolError,o=n.onError,u=n.onCompleted,a=r.call(this)||this;return a._onProtocolError=i,a._onError=o,a._onCompleted=u,a}return s(t,"RouteObserver"),t.prototype.onNext=function(e){this.onError((0,Me.newError)("Received RECORD when resetting: received record is: "+Me.json.stringify(e),Xr))},t.prototype.onError=function(e){e.code===Xr&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(IO.default.ofMessageResponse(e))},t}(Jr);H.RouteObserver=RW;var Ee={READY_STREAMING:{onSuccess:function(r,t){r._handleRunSuccess(t,function(){r._setState(Ee.STREAMING)})},onError:function(r,t){r._handleError(t)},name:function(){return"READY_STREAMING"}},READY:{onSuccess:function(r,t){r._handleRunSuccess(t,function(){return r._handleStreaming()})},onError:function(r,t){r._handleError(t)},name:function(){return"READY"}},STREAMING:{onSuccess:function(r,t){t.has_more?r._handleHasMore(t):r._handlePullSuccess(t)},onError:function(r,t){r._handleError(t)},name:function(){return"STREAMING"}},FAILED:{onError:function(r){},name:function(){return"FAILED"}},SUCCEEDED:{name:function(){return"SUCCEEDED"}}}});var Yf=h(go=>{"use strict";var AW=go&&go.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(go,"__esModule",{value:!0});var Hf=Zs(),RO=Ks(),$s=AW(Jt()),zf=nt(),Xs=R(),AO=Xs.internal.bookmark.Bookmark,qO=Xs.internal.constants,jO=qO.ACCESS_MODE_WRITE,jW=qO.BOLT_PROTOCOL_V1,E9=Xs.internal.logger.Logger,NO=Xs.internal.txConfig.TxConfig,NW=function(){function r(t,e,n,i,o,u){var a=n===void 0?{}:n,l=a.disableLosslessIntegers,c=a.useBigInt;i===void 0&&(i=s(function(){return null},"createResponseHandler")),this._server=t||{},this._chunker=e,this._packer=this._createPacker(e),this._unpacker=this._createUnpacker(l,c),this._responseHandler=i(this),this._log=o,this._onProtocolError=u,this._fatalError=null}return s(r,"BoltProtocol"),Object.defineProperty(r.prototype,"version",{get:function(){return jW},enumerable:!1,configurable:!0}),r.prototype.packer=function(){return this._packer},r.prototype.unpacker=function(){return this._unpacker},r.prototype.transformMetadata=function(t){return t},r.prototype.initialize=function(t){var e=this,n=t===void 0?{}:t,i=n.userAgent,o=n.authToken,u=n.onError,a=n.onComplete,l=new zf.LoginObserver({onError:function(c){return e._onLoginError(c,u)},onCompleted:function(c){return e._onLoginCompleted(c,a)}});return this.write($s.default.init(i,o),l,!0),l},r.prototype.prepareToClose=function(){},r.prototype.beginTransaction=function(t){var e=t===void 0?{}:t,n=e.bookmark,i=e.txConfig,o=e.database,u=e.mode,a=e.impersonatedUser,l=e.beforeError,c=e.afterError,f=e.beforeComplete,p=e.afterComplete;return this.run("BEGIN",n?n.asBeginTransactionParameters():{},{bookmark:n,txConfig:i,database:o,mode:u,impersonatedUser:a,beforeError:l,afterError:c,beforeComplete:f,afterComplete:p,flush:!1})},r.prototype.commitTransaction=function(t){var e=t===void 0?{}:t,n=e.beforeError,i=e.afterError,o=e.beforeComplete,u=e.afterComplete;return this.run("COMMIT",{},{bookmark:AO.empty(),txConfig:NO.empty(),mode:jO,beforeError:n,afterError:i,beforeComplete:o,afterComplete:u})},r.prototype.rollbackTransaction=function(t){var e=t===void 0?{}:t,n=e.beforeError,i=e.afterError,o=e.beforeComplete,u=e.afterComplete;return this.run("ROLLBACK",{},{bookmark:AO.empty(),txConfig:NO.empty(),mode:jO,beforeError:n,afterError:i,beforeComplete:o,afterComplete:u})},r.prototype.run=function(t,e,n){var i=n===void 0?{}:n,o=i.bookmark,u=i.txConfig,a=i.database,l=i.mode,c=i.impersonatedUser,f=i.beforeKeys,p=i.afterKeys,_=i.beforeError,m=i.afterError,g=i.beforeComplete,T=i.afterComplete,P=i.flush,S=P===void 0?!0:P,q=new zf.ResultStreamObserver({server:this._server,beforeKeys:f,afterKeys:p,beforeError:_,afterError:m,beforeComplete:g,afterComplete:T});return(0,Hf.assertTxConfigIsEmpty)(u,this._onProtocolError,q),(0,Hf.assertDatabaseIsEmpty)(a,this._onProtocolError,q),(0,Hf.assertImpersonatedUserIsEmpty)(c,this._onProtocolError,q),this.write($s.default.run(t,e),q,!1),this.write($s.default.pullAll(),q,S),q},Object.defineProperty(r.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),r.prototype.reset=function(t){var e=t===void 0?{}:t,n=e.onError,i=e.onComplete,o=new zf.ResetObserver({onProtocolError:this._onProtocolError,onError:n,onComplete:i});return this.write($s.default.reset(),o,!0),o},r.prototype._createPacker=function(t){return new RO.v1.Packer(t)},r.prototype._createUnpacker=function(t,e){return new RO.v1.Unpacker(t,e)},r.prototype.write=function(t,e,n){var i=this,o=this.queueObserverIfProtocolIsNotBroken(e);o&&(this._log.isDebugEnabled()&&this._log.debug("C: "+t),this.packer().packStruct(t.signature,t.fields.map(function(u){return i.packer().packable(u)})),this._chunker.messageBoundary(),n&&this._chunker.flush())},r.prototype.notifyFatalError=function(t){return this._fatalError=t,this._responseHandler._notifyErrorToObservers(t)},r.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},r.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},r.prototype.queueObserverIfProtocolIsNotBroken=function(t){return this.isBroken()?(this.notifyFatalErrorToObserver(t),!1):this._responseHandler._queueObserver(t)},r.prototype.isBroken=function(){return!!this._fatalError},r.prototype.notifyFatalErrorToObserver=function(t){t&&t.onError&&t.onError(this._fatalError)},r.prototype.resetFailure=function(){this._responseHandler._resetFailure()},r.prototype._onLoginCompleted=function(t,e){if(t){var n=t.server;this._server.version||(this._server.version=n)}e&&e(t)},r.prototype._onLoginError=function(t,e){this._onProtocolError(t.message),e&&e(t)},r}();go.default=NW});var Zf=h(tr=>{"use strict";var qW=tr&&tr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),xO=tr&&tr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(tr,"__esModule",{value:!0});var DW=xO(Yf()),DO=xO(Ks()),xW=R(),MW=xW.internal.constants.BOLT_PROTOCOL_V2,kW=function(r){qW(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"BoltProtocol"),t.prototype._createPacker=function(e){return new DO.default.Packer(e)},t.prototype._createUnpacker=function(e,n){return new DO.default.Unpacker(e,n)},Object.defineProperty(t.prototype,"version",{get:function(){return MW},enumerable:!1,configurable:!0}),t}(DW.default);tr.default=kW});var Gf=h(it=>{"use strict";var UW=it&&it.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),eu=it&&it.__assign||function(){return eu=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},eu.apply(this,arguments)},MO=it&&it.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(it,"__esModule",{value:!0});var LW=MO(Zf()),rr=MO(Jt()),Js=Zs(),nr=nt(),Kf=R(),I9=Kf.internal.bookmark.Bookmark,FW=Kf.internal.constants.BOLT_PROTOCOL_V3,BW=Kf.internal.txConfig.TxConfig,kO="context",VW="CALL dbms.cluster.routing.getRoutingTable($"+kO+")",WW=new nr.StreamObserver,HW=function(r){UW(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"BoltProtocol"),Object.defineProperty(t.prototype,"version",{get:function(){return FW},enumerable:!1,configurable:!0}),t.prototype.transformMetadata=function(e){return"t_first"in e&&(e.result_available_after=e.t_first,delete e.t_first),"t_last"in e&&(e.result_consumed_after=e.t_last,delete e.t_last),e},t.prototype.initialize=function(e){var n=this,i=e===void 0?{}:e,o=i.userAgent,u=i.authToken,a=i.onError,l=i.onComplete,c=new nr.LoginObserver({onError:function(f){return n._onLoginError(f,a)},onCompleted:function(f){return n._onLoginCompleted(f,l)}});return this.write(rr.default.hello(o,u),c,!0),c},t.prototype.prepareToClose=function(){this.write(rr.default.goodbye(),WW,!0)},t.prototype.beginTransaction=function(e){var n=e===void 0?{}:e,i=n.bookmark,o=n.txConfig,u=n.database,a=n.impersonatedUser,l=n.mode,c=n.beforeError,f=n.afterError,p=n.beforeComplete,_=n.afterComplete,m=new nr.ResultStreamObserver({server:this._server,beforeError:c,afterError:f,beforeComplete:p,afterComplete:_});return m.prepareToHandleSingleResponse(),(0,Js.assertDatabaseIsEmpty)(u,this._onProtocolError,m),(0,Js.assertImpersonatedUserIsEmpty)(a,this._onProtocolError,m),this.write(rr.default.begin({bookmark:i,txConfig:o,mode:l}),m,!0),m},t.prototype.commitTransaction=function(e){var n=e===void 0?{}:e,i=n.beforeError,o=n.afterError,u=n.beforeComplete,a=n.afterComplete,l=new nr.ResultStreamObserver({server:this._server,beforeError:i,afterError:o,beforeComplete:u,afterComplete:a});return l.prepareToHandleSingleResponse(),this.write(rr.default.commit(),l,!0),l},t.prototype.rollbackTransaction=function(e){var n=e===void 0?{}:e,i=n.beforeError,o=n.afterError,u=n.beforeComplete,a=n.afterComplete,l=new nr.ResultStreamObserver({server:this._server,beforeError:i,afterError:o,beforeComplete:u,afterComplete:a});return l.prepareToHandleSingleResponse(),this.write(rr.default.rollback(),l,!0),l},t.prototype.run=function(e,n,i){var o=i===void 0?{}:i,u=o.bookmark,a=o.txConfig,l=o.database,c=o.impersonatedUser,f=o.mode,p=o.beforeKeys,_=o.afterKeys,m=o.beforeError,g=o.afterError,T=o.beforeComplete,P=o.afterComplete,S=o.flush,q=S===void 0?!0:S,Z=new nr.ResultStreamObserver({server:this._server,beforeKeys:p,afterKeys:_,beforeError:m,afterError:g,beforeComplete:T,afterComplete:P});return(0,Js.assertDatabaseIsEmpty)(l,this._onProtocolError,Z),(0,Js.assertImpersonatedUserIsEmpty)(c,this._onProtocolError,Z),this.write(rr.default.runWithMetadata(e,n,{bookmark:u,txConfig:a,mode:f}),Z,!1),this.write(rr.default.pullAll(),Z,q),Z},t.prototype.requestRoutingInformation=function(e){var n,i=e.routingContext,o=i===void 0?{}:i,u=e.sessionContext,a=u===void 0?{}:u,l=e.onError,c=e.onCompleted,f=this.run(VW,(n={},n[kO]=o,n),eu(eu({},a),{txConfig:BW.empty()}));return new nr.ProcedureRouteObserver({resultObserver:f,onProtocolError:this._onProtocolError,onError:l,onCompleted:c})},t}(LW.default);it.default=HW});var Xf=h(ot=>{"use strict";var zW=ot&&ot.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),tu=ot&&ot.__assign||function(){return tu=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},tu.apply(this,arguments)},LO=ot&&ot.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ot,"__esModule",{value:!0});var YW=LO(Gf()),So=LO(Jt()),UO=Zs(),Qf=nt(),$f=R(),j9=$f.internal.bookmark.Bookmark,FO=$f.internal.constants,ZW=FO.BOLT_PROTOCOL_V4_0,KW=FO.FETCH_ALL,GW=$f.internal.txConfig.TxConfig,BO="context",VO="database",QW="CALL dbms.routing.getRoutingTable($"+BO+", $"+VO+")",$W=function(r){zW(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"BoltProtocol"),Object.defineProperty(t.prototype,"version",{get:function(){return ZW},enumerable:!1,configurable:!0}),t.prototype.beginTransaction=function(e){var n=e===void 0?{}:e,i=n.bookmark,o=n.txConfig,u=n.database,a=n.impersonatedUser,l=n.mode,c=n.beforeError,f=n.afterError,p=n.beforeComplete,_=n.afterComplete,m=new Qf.ResultStreamObserver({server:this._server,beforeError:c,afterError:f,beforeComplete:p,afterComplete:_});return m.prepareToHandleSingleResponse(),(0,UO.assertImpersonatedUserIsEmpty)(a,this._onProtocolError,m),this.write(So.default.begin({bookmark:i,txConfig:o,database:u,mode:l}),m,!0),m},t.prototype.run=function(e,n,i){var o=i===void 0?{}:i,u=o.bookmark,a=o.txConfig,l=o.database,c=o.impersonatedUser,f=o.mode,p=o.beforeKeys,_=o.afterKeys,m=o.beforeError,g=o.afterError,T=o.beforeComplete,P=o.afterComplete,S=o.flush,q=S===void 0?!0:S,Z=o.reactive,_e=Z===void 0?!1:Z,rn=o.fetchSize,nn=rn===void 0?KW:rn,ht=new Qf.ResultStreamObserver({server:this._server,reactive:_e,fetchSize:nn,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:p,afterKeys:_,beforeError:m,afterError:g,beforeComplete:T,afterComplete:P});(0,UO.assertImpersonatedUserIsEmpty)(c,this._onProtocolError,ht);var Cu=_e;return this.write(So.default.runWithMetadata(e,n,{bookmark:u,txConfig:a,database:l,mode:f}),ht,Cu&&q),_e||this.write(So.default.pull({n:nn}),ht,q),ht},t.prototype._requestMore=function(e,n,i){this.write(So.default.pull({stmtId:e,n}),i,!0)},t.prototype._requestDiscard=function(e,n){this.write(So.default.discard({stmtId:e}),n,!0)},t.prototype._noOp=function(){},t.prototype.requestRoutingInformation=function(e){var n,i=e.routingContext,o=i===void 0?{}:i,u=e.databaseName,a=u===void 0?null:u,l=e.sessionContext,c=l===void 0?{}:l,f=e.onError,p=e.onCompleted,_=this.run(QW,(n={},n[BO]=o,n[VO]=a,n),tu(tu({},c),{txConfig:GW.empty()}));return new Qf.ProcedureRouteObserver({resultObserver:_,onProtocolError:this._onProtocolError,onError:f,onCompleted:p})},t}(YW.default);ot.default=$W});var Jf=h(ir=>{"use strict";var XW=ir&&ir.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),WO=ir&&ir.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ir,"__esModule",{value:!0});var JW=WO(Xf()),e2=WO(Jt()),t2=nt(),r2=R(),n2=r2.internal.constants.BOLT_PROTOCOL_V4_1,i2=function(r){XW(t,r);function t(e,n,i,o,u,a,l){o===void 0&&(o=s(function(){return null},"createResponseHandler"));var c=r.call(this,e,n,i,o,u,a)||this;return c._serversideRouting=l,c}return s(t,"BoltProtocol"),Object.defineProperty(t.prototype,"version",{get:function(){return n2},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var n=this,i=e===void 0?{}:e,o=i.userAgent,u=i.authToken,a=i.onError,l=i.onComplete,c=new t2.LoginObserver({onError:function(f){return n._onLoginError(f,a)},onCompleted:function(f){return n._onLoginCompleted(f,l)}});return this.write(e2.default.hello(o,u,this._serversideRouting),c,!0),c},t}(JW.default);ir.default=i2});var eh=h(or=>{"use strict";var o2=or&&or.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),s2=or&&or.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(or,"__esModule",{value:!0});var u2=s2(Jf()),a2=R(),c2=a2.internal.constants.BOLT_PROTOCOL_V4_2,l2=function(r){o2(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"BoltProtocol"),Object.defineProperty(t.prototype,"version",{get:function(){return c2},enumerable:!1,configurable:!0}),t}(u2.default);or.default=l2});var ru=h(sr=>{"use strict";var f2=sr&&sr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),zO=sr&&sr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(sr,"__esModule",{value:!0});var h2=zO(eh()),HO=zO(Jt()),p2=nt(),_2=nt(),YO=R(),d2=YO.internal.bookmark.Bookmark,v2=YO.internal.constants.BOLT_PROTOCOL_V4_3,b2=function(r){f2(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"BoltProtocol"),Object.defineProperty(t.prototype,"version",{get:function(){return v2},enumerable:!1,configurable:!0}),t.prototype.requestRoutingInformation=function(e){var n=e.routingContext,i=n===void 0?{}:n,o=e.databaseName,u=o===void 0?null:o,a=e.sessionContext,l=a===void 0?{}:a,c=e.onError,f=e.onCompleted,p=new p2.RouteObserver({onProtocolError:this._onProtocolError,onError:c,onCompleted:f}),_=l.bookmark||d2.empty();return this.write(HO.default.route(i,_.values(),u),p,!0),p},t.prototype.initialize=function(e){var n=this,i=e===void 0?{}:e,o=i.userAgent,u=i.authToken,a=i.onError,l=i.onComplete,c=new _2.LoginObserver({onError:function(f){return n._onLoginError(f,a)},onCompleted:function(f){return f.patch_bolt!==void 0&&n._applyPatches(f.patch_bolt),n._onLoginCompleted(f,l)}});return this.write(HO.default.hello(o,u,this._serversideRouting,["utc"]),c,!0),c},t.prototype._applyPatches=function(e){e.includes("utc")&&this._applyUtcPatch()},t.prototype._applyUtcPatch=function(){this._packer.useUtc=!0,this._unpacker.useUtc=!0},t}(h2.default);sr.default=b2});var QO=h(ur=>{"use strict";var y2=ur&&ur.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ZO=ur&&ur.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ur,"__esModule",{value:!0});var m2=ZO(ru()),KO=R(),nu=ZO(Jt()),th=nt(),GO=KO.internal.constants,O2=GO.BOLT_PROTOCOL_V4_4,g2=GO.FETCH_ALL,S2=KO.internal.bookmark.Bookmark,E2=function(r){y2(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"BoltProtocol"),Object.defineProperty(t.prototype,"version",{get:function(){return O2},enumerable:!1,configurable:!0}),t.prototype.requestRoutingInformation=function(e){var n=e.routingContext,i=n===void 0?{}:n,o=e.databaseName,u=o===void 0?null:o,a=e.impersonatedUser,l=a===void 0?null:a,c=e.sessionContext,f=c===void 0?{}:c,p=e.onError,_=e.onCompleted,m=new th.RouteObserver({onProtocolError:this._onProtocolError,onError:p,onCompleted:_}),g=f.bookmark||S2.empty();return this.write(nu.default.routeV4x4(i,g.values(),{databaseName:u,impersonatedUser:l}),m,!0),m},t.prototype.run=function(e,n,i){var o=i===void 0?{}:i,u=o.bookmark,a=o.txConfig,l=o.database,c=o.mode,f=o.impersonatedUser,p=o.beforeKeys,_=o.afterKeys,m=o.beforeError,g=o.afterError,T=o.beforeComplete,P=o.afterComplete,S=o.flush,q=S===void 0?!0:S,Z=o.reactive,_e=Z===void 0?!1:Z,rn=o.fetchSize,nn=rn===void 0?g2:rn,ht=new th.ResultStreamObserver({server:this._server,reactive:_e,fetchSize:nn,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:p,afterKeys:_,beforeError:m,afterError:g,beforeComplete:T,afterComplete:P}),Cu=_e;return this.write(nu.default.runWithMetadata(e,n,{bookmark:u,txConfig:a,database:l,mode:c,impersonatedUser:f}),ht,Cu&&q),_e||this.write(nu.default.pull({n:nn}),ht,q),ht},t.prototype.beginTransaction=function(e){var n=e===void 0?{}:e,i=n.bookmark,o=n.txConfig,u=n.database,a=n.mode,l=n.impersonatedUser,c=n.beforeError,f=n.afterError,p=n.beforeComplete,_=n.afterComplete,m=new th.ResultStreamObserver({server:this._server,beforeError:c,afterError:f,beforeComplete:p,afterComplete:_});return m.prepareToHandleSingleResponse(),this.write(nu.default.begin({bookmark:i,txConfig:o,database:u,mode:a,impersonatedUser:l}),m,!0),m},t}(m2.default);ur.default=E2});var XO=h(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});var ar=R(),w2=112,T2=113,P2=126,C2=127;function st(){}s(st,"NO_OP");function $O(r){return r}s($O,"NO_OP_IDENTITY");var I2={onNext:st,onCompleted:st,onError:st},R2=function(){function r(t){var e=t===void 0?{}:t,n=e.transformMetadata,i=e.log,o=e.observer;this._pendingObservers=[],this._log=i,this._transformMetadata=n||$O,this._observer=Object.assign({onPendingObserversChange:st,onError:st,onFailure:st,onErrorApplyTransformation:$O},o)}return s(r,"ResponseHandler"),Object.defineProperty(r.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),r.prototype.handleResponse=function(t){var e=t.fields[0];switch(t.signature){case T2:this._log.isDebugEnabled()&&this._log.debug("S: RECORD "+ar.json.stringify(t)),this._currentObserver.onNext(e);break;case w2:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS "+ar.json.stringify(t));try{var n=this._transformMetadata(e);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case C2:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE "+ar.json.stringify(t));try{var i=(0,ar.newError)(e.message,e.code);this._currentFailure=this._observer.onErrorApplyTransformation(i),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case P2:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED "+ar.json.stringify(t));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,ar.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,ar.newError)("Unknown Bolt protocol message: "+t))}},r.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onPendingObserversChange(this._pendingObservers.length)},r.prototype._queueObserver=function(t){return t=t||I2,t.onCompleted=t.onCompleted||st,t.onError=t.onError||st,t.onNext=t.onNext||st,this._currentObserver===void 0?this._currentObserver=t:this._pendingObservers.push(t),this._observer.onPendingObserversChange(this._pendingObservers.length),!0},r.prototype._notifyErrorToObservers=function(t){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(t);this._pendingObservers.length>0;){var e=this._pendingObservers.shift();e&&e.onError&&e.onError(t)}},r.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},r.prototype._resetFailure=function(){this._currentFailure=null},r}();rh.default=R2});var JO=h(Eo=>{"use strict";var ut=Eo&&Eo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Eo,"__esModule",{value:!0});var A2=R(),j2=ut(Yf()),N2=ut(Zf()),q2=ut(Gf()),D2=ut(Xf()),x2=ut(Jf()),M2=ut(eh()),k2=ut(ru()),U2=ut(QO()),L2=ut(XO());function F2(r){var t=r===void 0?{}:r,e=t.version,n=t.chunker,i=t.dechunker,o=t.channel,u=t.disableLosslessIntegers,a=t.useBigInt,l=t.serversideRouting,c=t.server,f=t.log,p=t.observer,_=s(function(m){var g=new L2.default({transformMetadata:m.transformMetadata.bind(m),log:f,observer:p});return o.onerror=p.onError.bind(p),o.onmessage=function(T){return i.write(T)},i.onmessage=function(T){try{g.handleResponse(m.unpacker().unpack(T))}catch(P){return p.onError(P)}},g},"createResponseHandler");return B2(e,c,n,{disableLosslessIntegers:u,useBigInt:a},l,_,p.onProtocolError.bind(p),f)}s(F2,"create");Eo.default=F2;function B2(r,t,e,n,i,o,u,a){switch(r){case 1:return new j2.default(t,e,n,o,a,u);case 2:return new N2.default(t,e,n,o,a,u);case 3:return new q2.default(t,e,n,o,a,u);case 4:return new D2.default(t,e,n,o,a,u);case 4.1:return new x2.default(t,e,n,o,a,u,i);case 4.2:return new M2.default(t,e,n,o,a,u,i);case 4.3:return new k2.default(t,e,n,o,a,u,i);case 4.4:return new U2.default(t,e,n,o,a,u,i);default:throw(0,A2.newError)("Unknown Bolt protocol version: "+r)}}s(B2,"createProtocol")});var ou=h(fe=>{"use strict";var V2=fe&&fe.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),W2=fe&&fe.__exportStar||function(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&V2(t,r,e)},iu=fe&&fe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fe,"__esModule",{value:!0});fe.RawRoutingTable=fe.BoltProtocol=void 0;var H2=iu(wm()),z2=iu(JO()),Y2=iu(ru()),Z2=iu(Vf());W2(nt(),fe);fe.BoltProtocol=Y2.default;fe.RawRoutingTable=Z2.default;fe.default={handshake:H2.default,create:z2.default}});var nh=h(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.DEFAULT_ACQUISITION_TIMEOUT=cr.DEFAULT_MAX_SIZE=void 0;var su=100;cr.DEFAULT_MAX_SIZE=su;var uu=60*1e3;cr.DEFAULT_ACQUISITION_TIMEOUT=uu;var K2=function(){function r(t,e){this.maxSize=eg(t,su),this.acquisitionTimeout=eg(e,uu)}return s(r,"PoolConfig"),r.defaultConfig=function(){return new r(su,uu)},r.fromDriverConfig=function(t){var e=tg(t.maxConnectionPoolSize),n=e?t.maxConnectionPoolSize:su,i=tg(t.connectionAcquisitionTimeout),o=i?t.connectionAcquisitionTimeout:uu;return new r(n,o)},r}();cr.default=K2;function eg(r,t){return r===0||r?r:t}s(eg,"valueOrDefault");function tg(r){return r===0||r}s(tg,"isConfigured")});var ig=h(at=>{"use strict";var au=at&&at.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function a(f){try{c(n.next(f))}catch(p){u(p)}}s(a,"fulfilled");function l(f){try{c(n.throw(f))}catch(p){u(p)}}s(l,"rejected");function c(f){f.done?o(f.value):i(f.value).then(a,l)}s(c,"step"),c((n=n.apply(r,t||[])).next())})},cu=at&&at.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(f){return l([c,f])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},G2=at&&at.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(at,"__esModule",{value:!0});var Q2=G2(nh()),ih=R(),$2=ih.internal.logger.Logger,X2=function(){function r(t){var e=t===void 0?{}:t,n=e.create,i=n===void 0?function(S,q){return Promise.resolve()}:n,o=e.destroy,u=o===void 0?function(S){return Promise.resolve()}:o,a=e.validate,l=a===void 0?function(S){return!0}:a,c=e.installIdleObserver,f=c===void 0?function(S,q){}:c,p=e.removeIdleObserver,_=p===void 0?function(S){}:p,m=e.config,g=m===void 0?Q2.default.defaultConfig():m,T=e.log,P=T===void 0?$2.noOp():T;this._create=i,this._destroy=u,this._validate=l,this._installIdleObserver=f,this._removeIdleObserver=_,this._maxSize=g.maxSize,this._acquisitionTimeout=g.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._poolState={},this._release=this._release.bind(this),this._log=P,this._closed=!1}return s(r,"Pool"),r.prototype.acquire=function(t){var e=this;return this._acquire(t).then(function(n){var i=t.asKey();if(n)return n;var o=e._acquireRequests,u=o[i];return u||(o[i]=[]),new Promise(function(a,l){var c,f=setTimeout(function(){var p=o[i];if(p&&(o[i]=p.filter(function(g){return g!==c})),!c.isCompleted()){var _=e.activeResourceCount(t),m=e.has(t)?e._pools[i].length:0;c.reject((0,ih.newError)("Connection acquisition timed out in "+e._acquisitionTimeout+" ms. Pool status: Active conn count = "+_+", Idle conn count = "+m+"."))}},e._acquisitionTimeout);c=new eH(i,a,l,f,e._log),o[i].push(c)})})},r.prototype.purge=function(t){return this._purgeKey(t.asKey())},r.prototype.close=function(){return au(this,void 0,void 0,function(){var t=this;return cu(this,function(e){switch(e.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(n){return t._purgeKey(n)}))];case 1:return[2,e.sent()]}})})},r.prototype.keepAll=function(t){var e=this,n=t.map(function(u){return u.asKey()}),i=Object.keys(this._pools),o=i.filter(function(u){return n.indexOf(u)===-1});return Promise.all(o.map(function(u){return e._purgeKey(u)}))},r.prototype.has=function(t){return t.asKey()in this._pools},r.prototype.activeResourceCount=function(t){return this._activeResourceCounts[t.asKey()]||0},r.prototype._acquire=function(t){return au(this,void 0,void 0,function(){var e,n,i,o,u,a,l=this;return cu(this,function(c){switch(c.label){case 0:if(this._closed)throw(0,ih.newError)("Pool is closed, it is no more able to serve requests.");e=t.asKey(),n=this._pools[e],i=this._poolState[e],n||(n=[],i=new ng,this._pools[e]=n,this._pendingCreates[e]=0,this._poolState[e]=i),c.label=1;case 1:return n.length?(o=n.pop(),this._validate(o)?(this._removeIdleObserver&&this._removeIdleObserver(o),rg(e,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(o+" acquired from the pool "+e),[2,o]):[3,2]):[3,5];case 2:return[4,this._destroy(o)];case 3:c.sent(),c.label=4;case 4:return[3,1];case 5:if(this._maxSize>0&&(u=this.activeResourceCount(t)+this._pendingCreates[e],u>=this._maxSize))return[2,null];this._pendingCreates[e]=this._pendingCreates[e]+1,c.label=6;case 6:return c.trys.push([6,,8,9]),[4,this._create(t,function(f,p){return l._release(i,f,p)})];case 7:return a=c.sent(),rg(e,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(a+" created for the pool "+e),[3,9];case 8:return this._pendingCreates[e]=this._pendingCreates[e]-1,[7];case 9:return[2,a]}})})},r.prototype._release=function(t,e,n){return au(this,void 0,void 0,function(){var i,o,u=this;return cu(this,function(a){switch(a.label){case 0:return i=e.asKey(),o=this._pools[i],o&&t&&t.isActive()?this._validate(n)?[3,2]:(this._log.isDebugEnabled()&&this._log.debug(n+" destroyed and can't be released to the pool "+i+" because it is not functional"),[4,this._destroy(n)]):[3,4];case 1:return a.sent(),[3,3];case 2:this._installIdleObserver&&this._installIdleObserver(n,{onError:function(l){u._log.debug("Idle connection "+n+" destroyed because of error: "+l);var c=u._pools[i];c&&(u._pools[i]=c.filter(function(f){return f!==n})),u._destroy(n).catch(function(){})}}),o.push(n),this._log.isDebugEnabled()&&this._log.debug(n+" released to the pool "+i),a.label=3;case 3:return[3,6];case 4:return this._log.isDebugEnabled()&&this._log.debug(n+" destroyed and can't be released to the pool "+i+" because pool has been purged"),[4,this._destroy(n)];case 5:a.sent(),a.label=6;case 6:return J2(i,this._activeResourceCounts),this._processPendingAcquireRequests(e),[2]}})})},r.prototype._purgeKey=function(t){return au(this,void 0,void 0,function(){var e,n,i,o;return cu(this,function(u){switch(u.label){case 0:for(e=this._pools[t]||[],n=this._poolState[t]||new ng,i=[];e.length;)o=e.pop(),this._removeIdleObserver&&this._removeIdleObserver(o),i.push(this._destroy(o));return n.close(),delete this._pools[t],delete this._poolState[t],[4,Promise.all(i)];case 1:return u.sent(),[2]}})})},r.prototype._processPendingAcquireRequests=function(t){var e=this,n=t.asKey(),i=this._acquireRequests[n],o=this._poolState[n];if(i){var u=i.shift();u?this._acquire(t).catch(function(a){return u.reject(a),null}).then(function(a){a&&(u.isCompleted()?e._release(o,t,a):u.resolve(a))}):delete this._acquireRequests[n]}},r}();function rg(r,t){var e=t[r]||0;t[r]=e+1}s(rg,"resourceAcquired");function J2(r,t){var e=t[r]||0,n=e-1;n>0?t[r]=n:delete t[r]}s(J2,"resourceReleased");var eH=function(){function r(t,e,n,i,o){this._key=t,this._resolve=e,this._reject=n,this._timeoutId=i,this._log=o,this._completed=!1}return s(r,"PendingRequest"),r.prototype.isCompleted=function(){return this._completed},r.prototype.resolve=function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug(t+" acquired from the pool "+this._key),this._resolve(t))},r.prototype.reject=function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(t))},r}(),ng=function(){function r(){this._active=!0}return s(r,"PoolState"),r.prototype.isActive=function(){return this._active},r.prototype.close=function(){this._active=!1},r}();at.default=X2});var sh=h(Q=>{"use strict";var tH=Q&&Q.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),rH=Q&&Q.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),nH=Q&&Q.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&tH(t,r,e);return rH(t,r),t},iH=Q&&Q.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Q,"__esModule",{value:!0});Q.DEFAULT_MAX_SIZE=Q.DEFAULT_ACQUISITION_TIMEOUT=Q.PoolConfig=Q.Pool=void 0;var oh=nH(nh());Q.PoolConfig=oh.default;Object.defineProperty(Q,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return oh.DEFAULT_ACQUISITION_TIMEOUT}});Object.defineProperty(Q,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return oh.DEFAULT_MAX_SIZE}});var og=iH(ig());Q.Pool=og.default;Q.default=og.default});var uh=h(wo=>{"use strict";var oH=wo&&wo.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(wo,"__esModule",{value:!0});var sH=R(),uH=function(r){oH(t,r);function t(e){var n=r.call(this)||this;return n._connection=e,n}return s(t,"SingleConnectionProvider"),t.prototype.acquireConnection=function(e){var n=e===void 0?{}:e,i=n.accessMode,o=n.database,u=n.bookmarks,a=this._connection;return this._connection=null,Promise.resolve(a)},t}(sH.ConnectionProvider);wo.default=uH});var lu=h(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});var aH=function(){function r(t){this._errorHandler=t}return s(r,"Connection"),Object.defineProperty(r.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.isOpen=function(){throw new Error("not implemented")},r.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(r.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,e){throw new Error("not implemented")},r.prototype.write=function(t,e,n){throw new Error("not implemented")},r.prototype.resetAndFlush=function(){throw new Error("not implemented")},r.prototype.close=function(){throw new Error("not implemented")},r.prototype.handleAndTransformError=function(t,e){return this._errorHandler?this._errorHandler.handleAndTransformError(t,e):t},r}();ah.default=aH});var cg=h(ge=>{"use strict";var cH=ge&&ge.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),lH=ge&&ge.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function a(f){try{c(n.next(f))}catch(p){u(p)}}s(a,"fulfilled");function l(f){try{c(n.throw(f))}catch(p){u(p)}}s(l,"rejected");function c(f){f.done?o(f.value):i(f.value).then(a,l)}s(c,"step"),c((n=n.apply(r,t||[])).next())})},fH=ge&&ge.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(f){return l([c,f])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ug=ge&&ge.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ge,"__esModule",{value:!0});ge.createChannelConnection=void 0;var fu=Kr(),To=R(),hH=ug(lu()),sg=ug(ou()),pH=To.error.PROTOCOL_ERROR,_H=To.internal.logger.Logger,dH=0;function vH(r,t,e,n,i,o){i===void 0&&(i=null),o===void 0&&(o=s(function(l){return new fu.Channel(l)},"createChannel"));var u=new fu.ChannelConfig(r,t,e.errorCode()),a=o(u);return sg.default.handshake(a).then(function(l){var c=l.protocolVersion,f=l.consumeRemainingBuffer,p=new fu.Chunker(a),_=new fu.Dechunker,m=s(function(T){return sg.default.create({version:c,channel:a,chunker:p,dechunker:_,disableLosslessIntegers:t.disableLosslessIntegers,useBigInt:t.useBigInt,serversideRouting:i,server:T.server,log:T.logger,observer:{onPendingObserversChange:T._handleOngoingRequestsNumberChange.bind(T),onError:T._handleFatalError.bind(T),onFailure:T._resetOnFailure.bind(T),onProtocolError:T._handleProtocolError.bind(T),onErrorApplyTransformation:function(P){return T.handleAndTransformError(P,T._address)}}})},"createProtocol"),g=new ag(a,e,r,n,t.disableLosslessIntegers,i,p,m);return f(function(T){return _.write(T)}),g}).catch(function(l){return a.close().then(function(){throw l})})}s(vH,"createChannelConnection");ge.createChannelConnection=vH;var ag=function(r){cH(t,r);function t(e,n,i,o,u,a,l,c){u===void 0&&(u=!1),a===void 0&&(a=null);var f=r.call(this,n)||this;return f._id=dH++,f._address=i,f._server={address:i.asHostPort()},f.creationTimestamp=Date.now(),f._disableLosslessIntegers=u,f._ch=e,f._chunker=l,f._log=bH(f,o),f._serversideRouting=a,f._dbConnectionId=null,f._protocol=c(f),f._isBroken=!1,f._log.isDebugEnabled()&&f._log.debug("created towards "+i),f}return s(t,"ChannelConnection"),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(e){this._dbConnectionId=e},enumerable:!1,configurable:!0}),t.prototype.connect=function(e,n){return this._initialize(e,n)},t.prototype._initialize=function(e,n){var i=this,o=this;return new Promise(function(u,a){i._protocol.initialize({userAgent:e,authToken:n,onError:function(l){return a(l)},onComplete:function(l){if(l){var c=l.server;(!i.version||c)&&(i.version=c);var f=l.connection_id;if(i.databaseId||(i.databaseId=f),l.hints){var p=l.hints["connection.recv_timeout_seconds"];if(p!=null){var _=(0,To.toNumber)(p);Number.isInteger(_)&&_>0?i._ch.setupReceiveTimeout(_*1e3):i._log.info("Server located at "+i._address+" supplied an invalid connection receive timeout value ("+_+"). Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}}}u(o)}})})},t.prototype.protocol=function(){return this._protocol},Object.defineProperty(t.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._server.version},set:function(e){this._server.version=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),t.prototype._handleFatalError=function(e){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||e,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by "+this._error+" ("+To.json.stringify(this._error)+")"),this._protocol.notifyFatalError(this._error)},t.prototype._queueObserver=function(e){return this._protocol.queueObserverIfProtocolIsNotBroken(e)},t.prototype.hasOngoingObservableRequests=function(){return this._protocol.hasOngoingObservableRequests()},t.prototype.resetAndFlush=function(){var e=this;return new Promise(function(n,i){e._protocol.reset({onError:function(o){if(e._isBroken)i(o);else{var u=e._handleProtocolError("Received FAILURE as a response for RESET: "+o);i(u)}},onComplete:function(){n()}})})},t.prototype._resetOnFailure=function(){var e=this;this.isOpen()&&this._protocol.reset({onError:function(){e._protocol.resetFailure()},onComplete:function(){e._protocol.resetFailure()}})},t.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},t.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},t.prototype._handleOngoingRequestsNumberChange=function(e){e===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout()},t.prototype.close=function(){return lH(this,void 0,void 0,function(){return fH(this,function(e){switch(e.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return e.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},t.prototype.toString=function(){return"Connection ["+this.id+"]["+(this.databaseId||"")+"]"},t.prototype._handleProtocolError=function(e){this._protocol.resetFailure(),this._updateCurrentObserver();var n=(0,To.newError)(e,pH);return this._handleFatalError(n),n},t}(hH.default);ge.default=ag;function bH(r,t){return new _H(t._level,function(e,n){return t._loggerFunction(e,r+" "+n)})}s(bH,"createConnectionLogger")});var lg=h(lr=>{"use strict";var yH=lr&&lr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),mH=lr&&lr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(lr,"__esModule",{value:!0});var OH=mH(lu()),gH=function(r){yH(t,r);function t(e,n){var i=r.call(this,n)||this;return n&&(i._originalErrorHandler=e._errorHandler,e._errorHandler=i._errorHandler),i._delegate=e,i}return s(t,"DelegateConnection"),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(e){this._delegate.databaseId=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._delegate.version},set:function(e){this._delegate.version=e},enumerable:!1,configurable:!0}),t.prototype.isOpen=function(){return this._delegate.isOpen()},t.prototype.protocol=function(){return this._delegate.protocol()},t.prototype.connect=function(e,n){return this._delegate.connect(e,n)},t.prototype.write=function(e,n,i){return this._delegate.write(e,n,i)},t.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},t.prototype.close=function(){return this._delegate.close()},t.prototype._release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate._release()},t}(OH.default);lr.default=gH});var hg=h(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});var fg=R(),SH=fg.error.SERVICE_UNAVAILABLE,EH=fg.error.SESSION_EXPIRED,wH=function(){function r(t,e,n,i){this._errorCode=t,this._handleUnavailability=e||ch,this._handleWriteFailure=n||ch,this._handleAuthorizationExpired=i||ch}return s(r,"ConnectionErrorHandler"),r.create=function(t){var e=t.errorCode,n=t.handleUnavailability,i=t.handleWriteFailure,o=t.handleAuthorizationExpired;return new r(e,n,i,o)},r.prototype.errorCode=function(){return this._errorCode},r.prototype.handleAndTransformError=function(t,e){return TH(t)?this._handleAuthorizationExpired(t,e):PH(t)?this._handleUnavailability(t,e):CH(t)?this._handleWriteFailure(t,e):t},r}();lh.default=wH;function TH(r){return r&&(r.code==="Neo.ClientError.Security.AuthorizationExpired"||r.code==="Neo.ClientError.Security.TokenExpired")}s(TH,"isAutorizationExpiredError");function PH(r){return r?r.code===EH||r.code===SH||r.code==="Neo.TransientError.General.DatabaseUnavailable":!1}s(PH,"isAvailabilityError");function CH(r){return r?r.code==="Neo.ClientError.Cluster.NotALeader"||r.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase":!1}s(CH,"isFailureToWrite");function ch(r){return r}s(ch,"noOpHandler")});var hu=h(z=>{"use strict";var IH=z&&z.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),RH=z&&z.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),AH=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&IH(t,r,e);return RH(t,r),t},fh=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(z,"__esModule",{value:!0});z.createChannelConnection=z.ConnectionErrorHandler=z.DelegateConnection=z.ChannelConnection=z.Connection=void 0;var pg=fh(lu());z.Connection=pg.default;var _g=AH(cg());z.ChannelConnection=_g.default;Object.defineProperty(z,"createChannelConnection",{enumerable:!0,get:function(){return _g.createChannelConnection}});var jH=fh(lg());z.DelegateConnection=jH.default;var NH=fh(hg());z.ConnectionErrorHandler=NH.default;z.default=pg.default});var pu=h(oe=>{"use strict";var qH=oe&&oe.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),DH=oe&&oe.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),xH=oe&&oe.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),MH=oe&&oe.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&DH(t,r,e);return xH(t,r),t},kH=oe&&oe.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function a(f){try{c(n.next(f))}catch(p){u(p)}}s(a,"fulfilled");function l(f){try{c(n.throw(f))}catch(p){u(p)}}s(l,"rejected");function c(f){f.done?o(f.value):i(f.value).then(a,l)}s(c,"step"),c((n=n.apply(r,t||[])).next())})},UH=oe&&oe.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(f){return l([c,f])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(oe,"__esModule",{value:!0});var dg=hu(),vg=MH(sh()),bg=R(),LH=bg.error.SERVICE_UNAVAILABLE,FH=function(r){qH(t,r);function t(e,n){var i=e.id,o=e.config,u=e.log,a=e.userAgent,l=e.authToken;n===void 0&&(n=null);var c=r.call(this)||this;return c._id=i,c._config=o,c._log=u,c._userAgent=a,c._authToken=l,c._createChannelConnection=n||function(f){return(0,dg.createChannelConnection)(f,c._config,c._createConnectionErrorHandler(),c._log)},c._connectionPool=new vg.default({create:c._createConnection.bind(c),destroy:c._destroyConnection.bind(c),validate:c._validateConnection.bind(c),installIdleObserver:t._installIdleObserverOnConnection.bind(c),removeIdleObserver:t._removeIdleObserverOnConnection.bind(c),config:vg.PoolConfig.fromDriverConfig(o),log:c._log}),c._openConnections={},c}return s(t,"PooledConnectionProvider"),t.prototype._createConnectionErrorHandler=function(){return new dg.ConnectionErrorHandler(LH)},t.prototype._createConnection=function(e,n){var i=this;return this._createChannelConnection(e).then(function(o){return o._release=function(){return n(e,o)},i._openConnections[o.id]=o,o.connect(i._userAgent,i._authToken).catch(function(u){throw i._destroyConnection(o),u})})},t.prototype._validateConnection=function(e){if(!e.isOpen())return!1;var n=this._config.maxConnectionLifetime,i=Date.now()-e.creationTimestamp;return i<=n},t.prototype._destroyConnection=function(e){return delete this._openConnections[e.id],e.close()},t.prototype.close=function(){return kH(this,void 0,void 0,function(){return UH(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.close()];case 1:return e.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(n){return n.close()}))];case 2:return e.sent(),[2]}})})},t._installIdleObserverOnConnection=function(e,n){e._queueObserver(n)},t._removeIdleObserverOnConnection=function(e){e._updateCurrentObserver()},t}(bg.ConnectionProvider);oe.default=FH});var yg=h(ke=>{"use strict";var BH=ke&&ke.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_u=ke&&ke.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function a(f){try{c(n.next(f))}catch(p){u(p)}}s(a,"fulfilled");function l(f){try{c(n.throw(f))}catch(p){u(p)}}s(l,"rejected");function c(f){f.done?o(f.value):i(f.value).then(a,l)}s(c,"step"),c((n=n.apply(r,t||[])).next())})},du=ke&&ke.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(f){return l([c,f])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},VH=ke&&ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ke,"__esModule",{value:!0});var WH=VH(pu()),hh=hu(),ph=R(),_h=ph.internal.constants,HH=_h.BOLT_PROTOCOL_V3,zH=_h.BOLT_PROTOCOL_V4_0,YH=_h.BOLT_PROTOCOL_V4_4,ZH=ph.error.SERVICE_UNAVAILABLE,f$=ph.error.newError,KH=function(r){BH(t,r);function t(e){var n=e.id,i=e.config,o=e.log,u=e.address,a=e.userAgent,l=e.authToken,c=r.call(this,{id:n,config:i,log:o,userAgent:a,authToken:l})||this;return c._address=u,c}return s(t,"DirectConnectionProvider"),t.prototype.acquireConnection=function(e){var n=this,i=e===void 0?{}:e,o=i.accessMode,u=i.database,a=i.bookmarks,l=hh.ConnectionErrorHandler.create({errorCode:ZH,handleAuthorizationExpired:function(c,f){return n._handleAuthorizationExpired(c,f,u)}});return this._connectionPool.acquire(this._address).then(function(c){return new hh.DelegateConnection(c,l)})},t.prototype._handleAuthorizationExpired=function(e,n,i){return this._log.warn("Direct driver "+this._id+" will close connection to "+n+" for database '"+i+"' because of an error "+e.code+" '"+e.message+"'"),this._connectionPool.purge(n).catch(function(){}),e},t.prototype._hasProtocolVersion=function(e){return _u(this,void 0,void 0,function(){var n,i;return du(this,function(o){switch(o.label){case 0:return[4,(0,hh.createChannelConnection)(this._address,this._config,this._createConnectionErrorHandler(),this._log)];case 1:return n=o.sent(),i=n.protocol()?n.protocol().version:null,[4,n.close()];case 2:return o.sent(),i?[2,e(i)]:[2,!1]}})})},t.prototype.supportsMultiDb=function(){return _u(this,void 0,void 0,function(){return du(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=zH})];case 1:return[2,e.sent()]}})})},t.prototype.supportsTransactionConfig=function(){return _u(this,void 0,void 0,function(){return du(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=HH})];case 1:return[2,e.sent()]}})})},t.prototype.supportsUserImpersonation=function(){return _u(this,void 0,void 0,function(){return du(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=YH})];case 1:return[2,e.sent()]}})})},t}(WH.default);ke.default=KH});var Oh=h(ct=>{"use strict";var dh=ct&&ct.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){u={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o},vh=ct&&ct.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(ct,"__esModule",{value:!0});ct.createValidRoutingTable=void 0;var we=R(),Og=we.internal.constants,GH=Og.ACCESS_MODE_WRITE,QH=Og.ACCESS_MODE_READ,bh=we.internal.serverAddress.ServerAddress,mh=we.error.PROTOCOL_ERROR,$H=1,gg=function(){function r(t){var e=t===void 0?{}:t,n=e.database,i=e.routers,o=e.readers,u=e.writers,a=e.expirationTime,l=e.ttl;this.database=n||null,this.databaseName=n||"default database",this.routers=i||[],this.readers=o||[],this.writers=u||[],this.expirationTime=a||(0,we.int)(0),this.ttl=l}return s(r,"RoutingTable"),r.fromRawRoutingTable=function(t,e,n){return Sg(t,e,n)},r.prototype.forget=function(t){this.readers=vu(this.readers,t),this.writers=vu(this.writers,t)},r.prototype.forgetRouter=function(t){this.routers=vu(this.routers,t)},r.prototype.forgetWriter=function(t){this.writers=vu(this.writers,t)},r.prototype.isStaleFor=function(t){return this.expirationTime.lessThan(Date.now())||this.routers.length<$H||t===QH&&this.readers.length===0||t===GH&&this.writers.length===0},r.prototype.isExpiredFor=function(t){return this.expirationTime.add(t).lessThan(Date.now())},r.prototype.allServers=function(){return vh(vh(vh([],dh(this.routers),!1),dh(this.readers),!1),dh(this.writers),!1)},r.prototype.toString=function(){return"RoutingTable["+("database="+this.databaseName+", ")+("expirationTime="+this.expirationTime+", ")+("currentTime="+Date.now()+", ")+("routers=["+this.routers+"], ")+("readers=["+this.readers+"], ")+("writers=["+this.writers+"]]")},r}();ct.default=gg;function vu(r,t){return r.filter(function(e){return e.asKey()!==t.asKey()})}s(vu,"removeFromArray");function Sg(r,t,e){var n=e.ttl,i=JH(e,t),o=XH(e,t),u=o.routers,a=o.readers,l=o.writers;return mg(u,"routers",t),mg(a,"readers",t),new gg({database:r||e.db,routers:u,readers:a,writers:l,expirationTime:i,ttl:n})}s(Sg,"createValidRoutingTable");ct.createValidRoutingTable=Sg;function XH(r,t){try{var e=[],n=[],i=[];return r.servers.forEach(function(o){var u=o.role,a=o.addresses;u==="ROUTE"?e=yh(a).map(function(l){return bh.fromUrl(l)}):u==="WRITE"?i=yh(a).map(function(l){return bh.fromUrl(l)}):u==="READ"&&(n=yh(a).map(function(l){return bh.fromUrl(l)}))}),{routers:e,readers:n,writers:i}}catch(o){throw(0,we.newError)("Unable to parse servers entry from router "+t+` from addresses:
`+we.json.stringify(r.servers)+`
Error message: `+o.message,mh)}}s(XH,"parseServers");function JH(r,t){try{var e=(0,we.int)(Date.now()),n=(0,we.int)(r.ttl).multiply(1e3).add(e);return n.lessThan(e)?we.Integer.MAX_VALUE:n}catch(i){throw(0,we.newError)("Unable to parse TTL entry from router "+t+` from raw routing table:
`+we.json.stringify(r)+`
Error message: `+i.message,mh)}}s(JH,"calculateExpirationTime");function mg(r,t,e){if(r.length===0)throw(0,we.newError)("Received no "+t+" from router "+e,mh)}s(mg,"assertNonEmpty");function yh(r){if(!Array.isArray(r))throw new TypeError("Array expected but got: "+r);return Array.from(r)}s(yh,"parseArray")});var wg=h(Po=>{"use strict";var e8=Po&&Po.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Po,"__esModule",{value:!0});var t8=e8(Oh()),r8=ou(),Eg=R(),n8=Eg.error.SERVICE_UNAVAILABLE,i8="Neo.ClientError.Procedure.ProcedureNotFound",o8="Neo.ClientError.Database.DatabaseNotFound",s8=function(){function r(t){this._routingContext=t}return s(r,"Rediscovery"),r.prototype.lookupRoutingTableOnRouter=function(t,e,n,i){var o=this;return t._acquireConnection(function(u){return o._requestRawRoutingTable(u,t,e,n,i).then(function(a){return a.isNull?null:t8.default.fromRawRoutingTable(e,n,a)})})},r.prototype._requestRawRoutingTable=function(t,e,n,i,o){var u=this;return new Promise(function(a,l){t.protocol().requestRoutingInformation({routingContext:u._routingContext,databaseName:n,impersonatedUser:o,sessionContext:{bookmark:e._lastBookmark,mode:e._mode,database:e._database,afterComplete:e._onComplete},onCompleted:a,onError:function(c){c.code===o8?l(c):c.code===i8?l((0,Eg.newError)("Server at "+i.asHostPort()+" can't perform routing. Make sure you are connecting to a causal cluster",n8)):a(r8.RawRoutingTable.ofNull())}})})},r}();Po.default=s8});var Cg=h(lt=>{"use strict";var Tg=lt&&lt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(lt,"__esModule",{value:!0});lt.RoutingTable=lt.Rediscovery=void 0;var Pg=Tg(wg());lt.Rediscovery=Pg.default;var u8=Tg(Oh());lt.RoutingTable=u8.default;lt.default=Pg.default});var Dg=h(B=>{"use strict";var a8=B&&B.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),bu=B&&B.__assign||function(){return bu=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},bu.apply(this,arguments)},c8=B&&B.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),l8=B&&B.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),f8=B&&B.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&c8(t,r,e);return l8(t,r),t},he=B&&B.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function a(f){try{c(n.next(f))}catch(p){u(p)}}s(a,"fulfilled");function l(f){try{c(n.throw(f))}catch(p){u(p)}}s(l,"rejected");function c(f){f.done?o(f.value):i(f.value).then(a,l)}s(c,"step"),c((n=n.apply(r,t||[])).next())})},pe=B&&B.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(f){return l([c,f])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Ig=B&&B.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Rg=B&&B.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){u={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o},qg=B&&B.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(B,"__esModule",{value:!0});var Te=R(),Ag=f8(Cg()),h8=Kr(),p8=qg(uh()),_8=qg(pu()),d8=Ef(),fr=hu(),v8=Te.error.SERVICE_UNAVAILABLE,Co=Te.error.SESSION_EXPIRED,b8=Te.internal.bookmark.Bookmark,Io=Te.internal.constants,jg=Io.ACCESS_MODE_READ,Ng=Io.ACCESS_MODE_WRITE,y8=Io.BOLT_PROTOCOL_V3,m8=Io.BOLT_PROTOCOL_V4_0,O8=Io.BOLT_PROTOCOL_V4_4,g8="Neo.ClientError.Security.Unauthorized",S8="Neo.ClientError.Database.DatabaseNotFound",E8="system",gh=null,w8=(0,Te.int)(3e4),T8=function(r){a8(t,r);function t(e){var n=e.id,i=e.address,o=e.routingContext,u=e.hostNameResolver,a=e.config,l=e.log,c=e.userAgent,f=e.authToken,p=e.routingTablePurgeDelay,_=r.call(this,{id:n,config:a,log:l,userAgent:c,authToken:f},function(m){return(0,fr.createChannelConnection)(m,_._config,_._createConnectionErrorHandler(),_._log,_._routingContext)})||this;return _._routingContext=bu(bu({},o),{address:i.toString()}),_._seedRouter=i,_._rediscovery=new Ag.default(_._routingContext),_._loadBalancingStrategy=new d8.LeastConnectedLoadBalancingStrategy(_._connectionPool),_._hostNameResolver=u,_._dnsResolver=new h8.HostNameResolver,_._log=l,_._useSeedRouter=!0,_._routingTableRegistry=new P8(p?(0,Te.int)(p):w8),_}return s(t,"RoutingConnectionProvider"),t.prototype._createConnectionErrorHandler=function(){return new fr.ConnectionErrorHandler(Co)},t.prototype._handleUnavailability=function(e,n,i){return this._log.warn("Routing driver "+this._id+" will forget "+n+" for database '"+i+"' because of an error "+e.code+" '"+e.message+"'"),this.forget(n,i||gh),e},t.prototype._handleAuthorizationExpired=function(e,n,i){return this._log.warn("Routing driver "+this._id+" will close connections to "+n+" for database '"+i+"' because of an error "+e.code+" '"+e.message+"'"),this._connectionPool.purge(n).catch(function(){}),e},t.prototype._handleWriteFailure=function(e,n,i){return this._log.warn("Routing driver "+this._id+" will forget writer "+n+" for database '"+i+"' because of an error "+e.code+" '"+e.message+"'"),this.forgetWriter(n,i||gh),(0,Te.newError)("No longer possible to write to server at "+n,Co)},t.prototype.acquireConnection=function(e){var n=e===void 0?{}:e,i=n.accessMode,o=n.database,u=n.bookmarks,a=n.impersonatedUser,l=n.onDatabaseNameResolved;return he(this,void 0,void 0,function(){var c,f,p,_,m,g,T,P,S=this;return pe(this,function(q){switch(q.label){case 0:return p={database:o||gh},_=new fr.ConnectionErrorHandler(Co,function(Z,_e){return S._handleUnavailability(Z,_e,p.database)},function(Z,_e){return S._handleWriteFailure(Z,_e,p.database)},function(Z,_e){return S._handleAuthorizationExpired(Z,_e,p.database)}),[4,this._freshRoutingTable({accessMode:i,database:p.database,bookmark:u,impersonatedUser:a,onDatabaseNameResolved:function(Z){p.database=p.database||Z,l&&l(Z)}})];case 1:if(m=q.sent(),i===jg)f=this._loadBalancingStrategy.selectReader(m.readers),c="read";else if(i===Ng)f=this._loadBalancingStrategy.selectWriter(m.writers),c="write";else throw(0,Te.newError)("Illegal mode "+i);if(!f)throw(0,Te.newError)("Failed to obtain connection towards "+c+" server. Known routing table is: "+m,Co);q.label=2;case 2:return q.trys.push([2,4,,5]),[4,this._acquireConnectionToServer(f,c,m)];case 3:return g=q.sent(),[2,new fr.DelegateConnection(g,_)];case 4:throw T=q.sent(),P=_.handleAndTransformError(T,f),P;case 5:return[2]}})})},t.prototype._hasProtocolVersion=function(e){return he(this,void 0,void 0,function(){var n,i,o,u,a,l;return pe(this,function(c){switch(c.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:n=c.sent(),o=0,c.label=2;case 2:if(!(o<n.length))return[3,8];c.label=3;case 3:return c.trys.push([3,6,,7]),[4,(0,fr.createChannelConnection)(n[o],this._config,this._createConnectionErrorHandler(),this._log)];case 4:return u=c.sent(),a=u.protocol()?u.protocol().version:null,[4,u.close()];case 5:return c.sent(),a?[2,e(a)]:[2,!1];case 6:return l=c.sent(),i=l,[3,7];case 7:return o++,[3,2];case 8:if(i)throw i;return[2,!1]}})})},t.prototype.supportsMultiDb=function(){return he(this,void 0,void 0,function(){return pe(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=m8})];case 1:return[2,e.sent()]}})})},t.prototype.supportsTransactionConfig=function(){return he(this,void 0,void 0,function(){return pe(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=y8})];case 1:return[2,e.sent()]}})})},t.prototype.supportsUserImpersonation=function(){return he(this,void 0,void 0,function(){return pe(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=O8})];case 1:return[2,e.sent()]}})})},t.prototype.forget=function(e,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(i){return i.forget(e)}}),this._connectionPool.purge(e).catch(function(){})},t.prototype.forgetWriter=function(e,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(i){return i.forgetWriter(e)}})},t.prototype._acquireConnectionToServer=function(e,n,i){return this._connectionPool.acquire(e)},t.prototype._freshRoutingTable=function(e){var n=e===void 0?{}:e,i=n.accessMode,o=n.database,u=n.bookmark,a=n.impersonatedUser,l=n.onDatabaseNameResolved,c=this._routingTableRegistry.get(o,function(){return new Ag.RoutingTable({database:o})});return c.isStaleFor(i)?(this._log.info('Routing table is stale for database: "'+o+'" and access mode: "'+i+'": '+c),this._refreshRoutingTable(c,u,a,l)):c},t.prototype._refreshRoutingTable=function(e,n,i,o){var u=e.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(u,e,n,i,o):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(u,e,n,i,o)},t.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(e,n,i,o,u){return he(this,void 0,void 0,function(){var a,l;return pe(this,function(c){switch(c.label){case 0:return a=[],[4,this._fetchRoutingTableUsingSeedRouter(a,this._seedRouter,n,i,o)];case 1:return l=c.sent(),l?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(e,n,i,o)];case 3:l=c.sent(),c.label=4;case 4:return[4,this._applyRoutingTableIfPossible(n,l,u)];case 5:return[2,c.sent()]}})})},t.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(e,n,i,o,u){return he(this,void 0,void 0,function(){var a;return pe(this,function(l){switch(l.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(e,n,i,o)];case 1:return a=l.sent(),a?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(e,this._seedRouter,n,i,o)];case 2:a=l.sent(),l.label=3;case 3:return[4,this._applyRoutingTableIfPossible(n,a,u)];case 4:return[2,l.sent()]}})})},t.prototype._fetchRoutingTableUsingKnownRouters=function(e,n,i,o){return he(this,void 0,void 0,function(){var u,a;return pe(this,function(l){switch(l.label){case 0:return[4,this._fetchRoutingTable(e,n,i,o)];case 1:return u=l.sent(),u?[2,u]:(a=e.length-1,t._forgetRouter(n,e,a),[2,null])}})})},t.prototype._fetchRoutingTableUsingSeedRouter=function(e,n,i,o,u){return he(this,void 0,void 0,function(){var a,l;return pe(this,function(c){switch(c.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return a=c.sent(),l=a.filter(function(f){return e.indexOf(f)<0}),[4,this._fetchRoutingTable(l,i,o,u)];case 2:return[2,c.sent()]}})})},t.prototype._resolveSeedRouter=function(e){return he(this,void 0,void 0,function(){var n,i,o=this;return pe(this,function(u){switch(u.label){case 0:return[4,this._hostNameResolver.resolve(e)];case 1:return n=u.sent(),[4,Promise.all(n.map(function(a){return o._dnsResolver.resolve(a)}))];case 2:return i=u.sent(),[2,[].concat.apply([],i)]}})})},t.prototype._fetchRoutingTable=function(e,n,i,o){var u=this;return e.reduce(function(a,l,c){return he(u,void 0,void 0,function(){var f,p,_,m;return pe(this,function(g){switch(g.label){case 0:return[4,a];case 1:return f=g.sent(),f?[2,f]:(p=c-1,t._forgetRouter(n,e,p),[4,this._createSessionForRediscovery(l,i,o)]);case 2:if(_=g.sent(),!_)return[3,8];g.label=3;case 3:return g.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(_,n.database,l,o)];case 4:return[2,g.sent()];case 5:if(m=g.sent(),m&&m.code===S8)throw m;return this._log.warn("unable to fetch routing table because of an error "+m),[2,null];case 6:return _.close(),[7];case 7:return[3,9];case 8:return[2,null];case 9:return[2]}})})},Promise.resolve(null))},t.prototype._createSessionForRediscovery=function(e,n,i){return he(this,void 0,void 0,function(){var o,u,a,l,c,f=this;return pe(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),[4,this._connectionPool.acquire(e)];case 1:return o=p.sent(),u=fr.ConnectionErrorHandler.create({errorCode:Co,handleAuthorizationExpired:function(_,m){return f._handleAuthorizationExpired(_,m)}}),a=new p8.default(new fr.DelegateConnection(o,u)),l=o.protocol().version,l<4?[2,new Te.Session({mode:Ng,bookmark:b8.empty(),connectionProvider:a})]:[2,new Te.Session({mode:jg,database:E8,bookmark:n,connectionProvider:a,impersonatedUser:i})];case 2:if(c=p.sent(),c&&c.code===g8)throw c;return[2,null];case 3:return[2]}})})},t.prototype._applyRoutingTableIfPossible=function(e,n,i){return he(this,void 0,void 0,function(){return pe(this,function(o){switch(o.label){case 0:if(!n)throw(0,Te.newError)("Could not perform discovery. No routing servers available. Known routing table: "+e,v8);return n.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(n,i)];case 1:return o.sent(),[2,n]}})})},t.prototype._updateRoutingTable=function(e,n){return he(this,void 0,void 0,function(){return pe(this,function(i){switch(i.label){case 0:return[4,this._connectionPool.keepAll(e.allServers())];case 1:return i.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(e),n(e.database),this._log.info("Updated routing table "+e),[2]}})})},t._forgetRouter=function(e,n,i){var o=n[i];e&&o&&e.forgetRouter(o)},t}(_8.default);B.default=T8;var P8=function(){function r(t){this._tables=new Map,this._routingTablePurgeDelay=t}return s(r,"RoutingTableRegistry"),r.prototype.register=function(t){return this._tables.set(t.database,t),this},r.prototype.apply=function(t,e){var n=e===void 0?{}:e,i=n.applyWhenExists,o=n.applyWhenDontExists,u=o===void 0?function(){}:o;return this._tables.has(t)?i(this._tables.get(t)):typeof t=="string"||t===null?u():this._forEach(i),this},r.prototype.get=function(t,e){return this._tables.has(t)?this._tables.get(t):typeof e=="function"?e():e},r.prototype.removeExpired=function(){var t=this;return this._removeIf(function(e){return e.isExpiredFor(t._routingTablePurgeDelay)})},r.prototype._forEach=function(t){var e,n;try{for(var i=Ig(this._tables),o=i.next();!o.done;o=i.next()){var u=Rg(o.value,2),a=u[1];t(a)}}catch(l){e={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return this},r.prototype._remove=function(t){return this._tables.delete(t),this},r.prototype._removeIf=function(t){var e,n;try{for(var i=Ig(this._tables),o=i.next();!o.done;o=i.next()){var u=Rg(o.value,2),a=u[0],l=u[1];t(l)&&this._remove(a)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return this},r}()});var xg=h(Pe=>{"use strict";var yu=Pe&&Pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.RoutingConnectionProvider=Pe.DirectConnectionProvider=Pe.PooledConnectionProvider=Pe.SingleConnectionProvider=void 0;var C8=uh();Object.defineProperty(Pe,"SingleConnectionProvider",{enumerable:!0,get:function(){return yu(C8).default}});var I8=pu();Object.defineProperty(Pe,"PooledConnectionProvider",{enumerable:!0,get:function(){return yu(I8).default}});var R8=yg();Object.defineProperty(Pe,"DirectConnectionProvider",{enumerable:!0,get:function(){return yu(R8).default}});var A8=Dg();Object.defineProperty(Pe,"RoutingConnectionProvider",{enumerable:!0,get:function(){return yu(A8).default}})});var kg=h(V=>{"use strict";var Mg=V&&V.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),j8=V&&V.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),en=V&&V.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&Mg(t,r,e);return j8(t,r),t},N8=V&&V.__exportStar||function(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&Mg(t,r,e)};Object.defineProperty(V,"__esModule",{value:!0});V.pool=V.packstream=V.channel=V.buf=V.bolt=V.loadBalancing=void 0;V.loadBalancing=en(Ef());V.bolt=en(ou());V.buf=en(Bs());V.channel=en(Kr());V.packstream=en(Ks());V.pool=en(sh());N8(xg(),V)});var Gg=h(E=>{"use strict";var mu=It();Object.defineProperty(E,"__esModule",{value:!0});E.driver=Vg;Object.defineProperty(E,"Driver",{enumerable:!0,get:s(function(){return Ro.Driver},"get")});Object.defineProperty(E,"Neo4jError",{enumerable:!0,get:s(function(){return y.Neo4jError},"get")});Object.defineProperty(E,"error",{enumerable:!0,get:s(function(){return y.error},"get")});Object.defineProperty(E,"Integer",{enumerable:!0,get:s(function(){return y.Integer},"get")});Object.defineProperty(E,"int",{enumerable:!0,get:s(function(){return y.int},"get")});Object.defineProperty(E,"isInt",{enumerable:!0,get:s(function(){return y.isInt},"get")});Object.defineProperty(E,"isPoint",{enumerable:!0,get:s(function(){return y.isPoint},"get")});Object.defineProperty(E,"Point",{enumerable:!0,get:s(function(){return y.Point},"get")});Object.defineProperty(E,"Date",{enumerable:!0,get:s(function(){return y.Date},"get")});Object.defineProperty(E,"DateTime",{enumerable:!0,get:s(function(){return y.DateTime},"get")});Object.defineProperty(E,"Duration",{enumerable:!0,get:s(function(){return y.Duration},"get")});Object.defineProperty(E,"isDate",{enumerable:!0,get:s(function(){return y.isDate},"get")});Object.defineProperty(E,"isDateTime",{enumerable:!0,get:s(function(){return y.isDateTime},"get")});Object.defineProperty(E,"isDuration",{enumerable:!0,get:s(function(){return y.isDuration},"get")});Object.defineProperty(E,"isLocalDateTime",{enumerable:!0,get:s(function(){return y.isLocalDateTime},"get")});Object.defineProperty(E,"isLocalTime",{enumerable:!0,get:s(function(){return y.isLocalTime},"get")});Object.defineProperty(E,"isTime",{enumerable:!0,get:s(function(){return y.isTime},"get")});Object.defineProperty(E,"LocalDateTime",{enumerable:!0,get:s(function(){return y.LocalDateTime},"get")});Object.defineProperty(E,"LocalTime",{enumerable:!0,get:s(function(){return y.LocalTime},"get")});Object.defineProperty(E,"Time",{enumerable:!0,get:s(function(){return y.Time},"get")});Object.defineProperty(E,"Node",{enumerable:!0,get:s(function(){return y.Node},"get")});Object.defineProperty(E,"Path",{enumerable:!0,get:s(function(){return y.Path},"get")});Object.defineProperty(E,"PathSegment",{enumerable:!0,get:s(function(){return y.PathSegment},"get")});Object.defineProperty(E,"Relationship",{enumerable:!0,get:s(function(){return y.Relationship},"get")});Object.defineProperty(E,"UnboundRelationship",{enumerable:!0,get:s(function(){return y.UnboundRelationship},"get")});Object.defineProperty(E,"Record",{enumerable:!0,get:s(function(){return y.Record},"get")});Object.defineProperty(E,"ResultSummary",{enumerable:!0,get:s(function(){return y.ResultSummary},"get")});Object.defineProperty(E,"Plan",{enumerable:!0,get:s(function(){return y.Plan},"get")});Object.defineProperty(E,"ProfiledPlan",{enumerable:!0,get:s(function(){return y.ProfiledPlan},"get")});Object.defineProperty(E,"QueryStatistics",{enumerable:!0,get:s(function(){return y.QueryStatistics},"get")});Object.defineProperty(E,"Notification",{enumerable:!0,get:s(function(){return y.Notification},"get")});Object.defineProperty(E,"ServerInfo",{enumerable:!0,get:s(function(){return y.ServerInfo},"get")});Object.defineProperty(E,"Result",{enumerable:!0,get:s(function(){return y.Result},"get")});Object.defineProperty(E,"auth",{enumerable:!0,get:s(function(){return y.auth},"get")});Object.defineProperty(E,"Session",{enumerable:!0,get:s(function(){return y.Session},"get")});Object.defineProperty(E,"Transaction",{enumerable:!0,get:s(function(){return y.Transaction},"get")});Object.defineProperty(E,"RxSession",{enumerable:!0,get:s(function(){return Lg.default},"get")});Object.defineProperty(E,"RxTransaction",{enumerable:!0,get:s(function(){return Fg.default},"get")});Object.defineProperty(E,"RxResult",{enumerable:!0,get:s(function(){return Bg.default},"get")});E.default=E.temporal=E.spatial=E.session=E.types=E.logging=E.integer=void 0;var Ro=Yy(),q8=mu(Zy()),y=R(),Ug=kg(),Lg=mu(mf()),Fg=mu(vf()),Bg=mu(As()),Ou=y.internal.util,D8=Ou.ENCRYPTION_ON,E$=Ou.ENCRYPTION_OFF,x8=Ou.assertString,M8=Ou.isEmptyObjectOrNull,k8=y.internal.serverAddress.ServerAddress,U8=y.internal.urlUtil;function Vg(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};x8(r,"Bolt URL");var n=U8.parseDatabaseUrl(r),i=!1,o=!1,u;switch(n.scheme){case"bolt":break;case"bolt+s":o=!0,u="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":o=!0,u="TRUST_ALL_CERTIFICATES";break;case"neo4j":i=!0;break;case"neo4j+s":o=!0,u="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",i=!0;break;case"neo4j+ssc":o=!0,u="TRUST_ALL_CERTIFICATES",i=!0;break;default:throw new Error("Unknown scheme: ".concat(n.scheme))}if(o){if("encrypted"in e||"trust"in e)throw new Error("Encryption/trust can only be configured either through URL or config, not both");e.encrypted=D8,e.trust=u}t=t||{},t.scheme=t.scheme||"none",e.userAgent=e.userAgent||L8;var a=k8.fromUrl(n.hostAndPort),l={address:a,typename:i?"Routing":"Direct",routing:i};return new Ro.Driver(l,e,c());function c(){if(i)return function(f,p,_,m){return new Ug.RoutingConnectionProvider({id:f,config:p,log:_,hostNameResolver:m,authToken:t,address:a,userAgent:p.userAgent,routingContext:n.query})};if(!M8(n.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(r,"'"));return function(f,p,_){return new Ug.DirectConnectionProvider({id:f,config:p,log:_,authToken:t,address:a,userAgent:p.userAgent})}}}s(Vg,"driver");var L8="neo4j-javascript/"+q8.default,Wg={console:function(r){function t(e){return r.apply(this,arguments)}return s(t,"console"),t.toString=function(){return r.toString()},t}(function(r){return{level:r,logger:s(function(e,n){return console.log("".concat(global.Date.now()," ").concat(e.toUpperCase()," ").concat(n))},"logger")}})};E.logging=Wg;var Hg={Node:y.Node,Relationship:y.Relationship,UnboundRelationship:y.UnboundRelationship,PathSegment:y.PathSegment,Path:y.Path,Result:y.Result,ResultSummary:y.ResultSummary,Record:y.Record,Point:y.Point,Date:y.Date,DateTime:y.DateTime,Duration:y.Duration,LocalDateTime:y.LocalDateTime,LocalTime:y.LocalTime,Time:y.Time,Integer:y.Integer};E.types=Hg;var zg={READ:Ro.READ,WRITE:Ro.WRITE};E.session=zg;var Yg={toNumber:y.toNumber,toString:y.toString,inSafeRange:y.inSafeRange};E.integer=Yg;var Zg={isPoint:y.isPoint};E.spatial=Zg;var Kg={isDuration:y.isDuration,isLocalTime:y.isLocalTime,isTime:y.isTime,isDate:y.isDate,isLocalDateTime:y.isLocalDateTime,isDateTime:y.isDateTime};E.temporal=Kg;var F8={driver:Vg,int:y.int,isInt:y.isInt,isPoint:y.isPoint,isDuration:y.isDuration,isLocalTime:y.isLocalTime,isTime:y.isTime,isDate:y.isDate,isLocalDateTime:y.isLocalDateTime,isDateTime:y.isDateTime,integer:Yg,Neo4jError:y.Neo4jError,auth:y.auth,logging:Wg,types:Hg,session:zg,error:y.error,spatial:Zg,temporal:Kg,Driver:Ro.Driver,Session:y.Session,Transaction:y.Transaction,Result:y.Result,RxSession:Lg.default,RxTransaction:Fg.default,RxResult:Bg.default,ResultSummary:y.ResultSummary,Plan:y.Plan,ProfiledPlan:y.ProfiledPlan,QueryStatistics:y.QueryStatistics,Notification:y.Notification,ServerInfo:y.ServerInfo,Record:y.Record,Node:y.Node,Relationship:y.Relationship,UnboundRelationship:y.UnboundRelationship,Path:y.Path,PathSegment:y.PathSegment,Point:y.Point,Integer:y.Integer,Duration:y.Duration,LocalTime:y.LocalTime,Time:y.Time,Date:y.Date,LocalDateTime:y.LocalDateTime,DateTime:y.DateTime},B8=F8;E.default=B8});var nS=h((C$,rS)=>{"use strict";var Sh=Gg(),P$=require("fs"),He,Eh=!1,gu,Th="EXECUTE_TIME_OUT",wh,V8=s(({lodash:r})=>gu=r,"setDependencies"),W8=s(r=>wh=(r==null?void 0:r.queryRequestTimeout)||3e5,"setTimeOut"),H8=s((r,t)=>t(r.host,r.port).then(()=>new Promise((e,n)=>{let i=l6(r),o=r.username,u=r.password,l={...o6(r),maxConnectionPoolSize:500,connectionAcquisitionTimeout:2*60*1e3};He=Sh.driver(i,Sh.auth.basic(o,u),l),He.verifyConnectivity().then(()=>{e()}).catch(c=>{He=null,n(c)})})),"connectToInstance"),z8=s(async(r,t,e)=>{try{if(r.ssh){let{options:n}=await e.openTunnel({sshAuthMethod:r.ssh_method==="privateKey"?"IDENTITY_FILE":"USER_PASSWORD",sshTunnelHostname:r.ssh_host,sshTunnelPort:r.ssh_port,sshTunnelUsername:r.ssh_user,sshTunnelPassword:r.ssh_password,sshTunnelIdentityFile:r.ssh_key_file,sshTunnelPassphrase:r.ssh_key_passphrase,host:r.host,port:r.port});Eh=!0,r={...r,...n}}return H8(r,t)}catch(n){throw n.step="Connection Error",n}},"connect"),Y8=s(async r=>{He&&(He.close(),He=null),Eh&&(await r.closeConsumer(),Eh=!1)},"close"),se=s(async(r,t=void 0,e=!1)=>{e||(t=void 0);let n=new Promise((u,a)=>setTimeout(()=>a(Z8(wh)),wh)),i=[],o;try{o=He.session({database:t});let u=new Promise((a,l)=>{o.run(r).subscribe({onNext:c=>{i.push(c.toObject())},onCompleted:()=>{o.close(),o=null,a(i)},onError:c=>{o.close(),o=null,l(c)}})});return await Promise.race([u,n])}catch(u){throw u.code===Th&&o&&o.close(),u}},"execute"),Z8=s(r=>{let t=new Error(`execute timeout: ${r}ms exceeded`);return t.code=Th,t},"getExecuteTimeoutError"),Ao=s(r=>{let t=Array.isArray(r)?[]:{};for(let e in r){let n=r[e];Sh.isInt(n)?n=n.toInt():typeof n=="object"&&(n=Ao(n)),t[e]=n}return t},"castInteger"),K8=s(async(r,t)=>{try{return await se("MATCH (n) RETURN DISTINCT labels(n) as label",r,t).then(n=>{let i=[];return n.forEach(o=>{i=i.concat(o.label)}),i})}catch(e){throw e.step=e.step||"Error of retrieving labels",e}},"getLabels"),G8=s((r,t,e)=>se(`call apoc.meta.subGraph({labels: ["${t.join('","')}]})`,r,e).then(n=>n,n=>{if((n==null?void 0:n.code)===Th)throw n;return se("CALL db.schema.visualization()",r,e)}).then(n=>{let i=n[0].nodes,o=n[0].relationships,u=[];return o.forEach(a=>{let l={start:"",relationship:a.type,end:""};i.forEach(c=>{a.start.compare(c.identity)===0&&(l.start=c.labels[0]),a.end.compare(c.identity)===0&&(l.end=c.labels[0])}),u.push(l)}),u}),"getSchema"),Q8=s(async(r,t)=>{try{return t?await X8():await se('call dbms.listConfig("active_database")').then(e=>[gu.get(e[0],"value",r)],()=>[r])}catch(e){e.step=e.step||"Error of retrieving database name"}},"getDatabaseName"),$8=s(()=>He.supportsMultiDb(),"supportsMultiDb"),X8=s(async()=>(await se("SHOW DATABASES","system",!0)).filter(({name:t,currentStatus:e})=>t!=="system"&&e==="online").map(({name:t})=>t),"getActiveMultiDbsNames"),J8=s((r,t=100,e,n)=>se(`MATCH (row:\`${r}\`) RETURN row LIMIT ${t}`,e,n).then(i=>i.map(o=>Ao(o.row.properties))),"getNodes"),e6=s((r,t,e,n=100,i,o)=>se(`MATCH (:\`${r}\`)-[row:\`${t}\`]-(:\`${e}\`) RETURN row LIMIT ${n}`,i,o).then(u=>u.map(a=>Ao(a.row.properties))),"getRelationshipData"),t6=s((r,t,e)=>se(`MATCH (a:\`${r}\`) RETURN count(a) AS count`,t,e).then(n=>Ao(n[0]).count),"getNodesCount"),r6=s((r,t,e,n,i)=>se(`MATCH (:\`${r}\`)-[rel:\`${t}\`]-(:\`${e}\`) RETURN count(rel) AS count`,n,i).then(o=>Ao(o[0]).count),"getCountRelationshipsData"),n6=s((r,t,e)=>se(e==="5.x"?"SHOW INDEXES":"CALL db.indexes()",r,t),"getIndexes"),i6=s((r,t,e)=>se(e==="5.x"?"SHOW CONSTRAINTS":"CALL db.constraints()",r,t),"getConstraints"),o6=s(r=>{var e;if((e=r.host)!=null&&e.startsWith("neo4j+s://")&&!["TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SERVER_CLIENT_CERTIFICATES"].includes(r.sslType))return{};let t={encrypted:"ENCRYPTION_ON",trust:r.sslType};switch(r.sslType){case"TRUST_ALL_CERTIFICATES":case"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES":return t;case"TRUST_CUSTOM_CA_SIGNED_CERTIFICATES":return t.trustedCertificates=[r.certAuthority],t;case"TRUST_SERVER_CLIENT_CERTIFICATES":return t.trustedCertificates=[r.certAuthority],t.key=r.clientPrivateKey,t.cert=r.clientCert,t.passphrase=r.passphrase,t;case"Off":default:return{}}},"getSSLConfig"),s6=s(async()=>{try{let r=await se("call dbms.components() yield versions unwind versions as version return version"),t=gu.get(r,"[0].version"),e=t.split(".");return e[0]==="4"&&e[1]==="3"?"4.3":e[0]==="4"&&e[1]>="4"?"4.4":t.startsWith("4")?"4.0-4.2":t.startsWith("5")?"5.x":"3.x"}catch{return"3.x"}},"getDbVersion"),u6=s(()=>He._connectionProvider.acquireConnection().then(r=>He._validateConnection(r)),"checkConnection"),a6=s(r=>Qg(r)||$g(r)||Xg(r)||Jg(r)||eS(r)||tS(r),"isTemporalTypeField"),c6=s(r=>{let t=s(e=>({type:"string",childType:"temporal",mode:e}),"getFieldProps");switch(!0){case Qg(r):return t("date");case $g(r):return t("datetime");case Xg(r):return t("duration");case Jg(r):return t("localdatetime");case eS(r):return t("localtime");case tS(r):return t("time")}},"getTemporalFieldSchema"),Qg=s(r=>tn(["year","month","day","toString"],r),"isDate"),$g=s(r=>tn(["year","month","day","hour","minute","second","nanosecond","timeZoneOffsetSeconds","timeZoneId","toString"],r),"isDateTime"),Xg=s(r=>tn(["months","days","seconds","nanoseconds","toString"],r),"isDuration"),Jg=s(r=>tn(["year","month","day","hour","minute","second","nanosecond","toString"],r),"isLocalDateTime"),eS=s(r=>tn(["hour","minute","second","nanosecond","toString"],r),"isLocalTime"),tS=s(r=>tn(["hour","minute","second","nanosecond","timeZoneOffsetSeconds","toString"],r),"isTime"),tn=s((r,t)=>{let e=Object.keys(t);return e.length===r.length&&gu.intersection(r,e).length===r.length},"isTemporalField"),l6=s(r=>{let t="";return/^neo4j(\+s|s|)(\+ssc|ssc|):\/\//i.test(r.host)?t=r.host:t=`bolt://${r.host}`,r.port&&(t=`${t}:${r.port}`),t},"getConnectionURI");rS.exports={checkConnection:u6,connect:z8,close:Y8,getLabels:K8,getRelationshipData:e6,getSchema:G8,getDatabaseName:Q8,getNodes:J8,getNodesCount:t6,getCountRelationshipsData:r6,getIndexes:n6,getConstraints:i6,supportsMultiDb:$8,getDbVersion:s6,setDependencies:V8,setTimeOut:W8,isTemporalTypeField:a6,getTemporalFieldSchema:c6,execute:se}});var iS=h((R$,f6)=>{f6.exports={name:"Neo4j",version:"0.2.1",author:"hackolade",engines:{hackolade:"6.8.5",hackoladePlugin:"1.0.0"},contributes:{target:{applicationTarget:"NEO4J",title:"Neo4j",versions:["3.x","4.0-4.2","4.3","4.4","5.x"]},features:{jaySchemaHasRequiredPatternField:!1,nestedCollections:{isVirtual:!0,hasMultipleParents:!0},graphDB:!0,relationships:{connectOnEntityLevel:!0,hasData:!0},enableForwardEngineering:{jsonDocument:!0,jsonSchema:!0,excel:!0,plugin:!0},enableReverseEngineering:{jsonDocument:!0,jsonSchema:!0,ddl:!0,xsd:!0,excel:!0,plugin:!0},FEScriptCommentsSupported:!0}},description:"Hackolade plugin for Neo4j",disabled:!1,dependencies:{lodash:"4.17.21","neo4j-driver":"4.4.10"},"lint-staged":{"*.{js,json}":"prettier --write"},"simple-git-hooks":{"pre-commit":"npx lint-staged","pre-push":"npx eslint ."},scripts:{lint:"eslint . --max-warnings=0",package:"node esbuild.package.js",postinstall:"npx patch-package"},devDependencies:{"@hackolade/hck-esbuild-plugins-pack":"0.0.1","@typescript-eslint/eslint-plugin":"7.11.0","@typescript-eslint/parser":"7.11.0",esbuild:"0.20.2","esbuild-plugin-clean":"1.0.1",eslint:"8.57.0","eslint-config-prettier":"9.1.0","eslint-formatter-teamcity":"^1.0.0","eslint-plugin-import":"^2.26.0","eslint-plugin-prettier":"5.1.3","eslint-plugin-unused-imports":"3.2.0","lint-staged":"14.0.1",prettier:"3.2.5","simple-git-hooks":"2.11.1"}}});var sS=h((A$,oS)=>{"use strict";var ft=require("os"),h6=require("net"),p6=iS(),_6=s((r,t,e=5e3)=>new Promise((n,i)=>{if(r.startsWith("neo4j"))return n();let o=setTimeout(()=>{u.end(),i(new Error("Connection takes more than 5000 ms"))},e),u=h6.createConnection(t||7687,r,()=>{u.end(),clearTimeout(o),n()});u.on("error",a=>{clearTimeout(o),i(a)}),n()}),"checkConnection"),d6=s(()=>p6.version,"getPluginVersion"),v6=s(r=>`Date: ${new Date}
Application version: ${r}
Plugin version: ${d6()}

System information:
 Hostname:  ${ft.hostname()}
 Platform:  ${ft.platform()} ${ft.arch()}
 Release:   ${ft.release()}
 Uptime:    ${m6(ft.uptime())}
 Total RAM: ${(ft.totalmem()/1073741824).toFixed(2)} GB
 CPU Model: ${ft.cpus()[0].model}
 CPU Clock: ${b6(ft.cpus())} MHZ
 CPU Cores: ${ft.cpus().length} cores

`,"getSystemInfo"),b6=s(r=>r.reduce((t,e)=>Math.max(t,e.speed),0),"maxClock"),y6=s(r=>r<10?"0"+r:r,"prefixZero"),m6=s(r=>Math.floor(r/3600)+":"+y6(parseInt((r/3600-Math.floor(r/3600))*60)),"toTime"),O6={getSystemInfo:v6,checkConnection:_6};oS.exports=O6});var{dependencies:Ph,setDependencies:g6}=Ih(),Y=nS(),Su="../snippets/",lS=sS(),Tu,Pu,uS={"Cartesian 3D":require(Su+"cartesian-3d.json"),Cartesian:require(Su+"cartesian.json"),"WGS-84-3D":require(Su+"point-wgs-84-3d.json"),"WGS-84":require(Su+"point-wgs-84.json")};module.exports={connect:function(r,t,e,n){let i=n.require("@hackolade/ssh-service");Eu(n),Y.connect(r,aS(t),i).then(()=>{t.log("info","Successfully connected to the database instance","Connection"),e()},o=>{t.log("error",Ct(o),"Connection error"),setTimeout(()=>{e({...Ct(o),type:"simpleError"})},1e3)})},disconnect:function(r,t,e){let n=e.require("@hackolade/ssh-service");Y.close(n),t()},testConnection:function(r,t,e,n){cS("Test connection",r,t),Eu(n),this.connect(r,t,i=>{this.disconnect(r,()=>{},n),e(i)},n)},getDatabases:function(r,t,e){e()},getDocumentKinds:function(r,t,e){e()},getDbCollectionsNames:async function(r,t,e,n){cS("Retrieving labels information",r,t);try{let i=n.require("@hackolade/ssh-service");Eu(n),Y.setTimeOut(r),await Y.connect(r,aS(t),i),t.log("info","Successfully connected to the database instance","Connection");let o=await Y.supportsMultiDb(),u=await Y.getDatabaseName("graph.db",o);t.log("info","Name of database successfully retrieved","Retrieving labels information");let a=await Promise.all(u.map(async l=>({dbName:l,dbCollections:await Y.getLabels(l,o)})));t.log("info","Labels successfully retrieved","Retrieving labels information"),t.log("info","Information about labels successfully retrieved","Retrieving labels information"),e(null,a)}catch(i){t.log("error",{message:i.step||"Process of retrieving labels was interrupted by error",error:Ct(i)},"Retrieving labels information");let o={...Ct(i),type:!i.type&&i.step==="Connection Error"?"simpleError":null,message:i.message||"Process of retrieving labels was interrupted by error"};setTimeout(()=>{e(o||"error")},1e3)}},getDbCollectionsData:async function(r,t,e,n){try{this.getDbCollectionsDataWrapped(r,t,e,n)}catch(i){t.log("error",Ct(i),"RE Get Collections Data"),e(i)}},getDbCollectionsDataWrapped:async function(r,t,e,n){Eu(n),Y.setTimeOut(r),t.log("info",r,"Retrieving schema for chosen labels",r.hiddenKeys);let i=r.collectionData.collections,o=r.collectionData.dataBaseNames,u=r.fieldInference,a=r.includeEmptyCollection,l=r.recordSamplingSettings,c={labels:[],relationships:[]};t.progress=t.progress||(()=>{}),t.progress({message:"Start Reverse Engineering Neo4j",containerName:"",entityName:""}),t.log("info","","Start Reverse Engineering Neo4j");let f=await Y.supportsMultiDb(),p={dbVersion:await Y.getDbVersion()};Pu.map(o,(_,m)=>{let g=i[_],T={};t.progress({message:"Start retrieving indexes",containerName:_,entityName:""}),t.log("info",_,"Start retrieving indexes"),Y.getIndexes(_,f,p.dbVersion).then(P=>{T.indexes=p.dbVersion==="3.x"?P6(P):C6(P);let S=P&&P.length||0;return t.progress({message:"Indexes retrieved successfully. Found "+S+" index(es)",containerName:_,entityName:""}),t.progress({message:"Start retrieving constraints",containerName:_,entityName:""}),t.log("info",_,"Start retrieving constraints"),Y.getConstraints(_,f,p.dbVersion)}).then(P=>{T.constraints=I6(P,p.dbVersion);let S=P&&P.length||0;return t.progress({message:"Constraints retrieved successfully "+S+" constraint(s)",containerName:_,entityName:""}),t.log("info",`${S} constraint(s)`,"Constraints retrieved successfully "),T}).then(P=>E6(_,g,f,{recordSamplingSettings:l,fieldInference:u,includeEmptyCollection:a,indexes:P.indexes,constraints:P.constraints},(S,q)=>t.progress({message:q,containerName:_,entityName:S}))).then(P=>(c.labels.push(P),g=P.reduce((S,q)=>S.concat([q.collectionName]),[]),t.progress({message:"Start retrieving schema...",containerName:_,entityName:""}),t.log("info",_,"Start retrieving schema"),Y.getSchema(_,g,f))).then(P=>(t.progress({message:"Schema retrieved successfully",containerName:_,entityName:""}),t.log("info",_,"Schema retrieved successfully"),P.filter(S=>g.indexOf(S.start)!==-1&&g.indexOf(S.end)!==-1))).then(P=>(t.progress({message:"Start retrieving relationships...",containerName:_,entityName:""}),t.log("info",_,"Start retrieving relationships"),w6(P,_,p.dbVersion,l,u,T,f))).then(P=>{t.progress({message:"Relationships retrieved successfully",containerName:_,entityName:""}),t.log("info",_,"Relationships retrieved successfully"),c.relationships.push(P),m(null)}).catch(P=>{t.log("error",Ct(P),"Error retrieving schema"),m(Ct(P))})},_=>{t.progress({message:"Reverse-engineering completed",containerName:"",entityName:""}),t.log("info","","Reverse-engineering completed"),setTimeout(()=>{e(_,c.labels,p,[].concat.apply([],c.relationships))},1e3)})}};var Eu=s(r=>{g6(r),Tu=Ph.lodash,Pu=Ph.async,Y.setDependencies(Ph)},"initDependencies"),fS=s((r,t)=>{if(t.active==="absolute")return Number(t.absolute.value);let e=Math.ceil(r*t.relative.value/100);return Math.min(e,t.maxValue)},"getSampleDocSize"),S6=s(r=>Array.isArray(r)?r.reduce((t,e)=>t&&Tu.isEmpty(e),!0):!0,"isEmptyLabel"),hS=s(r=>r.reduce((t,e)=>Tu.merge(t,e),{}),"getTemplate"),aS=s(r=>(t,e)=>lS.checkConnection(t,e).then(()=>{r.log("info","Socket "+t+":"+e+" is available.","Host availability")},n=>{let i="Socket "+t+":"+e+" is not available.";throw r.log("error",Ct(n),i,"Host availability"),new Error(i)}),"checkConnection"),cS=s((r,t,e)=>{e.clear(),e.log("info",lS.getSystemInfo(t.appVersion),r),e.log("info",t,"connectionInfo",t.hiddenKeys)},"logInfo"),E6=s((r,t,e,n,i)=>new Promise((o,u)=>{let a=[];Pu.map(t,(l,c)=>{i(l,"Getting data..."),Y.getNodesCount(l,r,e).then(f=>{let p=fS(f,n.recordSamplingSettings);return i(l,"Found "+p+" nodes"),Y.getNodes(l,p,r,e)}).then(f=>{i(l,"Data retrieved successfully");let p=T6(r,l,f,n.includeEmptyCollection,n.fieldInference,n.indexes[l],mS(l,"node",n.constraints));p&&a.push(p),c(null)}).catch(c)},l=>{l?u(l):o(a)})}),"getNodesData"),w6=s((r,t,e,n,i,o,u)=>{let{constraints:a,indexes:l}=o;return new Promise((c,f)=>{Pu.map(r,(p,_)=>{Y.getCountRelationshipsData(p.start,p.relationship,p.end,t,u).then(m=>{let g=fS(m,n);return Y.getRelationshipData(p.start,p.relationship,p.end,g,t,u)}).then(m=>{let g=pS(m),T=yS(mS(p.relationship,"relationship",a)||[]),P=_S(g,T),S=g.map(OS),q={dbName:t,parentCollection:p.start,relationshipName:p.relationship,childCollection:p.end,validation:{jsonSchema:P},documents:S};i.active==="field"&&(q.documentTemplate=hS(S)),["4.3","4.4","5.x"].includes(e)&&(q.relationshipInfo={index:l[p.relationship]||[]}),_(null,q)}).catch(_)},(p,_)=>{p?f(p):c(_)})})},"getRelationshipData"),T6=s((r,t,e,n,i,o,u)=>{let a=pS(e),l=yS(u),c=_S(a,l),f=a.map(OS),p={dbName:r,collectionName:t,documents:f,indexes:[],bucketIndexes:[],views:[],validation:{jsonSchema:c},emptyBucket:!1,bucketInfo:{},entityLevel:{constraint:l.NODE_KEY,index:o}};return i.active==="field"&&(p.documentTemplate=hS(f)),n||!S6(f)?p:null},"getLabelPackage"),P6=s(r=>{let t=/INDEX\s+ON\s+\:(.*)\((.*)\)/i,e={};return r.forEach((n,i)=>{if(n.properties)n.properties=n.properties;else if(t.test(n.description)){let o=n.description.match(t);n.label=o[1],n.properties=o[2].split(",").map(u=>u.trim())}else n.properties=[];e[n.label]||(e[n.label]=[]),e[n.label].push({name:`${n.label}.[${n.properties.join(",")}]`,key:n.properties,state:n.state,type:n.type,provider:JSON.stringify(n.provider,null,4)})}),e},"prepareIndexes3x"),C6=s(r=>{let t={};return r.filter(e=>e.labelsOrTypes).forEach((e,n)=>{e.properties=e.properties||[];let i={name:e.name,key:e.properties,state:e.state,type:e.type,uniqueness:e.uniqueness==="UNIQUE",provider:e.provider||e.indexProvider};e.labelsOrTypes.forEach((o,u)=>{t[o]?t[o].push(i):t[o]=[i]})}),t},"prepareIndexes4x"),I6=s((r,t)=>t==="5.x"?R6(r):A6(r),"prepareConstraints"),R6=s(r=>{let t=s(e=>{if(e.type==="UNIQUENESS")return{name:e.name,type:"UNIQUE",key:e.properties};if(e.type==="NODE_KEY")return{name:e.name,type:"NODE_KEY",compositeNodeKey:e.properties};if(["NODE_PROPERTY_EXISTENCE","RELATIONSHIP_PROPERTY_EXISTENCE"].includes(e.type))return{name:e.name,type:"EXISTS",key:e.properties}},"mapConstraint");return r.reduce((e,n)=>(n.labelsOrTypes&&n.labelsOrTypes.forEach(i=>{let o=n.entityType==="NODE"?"node":"relationship";e[o][i]||(e[o][i]=[]),e[o][i].push(t(n))}),e),{node:{},relationship:{}})},"prepareConstraints5x"),A6=s(r=>{let t=/^constraint\s+on\s+\([\s\S]+\:([\S\s]+)\s*\)\s+assert\s+[\s\S]+\.([\s\S]+)\s*\)\s+IS\s+UNIQUE/i,e=/^constraint\s+on\s+\([\s\S]+\:\s*([\S\s]+)\s*\)\s+assert\s+(?:\(\s*([\s\S]+)\s*\)|[\s\S]+\.\s*([\S\s]+)\s*)\s+IS\s+NODE\s+KEY/i,n=/^constraint\s+on\s+\([\s\S]+\:([\s\S]+)\s*\)\s+assert\s+exists\([\s\S]+\.([\s\S]+)\s*\)/i,i={nodeAndRelationship:{}},o=s((u,a,l,c,f,p="key")=>{let _=l.trim();u.nodeAndRelationship[_]||(u.nodeAndRelationship[_]=[]),u.nodeAndRelationship[_].push({[p]:c,name:a,type:f})},"addToResult");return r.forEach(u=>{let a=u.description.trim();if(t.test(a)){let l=a.match(t),c=l[1],f=l[2];o(i,`Unique ${c}.${f}`,c,[f],"UNIQUE")}else if(n.test(a)){let l=a.match(n),c=l[1],f=l[2];o(i,`Required ${c}.${f}`,c,[f],"EXISTS")}else if(e.test(a)){let l=a.match(e),c=l[1],f=[];l[2]?f=l[2].split(",").map(p=>{let _=p.trim().match(/[\s\S]+\.([\s\S]+)/);return _?_[1].trim():p}):l[3]&&(f=[l[3].trim()]),f.length&&o(i,`${c}`,c,f,"NODE_KEY","compositeNodeKey")}}),i},"prepareConstraints4x"),Ct=s(r=>({message:r.message,stack:r.stack}),"prepareError"),pS=s(r=>{let t=s(i=>{try{return JSON.parse(i)}catch{return i}},"deserializeObject"),e=s(i=>typeof i=="string"?t(i):Array.isArray(i)?i.map(e):i,"handleField"),n=s(i=>{let o={};for(let u in i)o[u]=e(i[u]);return o},"deserializator");return Array.isArray(r)?r.map(i=>typeof i=="object"?n(i):{}):[]},"deserializeData"),_S=s((r,t)=>{let e=t.EXISTS.reduce((n,i)=>(n.required=n.required.concat(i.key),n),{required:[],properties:{}});return e=t.UNIQUE.reduce((n,i)=>i.key.reduce((o,u)=>(o.properties[u]||(o.properties[u]={}),o.properties[u].unique=!0,o),n),e),r.forEach(n=>dS(n,e)),e},"createSchemaByConstraints"),dS=s((r,t)=>{let e=Function.prototype.call.bind(Object.prototype.hasOwnProperty);return Object.keys(r).forEach(n=>{var o;let i=r[n];if(Array.isArray(i)){let u=vS(i);u.length&&(e(t.properties||{},n)||(t.properties[n]={type:"list",items:u}))}else Object(i)===i?(e(t.properties||{},n)||(i.srid?t.properties[n]=bS(i):Y.isTemporalTypeField(i)?(t.properties[n]=Y.getTemporalFieldSchema(i),typeof((o=r[n])==null?void 0:o.toString)=="function"&&(r[n]=r[n].toString())):t.properties[n]=dS(i,{properties:{}})),i.srid&&delete r[n]):typeof i=="number"&&(e(t.properties||{},n)||(t.properties[n]={type:"number",mode:i%1===0?"integer":"float",sample:i}))}),t},"setDocumentInSchema"),vS=s(r=>{let t=[],e=0;return[...r].forEach((n,i)=>{Tu.isPlainObject(n)&&n.srid?(t.push(bS(n)),r.splice(i-e,1),e++):Array.isArray(n)?t.push({type:"list",items:vS(n)}):typeof n=="number"&&(t.push({type:"number",mode:n%1===0?"integer":"float",sample:n}),r.splice(i-e,1),e++)}),t},"getSchemaArrayItems"),bS=s(r=>{switch(Number(r.srid)){case 4326:return{type:"spatial",mode:"point",subType:"WGS-84",properties:wu("WGS-84")};case 4979:return{type:"spatial",mode:"point",subType:"WGS-84-3D",properties:wu("WGS-84-3D")};case 7203:return{type:"spatial",mode:"point",subType:"Cartesian",properties:wu("Cartesian")};case 9157:return{type:"spatial",mode:"point",subType:"Cartesian 3D",properties:wu("Cartesian 3D")}}},"getSchemaSpatialType"),wu=s(r=>{let t=uS[r]||uS["WGS-84"],e={};return t.properties.forEach(n=>{e[n.name]=Object.assign({},n),delete e[n.name].name}),e},"getSnippetPropertiesByName"),yS=s((r=[])=>r.reduce((t,e)=>{e=Object.assign({},e);let n=e.type;return delete e.type,t[n].push(e),t},{UNIQUE:[],EXISTS:[],NODE_KEY:[]}),"separateConstraintsByType"),mS=s((r,t,e)=>{var n;return e.nodeAndRelationship?e.nodeAndRelationship[r]:(n=e[t])==null?void 0:n[r]},"getConstraintsForEntity"),OS=s(r=>{try{return JSON.parse(JSON.stringify(r,(t,e)=>typeof e=="object"&&Y.isTemporalTypeField(e)?e.toString():e))}catch{return r}},"removeFunctions");
