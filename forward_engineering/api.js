"use strict";var aS=Object.defineProperty;var s=(r,t)=>aS(r,"name",{value:t,configurable:!0});var h=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var Th=h((r6,wh)=>{"use strict";var Eh={},cS=s(r=>{Eh.lodash=r.require("lodash")},"setDependencies");wh.exports={setDependencies:cS,dependencies:Eh}});var Rt=h((i6,on)=>{function fS(r){return r&&r.__esModule?r:{default:r}}s(fS,"_interopRequireDefault");on.exports=fS,on.exports.__esModule=!0,on.exports.default=on.exports});var pr=h((s6,sn)=>{function lS(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}s(lS,"_classCallCheck");sn.exports=lS,sn.exports.__esModule=!0,sn.exports.default=sn.exports});var jo=h((a6,Ye)=>{function wu(r){"@babel/helpers - typeof";return Ye.exports=wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye.exports.__esModule=!0,Ye.exports.default=Ye.exports,wu(r)}s(wu,"_typeof");Ye.exports=wu,Ye.exports.__esModule=!0,Ye.exports.default=Ye.exports});var Ch=h((f6,un)=>{var Ph=jo().default;function hS(r,t){if(Ph(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(Ph(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}s(hS,"toPrimitive");un.exports=hS,un.exports.__esModule=!0,un.exports.default=un.exports});var Ih=h((h6,an)=>{var pS=jo().default,_S=Ch();function dS(r){var t=_S(r,"string");return pS(t)=="symbol"?t:t+""}s(dS,"toPropertyKey");an.exports=dS,an.exports.__esModule=!0,an.exports.default=an.exports});var _r=h((_6,cn)=>{var vS=Ih();function Rh(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,vS(n.key),n)}}s(Rh,"_defineProperties");function bS(r,t,e){return t&&Rh(r.prototype,t),e&&Rh(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}s(bS,"_createClass");cn.exports=bS,cn.exports.__esModule=!0,cn.exports.default=cn.exports});var Ah=h((v6,Ze)=>{function Tu(r,t){return Ze.exports=Tu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports,Tu(r,t)}s(Tu,"_setPrototypeOf");Ze.exports=Tu,Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports});var jh=h((y6,fn)=>{var yS=Ah();function mS(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&yS(r,t)}s(mS,"_inherits");fn.exports=mS,fn.exports.__esModule=!0,fn.exports.default=fn.exports});var Nh=h((O6,ln)=>{function OS(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}s(OS,"_assertThisInitialized");ln.exports=OS,ln.exports.__esModule=!0,ln.exports.default=ln.exports});var qh=h((S6,hn)=>{var gS=jo().default,SS=Nh();function ES(r,t){if(t&&(gS(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SS(r)}s(ES,"_possibleConstructorReturn");hn.exports=ES,hn.exports.__esModule=!0,hn.exports.default=hn.exports});var xh=h((w6,Ge)=>{function Pu(r){return Ge.exports=Pu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ge.exports.__esModule=!0,Ge.exports.default=Ge.exports,Pu(r)}s(Pu,"_getPrototypeOf");Ge.exports=Pu,Ge.exports.__esModule=!0,Ge.exports.default=Ge.exports});var fe=h(ce=>{"use strict";var wS=ce&&ce.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ce,"__esModule",{value:!0});ce.PROTOCOL_ERROR=ce.SESSION_EXPIRED=ce.SERVICE_UNAVAILABLE=ce.Neo4jError=ce.newError=void 0;var TS="ServiceUnavailable";ce.SERVICE_UNAVAILABLE=TS;var PS="SessionExpired";ce.SESSION_EXPIRED=PS;var CS="ProtocolError";ce.PROTOCOL_ERROR=CS;var IS="N/A",Dh=function(r){wS(t,r);function t(e,n){var i=r.call(this,e)||this;return i.constructor=t,i.__proto__=t.prototype,i.code=n,i.name="Neo4jError",i}return s(t,"Neo4jError"),t}(Error);ce.Neo4jError=Dh;function RS(r,t){return new Dh(r,t??IS)}s(RS,"newError");ce.newError=RS});var jt=h(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.toString=ve.toNumber=ve.inSafeRange=ve.isInt=ve.int=void 0;var pn=fe(),Mh=new Map,dt=function(){function r(t,e){this.low=t||0,this.high=e||0}return s(r,"Integer"),r.prototype.inSafeRange=function(){return this.greaterThanOrEqual(r.MIN_SAFE_VALUE)&&this.lessThanOrEqual(r.MAX_SAFE_VALUE)},r.prototype.toInt=function(){return this.low},r.prototype.toNumber=function(){return this.high*At+(this.low>>>0)},r.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(At)+BigInt(this.low>>>0);var t=this.negate();return BigInt(-1)*(BigInt(t.high>>>0)*BigInt(At)+BigInt(t.low>>>0))},r.prototype.toNumberOrInfinity=function(){return this.lessThan(r.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(r.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},r.prototype.toString=function(t){if(t=t||10,t<2||t>36)throw RangeError("radix out of range: "+t);if(this.isZero())return"0";var e;if(this.isNegative())if(this.equals(r.MIN_VALUE)){var n=r.fromNumber(t),i=this.div(n);return e=i.multiply(n).subtract(this),i.toString(t)+e.toInt().toString(t)}else return"-"+this.negate().toString(t);var o=r.fromNumber(Math.pow(t,6));e=this;for(var u="";;){var a=e.div(o),f=e.subtract(a.multiply(o)).toInt()>>>0,c=f.toString(t);if(e=a,e.isZero())return c+u;for(;c.length<6;)c="0"+c;u=""+c+u}},r.prototype.getHighBits=function(){return this.high},r.prototype.getLowBits=function(){return this.low},r.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(r.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var t=this.high!==0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!==0?e+33:e+1},r.prototype.isZero=function(){return this.high===0&&this.low===0},r.prototype.isNegative=function(){return this.high<0},r.prototype.isPositive=function(){return this.high>=0},r.prototype.isOdd=function(){return(this.low&1)===1},r.prototype.isEven=function(){return(this.low&1)===0},r.prototype.equals=function(t){var e=r.fromValue(t);return this.high===e.high&&this.low===e.low},r.prototype.notEquals=function(t){return!this.equals(t)},r.prototype.lessThan=function(t){return this.compare(t)<0},r.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},r.prototype.greaterThan=function(t){return this.compare(t)>0},r.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},r.prototype.compare=function(t){var e=r.fromValue(t);if(this.equals(e))return 0;var n=this.isNegative(),i=e.isNegative();return n&&!i?-1:!n&&i?1:this.subtract(e).isNegative()?-1:1},r.prototype.negate=function(){return this.equals(r.MIN_VALUE)?r.MIN_VALUE:this.not().add(r.ONE)},r.prototype.add=function(t){var e=r.fromValue(t),n=this.high>>>16,i=this.high&65535,o=this.low>>>16,u=this.low&65535,a=e.high>>>16,f=e.high&65535,c=e.low>>>16,l=e.low&65535,p=0,_=0,m=0,S=0;return S+=u+l,m+=S>>>16,S&=65535,m+=o+c,_+=m>>>16,m&=65535,_+=i+f,p+=_>>>16,_&=65535,p+=n+a,p&=65535,r.fromBits(m<<16|S,p<<16|_)},r.prototype.subtract=function(t){var e=r.fromValue(t);return this.add(e.negate())},r.prototype.multiply=function(t){if(this.isZero())return r.ZERO;var e=r.fromValue(t);if(e.isZero())return r.ZERO;if(this.equals(r.MIN_VALUE))return e.isOdd()?r.MIN_VALUE:r.ZERO;if(e.equals(r.MIN_VALUE))return this.isOdd()?r.MIN_VALUE:r.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(Lh)&&e.lessThan(Lh))return r.fromNumber(this.toNumber()*e.toNumber());var n=this.high>>>16,i=this.high&65535,o=this.low>>>16,u=this.low&65535,a=e.high>>>16,f=e.high&65535,c=e.low>>>16,l=e.low&65535,p=0,_=0,m=0,S=0;return S+=u*l,m+=S>>>16,S&=65535,m+=o*l,_+=m>>>16,m&=65535,m+=u*c,_+=m>>>16,m&=65535,_+=i*l,p+=_>>>16,_&=65535,_+=o*c,p+=_>>>16,_&=65535,_+=u*f,p+=_>>>16,_&=65535,p+=n*l+i*c+o*f+u*a,p&=65535,r.fromBits(m<<16|S,p<<16|_)},r.prototype.div=function(t){var e=r.fromValue(t);if(e.isZero())throw(0,pn.newError)("division by zero");if(this.isZero())return r.ZERO;var n,i,o;if(this.equals(r.MIN_VALUE)){if(e.equals(r.ONE)||e.equals(r.NEG_ONE))return r.MIN_VALUE;if(e.equals(r.MIN_VALUE))return r.ONE;var u=this.shiftRight(1);return n=u.div(e).shiftLeft(1),n.equals(r.ZERO)?e.isNegative()?r.ONE:r.NEG_ONE:(i=this.subtract(e.multiply(n)),o=n.add(i.div(e)),o)}else if(e.equals(r.MIN_VALUE))return r.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(o=r.ZERO,i=this;i.greaterThanOrEqual(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),f=a<=48?1:Math.pow(2,a-48),c=r.fromNumber(n),l=c.multiply(e);l.isNegative()||l.greaterThan(i);)n-=f,c=r.fromNumber(n),l=c.multiply(e);c.isZero()&&(c=r.ONE),o=o.add(c),i=i.subtract(l)}return o},r.prototype.modulo=function(t){var e=r.fromValue(t);return this.subtract(this.div(e).multiply(e))},r.prototype.not=function(){return r.fromBits(~this.low,~this.high)},r.prototype.and=function(t){var e=r.fromValue(t);return r.fromBits(this.low&e.low,this.high&e.high)},r.prototype.or=function(t){var e=r.fromValue(t);return r.fromBits(this.low|e.low,this.high|e.high)},r.prototype.xor=function(t){var e=r.fromValue(t);return r.fromBits(this.low^e.low,this.high^e.high)},r.prototype.shiftLeft=function(t){var e=r.toNumber(t);return(e&=63)===0?r.ZERO:e<32?r.fromBits(this.low<<e,this.high<<e|this.low>>>32-e):r.fromBits(0,this.low<<e-32)},r.prototype.shiftRight=function(t){var e=r.toNumber(t);return(e&=63)===0?r.ZERO:t<32?r.fromBits(this.low>>>e|this.high<<32-e,this.high>>e):r.fromBits(this.high>>e-32,this.high>=0?0:-1)},r.isInteger=function(t){return(t&&t.__isInteger__)===!0},r.fromInt=function(t){var e,n;return t=t|0,t>=-128&&t<128&&(n=Mh.get(t),n)?n:(e=new r(t,t<0?-1:0),t>=-128&&t<128&&Mh.set(t,e),e)},r.fromBits=function(t,e){return new r(t,e)},r.fromNumber=function(t){return isNaN(t)||!isFinite(t)?r.ZERO:t<=-Uh?r.MIN_VALUE:t+1>=Uh?r.MAX_VALUE:t<0?r.fromNumber(-t).negate():new r(t%At|0,t/At|0)},r.fromString=function(t,e,n){var i=n===void 0?{}:n,o=i.strictStringValidation;if(t.length===0)throw(0,pn.newError)("number format error: empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return r.ZERO;if(e=e||10,e<2||e>36)throw(0,pn.newError)("radix out of range: "+e);var u;if((u=t.indexOf("-"))>0)throw(0,pn.newError)('number format error: interior "-" character: '+t);if(u===0)return r.fromString(t.substring(1),e).negate();for(var a=r.fromNumber(Math.pow(e,8)),f=r.ZERO,c=0;c<t.length;c+=8){var l=Math.min(8,t.length-c),p=t.substring(c,c+l),_=parseInt(p,e);if(o===!0&&!jS(p,_,e))throw(0,pn.newError)('number format error: "'+p+'" is NaN in radix '+e+": "+t);if(l<8){var m=r.fromNumber(Math.pow(e,l));f=f.multiply(m).add(r.fromNumber(_))}else f=f.multiply(a),f=f.add(r.fromNumber(_))}return f},r.fromValue=function(t,e){return e===void 0&&(e={}),t instanceof r?t:typeof t=="number"?r.fromNumber(t):typeof t=="string"?r.fromString(t,void 0,e):typeof t=="bigint"?r.fromString(t.toString()):new r(t.low,t.high)},r.toNumber=function(t){switch(typeof t){case"number":return t;case"bigint":return Number(t);default:return r.fromValue(t).toNumber()}},r.toString=function(t,e){return r.fromValue(t).toString(e)},r.inSafeRange=function(t){return r.fromValue(t).inSafeRange()},r.ZERO=r.fromInt(0),r.ONE=r.fromInt(1),r.NEG_ONE=r.fromInt(-1),r.MAX_VALUE=r.fromBits(-1,2147483647),r.MIN_VALUE=r.fromBits(0,-2147483648),r.MIN_SAFE_VALUE=r.fromBits(1,-2097152),r.MAX_SAFE_VALUE=r.fromBits(-1,2097151),r.__isInteger__=!0,r}();function AS(r,t,e){var n=r.toString(t),i=Math.max(e-n.length,0),o="0".repeat(i);return""+o+n}s(AS,"_convertNumberToString");function jS(r,t,e){return!Number.isNaN(r)&&!Number.isNaN(t)&&AS(t,e,r.length)===r.toLowerCase()}s(jS,"_isValidNumberFromString");Object.defineProperty(dt.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var kh=65536,NS=1<<24,At=kh*kh,qS=At*At,Uh=qS/2,Lh=dt.fromInt(NS),xS=dt.fromValue;ve.int=xS;var DS=dt.isInteger;ve.isInt=DS;var MS=dt.inSafeRange;ve.inSafeRange=MS;var kS=dt.toNumber;ve.toNumber=kS;var US=dt.toString;ve.toString=US;ve.default=dt});var Cu=h(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.getBrokenObjectReason=vt.isBrokenObject=vt.createBrokenObject=void 0;var Fh="__isBrokenObject__",Bh="__reason__";function LS(r,t){t===void 0&&(t={});var e=s(function(){throw r},"fail");return new Proxy(t,{get:function(n,i){if(i===Fh)return!0;if(i===Bh)return r;if(i==="toJSON")return;e()},set:e,apply:e,construct:e,defineProperty:e,deleteProperty:e,getOwnPropertyDescriptor:e,getPrototypeOf:e,has:e,isExtensible:e,ownKeys:e,preventExtensions:e,setPrototypeOf:e})}s(LS,"createBrokenObject");vt.createBrokenObject=LS;function FS(r){return r!==null&&typeof r=="object"&&r[Fh]===!0}s(FS,"isBrokenObject");vt.isBrokenObject=FS;function BS(r){return r[Bh]}s(BS,"getBrokenObjectReason");vt.getBrokenObjectReason=BS});var qo=h(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.stringify=void 0;var Vh=Cu();function VS(r){return JSON.stringify(r,function(t,e){return(0,Vh.isBrokenObject)(e)?{__isBrokenObject__:!0,__reason__:(0,Vh.getBrokenObjectReason)(e)}:typeof e=="bigint"?e+"n":e})}s(VS,"stringify");No.stringify=VS});var be=h(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.ENCRYPTION_OFF=k.ENCRYPTION_ON=k.validateQueryAndParameters=k.assertValidDate=k.assertNumberOrInteger=k.assertNumber=k.assertString=k.assertObject=k.isString=k.isObject=k.isEmptyObjectOrNull=void 0;var WS=jt(),dr=qo(),HS="ENCRYPTION_ON";k.ENCRYPTION_ON=HS;var zS="ENCRYPTION_OFF";k.ENCRYPTION_OFF=zS;function YS(r){if(r===null)return!0;if(!xo(r))return!1;for(var t in r)if(Object.prototype.hasOwnProperty.bind(r,t))return!1;return!0}s(YS,"isEmptyObjectOrNull");k.isEmptyObjectOrNull=YS;function xo(r){return typeof r=="object"&&!Array.isArray(r)&&r!==null}s(xo,"isObject");k.isObject=xo;function ZS(r,t,e){var n="",i=t||{},o=(e==null?void 0:e.skipAsserts)||!1;return typeof r=="string"?n=r:r instanceof String?n=r.toString():typeof r=="object"&&r.text&&(n=r.text,i=r.parameters||{}),o||(XS(n),JS(i)),{validatedQuery:n,params:i}}s(ZS,"validateQueryAndParameters");k.validateQueryAndParameters=ZS;function GS(r,t){if(!xo(r))throw new TypeError(t+" expected to be an object but was: "+(0,dr.stringify)(r));return r}s(GS,"assertObject");k.assertObject=GS;function Wh(r,t){if(!Hh(r))throw new TypeError(t+" expected to be string but was: "+(0,dr.stringify)(r));return r}s(Wh,"assertString");k.assertString=Wh;function $S(r,t){if(typeof r!="number")throw new TypeError(t+" expected to be a number but was: "+(0,dr.stringify)(r));return r}s($S,"assertNumber");k.assertNumber=$S;function KS(r,t){if(typeof r!="number"&&typeof r!="bigint"&&!(0,WS.isInt)(r))throw new TypeError(t+" expected to be either a number or an Integer object but was: "+(0,dr.stringify)(r));return r}s(KS,"assertNumberOrInteger");k.assertNumberOrInteger=KS;function QS(r,t){if(Object.prototype.toString.call(r)!=="[object Date]")throw new TypeError(t+" expected to be a standard JavaScript Date but was: "+(0,dr.stringify)(r));if(Number.isNaN(r.getTime()))throw new TypeError(t+" expected to be valid JavaScript Date but its time was NaN: "+(0,dr.stringify)(r));return r}s(QS,"assertValidDate");k.assertValidDate=QS;function XS(r){if(Wh(r,"Cypher query"),r.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}s(XS,"assertCypherQuery");function JS(r){if(!xo(r)){var t=r.constructor?" "+r.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:"+t+" "+r)}}s(JS,"assertQueryParameters");function Hh(r){return Object.prototype.toString.call(r)==="[object String]"}s(Hh,"isString");k.isString=Hh});var Au=h(d=>{"use strict";var eE=d&&d.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),tE=d&&d.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),rE=d&&d.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&eE(t,r,e);return tE(t,r),t};Object.defineProperty(d,"__esModule",{value:!0});d.floorMod=d.floorDiv=d.assertValidZoneId=d.assertValidNanosecond=d.assertValidSecond=d.assertValidMinute=d.assertValidHour=d.assertValidDay=d.assertValidMonth=d.assertValidYear=d.timeZoneOffsetInSeconds=d.totalNanoseconds=d.newDate=d.toStandardDate=d.isoStringToStandardDate=d.dateToIsoString=d.timeZoneOffsetToIsoString=d.timeToIsoString=d.durationToIsoString=d.dateToEpochDay=d.localDateTimeToEpochSecond=d.localTimeToNanoOfDay=d.normalizeNanosecondsForDuration=d.normalizeSecondsForDuration=d.SECONDS_PER_DAY=d.DAYS_PER_400_YEAR_CYCLE=d.DAYS_0000_TO_1970=d.NANOS_PER_HOUR=d.NANOS_PER_MINUTE=d.NANOS_PER_MILLISECOND=d.NANOS_PER_SECOND=d.SECONDS_PER_HOUR=d.SECONDS_PER_MINUTE=d.MINUTES_PER_HOUR=d.NANOSECOND_OF_SECOND_RANGE=d.SECOND_OF_MINUTE_RANGE=d.MINUTE_OF_HOUR_RANGE=d.HOUR_OF_DAY_RANGE=d.DAY_OF_MONTH_RANGE=d.MONTH_OF_YEAR_RANGE=d.YEAR_RANGE=void 0;var q=rE(jt()),zh=fe(),nE=be(),Nt=function(){function r(t,e){this._minNumber=t,this._maxNumber=e,this._minInteger=(0,q.int)(t),this._maxInteger=(0,q.int)(e)}return s(r,"ValueRange"),r.prototype.contains=function(t){if((0,q.isInt)(t)&&t instanceof q.default)return t.greaterThanOrEqual(this._minInteger)&&t.lessThanOrEqual(this._maxInteger);if(typeof t=="bigint"){var e=(0,q.int)(t);return e.greaterThanOrEqual(this._minInteger)&&e.lessThanOrEqual(this._maxInteger)}else return t>=this._minNumber&&t<=this._maxNumber},r.prototype.toString=function(){return"["+this._minNumber+", "+this._maxNumber+"]"},r}();d.YEAR_RANGE=new Nt(-999999999,999999999);d.MONTH_OF_YEAR_RANGE=new Nt(1,12);d.DAY_OF_MONTH_RANGE=new Nt(1,31);d.HOUR_OF_DAY_RANGE=new Nt(0,23);d.MINUTE_OF_HOUR_RANGE=new Nt(0,59);d.SECOND_OF_MINUTE_RANGE=new Nt(0,59);d.NANOSECOND_OF_SECOND_RANGE=new Nt(0,999999999);d.MINUTES_PER_HOUR=60;d.SECONDS_PER_MINUTE=60;d.SECONDS_PER_HOUR=d.SECONDS_PER_MINUTE*d.MINUTES_PER_HOUR;d.NANOS_PER_SECOND=1e9;d.NANOS_PER_MILLISECOND=1e6;d.NANOS_PER_MINUTE=d.NANOS_PER_SECOND*d.SECONDS_PER_MINUTE;d.NANOS_PER_HOUR=d.NANOS_PER_MINUTE*d.MINUTES_PER_HOUR;d.DAYS_0000_TO_1970=719528;d.DAYS_PER_400_YEAR_CYCLE=146097;d.SECONDS_PER_DAY=86400;function iE(r,t){return(0,q.int)(r).add(Ru(t,d.NANOS_PER_SECOND))}s(iE,"normalizeSecondsForDuration");d.normalizeSecondsForDuration=iE;function oE(r){return Zh(r,d.NANOS_PER_SECOND)}s(oE,"normalizeNanosecondsForDuration");d.normalizeNanosecondsForDuration=oE;function sE(r,t,e,n){r=(0,q.int)(r),t=(0,q.int)(t),e=(0,q.int)(e),n=(0,q.int)(n);var i=r.multiply(d.NANOS_PER_HOUR);return i=i.add(t.multiply(d.NANOS_PER_MINUTE)),i=i.add(e.multiply(d.NANOS_PER_SECOND)),i.add(n)}s(sE,"localTimeToNanoOfDay");d.localTimeToNanoOfDay=sE;function uE(r,t,e,n,i,o,u){var a=Yh(r,t,e),f=TE(n,i,o);return a.multiply(d.SECONDS_PER_DAY).add(f)}s(uE,"localDateTimeToEpochSecond");d.localDateTimeToEpochSecond=uE;function Yh(r,t,e){r=(0,q.int)(r),t=(0,q.int)(t),e=(0,q.int)(e);var n=r.multiply(365);return r.greaterThanOrEqual(0)?n=n.add(r.add(3).div(4).subtract(r.add(99).div(100)).add(r.add(399).div(400))):n=n.subtract(r.div(-4).subtract(r.div(-100)).add(r.div(-400))),n=n.add(t.multiply(367).subtract(362).div(12)),n=n.add(e.subtract(1)),t.greaterThan(2)&&(n=n.subtract(1),PE(r)||(n=n.subtract(1))),n.subtract(d.DAYS_0000_TO_1970)}s(Yh,"dateToEpochDay");d.dateToEpochDay=Yh;function aE(r,t,e,n){var i=ye(r),o=ye(t),u=CE(e,n);return"P"+i+"M"+o+"DT"+u+"S"}s(aE,"durationToIsoString");d.durationToIsoString=aE;function cE(r,t,e,n){var i=ye(r,2),o=ye(t,2),u=ye(e,2),a=Iu(n);return i+":"+o+":"+u+a}s(cE,"timeToIsoString");d.timeToIsoString=cE;function fE(r){if(r=(0,q.int)(r),r.equals(0))return"Z";var t=r.isNegative();t&&(r=r.multiply(-1));var e=t?"-":"+",n=ye(r.div(d.SECONDS_PER_HOUR),2),i=ye(r.div(d.SECONDS_PER_MINUTE).modulo(d.MINUTES_PER_HOUR),2),o=r.modulo(d.SECONDS_PER_MINUTE),u=o.equals(0)?null:ye(o,2);return u?""+e+n+":"+i+":"+u:""+e+n+":"+i}s(fE,"timeZoneOffsetToIsoString");d.timeZoneOffsetToIsoString=fE;function lE(r,t,e){var n=IE(r),i=ye(t,2),o=ye(e,2);return n+"-"+i+"-"+o}s(lE,"dateToIsoString");d.dateToIsoString=lE;function hE(r){return new Date(r)}s(hE,"isoStringToStandardDate");d.isoStringToStandardDate=hE;function pE(r){return new Date(r)}s(pE,"toStandardDate");d.toStandardDate=pE;function _E(r){return new Date(r)}s(_E,"newDate");d.newDate=_E;function dE(r,t){t=t||0;var e=r.getMilliseconds()*d.NANOS_PER_MILLISECOND;return RE(t,e)}s(dE,"totalNanoseconds");d.totalNanoseconds=dE;function vE(r){var t=r.getSeconds()>=r.getUTCSeconds()?r.getSeconds()-r.getUTCSeconds():r.getSeconds()-r.getUTCSeconds()+60,e=r.getTimezoneOffset();return e===0?0+t:-1*e*d.SECONDS_PER_MINUTE+t}s(vE,"timeZoneOffsetInSeconds");d.timeZoneOffsetInSeconds=vE;function bE(r){return qt(r,d.YEAR_RANGE,"Year")}s(bE,"assertValidYear");d.assertValidYear=bE;function yE(r){return qt(r,d.MONTH_OF_YEAR_RANGE,"Month")}s(yE,"assertValidMonth");d.assertValidMonth=yE;function mE(r){return qt(r,d.DAY_OF_MONTH_RANGE,"Day")}s(mE,"assertValidDay");d.assertValidDay=mE;function OE(r){return qt(r,d.HOUR_OF_DAY_RANGE,"Hour")}s(OE,"assertValidHour");d.assertValidHour=OE;function gE(r){return qt(r,d.MINUTE_OF_HOUR_RANGE,"Minute")}s(gE,"assertValidMinute");d.assertValidMinute=gE;function SE(r){return qt(r,d.SECOND_OF_MINUTE_RANGE,"Second")}s(SE,"assertValidSecond");d.assertValidSecond=SE;function EE(r){return qt(r,d.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")}s(EE,"assertValidNanosecond");d.assertValidNanosecond=EE;function wE(r,t){try{Intl.DateTimeFormat(void 0,{timeZone:t})}catch{throw(0,zh.newError)(r+' is expected to be a valid ZoneId but was: "'+t+'"')}}s(wE,"assertValidZoneId");d.assertValidZoneId=wE;function qt(r,t,e){if((0,nE.assertNumberOrInteger)(r,e),!t.contains(r))throw(0,zh.newError)(e+" is expected to be in range "+t+" but was: "+r);return r}s(qt,"assertValidTemporalValue");function TE(r,t,e){r=(0,q.int)(r),t=(0,q.int)(t),e=(0,q.int)(e);var n=r.multiply(d.SECONDS_PER_HOUR);return n=n.add(t.multiply(d.SECONDS_PER_MINUTE)),n.add(e)}s(TE,"localTimeToSecondOfDay");function PE(r){return r=(0,q.int)(r),r.modulo(4).equals(0)?r.modulo(100).equals(0)?!!r.modulo(400).equals(0):!0:!1}s(PE,"isLeapYear");function Ru(r,t){r=(0,q.int)(r),t=(0,q.int)(t);var e=r.div(t);return r.isPositive()!==t.isPositive()&&e.multiply(t).notEquals(r)&&(e=e.subtract(1)),e}s(Ru,"floorDiv");d.floorDiv=Ru;function Zh(r,t){return r=(0,q.int)(r),t=(0,q.int)(t),r.subtract(Ru(r,t).multiply(t))}s(Zh,"floorMod");d.floorMod=Zh;function CE(r,t){r=(0,q.int)(r),t=(0,q.int)(t);var e,n,i=r.isNegative(),o=t.greaterThan(0);return i&&o?r.equals(-1)?e="-0":e=r.add(1).toString():e=r.toString(),o&&(i?n=Iu(t.negate().add(2*d.NANOS_PER_SECOND).modulo(d.NANOS_PER_SECOND)):n=Iu(t.add(d.NANOS_PER_SECOND).modulo(d.NANOS_PER_SECOND))),n?e+n:e}s(CE,"formatSecondsAndNanosecondsForDuration");function Iu(r){return r=(0,q.int)(r),r.equals(0)?"":"."+ye(r,9)}s(Iu,"formatNanosecond");function IE(r){var t=(0,q.int)(r);return t.isNegative()||t.greaterThan(9999)?ye(t,6,{usePositiveSign:!0}):ye(t,4)}s(IE,"formatYear");function ye(r,t,e){r=(0,q.int)(r);var n=r.isNegative();n&&(r=r.negate());var i=r.toString();if(t)for(;i.length<t;)i="0"+i;return n?"-"+i:(e==null?void 0:e.usePositiveSign)===!0?"+"+i:i}s(ye,"formatNumber");function RE(r,t){return r instanceof q.default?r.add(t):typeof r=="bigint"?r+BigInt(t):r+t}s(RE,"add")});var ap=h(A=>{"use strict";var AE=A&&A.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),jE=A&&A.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Gh=A&&A.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&AE(t,r,e);return jE(t,r),t},NE=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){u={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o};Object.defineProperty(A,"__esModule",{value:!0});A.isDateTime=A.DateTime=A.isLocalDateTime=A.LocalDateTime=A.isDate=A.Date=A.isTime=A.Time=A.isLocalTime=A.LocalTime=A.isDuration=A.Duration=void 0;var P=Gh(Au()),$e=be(),qE=fe(),_n=Gh(jt()),vr={value:!0,enumerable:!1,configurable:!1,writable:!1},$h="__isDuration__",Kh="__isLocalTime__",Qh="__isTime__",Xh="__isDate__",Jh="__isLocalDateTime__",ep="__isDateTime__",tp=function(){function r(t,e,n,i){this.months=(0,$e.assertNumberOrInteger)(t,"Months"),this.days=(0,$e.assertNumberOrInteger)(e,"Days"),(0,$e.assertNumberOrInteger)(n,"Seconds"),(0,$e.assertNumberOrInteger)(i,"Nanoseconds"),this.seconds=P.normalizeSecondsForDuration(n,i),this.nanoseconds=P.normalizeNanosecondsForDuration(i),Object.freeze(this)}return s(r,"Duration"),r.prototype.toString=function(){return P.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},r}();A.Duration=tp;Object.defineProperty(tp.prototype,$h,vr);function xE(r){return br(r,$h)}s(xE,"isDuration");A.isDuration=xE;var rp=function(){function r(t,e,n,i){this.hour=P.assertValidHour(t),this.minute=P.assertValidMinute(e),this.second=P.assertValidSecond(n),this.nanosecond=P.assertValidNanosecond(i),Object.freeze(this)}return s(r,"LocalTime"),r.fromStandardDate=function(t,e){dn(t,e);var n=P.totalNanoseconds(t,e);return new r(t.getHours(),t.getMinutes(),t.getSeconds(),n instanceof _n.default?n.toInt():typeof n=="bigint"?(0,_n.int)(n).toInt():n)},r.prototype.toString=function(){return P.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},r}();A.LocalTime=rp;Object.defineProperty(rp.prototype,Kh,vr);function DE(r){return br(r,Kh)}s(DE,"isLocalTime");A.isLocalTime=DE;var np=function(){function r(t,e,n,i,o){this.hour=P.assertValidHour(t),this.minute=P.assertValidMinute(e),this.second=P.assertValidSecond(n),this.nanosecond=P.assertValidNanosecond(i),this.timeZoneOffsetSeconds=(0,$e.assertNumberOrInteger)(o,"Time zone offset in seconds"),Object.freeze(this)}return s(r,"Time"),r.fromStandardDate=function(t,e){return dn(t,e),new r(t.getHours(),t.getMinutes(),t.getSeconds(),(0,_n.toNumber)(P.totalNanoseconds(t,e)),P.timeZoneOffsetInSeconds(t))},r.prototype.toString=function(){return P.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+P.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},r}();A.Time=np;Object.defineProperty(np.prototype,Qh,vr);function ME(r){return br(r,Qh)}s(ME,"isTime");A.isTime=ME;var ip=function(){function r(t,e,n){this.year=P.assertValidYear(t),this.month=P.assertValidMonth(e),this.day=P.assertValidDay(n),Object.freeze(this)}return s(r,"Date"),r.fromStandardDate=function(t){return dn(t),new r(t.getFullYear(),t.getMonth()+1,t.getDate())},r.prototype.toString=function(){return P.dateToIsoString(this.year,this.month,this.day)},r}();A.Date=ip;Object.defineProperty(ip.prototype,Xh,vr);function kE(r){return br(r,Xh)}s(kE,"isDate");A.isDate=kE;var op=function(){function r(t,e,n,i,o,u,a){this.year=P.assertValidYear(t),this.month=P.assertValidMonth(e),this.day=P.assertValidDay(n),this.hour=P.assertValidHour(i),this.minute=P.assertValidMinute(o),this.second=P.assertValidSecond(u),this.nanosecond=P.assertValidNanosecond(a),Object.freeze(this)}return s(r,"LocalDateTime"),r.fromStandardDate=function(t,e){return dn(t,e),new r(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),(0,_n.toNumber)(P.totalNanoseconds(t,e)))},r.prototype.toString=function(){return up(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},r}();A.LocalDateTime=op;Object.defineProperty(op.prototype,Jh,vr);function UE(r){return br(r,Jh)}s(UE,"isLocalDateTime");A.isLocalDateTime=UE;var sp=function(){function r(t,e,n,i,o,u,a,f,c){this.year=P.assertValidYear(t),this.month=P.assertValidMonth(e),this.day=P.assertValidDay(n),this.hour=P.assertValidHour(i),this.minute=P.assertValidMinute(o),this.second=P.assertValidSecond(u),this.nanosecond=P.assertValidNanosecond(a);var l=NE(FE(f,c),2),p=l[0],_=l[1];this.timeZoneOffsetSeconds=p,this.timeZoneId=_||void 0,Object.freeze(this)}return s(r,"DateTime"),r.fromStandardDate=function(t,e){return dn(t,e),new r(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),(0,_n.toNumber)(P.totalNanoseconds(t,e)),P.timeZoneOffsetInSeconds(t),null)},r.prototype.toString=function(){var t=up(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),e=this.timeZoneId?"["+this.timeZoneId+"]":P.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds||0);return t+e},r}();A.DateTime=sp;Object.defineProperty(sp.prototype,ep,vr);function LE(r){return br(r,ep)}s(LE,"isDateTime");A.isDateTime=LE;function br(r,t){return(r&&r[t])===!0}s(br,"hasIdentifierProperty");function up(r,t,e,n,i,o,u){return P.dateToIsoString(r,t,e)+"T"+P.timeToIsoString(n,i,o,u)}s(up,"localDateTimeToString");function FE(r,t){var e=r||r===0,n=t&&t!=="";if(!e&&!n)throw(0,qE.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: "+r+" and id: "+t);var i=[void 0,void 0];return e&&((0,$e.assertNumberOrInteger)(r,"Time zone offset in seconds"),i[0]=r),n&&((0,$e.assertString)(t,"Time zone ID"),P.assertValidZoneId("Time zone ID",t),i[1]=t),i}s(FE,"verifyTimeZoneArguments");function dn(r,t){(0,$e.assertValidDate)(r,"Standard date"),t!=null&&(0,$e.assertNumberOrInteger)(t,"Nanosecond")}s(dn,"verifyStandardDateAndNanos")});var yp=h(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.isPathSegment=H.PathSegment=H.isPath=H.Path=H.isUnboundRelationship=H.UnboundRelationship=H.isRelationship=H.Relationship=H.isNode=H.Node=void 0;var ju=qo(),vn={value:!0,enumerable:!1,configurable:!1,writable:!1},cp="__isNode__",fp="__isRelationship__",lp="__isUnboundRelationship__",hp="__isPath__",pp="__isPathSegment__";function bn(r,t){return(r&&r[t])===!0}s(bn,"hasIdentifierProperty");var _p=function(){function r(t,e,n){this.identity=t,this.labels=e,this.properties=n}return s(r,"Node"),r.prototype.toString=function(){for(var t="("+this.identity,e=0;e<this.labels.length;e++)t+=":"+this.labels[e];var n=Object.keys(this.properties);if(n.length>0){t+=" {";for(var e=0;e<n.length;e++)e>0&&(t+=","),t+=n[e]+":"+(0,ju.stringify)(this.properties[n[e]]);t+="}"}return t+=")",t},r}();H.Node=_p;Object.defineProperty(_p.prototype,cp,vn);function BE(r){return bn(r,cp)}s(BE,"isNode");H.isNode=BE;var Nu=function(){function r(t,e,n,i,o){this.identity=t,this.start=e,this.end=n,this.type=i,this.properties=o}return s(r,"Relationship"),r.prototype.toString=function(){var t="("+this.start+")-[:"+this.type,e=Object.keys(this.properties);if(e.length>0){t+=" {";for(var n=0;n<e.length;n++)n>0&&(t+=","),t+=e[n]+":"+(0,ju.stringify)(this.properties[e[n]]);t+="}"}return t+="]->("+this.end+")",t},r}();H.Relationship=Nu;Object.defineProperty(Nu.prototype,fp,vn);function VE(r){return bn(r,fp)}s(VE,"isRelationship");H.isRelationship=VE;var dp=function(){function r(t,e,n){this.identity=t,this.type=e,this.properties=n}return s(r,"UnboundRelationship"),r.prototype.bind=function(t,e){return new Nu(this.identity,t,e,this.type,this.properties)},r.prototype.toString=function(){var t="-[:"+this.type,e=Object.keys(this.properties);if(e.length>0){t+=" {";for(var n=0;n<e.length;n++)n>0&&(t+=","),t+=e[n]+":"+(0,ju.stringify)(this.properties[e[n]]);t+="}"}return t+="]->",t},r}();H.UnboundRelationship=dp;Object.defineProperty(dp.prototype,lp,vn);function WE(r){return bn(r,lp)}s(WE,"isUnboundRelationship");H.isUnboundRelationship=WE;var vp=function(){function r(t,e,n){this.start=t,this.relationship=e,this.end=n}return s(r,"PathSegment"),r}();H.PathSegment=vp;Object.defineProperty(vp.prototype,pp,vn);function HE(r){return bn(r,pp)}s(HE,"isPathSegment");H.isPathSegment=HE;var bp=function(){function r(t,e,n){this.start=t,this.end=e,this.segments=n,this.length=n.length}return s(r,"Path"),r}();H.Path=bp;Object.defineProperty(bp.prototype,hp,vn);function zE(r){return bn(r,hp)}s(zE,"isPath");H.isPath=zE});var Op=h(Ke=>{"use strict";var qu=Ke&&Ke.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(l){return f([c,l])}}function f(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},xu=Ke&&Ke.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Du=Ke&&Ke.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){u={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o};Object.defineProperty(Ke,"__esModule",{value:!0});var mp=fe();function YE(r){var t={};return r.forEach(function(e,n){t[e]=n}),t}s(YE,"generateFieldLookup");var ZE=function(){function r(t,e,n){this.keys=t,this.length=t.length,this._fields=e,this._fieldLookup=n||YE(t)}return s(r,"Record"),r.prototype.forEach=function(t){var e,n;try{for(var i=xu(this.entries()),o=i.next();!o.done;o=i.next()){var u=Du(o.value,2),a=u[0],f=u[1];t(f,a,this)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},r.prototype.map=function(t){var e,n,i=[];try{for(var o=xu(this.entries()),u=o.next();!u.done;u=o.next()){var a=Du(u.value,2),f=a[0],c=a[1];i.push(t(c,f,this))}}catch(l){e={error:l}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},r.prototype.entries=function(){var t;return qu(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,[this.keys[t],this._fields[t]]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},r.prototype.values=function(){var t;return qu(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},r.prototype[Symbol.iterator]=function(){var t;return qu(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},r.prototype.toObject=function(){var t,e,n={};try{for(var i=xu(this.entries()),o=i.next();!o.done;o=i.next()){var u=Du(o.value,2),a=u[0],f=u[1];n[a]=f}}catch(c){t={error:c}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return n},r.prototype.get=function(t){var e;if(typeof t!="number"){if(e=this._fieldLookup[t],e===void 0)throw(0,mp.newError)("This record has no field with key '"+t+"', available key are: ["+this.keys+"].")}else e=t;if(e>this._fields.length-1||e<0)throw(0,mp.newError)("This record has no field with index '"+e+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[e]},r.prototype.has=function(t){return typeof t=="number"?t>=0&&t<this._fields.length:this._fieldLookup[t]!==void 0},r}();Ke.default=ZE});var Ep=h(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.isPoint=yr.Point=void 0;var Do=be(),gp="__isPoint__",Sp=function(){function r(t,e,n,i){this.srid=(0,Do.assertNumberOrInteger)(t,"SRID"),this.x=(0,Do.assertNumber)(e,"X coordinate"),this.y=(0,Do.assertNumber)(n,"Y coordinate"),this.z=i==null?i:(0,Do.assertNumber)(i,"Z coordinate"),Object.freeze(this)}return s(r,"Point"),r.prototype.toString=function(){return this.z||this.z===0?"Point{srid="+xt(this.srid)+", x="+xt(this.x)+", y="+xt(this.y)+", z="+xt(this.z)+"}":"Point{srid="+xt(this.srid)+", x="+xt(this.x)+", y="+xt(this.y)+"}"},r}();yr.Point=Sp;function xt(r){return Number.isInteger(r)?r+".0":r.toString()}s(xt,"formatAsFloat");Object.defineProperty(Sp.prototype,gp,{value:!0,enumerable:!1,configurable:!1,writable:!1});function GE(r){return(r&&r[gp])===!0}s(GE,"isPoint");yr.isPoint=GE});var Uu=h(L=>{"use strict";var $E=L&&L.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),KE=L&&L.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),QE=L&&L.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&$E(t,r,e);return KE(t,r),t};Object.defineProperty(L,"__esModule",{value:!0});L.Stats=L.QueryStatistics=L.ProfiledPlan=L.Plan=L.Notification=L.ServerInfo=L.queryType=void 0;var wp=QE(jt()),XE=function(){function r(t,e,n,i){this.query={text:t,parameters:e},this.queryType=n.type,this.counters=new Tp(n.stats||{}),this.updateStatistics=this.counters,this.plan=n.plan||n.profile?new Mu(n.plan||n.profile):!1,this.profile=n.profile?new ku(n.profile):!1,this.notifications=this._buildNotifications(n.notifications),this.server=new Cp(n.server,i),this.resultConsumedAfter=n.result_consumed_after,this.resultAvailableAfter=n.result_available_after,this.database={name:n.db||null}}return s(r,"ResultSummary"),r.prototype._buildNotifications=function(t){return t?t.map(function(e){return new Pp(e)}):[]},r.prototype.hasPlan=function(){return this.plan instanceof Mu},r.prototype.hasProfile=function(){return this.profile instanceof ku},r}(),Mu=function(){function r(t){this.operatorType=t.operatorType,this.identifiers=t.identifiers,this.arguments=t.args,this.children=t.children?t.children.map(function(e){return new r(e)}):[]}return s(r,"Plan"),r}();L.Plan=Mu;var ku=function(){function r(t){this.operatorType=t.operatorType,this.identifiers=t.identifiers,this.arguments=t.args,this.dbHits=mr("dbHits",t),this.rows=mr("rows",t),this.pageCacheMisses=mr("pageCacheMisses",t),this.pageCacheHits=mr("pageCacheHits",t),this.pageCacheHitRatio=mr("pageCacheHitRatio",t),this.time=mr("time",t),this.children=t.children?t.children.map(function(e){return new r(e)}):[]}return s(r,"ProfiledPlan"),r.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},r}();L.ProfiledPlan=ku;var JE=function(){function r(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}return s(r,"Stats"),r}();L.Stats=JE;var Tp=function(){function r(t){var e=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(t).forEach(function(n){var i=n.replace(/(-\w)/g,function(o){return o[1].toUpperCase()});i in e._stats?e._stats[i]=Or(t[n]):i==="systemUpdates"?e._systemUpdates=Or(t[n]):i==="containsSystemUpdates"?e._containsSystemUpdates=t[n]:i==="containsUpdates"&&(e._containsUpdates=t[n])}),this._stats=Object.freeze(this._stats)}return s(r,"QueryStatistics"),r.prototype.containsUpdates=function(){var t=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(e,n){return e+t._stats[n]},0)>0},r.prototype.updates=function(){return this._stats},r.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},r.prototype.systemUpdates=function(){return this._systemUpdates},r}();L.QueryStatistics=Tp;var Pp=function(){function r(t){this.code=t.code,this.title=t.title,this.description=t.description,this.severity=t.severity,this.position=r._constructPosition(t.position)}return s(r,"Notification"),r._constructPosition=function(t){return t?{offset:Or(t.offset),line:Or(t.line),column:Or(t.column)}:{}},r}();L.Notification=Pp;var Cp=function(){function r(t,e){t&&(this.address=t.address,this.version=t.version,this.agent=t.version),this.protocolVersion=e}return s(r,"ServerInfo"),r}();L.ServerInfo=Cp;function Or(r){return r instanceof wp.default?r.toInt():typeof r=="bigint"?(0,wp.int)(r).toInt():r}s(Or,"intValue");function mr(r,t,e){if(e===void 0&&(e=0),r in t){var n=t[r];return Or(n)}else return e}s(mr,"valueOrDefault");var ew={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};L.queryType=ew;L.default=XE});var Mo=h(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.FailedObserver=gr.CompletedObserver=void 0;var tw=function(){function r(){}return s(r,"CompletedObserver"),r.prototype.subscribe=function(t){yn(t,t.onKeys,[]),yn(t,t.onCompleted,{})},r.prototype.cancel=function(){},r.prototype.prepareToHandleSingleResponse=function(){},r.prototype.markCompleted=function(){},r.prototype.onError=function(t){throw Error("CompletedObserver not supposed to call onError")},r}();gr.CompletedObserver=tw;var rw=function(){function r(t){var e=t.error,n=t.onError;this._error=e,this._beforeError=n,this._observers=[],this.onError(e)}return s(r,"FailedObserver"),r.prototype.subscribe=function(t){yn(t,t.onError,this._error),this._observers.push(t)},r.prototype.onError=function(t){var e=this;Promise.resolve(yn(this,this._beforeError,t)).then(function(){return e._observers.forEach(function(n){return yn(n,n.onError,t)})})},r.prototype.cancel=function(){},r.prototype.prepareToHandleSingleResponse=function(){},r.prototype.markCompleted=function(){},r}();gr.FailedObserver=rw;function yn(r,t,e){t&&t.bind(r)(e)}s(yn,"apply")});var Sr=h(Le=>{"use strict";var nw=Le&&Le.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),iw=Le&&Le.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),ow=Le&&Le.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&nw(t,r,e);return iw(t,r),t};Object.defineProperty(Le,"__esModule",{value:!0});Le.Bookmark=void 0;var Ip=ow(be()),sw="bookmarks",Rp=function(){function r(t){this._values=aw(t)}return s(r,"Bookmark"),r.empty=function(){return uw},r.prototype.isEmpty=function(){return this._values.length===0},r.prototype.values=function(){return this._values},r.prototype.asBeginTransactionParameters=function(){var t;return this.isEmpty()?{}:(t={},t[sw]=this._values,t)},r}();Le.Bookmark=Rp;var uw=new Rp(null);function aw(r){if(!r)return[];if(Ip.isString(r))return[r];if(Array.isArray(r)){for(var t=[],e=Ap(r),n=0;n<e.length;n++){var i=e[n];if(i!=null){if(!Ip.isString(i))throw new TypeError("Bookmark value should be a string, given: '"+i+"'");t.push(i)}}return t}throw new TypeError("Bookmark should either be a string or a string array, given: '"+r+"'")}s(aw,"asStringArray");function Ap(r){return r.reduce(function(t,e){return Array.isArray(e)?t.concat(Ap(e)):t.concat(e)},[])}s(Ap,"flattenArray")});var Er=h(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.BOLT_PROTOCOL_V4_4=x.BOLT_PROTOCOL_V4_3=x.BOLT_PROTOCOL_V4_2=x.BOLT_PROTOCOL_V4_1=x.BOLT_PROTOCOL_V4_0=x.BOLT_PROTOCOL_V3=x.BOLT_PROTOCOL_V2=x.BOLT_PROTOCOL_V1=x.DEFAULT_POOL_MAX_SIZE=x.DEFAULT_POOL_ACQUISITION_TIMEOUT=x.ACCESS_MODE_WRITE=x.ACCESS_MODE_READ=x.FETCH_ALL=void 0;var cw=-1;x.FETCH_ALL=cw;var fw=60*1e3;x.DEFAULT_POOL_ACQUISITION_TIMEOUT=fw;var lw=100;x.DEFAULT_POOL_MAX_SIZE=lw;var hw="READ";x.ACCESS_MODE_READ=hw;var pw="WRITE";x.ACCESS_MODE_WRITE=pw;var _w=1;x.BOLT_PROTOCOL_V1=_w;var dw=2;x.BOLT_PROTOCOL_V2=dw;var vw=3;x.BOLT_PROTOCOL_V3=vw;var bw=4;x.BOLT_PROTOCOL_V4_0=bw;var yw=4.1;x.BOLT_PROTOCOL_V4_1=yw;var mw=4.2;x.BOLT_PROTOCOL_V4_2=mw;var Ow=4.3;x.BOLT_PROTOCOL_V4_3=Ow;var gw=4.4;x.BOLT_PROTOCOL_V4_4=gw});var mn=h(Ie=>{"use strict";var Np=Ie&&Ie.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ie,"__esModule",{value:!0});Ie.EMPTY_CONNECTION_HOLDER=Ie.ReadOnlyConnectionHolder=Ie.ConnectionHolder=void 0;var Sw=fe(),Ew=be(),ww=Er(),Tw=Sr(),Lu=function(){function r(t){var e=t===void 0?{}:t,n=e.mode,i=n===void 0?ww.ACCESS_MODE_WRITE:n,o=e.database,u=o===void 0?"":o,a=e.bookmark,f=e.connectionProvider,c=e.impersonatedUser,l=e.onDatabaseNameResolved;this._mode=i,this._database=u?(0,Ew.assertString)(u,"database"):"",this._bookmark=a||Tw.Bookmark.empty(),this._connectionProvider=f,this._impersonatedUser=c,this._referenceCount=0,this._connectionPromise=Promise.resolve(),this._onDatabaseNameResolved=l}return s(r,"ConnectionHolder"),r.prototype.mode=function(){return this._mode},r.prototype.database=function(){return this._database},r.prototype.setDatabase=function(t){this._database=t},r.prototype.bookmark=function(){return this._bookmark},r.prototype.connectionProvider=function(){return this._connectionProvider},r.prototype.referenceCount=function(){return this._referenceCount},r.prototype.initializeConnection=function(){if(this._referenceCount===0&&this._connectionProvider)this._connectionPromise=this._connectionProvider.acquireConnection({accessMode:this._mode,database:this._database,bookmarks:this._bookmark,impersonatedUser:this._impersonatedUser,onDatabaseNameResolved:this._onDatabaseNameResolved});else return this._referenceCount++,!1;return this._referenceCount++,!0},r.prototype.getConnection=function(){return this._connectionPromise},r.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},r.prototype.close=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection())},r.prototype._releaseConnection=function(){return this._connectionPromise=this._connectionPromise.then(function(t){return t?t.isOpen()?t.resetAndFlush().catch(jp).then(function(){return t._release()}):t._release():Promise.resolve()}).catch(jp),this._connectionPromise},r}();Ie.ConnectionHolder=Lu;var qp=function(r){Np(t,r);function t(e){var n=r.call(this,{mode:e.mode(),database:e.database(),bookmark:e.bookmark(),connectionProvider:e.connectionProvider()})||this;return n._connectionHolder=e,n}return s(t,"ReadOnlyConnectionHolder"),t.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},t.prototype.getConnection=function(){return this._connectionHolder.getConnection()},t.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},t.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},t}(Lu);Ie.ReadOnlyConnectionHolder=qp;Ie.default=qp;var Pw=function(r){Np(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"EmptyConnectionHolder"),t.prototype.mode=function(){},t.prototype.database=function(){},t.prototype.initializeConnection=function(){return!0},t.prototype.getConnection=function(){return Promise.reject((0,Sw.newError)("This connection holder does not serve connections"))},t.prototype.releaseConnection=function(){return Promise.resolve()},t.prototype.close=function(){return Promise.resolve()},t}(Lu),Cw=new Pw;Ie.EMPTY_CONNECTION_HOLDER=Cw;function jp(r){}s(jp,"ignoreError")});var ko=h(Fe=>{"use strict";var Iw=Fe&&Fe.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),Rw=Fe&&Fe.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Aw=Fe&&Fe.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&Iw(t,r,e);return Rw(t,r),t};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.TxConfig=void 0;var On=Aw(be()),xp=fe(),jw=jt(),Dp=function(){function r(t){Dw(t),this.timeout=qw(t),this.metadata=xw(t)}return s(r,"TxConfig"),r.empty=function(){return Nw},r.prototype.isEmpty=function(){return Object.values(this).every(function(t){return t==null})},r}();Fe.TxConfig=Dp;var Nw=new Dp({});function qw(r){if(On.isObject(r)&&(r.timeout||r.timeout===0)){On.assertNumberOrInteger(r.timeout,"Transaction timeout");var t=(0,jw.int)(r.timeout);if(t.isZero())throw(0,xp.newError)("Transaction timeout should not be zero");if(t.isNegative())throw(0,xp.newError)("Transaction timeout should not be negative");return t}return null}s(qw,"extractTimeout");function xw(r){if(On.isObject(r)&&r.metadata){var t=r.metadata;if(On.assertObject(t,"config.metadata"),Object.keys(t).length!==0)return t}return null}s(xw,"extractMetadata");function Dw(r){r&&On.assertObject(r,"Transaction config")}s(Dw,"assertValidConfig")});var Bu=h(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.canRetryOn=void 0;var Fu=fe();function Mw(r){return r&&r instanceof Fu.Neo4jError&&r.code&&(r.code===Fu.SERVICE_UNAVAILABLE||r.code===Fu.SESSION_EXPIRED||Uw(r)||kw(r))}s(Mw,"canRetryOn");Uo.canRetryOn=Mw;function kw(r){var t=r.code;return t.indexOf("TransientError")>=0?!(t==="Neo.TransientError.Transaction.Terminated"||t==="Neo.TransientError.Transaction.LockClientStopped"):!1}s(kw,"_isTransientError");function Uw(r){return r.code==="Neo.ClientError.Security.AuthorizationExpired"}s(Uw,"_isAuthorizationExpired")});var Vu=h(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.TransactionExecutor=void 0;var Lo=fe(),Lw=Bu(),Fw=30*1e3,Bw=1e3,Vw=2,Ww=.2,Hw=function(){function r(t,e,n,i){this._maxRetryTimeMs=Fo(t,Fw),this._initialRetryDelayMs=Fo(e,Bw),this._multiplier=Fo(n,Vw),this._jitterFactor=Fo(i,Ww),this._inFlightTimeoutIds=[],this._verifyAfterConstruction()}return s(r,"TransactionExecutor"),r.prototype.execute=function(t,e){var n=this;return new Promise(function(i,o){n._executeTransactionInsidePromise(t,e,i,o)}).catch(function(i){var o=Date.now(),u=n._initialRetryDelayMs;return n._retryTransactionPromise(t,e,i,o,u)})},r.prototype.close=function(){this._inFlightTimeoutIds.forEach(function(t){return clearTimeout(t)}),this._inFlightTimeoutIds=[]},r.prototype._retryTransactionPromise=function(t,e,n,i,o){var u=this,a=Date.now()-i;return a>this._maxRetryTimeMs||!(0,Lw.canRetryOn)(n)?Promise.reject(n):new Promise(function(f,c){var l=u._computeDelayWithJitter(o),p=setTimeout(function(){u._inFlightTimeoutIds=u._inFlightTimeoutIds.filter(function(_){return _!==p}),u._executeTransactionInsidePromise(t,e,f,c)},l);u._inFlightTimeoutIds.push(p)}).catch(function(f){var c=o*u._multiplier;return u._retryTransactionPromise(t,e,f,i,c)})},r.prototype._executeTransactionInsidePromise=function(t,e,n,i){var o=this,u;try{u=t()}catch(f){i(f);return}var a=this._safeExecuteTransactionWork(u,e);a.then(function(f){return o._handleTransactionWorkSuccess(f,u,n,i)}).catch(function(f){return o._handleTransactionWorkFailure(f,u,i)})},r.prototype._safeExecuteTransactionWork=function(t,e){try{var n=e(t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}},r.prototype._handleTransactionWorkSuccess=function(t,e,n,i){e.isOpen()?e.commit().then(function(){n(t)}).catch(function(o){i(o)}):n(t)},r.prototype._handleTransactionWorkFailure=function(t,e,n){e.isOpen()?e.rollback().catch(function(i){}).then(function(){return n(t)}):n(t)},r.prototype._computeDelayWithJitter=function(t){var e=t*this._jitterFactor,n=t-e,i=t+e;return Math.random()*(i-n)+n},r.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,Lo.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs);if(this._initialRetryDelayMs<0)throw(0,Lo.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs);if(this._multiplier<1)throw(0,Lo.newError)("Multiplier should be >= 1.0: "+this._multiplier);if(this._jitterFactor<0||this._jitterFactor>1)throw(0,Lo.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor)},r}();Bo.TransactionExecutor=Hw;function Fo(r,t){return r||r===0?r:t}s(Fo,"_valueOrDefault")});var Wu=h(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.ConnectivityVerifier=void 0;var zw=mn(),Yw=Er(),Zw=fe(),Gw=function(){function r(t){this._connectionProvider=t}return s(r,"ConnectivityVerifier"),r.prototype.verify=function(t){var e=t===void 0?{}:t,n=e.database,i=n===void 0?"":n;return $w(this._connectionProvider,i)},r}();Vo.ConnectivityVerifier=Gw;function $w(r,t){var e=new zw.ConnectionHolder({mode:Yw.ACCESS_MODE_READ,database:t,connectionProvider:r});return e.initializeConnection(),e.getConnection().then(function(n){if(!n)throw(0,Zw.newError)("Unexpected error acquiring transaction");return e.close().then(function(){return n.server})}).catch(function(n){return e.close().catch(function(i){}).then(function(){return Promise.reject(n)})})}s($w,"acquireAndReleaseDummyConnection")});var Zu=h(Tr=>{"use strict";var Kw=Tr&&Tr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),wr;Object.defineProperty(Tr,"__esModule",{value:!0});Tr.Logger=void 0;var Mp=fe(),Hu="error",zu="warn",gn="info",Yu="debug",Qw=gn,Ho=(wr={},wr[Hu]=0,wr[zu]=1,wr[gn]=2,wr[Yu]=3,wr),kp=function(){function r(t,e){this._level=t,this._loggerFunction=e}return s(r,"Logger"),r.create=function(t){if(t&&t.logging){var e=t.logging,n=e0(e),i=t0(e);return new r(n,i)}return this.noOp()},r.noOp=function(){return Jw},r.prototype.isErrorEnabled=function(){return Wo(this._level,Hu)},r.prototype.error=function(t){this.isErrorEnabled()&&this._loggerFunction(Hu,t)},r.prototype.isWarnEnabled=function(){return Wo(this._level,zu)},r.prototype.warn=function(t){this.isWarnEnabled()&&this._loggerFunction(zu,t)},r.prototype.isInfoEnabled=function(){return Wo(this._level,gn)},r.prototype.info=function(t){this.isInfoEnabled()&&this._loggerFunction(gn,t)},r.prototype.isDebugEnabled=function(){return Wo(this._level,Yu)},r.prototype.debug=function(t){this.isDebugEnabled()&&this._loggerFunction(Yu,t)},r}();Tr.Logger=kp;var Xw=function(r){Kw(t,r);function t(){return r.call(this,gn,function(e,n){})||this}return s(t,"NoOpLogger"),t.prototype.isErrorEnabled=function(){return!1},t.prototype.error=function(e){},t.prototype.isWarnEnabled=function(){return!1},t.prototype.warn=function(e){},t.prototype.isInfoEnabled=function(){return!1},t.prototype.info=function(e){},t.prototype.isDebugEnabled=function(){return!1},t.prototype.debug=function(e){},t}(kp),Jw=new Xw;function Wo(r,t){return Ho[r]>=Ho[t]}s(Wo,"isLevelEnabled");function e0(r){if(r&&r.level){var t=r.level,e=Ho[t];if(!e&&e!==0)throw(0,Mp.newError)("Illegal logging level: "+t+". Supported levels are: "+Object.keys(Ho));return t}return Qw}s(e0,"extractConfiguredLevel");function t0(r){if(r&&r.logger){var t=r.logger;if(t&&typeof t=="function")return t}throw(0,Mp.newError)("Illegal logger function: "+r.logger)}s(t0,"extractConfiguredLogger")});var Gu=h(Q=>{"use strict";var zo=Q&&Q.__assign||function(){return zo=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},zo.apply(this,arguments)},Lp=Q&&Q.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){u={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o};Object.defineProperty(Q,"__esModule",{value:!0});Q.Url=Q.formatIPv6Address=Q.formatIPv4Address=Q.defaultPortForScheme=Q.parseDatabaseUrl=void 0;var r0=be(),n0=7687,i0=7474,o0=7473,Fp=function(){function r(t,e,n,i,o){this.scheme=t,this.host=e,this.port=n,this.hostAndPort=i,this.query=o}return s(r,"Url"),r}();Q.Url=Fp;function s0(r){(0,r0.assertString)(r,"URL");var t=a0(r),e=b0(t.url),n=t.schemeMissing?null:c0(e.scheme),i=f0(e.host),o=_0(i),u=l0(e.port,n),a=o+":"+u,f=h0(e.query||u0(e.resourceName),r);return new Fp(n,i,u,a,f)}s(s0,"parseDatabaseUrl");Q.parseDatabaseUrl=s0;function u0(r){if(typeof r!="string")return null;var t=Lp(r.split("?"),2),e=t[0],n=t[1];return n}s(u0,"extractResourceQueryString");function a0(r){return r=r.trim(),r.indexOf("://")===-1?{schemeMissing:!0,url:"none://"+r}:{schemeMissing:!1,url:r}}s(a0,"sanitizeUrl");function c0(r){return r?(r=r.trim(),r.charAt(r.length-1)===":"&&(r=r.substring(0,r.length-1)),r):null}s(c0,"extractScheme");function f0(r,t){if(!r)throw new Error("Unable to extract host from "+t);return r.trim()}s(f0,"extractHost");function l0(r,t){var e=typeof r=="string"?parseInt(r,10):r;return e===0||e?e:Vp(t)}s(l0,"extractPort");function h0(r,t){var e=r?p0(r):null,n={};return e&&e.split("&").forEach(function(i){var o=i.split("=");if(o.length!==2)throw new Error("Invalid parameters: '"+o+"' in URL '"+t+"'.");var u=Up(o[0],"key",t),a=Up(o[1],"value",t);if(n[u])throw new Error("Duplicated query parameters with key '"+u+"' in URL '"+t+"'");n[u]=a}),n}s(h0,"extractQuery");function p0(r){return r=(r||"").trim(),r&&r.charAt(0)==="?"&&(r=r.substring(1,r.length)),r}s(p0,"trimAndSanitizeQuery");function Up(r,t,e){if(r=(r||"").trim(),!r)throw new Error("Illegal empty "+t+" in URL query '"+e+"'");return r}s(Up,"trimAndVerifyQueryElement");function Bp(r){var t=r.charAt(0)==="[",e=r.charAt(r.length-1)==="]";if(!t&&!e)return"["+r+"]";if(t&&e)return r;throw new Error("Illegal IPv6 address "+r)}s(Bp,"escapeIPv6Address");function _0(r){if(!r)throw new Error("Illegal host "+r);var t=r.indexOf(":")>=0;return t?Bp(r):r}s(_0,"formatHost");function d0(r,t){return r+":"+t}s(d0,"formatIPv4Address");Q.formatIPv4Address=d0;function v0(r,t){var e=Bp(r);return e+":"+t}s(v0,"formatIPv6Address");Q.formatIPv6Address=v0;function Vp(r){return r==="http"?i0:r==="https"?o0:n0}s(Vp,"defaultPortForScheme");Q.defaultPortForScheme=Vp;function b0(r){function t(a,f){var c=a.indexOf(f);return c>=0?[a.substring(0,c),a[c],a.substring(c+1)]:[a,"",""]}s(t,"partition");function e(a,f){var c=a.lastIndexOf(f);return c>=0?[a.substring(0,c),a[c],a.substring(c+1)]:["","",a]}s(e,"rpartition");function n(a,f,c){var l=t(a,f),p=t(l[2],c);return[p[0],p[2]]}s(n,"between");function i(a){var f={},c;c=e(a,"@"),c[1]==="@"&&(f.userInfo=decodeURIComponent(c[0]),a=c[2]);var l=Lp(n(a,"[","]"),2),p=l[0],_=l[1];return p!==""?(f.host=p,c=t(_,":")):(c=t(a,":"),f.host=c[0]),c[1]===":"&&(f.port=c[2]),f}s(i,"parseAuthority");var o={},u;return u=t(r,":"),u[1]===":"&&(o.scheme=decodeURIComponent(u[0]),r=u[2]),u=t(r,"#"),u[1]==="#"&&(o.fragment=decodeURIComponent(u[2]),r=u[0]),u=t(r,"?"),u[1]==="?"&&(o.query=u[2],r=u[0]),r.startsWith("//")?(u=t(r.substr(2),"/"),o=zo(zo({},o),i(u[0])),o.path=u[1]+u[2]):o.path=r,o}s(b0,"uriJsParse")});var Ku=h(Be=>{"use strict";var y0=Be&&Be.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),m0=Be&&Be.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),O0=Be&&Be.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&y0(t,r,e);return m0(t,r),t};Object.defineProperty(Be,"__esModule",{value:!0});Be.ServerAddress=void 0;var $u=be(),g0=O0(Gu()),S0=function(){function r(t,e,n,i){this._host=(0,$u.assertString)(t,"host"),this._resolved=e?(0,$u.assertString)(e,"resolved"):null,this._port=(0,$u.assertNumber)(n,"port"),this._hostPort=i,this._stringValue=e?i+"("+e+")":""+i}return s(r,"ServerAddress"),r.prototype.host=function(){return this._host},r.prototype.resolvedHost=function(){return this._resolved?this._resolved:this._host},r.prototype.port=function(){return this._port},r.prototype.resolveWith=function(t){return new r(this._host,t,this._port,this._hostPort)},r.prototype.asHostPort=function(){return this._hostPort},r.prototype.asKey=function(){return this._hostPort},r.prototype.toString=function(){return this._stringValue},r.fromUrl=function(t){var e=g0.parseDatabaseUrl(t);return new r(e.host,null,e.port,e.hostAndPort)},r}();Be.ServerAddress=S0});var Wp=h(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});var E0=function(){function r(){}return s(r,"BaseHostNameResolver"),r.prototype.resolve=function(){throw new Error("Abstract function")},r.prototype._resolveToItself=function(t){return Promise.resolve([t])},r}();Qu.default=E0});var Ju=h(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});var w0=Ku();function T0(r){return Promise.resolve([r])}s(T0,"resolveToSelf");var P0=function(){function r(t){this._resolverFunction=t||T0}return s(r,"ConfiguredCustomResolver"),r.prototype.resolve=function(t){var e=this;return new Promise(function(n){return n(e._resolverFunction(t.asHostPort()))}).then(function(n){if(!Array.isArray(n))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+("Each address is '<host>:<port>'. Got: "+n));return n.map(function(i){return w0.ServerAddress.fromUrl(i)})})},r}();Xu.default=P0});var zp=h(bt=>{"use strict";var Hp=bt&&bt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bt,"__esModule",{value:!0});bt.ConfiguredCustomResolver=bt.BaseHostNameResolver=void 0;var C0=Hp(Wp());bt.BaseHostNameResolver=C0.default;var I0=Hp(Ju());bt.ConfiguredCustomResolver=I0.default});var ea=h(I=>{"use strict";var R0=I&&I.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),A0=I&&I.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),re=I&&I.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&R0(t,r,e);return A0(t,r),t};Object.defineProperty(I,"__esModule",{value:!0});I.objectUtil=I.retryStrategy=I.resolver=I.serverAddress=I.urlUtil=I.logger=I.connectivityVerifier=I.transactionExecutor=I.txConfig=I.connectionHolder=I.constants=I.bookmark=I.observer=I.temporalUtil=I.util=void 0;var j0=re(be());I.util=j0;var N0=re(Au());I.temporalUtil=N0;var q0=re(Mo());I.observer=q0;var x0=re(Sr());I.bookmark=x0;var D0=re(Er());I.constants=D0;var M0=re(mn());I.connectionHolder=M0;var k0=re(ko());I.txConfig=k0;var U0=re(Vu());I.transactionExecutor=U0;var L0=re(Wu());I.connectivityVerifier=L0;var F0=re(Zu());I.logger=F0;var B0=re(Gu());I.urlUtil=B0;var V0=re(Ku());I.serverAddress=V0;var W0=re(zp());I.resolver=W0;var H0=re(Bu());I.retryStrategy=H0;var z0=re(Cu());I.objectUtil=z0});var Yo=h(Sn=>{"use strict";var Y0=Sn&&Sn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Sn,"__esModule",{value:!0});var Z0=Y0(Uu()),Yp=ea(),G0=Yp.connectionHolder.EMPTY_CONNECTION_HOLDER,$0=s(function(r){console.log("Uncaught error when processing result: "+r)},"DEFAULT_ON_ERROR"),K0=s(function(r){},"DEFAULT_ON_COMPLETED"),Q0=function(){function r(t,e,n,i){this._stack=X0(),this._streamObserverPromise=t,this._p=null,this._query=e,this._parameters=n||{},this._connectionHolder=i||G0}return s(r,"Result"),r.prototype.keys=function(){var t=this;return new Promise(function(e,n){t._streamObserverPromise.then(function(i){return i.subscribe({onKeys:function(o){return e(o)},onError:function(o){return n(o)}})}).catch(n)})},r.prototype.summary=function(){var t=this;return new Promise(function(e,n){t._streamObserverPromise.then(function(i){i.cancel(),i.subscribe({onCompleted:function(o){return t._createSummary(o).then(e,n)},onError:function(o){return n(o)}})}).catch(n)})},r.prototype._getOrCreatePromise=function(){var t=this;return this._p||(this._p=new Promise(function(e,n){var i=[],o={onNext:function(u){i.push(u)},onCompleted:function(u){e({records:i,summary:u})},onError:function(u){n(u)}};t.subscribe(o)})),this._p},r.prototype.then=function(t,e){return this._getOrCreatePromise().then(t,e)},r.prototype.catch=function(t){return this._getOrCreatePromise().catch(t)},r.prototype.finally=function(t){return this._getOrCreatePromise().finally(t)},r.prototype.subscribe=function(t){var e=this,n=t.onCompleted||K0,i=s(function(a){e._createSummary(a).then(function(f){return n.call(t,f)})},"onCompletedWrapper");t.onCompleted=i;var o=t.onError||$0,u=s(function(a){e._connectionHolder.releaseConnection().then(function(){J0(a,e._stack),o.call(t,a)})},"onErrorWrapper");t.onError=u,this._streamObserverPromise.then(function(a){return a.subscribe(t)}).catch(function(a){return t.onError(a)})},r.prototype._cancel=function(){this._streamObserverPromise.then(function(t){return t.cancel()})},r.prototype._createSummary=function(t){var e=Yp.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),n=e.validatedQuery,i=e.params,o=this._connectionHolder;return o.getConnection().then(function(u){return o.releaseConnection().then(function(){return u?u.protocol().version:void 0})},function(u){}).then(function(u){return new Z0.default(n,i,t,u)})},r}();function X0(){var r=new Error("");return r.stack?r.stack.replace(/^Error(\n\r)*/,""):null}s(X0,"captureStacktrace");function J0(r,t){t&&(r.stack=r.toString()+`
`+t)}s(J0,"replaceStacktrace");Sn.default=Q0});var Zp=h(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});var eT=function(){function r(){}return s(r,"ConnectionProvider"),r.prototype.acquireConnection=function(t){throw Error("Not implemented")},r.prototype.supportsMultiDb=function(){throw Error("Not implemented")},r.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},r.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},r.prototype.close=function(){throw Error("Not implemented")},r}();ta.default=eT});var Gp=h(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});var tT=function(){function r(){this.id="",this.databaseId=""}return s(r,"Connection"),r.prototype.isOpen=function(){return!1},r.prototype.protocol=function(){throw Error("Not implemented")},r.prototype.connect=function(t,e){throw Error("Not implemented")},r.prototype.write=function(t,e,n){throw Error("Not implemented")},r.prototype.resetAndFlush=function(){throw Error("Not implemented")},r.prototype.close=function(){throw Error("Not implemented")},r.prototype._release=function(){return Promise.resolve()},r}();ra.default=tT});var ia=h(Qe=>{"use strict";var rT=Qe&&Qe.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function a(l){try{c(n.next(l))}catch(p){u(p)}}s(a,"fulfilled");function f(l){try{c(n.throw(l))}catch(p){u(p)}}s(f,"rejected");function c(l){l.done?o(l.value):i(l.value).then(a,f)}s(c,"step"),c((n=n.apply(r,t||[])).next())})},nT=Qe&&Qe.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(l){return f([c,l])}}function f(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},iT=Qe&&Qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qe,"__esModule",{value:!0});var oT=be(),na=mn(),Kp=Sr(),sT=ko(),Re=Mo(),Ae=fe(),Qp=iT(Yo()),uT=function(){function r(t){var e=t.connectionHolder,n=t.onClose,i=t.onBookmark,o=t.onConnection,u=t.reactive,a=t.fetchSize,f=t.impersonatedUser;this._connectionHolder=e,this._reactive=u,this._state=je.ACTIVE,this._onClose=n,this._onBookmark=i,this._onConnection=o,this._onError=this._onErrorCallback.bind(this),this._onComplete=this._onCompleteCallback.bind(this),this._fetchSize=a,this._results=[],this._impersonatedUser=f}return s(r,"Transaction"),r.prototype._begin=function(t,e){var n=this;this._connectionHolder.getConnection().then(function(i){if(n._onConnection(),i)return i.protocol().beginTransaction({bookmark:t,txConfig:e,mode:n._connectionHolder.mode(),database:n._connectionHolder.database(),impersonatedUser:n._impersonatedUser,beforeError:n._onError,afterComplete:n._onComplete});throw(0,Ae.newError)("No connection available")}).catch(function(i){return n._onError(i)})},r.prototype.run=function(t,e){var n=(0,oT.validateQueryAndParameters)(t,e),i=n.validatedQuery,o=n.params,u=this._state.run(i,o,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize});return this._results.push(u),u},r.prototype.commit=function(){var t=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=t.state,this._onClose(),new Promise(function(e,n){t.result.subscribe({onCompleted:function(){return e()},onError:function(i){return n(i)}})})},r.prototype.rollback=function(){var t=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=t.state,this._onClose(),new Promise(function(e,n){t.result.subscribe({onCompleted:function(){return e()},onError:function(i){return n(i)}})})},r.prototype.isOpen=function(){return this._state===je.ACTIVE},r.prototype.close=function(){return rT(this,void 0,void 0,function(){return nT(this,function(t){switch(t.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},r.prototype._onErrorCallback=function(t){return this._state=je.FAILED,this._onClose(),this._connectionHolder.releaseConnection()},r.prototype._onCompleteCallback=function(t){this._onBookmark(new Kp.Bookmark(t.bookmark))},r}(),je={ACTIVE:{commit:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete,i=r.onConnection,o=r.pendingResults;return{result:$p(!0,t,e,n,i,o),state:je.SUCCEEDED}},rollback:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete,i=r.onConnection,o=r.pendingResults;return{result:$p(!1,t,e,n,i,o),state:je.ROLLED_BACK}},run:function(r,t,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete,u=e.onConnection,a=e.reactive,f=e.fetchSize,c=n.getConnection().then(function(l){if(u(),l)return l.protocol().run(r,t,{bookmark:Kp.Bookmark.empty(),txConfig:sT.TxConfig.empty(),beforeError:i,afterComplete:o,reactive:a,fetchSize:f});throw(0,Ae.newError)("No connection available")}).catch(function(l){return new Re.FailedObserver({error:l,onError:i})});return Ve(c,r,t,n)}},FAILED:{commit:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:Ve(new Re.FailedObserver({error:(0,Ae.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:e}),"COMMIT",{},t),state:je.FAILED}},rollback:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:Ve(new Re.CompletedObserver,"ROLLBACK",{},t),state:je.FAILED}},run:function(r,t,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete;return Ve(new Re.FailedObserver({error:(0,Ae.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:i}),r,t,n)}},SUCCEEDED:{commit:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:Ve(new Re.FailedObserver({error:(0,Ae.newError)("Cannot commit this transaction, because it has already been committed."),onError:e}),"COMMIT",{}),state:je.SUCCEEDED,connectionHolder:t}},rollback:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:Ve(new Re.FailedObserver({error:(0,Ae.newError)("Cannot rollback this transaction, because it has already been committed."),onError:e}),"ROLLBACK",{}),state:je.SUCCEEDED,connectionHolder:t}},run:function(r,t,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete;return Ve(new Re.FailedObserver({error:(0,Ae.newError)("Cannot run query in this transaction, because it has already been committed."),onError:i}),r,t,n)}},ROLLED_BACK:{commit:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:Ve(new Re.FailedObserver({error:(0,Ae.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:e}),"COMMIT",{},t),state:je.ROLLED_BACK}},rollback:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:Ve(new Re.FailedObserver({error:(0,Ae.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},t),state:je.ROLLED_BACK}},run:function(r,t,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete;return Ve(new Re.FailedObserver({error:(0,Ae.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:i}),r,t,n)}}};function $p(r,t,e,n,i,o){var u=t.getConnection().then(function(a){return i(),o.forEach(function(f){return f._cancel()}),Promise.all(o).then(function(f){if(a)return r?a.protocol().commitTransaction({beforeError:e,afterComplete:n}):a.protocol().rollbackTransaction({beforeError:e,afterComplete:n});throw(0,Ae.newError)("No connection available")})}).catch(function(a){return new Re.FailedObserver({error:a,onError:e})});return new Qp.default(u,r?"COMMIT":"ROLLBACK",{},t)}s($p,"finishTransaction");function Ve(r,t,e,n){return n===void 0&&(n=na.EMPTY_CONNECTION_HOLDER),new Qp.default(Promise.resolve(r),t,e,new na.ReadOnlyConnectionHolder(n||na.EMPTY_CONNECTION_HOLDER))}s(Ve,"newCompletedResult");Qe.default=uT});var aa=h(et=>{"use strict";var oa=et&&et.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function a(l){try{c(n.next(l))}catch(p){u(p)}}s(a,"fulfilled");function f(l){try{c(n.throw(l))}catch(p){u(p)}}s(f,"rejected");function c(l){l.done?o(l.value):i(l.value).then(a,f)}s(c,"step"),c((n=n.apply(r,t||[])).next())})},sa=et&&et.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(l){return f([c,l])}}function f(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},e_=et&&et.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(et,"__esModule",{value:!0});var ua=Mo(),aT=be(),Xe=fe(),cT=e_(Yo()),fT=e_(ia()),Xp=mn(),Je=Er(),lT=Vu(),Jp=Sr(),Pr=ko(),hT=function(){function r(t){var e=t.mode,n=t.connectionProvider,i=t.bookmark,o=t.database,u=t.config,a=t.reactive,f=t.fetchSize,c=t.impersonatedUser;this._mode=e,this._database=o,this._reactive=a,this._fetchSize=f,this._onDatabaseNameResolved=this._onDatabaseNameResolved.bind(this),this._readConnectionHolder=new Xp.ConnectionHolder({mode:Je.ACCESS_MODE_READ,database:o,bookmark:i,connectionProvider:n,impersonatedUser:c,onDatabaseNameResolved:this._onDatabaseNameResolved}),this._writeConnectionHolder=new Xp.ConnectionHolder({mode:Je.ACCESS_MODE_WRITE,database:o,bookmark:i,connectionProvider:n,impersonatedUser:c,onDatabaseNameResolved:this._onDatabaseNameResolved}),this._open=!0,this._hasTx=!1,this._impersonatedUser=c,this._lastBookmark=i||Jp.Bookmark.empty(),this._transactionExecutor=pT(u),this._onComplete=this._onCompleteCallback.bind(this),this._databaseNameResolved=this._database!==""}return s(r,"Session"),r.prototype.run=function(t,e,n){var i=this,o=(0,aT.validateQueryAndParameters)(t,e),u=o.validatedQuery,a=o.params,f=n?new Pr.TxConfig(n):Pr.TxConfig.empty();return this._run(u,a,function(c){return i._assertSessionIsOpen(),c.protocol().run(u,a,{bookmark:i._lastBookmark,txConfig:f,mode:i._mode,database:i._database,impersonatedUser:i._impersonatedUser,afterComplete:i._onComplete,reactive:i._reactive,fetchSize:i._fetchSize})})},r.prototype._run=function(t,e,n){var i=this._connectionHolderWithMode(this._mode),o;return this._open?!this._hasTx&&i.initializeConnection()?o=i.getConnection().then(function(u){return n(u)}).catch(function(u){return Promise.resolve(new ua.FailedObserver({error:u}))}):o=Promise.resolve(new ua.FailedObserver({error:(0,Xe.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")})):o=Promise.resolve(new ua.FailedObserver({error:(0,Xe.newError)("Cannot run query in a closed session.")})),new cT.default(o,t,e,i)},r.prototype._acquireConnection=function(t){return oa(this,void 0,void 0,function(){var e,n,i=this;return sa(this,function(o){return n=this._connectionHolderWithMode(this._mode),this._open?!this._hasTx&&n.initializeConnection()?e=n.getConnection().then(function(u){return t(u)}).then(function(u){return oa(i,void 0,void 0,function(){return sa(this,function(a){switch(a.label){case 0:return[4,n.releaseConnection()];case 1:return a.sent(),[2,u]}})})}):e=Promise.reject((0,Xe.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):e=Promise.reject((0,Xe.newError)("Cannot run query in a closed session.")),[2,e]})})},r.prototype.beginTransaction=function(t){var e=t,n=Pr.TxConfig.empty();return e&&(n=new Pr.TxConfig(e)),this._beginTransaction(this._mode,n)},r.prototype._beginTransaction=function(t,e){if(!this._open)throw(0,Xe.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,Xe.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var n=r._validateSessionMode(t),i=this._connectionHolderWithMode(n);i.initializeConnection(),this._hasTx=!0;var o=new fT.default({connectionHolder:i,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmark:this._updateBookmark.bind(this),onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize});return o._begin(this._lastBookmark,e),o},r.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,Xe.newError)("You cannot run more transactions on a closed session.")},r.prototype._transactionClosed=function(){this._hasTx=!1},r.prototype.lastBookmark=function(){return this._lastBookmark.values()},r.prototype.readTransaction=function(t,e){var n=new Pr.TxConfig(e);return this._runTransaction(Je.ACCESS_MODE_READ,n,t)},r.prototype.writeTransaction=function(t,e){var n=new Pr.TxConfig(e);return this._runTransaction(Je.ACCESS_MODE_WRITE,n,t)},r.prototype._runTransaction=function(t,e,n){var i=this;return this._transactionExecutor.execute(function(){return i._beginTransaction(t,e)},n)},r.prototype._onDatabaseNameResolved=function(t){if(!this._databaseNameResolved){var e=t||"";this._database=e,this._readConnectionHolder.setDatabase(e),this._writeConnectionHolder.setDatabase(e),this._databaseNameResolved=!0}},r.prototype._updateBookmark=function(t){t&&!t.isEmpty()&&(this._lastBookmark=t)},r.prototype.close=function(){return oa(this,void 0,void 0,function(){return sa(this,function(t){switch(t.label){case 0:return this._open?(this._open=!1,this._transactionExecutor.close(),[4,this._readConnectionHolder.close()]):[3,3];case 1:return t.sent(),[4,this._writeConnectionHolder.close()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},r.prototype._connectionHolderWithMode=function(t){if(t===Je.ACCESS_MODE_READ)return this._readConnectionHolder;if(t===Je.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,Xe.newError)("Unknown access mode: "+t)},r.prototype._onCompleteCallback=function(t){this._updateBookmark(new Jp.Bookmark(t.bookmark))},r._validateSessionMode=function(t){var e=t||Je.ACCESS_MODE_WRITE;if(e!==Je.ACCESS_MODE_READ&&e!==Je.ACCESS_MODE_WRITE)throw(0,Xe.newError)("Illegal session mode "+e);return e},r}();function pT(r){var t=r&&r.maxTransactionRetryTime?r.maxTransactionRetryTime:null;return new lT.TransactionExecutor(t)}s(pT,"_createTransactionExecutor");et.default=hT});var u_=h(Ne=>{"use strict";var n_=Ne&&Ne.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.WRITE=Ne.READ=Ne.Driver=void 0;var t_=Sr(),_T=Wu(),dT=n_(Ju()),Cr=Er(),vT=Zu(),r_=n_(aa()),bT=be(),yT=60*60*1e3,mT=1e3,OT=Cr.ACCESS_MODE_READ;Ne.READ=OT;var i_=Cr.ACCESS_MODE_WRITE;Ne.WRITE=i_;var gT=0,o_=function(){function r(t,e,n,i){e===void 0&&(e={}),i===void 0&&(i=s(function(o){return new r_.default(o)},"createSession")),ET(e),ST(e),this._id=gT++,this._meta=t,this._config=e,this._log=vT.Logger.create(e),this._createConnectionProvider=n,this._createSession=i,this._connectionProvider=null,this._afterConstruction()}return s(r,"Driver"),r.prototype.verifyConnectivity=function(t){var e=t===void 0?{}:t,n=e.database,i=n===void 0?"":n,o=this._getOrCreateConnectionProvider(),u=new _T.ConnectivityVerifier(o);return u.verify({database:i})},r.prototype.supportsMultiDb=function(){var t=this._getOrCreateConnectionProvider();return t.supportsMultiDb()},r.prototype.supportsTransactionConfig=function(){var t=this._getOrCreateConnectionProvider();return t.supportsTransactionConfig()},r.prototype.supportsUserImpersonation=function(){var t=this._getOrCreateConnectionProvider();return t.supportsUserImpersonation()},r.prototype._supportsRouting=function(){return this._meta.routing},r.prototype._isEncrypted=function(){return this._config.encrypted===bT.ENCRYPTION_ON},r.prototype._getTrust=function(){return this._config.trust},r.prototype.session=function(t){var e=t===void 0?{}:t,n=e.defaultAccessMode,i=n===void 0?i_:n,o=e.bookmarks,u=e.database,a=u===void 0?"":u,f=e.impersonatedUser,c=e.fetchSize;return this._newSession({defaultAccessMode:i,bookmarkOrBookmarks:o,database:a,reactive:!1,impersonatedUser:f,fetchSize:s_(c,this._config.fetchSize)})},r.prototype.close=function(){return this._log.info("Driver "+this._id+" closing"),this._connectionProvider?this._connectionProvider.close():Promise.resolve()},r.prototype._afterConstruction=function(){this._log.info(this._meta.typename+" driver "+this._id+" created for server address "+this._meta.address)},r.prototype._newSession=function(t){var e=t.defaultAccessMode,n=t.bookmarkOrBookmarks,i=t.database,o=t.reactive,u=t.impersonatedUser,a=t.fetchSize,f=r_.default._validateSessionMode(e),c=this._getOrCreateConnectionProvider(),l=n?new t_.Bookmark(n):t_.Bookmark.empty();return this._createSession({mode:f,database:i||"",connectionProvider:c,bookmark:l,config:this._config,reactive:o,impersonatedUser:u,fetchSize:a})},r.prototype._getOrCreateConnectionProvider=function(){return this._connectionProvider||(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,wT(this._config))),this._connectionProvider},r}();Ne.Driver=o_;function ST(r){var t=r.resolver;if(t&&typeof t!="function")throw new TypeError("Configured resolver should be a function. Got: "+t);return r}s(ST,"validateConfig");function ET(r){r.maxConnectionLifetime=ca(r.maxConnectionLifetime,yT),r.maxConnectionPoolSize=ca(r.maxConnectionPoolSize,Cr.DEFAULT_POOL_MAX_SIZE),r.connectionAcquisitionTimeout=ca(r.connectionAcquisitionTimeout,Cr.DEFAULT_POOL_ACQUISITION_TIMEOUT),r.fetchSize=s_(r.fetchSize,mT)}s(ET,"sanitizeConfig");function ca(r,t){var e=parseInt(r,10);return e>0||e===0?e:e<0?Number.MAX_SAFE_INTEGER:t}s(ca,"sanitizeIntValue");function s_(r,t){var e=parseInt(r,10);if(e>0||e===Cr.FETCH_ALL)return e;if(e===0||e<0)throw new Error("The fetch size can only be a positive value or "+Cr.FETCH_ALL+" for ALL. However fetchSize = "+e);return t}s(s_,"validateFetchSizeValue");function wT(r){return new dT.default(r.resolver)}s(wT,"createHostNameResolver");Ne.default=o_});var a_=h(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});var TT={basic:function(r,t,e){return e?{scheme:"basic",principal:r,credentials:t,realm:e}:{scheme:"basic",principal:r,credentials:t}},kerberos:function(r){return{scheme:"kerberos",principal:"",credentials:r}},bearer:function(r){return{scheme:"bearer",credentials:r}},custom:function(r,t,e,n,i){return i?{scheme:n,principal:r,credentials:t,realm:e,parameters:i}:{scheme:n,principal:r,credentials:t,realm:e}}};fa.default=TT});var f_=h(c_=>{"use strict";Object.defineProperty(c_,"__esModule",{value:!0})});var R=h(v=>{"use strict";var PT=v&&v.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),CT=v&&v.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Ir=v&&v.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&PT(t,r,e);return CT(t,r),t},Mt=v&&v.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(v,"__esModule",{value:!0});v.types=v.Driver=v.Session=v.Transaction=v.Connection=v.ConnectionProvider=v.Result=v.Stats=v.QueryStatistics=v.ProfiledPlan=v.Plan=v.Notification=v.ServerInfo=v.queryType=v.ResultSummary=v.Record=v.isPathSegment=v.PathSegment=v.isPath=v.Path=v.isUnboundRelationship=v.UnboundRelationship=v.isRelationship=v.Relationship=v.isNode=v.Node=v.Time=v.LocalTime=v.LocalDateTime=v.isTime=v.isLocalTime=v.isLocalDateTime=v.isDuration=v.isDateTime=v.isDate=v.Duration=v.DateTime=v.Date=v.Point=v.isPoint=v.internal=v.toString=v.toNumber=v.inSafeRange=v.isInt=v.int=v.Integer=v.error=v.Neo4jError=v.newError=void 0;v.auth=v.json=v.driver=void 0;var Dt=fe();Object.defineProperty(v,"newError",{enumerable:!0,get:function(){return Dt.newError}});Object.defineProperty(v,"Neo4jError",{enumerable:!0,get:function(){return Dt.Neo4jError}});var Ee=Ir(jt());v.Integer=Ee.default;Object.defineProperty(v,"int",{enumerable:!0,get:function(){return Ee.int}});Object.defineProperty(v,"isInt",{enumerable:!0,get:function(){return Ee.isInt}});Object.defineProperty(v,"inSafeRange",{enumerable:!0,get:function(){return Ee.inSafeRange}});Object.defineProperty(v,"toNumber",{enumerable:!0,get:function(){return Ee.toNumber}});Object.defineProperty(v,"toString",{enumerable:!0,get:function(){return Ee.toString}});var U=ap();Object.defineProperty(v,"Date",{enumerable:!0,get:function(){return U.Date}});Object.defineProperty(v,"DateTime",{enumerable:!0,get:function(){return U.DateTime}});Object.defineProperty(v,"Duration",{enumerable:!0,get:function(){return U.Duration}});Object.defineProperty(v,"isDate",{enumerable:!0,get:function(){return U.isDate}});Object.defineProperty(v,"isDateTime",{enumerable:!0,get:function(){return U.isDateTime}});Object.defineProperty(v,"isDuration",{enumerable:!0,get:function(){return U.isDuration}});Object.defineProperty(v,"isLocalDateTime",{enumerable:!0,get:function(){return U.isLocalDateTime}});Object.defineProperty(v,"isLocalTime",{enumerable:!0,get:function(){return U.isLocalTime}});Object.defineProperty(v,"isTime",{enumerable:!0,get:function(){return U.isTime}});Object.defineProperty(v,"LocalDateTime",{enumerable:!0,get:function(){return U.LocalDateTime}});Object.defineProperty(v,"LocalTime",{enumerable:!0,get:function(){return U.LocalTime}});Object.defineProperty(v,"Time",{enumerable:!0,get:function(){return U.Time}});var G=yp();Object.defineProperty(v,"Node",{enumerable:!0,get:function(){return G.Node}});Object.defineProperty(v,"isNode",{enumerable:!0,get:function(){return G.isNode}});Object.defineProperty(v,"Relationship",{enumerable:!0,get:function(){return G.Relationship}});Object.defineProperty(v,"isRelationship",{enumerable:!0,get:function(){return G.isRelationship}});Object.defineProperty(v,"UnboundRelationship",{enumerable:!0,get:function(){return G.UnboundRelationship}});Object.defineProperty(v,"isUnboundRelationship",{enumerable:!0,get:function(){return G.isUnboundRelationship}});Object.defineProperty(v,"Path",{enumerable:!0,get:function(){return G.Path}});Object.defineProperty(v,"isPath",{enumerable:!0,get:function(){return G.isPath}});Object.defineProperty(v,"PathSegment",{enumerable:!0,get:function(){return G.PathSegment}});Object.defineProperty(v,"isPathSegment",{enumerable:!0,get:function(){return G.isPathSegment}});var l_=Mt(Op());v.Record=l_.default;var Zo=Ep();Object.defineProperty(v,"isPoint",{enumerable:!0,get:function(){return Zo.isPoint}});Object.defineProperty(v,"Point",{enumerable:!0,get:function(){return Zo.Point}});var X=Ir(Uu());v.ResultSummary=X.default;Object.defineProperty(v,"queryType",{enumerable:!0,get:function(){return X.queryType}});Object.defineProperty(v,"ServerInfo",{enumerable:!0,get:function(){return X.ServerInfo}});Object.defineProperty(v,"Notification",{enumerable:!0,get:function(){return X.Notification}});Object.defineProperty(v,"Plan",{enumerable:!0,get:function(){return X.Plan}});Object.defineProperty(v,"ProfiledPlan",{enumerable:!0,get:function(){return X.ProfiledPlan}});Object.defineProperty(v,"QueryStatistics",{enumerable:!0,get:function(){return X.QueryStatistics}});Object.defineProperty(v,"Stats",{enumerable:!0,get:function(){return X.Stats}});var h_=Mt(Yo());v.Result=h_.default;var IT=Mt(Zp());v.ConnectionProvider=IT.default;var p_=Mt(Gp());v.Connection=p_.default;var __=Mt(ia());v.Transaction=__.default;var d_=Mt(aa());v.Session=d_.default;var la=Ir(u_()),v_=la;v.Driver=la.default;v.driver=v_;var b_=Mt(a_());v.auth=b_.default;var y_=Ir(f_());v.types=y_;var m_=Ir(qo());v.json=m_;var O_=Ir(ea());v.internal=O_;var g_={SERVICE_UNAVAILABLE:Dt.SERVICE_UNAVAILABLE,SESSION_EXPIRED:Dt.SESSION_EXPIRED,PROTOCOL_ERROR:Dt.PROTOCOL_ERROR};v.error=g_;var RT={newError:Dt.newError,Neo4jError:Dt.Neo4jError,error:g_,Integer:Ee.default,int:Ee.int,isInt:Ee.isInt,inSafeRange:Ee.inSafeRange,toNumber:Ee.toNumber,toString:Ee.toString,internal:O_,isPoint:Zo.isPoint,Point:Zo.Point,Date:U.Date,DateTime:U.DateTime,Duration:U.Duration,isDate:U.isDate,isDateTime:U.isDateTime,isDuration:U.isDuration,isLocalDateTime:U.isLocalDateTime,isLocalTime:U.isLocalTime,isTime:U.isTime,LocalDateTime:U.LocalDateTime,LocalTime:U.LocalTime,Time:U.Time,Node:G.Node,isNode:G.isNode,Relationship:G.Relationship,isRelationship:G.isRelationship,UnboundRelationship:G.UnboundRelationship,isUnboundRelationship:G.isUnboundRelationship,Path:G.Path,isPath:G.isPath,PathSegment:G.PathSegment,isPathSegment:G.isPathSegment,Record:l_.default,ResultSummary:X.default,queryType:X.queryType,ServerInfo:X.ServerInfo,Notification:X.Notification,Plan:X.Plan,ProfiledPlan:X.ProfiledPlan,QueryStatistics:X.QueryStatistics,Stats:X.Stats,Result:h_.default,Transaction:__.default,Session:d_.default,Driver:la.default,Connection:p_.default,types:y_,driver:v_,json:m_,auth:b_.default};v.default=RT});var Rr=h(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});function AT(r){return typeof r=="function"}s(AT,"isFunction");ha.isFunction=AT});var En=h(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});var pa=!1;_a.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var t=new Error;console.warn(`DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: 
`+t.stack)}else pa&&console.log("RxJS: Back to a better error behavior. Thank you. <3");pa=r},get useDeprecatedSynchronousErrorHandling(){return pa}}});var Go=h(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});function jT(r){setTimeout(function(){throw r},0)}s(jT,"hostReportError");da.hostReportError=jT});var ba=h(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});var NT=En(),qT=Go();va.empty={closed:!0,next:function(r){},error:function(r){if(NT.config.useDeprecatedSynchronousErrorHandling)throw r;qT.hostReportError(r)},complete:function(){}}});var ne=h(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.isArray=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}()});var $o=h(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});function xT(r){return r!==null&&typeof r=="object"}s(xT,"isObject");ma.isObject=xT});var ga=h(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});var DT=function(){function r(t){return Error.call(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,n){return n+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t,this}return s(r,"UnsubscriptionErrorImpl"),r.prototype=Object.create(Error.prototype),r}();Oa.UnsubscriptionError=DT});var $=h(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});var MT=ne(),kT=$o(),UT=Rr(),Ko=ga(),LT=function(){function r(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return s(r,"Subscription"),r.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this,n=e._parentOrParents,i=e._ctorUnsubscribe,o=e._unsubscribe,u=e._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof r)n.remove(this);else if(n!==null)for(var a=0;a<n.length;++a){var f=n[a];f.remove(this)}if(UT.isFunction(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(p){t=p instanceof Ko.UnsubscriptionError?S_(p.errors):[p]}}if(MT.isArray(u))for(var a=-1,c=u.length;++a<c;){var l=u[a];if(kT.isObject(l))try{l.unsubscribe()}catch(_){t=t||[],_ instanceof Ko.UnsubscriptionError?t=t.concat(S_(_.errors)):t.push(_)}}if(t)throw new Ko.UnsubscriptionError(t)}},r.prototype.add=function(t){var e=t;if(!t)return r.EMPTY;switch(typeof t){case"function":e=new r(t);case"object":if(e===this||e.closed||typeof e.unsubscribe!="function")return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof r)){var n=e;e=new r,e._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=e._parentOrParents;if(i===null)e._parentOrParents=this;else if(i instanceof r){if(i===this)return e;e._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return e;var o=this._subscriptions;return o===null?this._subscriptions=[e]:o.push(e),e},r.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}},r.EMPTY=function(t){return t.closed=!0,t}(new r),r}();Sa.Subscription=LT;function S_(r){return r.reduce(function(t,e){return t.concat(e instanceof Ko.UnsubscriptionError?e.errors:e)},[])}s(S_,"flattenUnsubscriptionErrors")});var Qo=h(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}();wn.$$rxSubscriber=wn.rxSubscriber});var w=h(jr=>{"use strict";var w_=jr&&jr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(jr,"__esModule",{value:!0});var E_=Rr(),Ea=ba(),FT=$(),BT=Qo(),Ar=En(),Xo=Go(),T_=function(r){w_(t,r);function t(e,n,i){var o=r.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=Ea.empty;break;case 1:if(!e){o.destination=Ea.empty;break}if(typeof e=="object"){e instanceof t?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(o)):(o.syncErrorThrowable=!0,o.destination=new wa(o,e));break}default:o.syncErrorThrowable=!0,o.destination=new wa(o,e,n,i);break}return o}return s(t,"Subscriber"),t.prototype[BT.rxSubscriber]=function(){return this},t.create=function(e,n,i){var o=new t(e,n,i);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(FT.Subscription);jr.Subscriber=T_;var wa=function(r){w_(t,r);function t(e,n,i,o){var u=r.call(this)||this;u._parentSubscriber=e;var a,f=u;return E_.isFunction(n)?a=n:n&&(a=n.next,i=n.error,o=n.complete,n!==Ea.empty&&(f=Object.create(n),E_.isFunction(f.unsubscribe)&&u.add(f.unsubscribe.bind(f)),f.unsubscribe=u.unsubscribe.bind(u))),u._context=f,u._next=a,u._error=i,u._complete=o,u}return s(t,"SafeSubscriber"),t.prototype.next=function(e){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!Ar.config.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,e):this.__tryOrSetError(n,this._next,e)&&this.unsubscribe()}},t.prototype.error=function(e){if(!this.isStopped){var n=this._parentSubscriber,i=Ar.config.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,e),this.unsubscribe()):(this.__tryOrSetError(n,this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=e,n.syncErrorThrown=!0):Xo.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;Xo.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=s(function(){return e._complete.call(e._context)},"wrappedComplete");!Ar.config.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,n){try{e.call(this._context,n)}catch(i){if(this.unsubscribe(),Ar.config.useDeprecatedSynchronousErrorHandling)throw i;Xo.hostReportError(i)}},t.prototype.__tryOrSetError=function(e,n,i){if(!Ar.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(o){return Ar.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=o,e.syncErrorThrown=!0,!0):(Xo.hostReportError(o),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(T_);jr.SafeSubscriber=wa});var Jo=h(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});var VT=w();function WT(r){for(;r;){var t=r,e=t.closed,n=t.destination,i=t.isStopped;if(e||i)return!1;n&&n instanceof VT.Subscriber?r=n:r=null}return!0}s(WT,"canReportError");Ta.canReportError=WT});var C_=h(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});var Pa=w(),P_=Qo(),HT=ba();function zT(r,t,e){if(r){if(r instanceof Pa.Subscriber)return r;if(r[P_.rxSubscriber])return r[P_.rxSubscriber]()}return!r&&!t&&!e?new Pa.Subscriber(HT.empty):new Pa.Subscriber(r,t,e)}s(zT,"toSubscriber");Ca.toSubscriber=zT});var kt=h(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}()});var yt=h(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});function YT(r){return r}s(YT,"identity");Ra.identity=YT});var ts=h(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});var ZT=yt();function GT(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return I_(r)}s(GT,"pipe");es.pipe=GT;function I_(r){return r.length===0?ZT.identity:r.length===1?r[0]:s(function(e){return r.reduce(function(n,i){return i(n)},e)},"piped")}s(I_,"pipeFromArray");es.pipeFromArray=I_});var j=h(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});var $T=Jo(),KT=C_(),QT=kt(),XT=ts(),rs=En(),JT=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return s(r,"Observable"),r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,n){var i=this.operator,o=KT.toSubscriber(t,e,n);if(i?o.add(i.call(o,this.source)):o.add(this.source||rs.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),rs.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){rs.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),$T.canReportError(t)?t.error(e):console.warn(e)}},r.prototype.forEach=function(t,e){var n=this;return e=R_(e),new e(function(i,o){var u;u=n.subscribe(function(a){try{t(a)}catch(f){o(f),u&&u.unsubscribe()}},o,i)})},r.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},r.prototype[QT.observable]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?this:XT.pipeFromArray(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=R_(t),new t(function(n,i){var o;e.subscribe(function(u){return o=u},function(u){return i(u)},function(){return n(o)})})},r.create=function(t){return new r(t)},r}();Aa.Observable=JT;function R_(r){if(r||(r=rs.config.Promise||Promise),!r)throw new Error("no Promise impl found");return r}s(R_,"getPromiseCtor")});var Tn=h(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});var eP=function(){function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return s(r,"ObjectUnsubscribedErrorImpl"),r.prototype=Object.create(Error.prototype),r}();ja.ObjectUnsubscribedError=eP});var Na=h(Pn=>{"use strict";var tP=Pn&&Pn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Pn,"__esModule",{value:!0});var rP=$(),nP=function(r){tP(t,r);function t(e,n){var i=r.call(this)||this;return i.subject=e,i.subscriber=n,i.closed=!1,i}return s(t,"SubjectSubscription"),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,n=e.observers;if(this.subject=null,!(!n||n.length===0||e.isStopped||e.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},t}(rP.Subscription);Pn.SubjectSubscription=nP});var J=h(Ut=>{"use strict";var Da=Ut&&Ut.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ut,"__esModule",{value:!0});var A_=j(),iP=w(),qa=$(),Cn=Tn(),oP=Na(),sP=Qo(),j_=function(r){Da(t,r);function t(e){var n=r.call(this,e)||this;return n.destination=e,n}return s(t,"SubjectSubscriber"),t}(iP.Subscriber);Ut.SubjectSubscriber=j_;var N_=function(r){Da(t,r);function t(){var e=r.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return s(t,"Subject"),t.prototype[sP.rxSubscriber]=function(){return new j_(this)},t.prototype.lift=function(e){var n=new xa(this,this);return n.operator=e,n},t.prototype.next=function(e){if(this.closed)throw new Cn.ObjectUnsubscribedError;if(!this.isStopped)for(var n=this.observers,i=n.length,o=n.slice(),u=0;u<i;u++)o[u].next(e)},t.prototype.error=function(e){if(this.closed)throw new Cn.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var n=this.observers,i=n.length,o=n.slice(),u=0;u<i;u++)o[u].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new Cn.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),o=0;o<n;o++)i[o].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(e){if(this.closed)throw new Cn.ObjectUnsubscribedError;return r.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){if(this.closed)throw new Cn.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),qa.Subscription.EMPTY):this.isStopped?(e.complete(),qa.Subscription.EMPTY):(this.observers.push(e),new oP.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new A_.Observable;return e.source=this,e},t.create=function(e,n){return new xa(e,n)},t}(A_.Observable);Ut.Subject=N_;var xa=function(r){Da(t,r);function t(e,n){var i=r.call(this)||this;return i.destination=e,i.source=n,i}return s(t,"AnonymousSubject"),t.prototype.next=function(e){var n=this.destination;n&&n.next&&n.next(e)},t.prototype.error=function(e){var n=this.destination;n&&n.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var n=this.source;return n?this.source.subscribe(e):qa.Subscription.EMPTY},t}(N_);Ut.AnonymousSubject=xa});var ns=h(In=>{"use strict";var uP=In&&In.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(In,"__esModule",{value:!0});var aP=w();function cP(){return s(function(t){return t.lift(new fP(t))},"refCountOperatorFunction")}s(cP,"refCount");In.refCount=cP;var fP=function(){function r(t){this.connectable=t}return s(r,"RefCountOperator"),r.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var i=new lP(t,n),o=e.subscribe(i);return i.closed||(i.connection=n.connect()),o},r}(),lP=function(r){uP(t,r);function t(e,n){var i=r.call(this,e)||this;return i.connectable=n,i}return s(t,"RefCountSubscriber"),t.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var n=e._refCount;if(n<=0){this.connection=null;return}if(e._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,o=e._connection;this.connection=null,o&&(!i||o===i)&&o.unsubscribe()},t}(aP.Subscriber)});var ka=h(Nr=>{"use strict";var Ma=Nr&&Nr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Nr,"__esModule",{value:!0});var hP=J(),pP=j(),_P=w(),q_=$(),dP=ns(),x_=function(r){Ma(t,r);function t(e,n){var i=r.call(this)||this;return i.source=e,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return s(t,"ConnectableObservable"),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new q_.Subscription,e.add(this.source.subscribe(new vP(this.getSubject(),this))),e.closed&&(this._connection=null,e=q_.Subscription.EMPTY)),e},t.prototype.refCount=function(){return dP.refCount()(this)},t}(pP.Observable);Nr.ConnectableObservable=x_;Nr.connectableObservableDescriptor=function(){var r=x_.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:r._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}}}();var vP=function(r){Ma(t,r);function t(e,n){var i=r.call(this,e)||this;return i.connectable=n,i}return s(t,"ConnectableSubscriber"),t.prototype._error=function(e){this._unsubscribe(),r.prototype._error.call(this,e)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}},t}(hP.SubjectSubscriber),bz=function(){function r(t){this.connectable=t}return s(r,"RefCountOperator"),r.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var i=new bP(t,n),o=e.subscribe(i);return i.closed||(i.connection=n.connect()),o},r}(),bP=function(r){Ma(t,r);function t(e,n){var i=r.call(this,e)||this;return i.connectable=n,i}return s(t,"RefCountSubscriber"),t.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var n=e._refCount;if(n<=0){this.connection=null;return}if(e._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,o=e._connection;this.connection=null,o&&(!i||o===i)&&o.unsubscribe()},t}(_P.Subscriber)});var La=h(qr=>{"use strict";var is=qr&&qr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(qr,"__esModule",{value:!0});var D_=w(),M_=$(),yP=j(),mP=J();function OP(r,t,e,n){return function(i){return i.lift(new gP(r,t,e,n))}}s(OP,"groupBy");qr.groupBy=OP;var gP=function(){function r(t,e,n,i){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=i}return s(r,"GroupByOperator"),r.prototype.call=function(t,e){return e.subscribe(new SP(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},r}(),SP=function(r){is(t,r);function t(e,n,i,o,u){var a=r.call(this,e)||this;return a.keySelector=n,a.elementSelector=i,a.durationSelector=o,a.subjectSelector=u,a.groups=null,a.attemptedToUnsubscribe=!1,a.count=0,a}return s(t,"GroupBySubscriber"),t.prototype._next=function(e){var n;try{n=this.keySelector(e)}catch(i){this.error(i);return}this._group(e,n)},t.prototype._group=function(e,n){var i=this.groups;i||(i=this.groups=new Map);var o=i.get(n),u;if(this.elementSelector)try{u=this.elementSelector(e)}catch(c){this.error(c)}else u=e;if(!o){o=this.subjectSelector?this.subjectSelector():new mP.Subject,i.set(n,o);var a=new Ua(n,o,this);if(this.destination.next(a),this.durationSelector){var f=void 0;try{f=this.durationSelector(new Ua(n,o))}catch(c){this.error(c);return}this.add(f.subscribe(new EP(n,o,this)))}}o.closed||o.next(u)},t.prototype._error=function(e){var n=this.groups;n&&(n.forEach(function(i,o){i.error(e)}),n.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach(function(n,i){n.complete()}),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&r.prototype.unsubscribe.call(this))},t}(D_.Subscriber),EP=function(r){is(t,r);function t(e,n,i){var o=r.call(this,n)||this;return o.key=e,o.group=n,o.parent=i,o}return s(t,"GroupDurationSubscriber"),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this,n=e.parent,i=e.key;this.key=this.parent=null,n&&n.removeGroup(i)},t}(D_.Subscriber),Ua=function(r){is(t,r);function t(e,n,i){var o=r.call(this)||this;return o.key=e,o.groupSubject=n,o.refCountSubscription=i,o}return s(t,"GroupedObservable"),t.prototype._subscribe=function(e){var n=new M_.Subscription,i=this,o=i.refCountSubscription,u=i.groupSubject;return o&&!o.closed&&n.add(new wP(o)),n.add(u.subscribe(e)),n},t}(yP.Observable);qr.GroupedObservable=Ua;var wP=function(r){is(t,r);function t(e){var n=r.call(this)||this;return n.parent=e,e.count++,n}return s(t,"InnerRefCountSubscription"),t.prototype.unsubscribe=function(){var e=this.parent;!e.closed&&!this.closed&&(r.prototype.unsubscribe.call(this),e.count-=1,e.count===0&&e.attemptedToUnsubscribe&&e.unsubscribe())},t}(M_.Subscription)});var Fa=h(Rn=>{"use strict";var TP=Rn&&Rn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Rn,"__esModule",{value:!0});var PP=J(),CP=Tn(),IP=function(r){TP(t,r);function t(e){var n=r.call(this)||this;return n._value=e,n}return s(t,"BehaviorSubject"),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(e){var n=r.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new CP.ObjectUnsubscribedError;return this._value},t.prototype.next=function(e){r.prototype.next.call(this,this._value=e)},t}(PP.Subject);Rn.BehaviorSubject=IP});var k_=h(An=>{"use strict";var RP=An&&An.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(An,"__esModule",{value:!0});var AP=$(),jP=function(r){RP(t,r);function t(e,n){return r.call(this)||this}return s(t,"Action"),t.prototype.schedule=function(e,n){return n===void 0&&(n=0),this},t}(AP.Subscription);An.Action=jP});var xr=h(jn=>{"use strict";var NP=jn&&jn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(jn,"__esModule",{value:!0});var qP=k_(),xP=function(r){NP(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.pending=!1,i}return s(t,"AsyncAction"),t.prototype.schedule=function(e,n){if(n===void 0&&(n=0),this.closed)return this;this.state=e;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(o,this.id,n),this},t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),setInterval(e.flush.bind(e,this),i)},t.prototype.recycleAsyncId=function(e,n,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return n;clearInterval(n)},t.prototype.execute=function(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,n){var i=!1,o=void 0;try{this.work(e)}catch(u){i=!0,o=!!u&&u||new Error(u)}if(i)return this.unsubscribe(),o},t.prototype._unsubscribe=function(){var e=this.id,n=this.scheduler,i=n.actions,o=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,o!==-1&&i.splice(o,1),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null},t}(qP.Action);jn.AsyncAction=xP});var U_=h(Nn=>{"use strict";var DP=Nn&&Nn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Nn,"__esModule",{value:!0});var MP=xr(),kP=function(r){DP(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i}return s(t,"QueueAction"),t.prototype.schedule=function(e,n){return n===void 0&&(n=0),n>0?r.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},t.prototype.execute=function(e,n){return n>0||this.closed?r.prototype.execute.call(this,e,n):this._execute(e,n)},t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?r.prototype.requestAsyncId.call(this,e,n,i):e.flush(this)},t}(MP.AsyncAction);Nn.QueueAction=kP});var Va=h(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});var UP=function(){function r(t,e){e===void 0&&(e=r.now),this.SchedulerAction=t,this.now=e}return s(r,"Scheduler"),r.prototype.schedule=function(t,e,n){return e===void 0&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},r.now=function(){return Date.now()},r}();Ba.Scheduler=UP});var Dr=h(qn=>{"use strict";var LP=qn&&qn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(qn,"__esModule",{value:!0});var L_=Va(),FP=function(r){LP(t,r);function t(e,n){n===void 0&&(n=L_.Scheduler.now);var i=r.call(this,e,function(){return t.delegate&&t.delegate!==i?t.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return s(t,"AsyncScheduler"),t.prototype.schedule=function(e,n,i){return n===void 0&&(n=0),t.delegate&&t.delegate!==this?t.delegate.schedule(e,n,i):r.prototype.schedule.call(this,e,n,i)},t.prototype.flush=function(e){var n=this.actions;if(this.active){n.push(e);return}var i;this.active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this.active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}},t}(L_.Scheduler);qn.AsyncScheduler=FP});var F_=h(xn=>{"use strict";var BP=xn&&xn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(xn,"__esModule",{value:!0});var VP=Dr(),WP=function(r){BP(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"QueueScheduler"),t}(VP.AsyncScheduler);xn.QueueScheduler=WP});var Wa=h(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});var HP=U_(),zP=F_();Dn.queueScheduler=new zP.QueueScheduler(HP.QueueAction);Dn.queue=Dn.queueScheduler});var qe=h(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});var B_=j();Mn.EMPTY=new B_.Observable(function(r){return r.complete()});function YP(r){return r?ZP(r):Mn.EMPTY}s(YP,"empty");Mn.empty=YP;function ZP(r){return new B_.Observable(function(t){return r.schedule(function(){return t.complete()})})}s(ZP,"emptyScheduled")});var xe=h(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});function GP(r){return r&&typeof r.schedule=="function"}s(GP,"isScheduler");Ha.isScheduler=GP});var Ya=h(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.subscribeToArray=function(r){return function(t){for(var e=0,n=r.length;e<n&&!t.closed;e++)t.next(r[e]);t.complete()}}});var os=h(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});var $P=j(),KP=$();function QP(r,t){return new $P.Observable(function(e){var n=new KP.Subscription,i=0;return n.add(t.schedule(function(){if(i===r.length){e.complete();return}e.next(r[i++]),e.closed||n.add(this.schedule())})),n})}s(QP,"scheduleArray");Za.scheduleArray=QP});var Mr=h(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});var XP=j(),JP=Ya(),eC=os();function tC(r,t){return t?eC.scheduleArray(r,t):new XP.Observable(JP.subscribeToArray(r))}s(tC,"fromArray");Ga.fromArray=tC});var kn=h($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});var rC=xe(),nC=Mr(),iC=os();function oC(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return rC.isScheduler(e)?(r.pop(),iC.scheduleArray(r,e)):nC.fromArray(r)}s(oC,"of");$a.of=oC});var ss=h(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});var V_=j();function sC(r,t){return t?new V_.Observable(function(e){return t.schedule(uC,0,{error:r,subscriber:e})}):new V_.Observable(function(e){return e.error(r)})}s(sC,"throwError");Ka.throwError=sC;function uC(r){var t=r.error,e=r.subscriber;e.error(t)}s(uC,"dispatch")});var Ln=h(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});var aC=qe(),cC=kn(),fC=ss(),lC;(function(r){r.NEXT="N",r.ERROR="E",r.COMPLETE="C"})(lC=Un.NotificationKind||(Un.NotificationKind={}));var hC=function(){function r(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue=t==="N"}return s(r,"Notification"),r.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},r.prototype.do=function(t,e,n){var i=this.kind;switch(i){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},r.prototype.accept=function(t,e,n){return t&&typeof t.next=="function"?this.observe(t):this.do(t,e,n)},r.prototype.toObservable=function(){var t=this.kind;switch(t){case"N":return cC.of(this.value);case"E":return fC.throwError(this.error);case"C":return aC.empty()}throw new Error("unexpected notification kind value")},r.createNext=function(t){return typeof t<"u"?new r("N",t):r.undefinedValueNotification},r.createError=function(t){return new r("E",void 0,t)},r.createComplete=function(){return r.completeNotification},r.completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r}();Un.Notification=hC});var Xa=h(mt=>{"use strict";var pC=mt&&mt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mt,"__esModule",{value:!0});var _C=w(),Qa=Ln();function dC(r,t){return t===void 0&&(t=0),s(function(n){return n.lift(new W_(r,t))},"observeOnOperatorFunction")}s(dC,"observeOn");mt.observeOn=dC;var W_=function(){function r(t,e){e===void 0&&(e=0),this.scheduler=t,this.delay=e}return s(r,"ObserveOnOperator"),r.prototype.call=function(t,e){return e.subscribe(new H_(t,this.scheduler,this.delay))},r}();mt.ObserveOnOperator=W_;var H_=function(r){pC(t,r);function t(e,n,i){i===void 0&&(i=0);var o=r.call(this,e)||this;return o.scheduler=n,o.delay=i,o}return s(t,"ObserveOnSubscriber"),t.dispatch=function(e){var n=e.notification,i=e.destination;n.observe(i),this.unsubscribe()},t.prototype.scheduleMessage=function(e){var n=this.destination;n.add(this.scheduler.schedule(t.dispatch,this.delay,new z_(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Qa.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Qa.Notification.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Qa.Notification.createComplete()),this.unsubscribe()},t}(_C.Subscriber);mt.ObserveOnSubscriber=H_;var z_=function(){function r(t,e){this.notification=t,this.destination=e}return s(r,"ObserveOnMessage"),r}();mt.ObserveOnMessage=z_});var us=h(Fn=>{"use strict";var vC=Fn&&Fn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Fn,"__esModule",{value:!0});var bC=J(),yC=Wa(),mC=$(),OC=Xa(),gC=Tn(),SC=Na(),EC=function(r){vC(t,r);function t(e,n,i){e===void 0&&(e=Number.POSITIVE_INFINITY),n===void 0&&(n=Number.POSITIVE_INFINITY);var o=r.call(this)||this;return o.scheduler=i,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=e<1?1:e,o._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return s(t,"ReplaySubject"),t.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}r.prototype.next.call(this,e)},t.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new wC(this._getNow(),e)),this._trimBufferThenGetEvents()),r.prototype.next.call(this,e)},t.prototype._subscribe=function(e){var n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,u=i.length,a;if(this.closed)throw new gC.ObjectUnsubscribedError;if(this.isStopped||this.hasError?a=mC.Subscription.EMPTY:(this.observers.push(e),a=new SC.SubjectSubscription(this,e)),o&&e.add(e=new OC.ObserveOnSubscriber(e,o)),n)for(var f=0;f<u&&!e.closed;f++)e.next(i[f]);else for(var f=0;f<u&&!e.closed;f++)e.next(i[f].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),a},t.prototype._getNow=function(){return(this.scheduler||yC.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),n=this._bufferSize,i=this._windowTime,o=this._events,u=o.length,a=0;a<u&&!(e-o[a].time<i);)a++;return u>n&&(a=Math.max(a,u-n)),a>0&&o.splice(0,a),o},t}(bC.Subject);Fn.ReplaySubject=EC;var wC=function(){function r(t,e){this.time=t,this.value=e}return s(r,"ReplayEvent"),r}()});var Vn=h(Bn=>{"use strict";var TC=Bn&&Bn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Bn,"__esModule",{value:!0});var PC=J(),Y_=$(),CC=function(r){TC(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return s(t,"AsyncSubject"),t.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),Y_.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),Y_.Subscription.EMPTY):r.prototype._subscribe.call(this,e)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(e){this.hasCompleted||r.prototype.error.call(this,e)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&r.prototype.next.call(this,this.value),r.prototype.complete.call(this)},t}(PC.Subject);Bn.AsyncSubject=CC});var G_=h(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});var IC=1,RC=function(){return Promise.resolve()}(),as={};function Z_(r){return r in as?(delete as[r],!0):!1}s(Z_,"findAndClearHandle");cs.Immediate={setImmediate:function(r){var t=IC++;return as[t]=!0,RC.then(function(){return Z_(t)&&r()}),t},clearImmediate:function(r){Z_(r)}};cs.TestTools={pending:function(){return Object.keys(as).length}}});var K_=h(Wn=>{"use strict";var AC=Wn&&Wn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Wn,"__esModule",{value:!0});var $_=G_(),jC=xr(),NC=function(r){AC(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i}return s(t,"AsapAction"),t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),i!==null&&i>0?r.prototype.requestAsyncId.call(this,e,n,i):(e.actions.push(this),e.scheduled||(e.scheduled=$_.Immediate.setImmediate(e.flush.bind(e,null))))},t.prototype.recycleAsyncId=function(e,n,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,e,n,i);e.actions.length===0&&($_.Immediate.clearImmediate(n),e.scheduled=void 0)},t}(jC.AsyncAction);Wn.AsapAction=NC});var Q_=h(Hn=>{"use strict";var qC=Hn&&Hn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Hn,"__esModule",{value:!0});var xC=Dr(),DC=function(r){qC(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"AsapScheduler"),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var n=this.actions,i,o=-1,u=n.length;e=e||n.shift();do if(i=e.execute(e.state,e.delay))break;while(++o<u&&(e=n.shift()));if(this.active=!1,i){for(;++o<u&&(e=n.shift());)e.unsubscribe();throw i}},t}(xC.AsyncScheduler);Hn.AsapScheduler=DC});var Ja=h(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});var MC=K_(),kC=Q_();zn.asapScheduler=new kC.AsapScheduler(MC.AsapAction);zn.asap=zn.asapScheduler});var ie=h(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});var UC=xr(),LC=Dr();Yn.asyncScheduler=new LC.AsyncScheduler(UC.AsyncAction);Yn.async=Yn.asyncScheduler});var X_=h(Zn=>{"use strict";var FC=Zn&&Zn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Zn,"__esModule",{value:!0});var BC=xr(),VC=function(r){FC(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i}return s(t,"AnimationFrameAction"),t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),i!==null&&i>0?r.prototype.requestAsyncId.call(this,e,n,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},t.prototype.recycleAsyncId=function(e,n,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,e,n,i);e.actions.length===0&&(cancelAnimationFrame(n),e.scheduled=void 0)},t}(BC.AsyncAction);Zn.AnimationFrameAction=VC});var J_=h(Gn=>{"use strict";var WC=Gn&&Gn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Gn,"__esModule",{value:!0});var HC=Dr(),zC=function(r){WC(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"AnimationFrameScheduler"),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var n=this.actions,i,o=-1,u=n.length;e=e||n.shift();do if(i=e.execute(e.state,e.delay))break;while(++o<u&&(e=n.shift()));if(this.active=!1,i){for(;++o<u&&(e=n.shift());)e.unsubscribe();throw i}},t}(HC.AsyncScheduler);Gn.AnimationFrameScheduler=zC});var ed=h($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});var YC=X_(),ZC=J_();$n.animationFrameScheduler=new ZC.AnimationFrameScheduler(YC.AnimationFrameAction);$n.animationFrame=$n.animationFrameScheduler});var nd=h(kr=>{"use strict";var td=kr&&kr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(kr,"__esModule",{value:!0});var GC=xr(),$C=Dr(),KC=function(r){td(t,r);function t(e,n){e===void 0&&(e=rd),n===void 0&&(n=Number.POSITIVE_INFINITY);var i=r.call(this,e,function(){return i.frame})||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return s(t,"VirtualTimeScheduler"),t.prototype.flush=function(){for(var e=this,n=e.actions,i=e.maxFrames,o,u;(u=n[0])&&u.delay<=i&&(n.shift(),this.frame=u.delay,!(o=u.execute(u.state,u.delay))););if(o){for(;u=n.shift();)u.unsubscribe();throw o}},t.frameTimeFactor=10,t}($C.AsyncScheduler);kr.VirtualTimeScheduler=KC;var rd=function(r){td(t,r);function t(e,n,i){i===void 0&&(i=e.index+=1);var o=r.call(this,e,n)||this;return o.scheduler=e,o.work=n,o.index=i,o.active=!0,o.index=e.index=i,o}return s(t,"VirtualAction"),t.prototype.schedule=function(e,n){if(n===void 0&&(n=0),!this.id)return r.prototype.schedule.call(this,e,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(e,n)},t.prototype.requestAsyncId=function(e,n,i){i===void 0&&(i=0),this.delay=e.frame+i;var o=e.actions;return o.push(this),o.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,n,i){i===void 0&&(i=0)},t.prototype._execute=function(e,n){if(this.active===!0)return r.prototype._execute.call(this,e,n)},t.sortActions=function(e,n){return e.delay===n.delay?e.index===n.index?0:e.index>n.index?1:-1:e.delay>n.delay?1:-1},t}(GC.AsyncAction);kr.VirtualAction=rd});var fs=h(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});function QC(){}s(QC,"noop");ec.noop=QC});var id=h(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});var XC=j();function JC(r){return!!r&&(r instanceof XC.Observable||typeof r.lift=="function"&&typeof r.subscribe=="function")}s(JC,"isObservable");tc.isObservable=JC});var Ur=h(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});var eI=function(){function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return s(r,"ArgumentOutOfRangeErrorImpl"),r.prototype=Object.create(Error.prototype),r}();rc.ArgumentOutOfRangeError=eI});var Lr=h(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});var tI=function(){function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return s(r,"EmptyErrorImpl"),r.prototype=Object.create(Error.prototype),r}();nc.EmptyError=tI});var oc=h(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});var rI=function(){function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return s(r,"TimeoutErrorImpl"),r.prototype=Object.create(Error.prototype),r}();ic.TimeoutError=rI});var me=h(Fr=>{"use strict";var nI=Fr&&Fr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Fr,"__esModule",{value:!0});var iI=w();function oI(r,t){return s(function(n){if(typeof r!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new od(r,t))},"mapOperation")}s(oI,"map");Fr.map=oI;var od=function(){function r(t,e){this.project=t,this.thisArg=e}return s(r,"MapOperator"),r.prototype.call=function(t,e){return e.subscribe(new sI(t,this.project,this.thisArg))},r}();Fr.MapOperator=od;var sI=function(r){nI(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=i||o,o}return s(t,"MapSubscriber"),t.prototype._next=function(e){var n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(iI.Subscriber)});var ad=h(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});var uI=j(),sd=Vn(),aI=me(),cI=Jo(),fI=ne(),lI=xe();function ud(r,t,e){if(t)if(lI.isScheduler(t))e=t;else return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return ud(r,e).apply(void 0,n).pipe(aI.map(function(o){return fI.isArray(o)?t.apply(void 0,o):t(o)}))};return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=this,u,a={context:o,subject:u,callbackFunc:r,scheduler:e};return new uI.Observable(function(f){if(e){var l={args:n,subscriber:f,params:a};return e.schedule(hI,0,l)}else{if(!u){u=new sd.AsyncSubject;var c=s(function(){for(var p=[],_=0;_<arguments.length;_++)p[_]=arguments[_];u.next(p.length<=1?p[0]:p),u.complete()},"handler");try{r.apply(o,n.concat([c]))}catch(p){cI.canReportError(u)?u.error(p):console.warn(p)}}return u.subscribe(f)}})}}s(ud,"bindCallback");sc.bindCallback=ud;function hI(r){var t=this,e=this,n=r.args,i=r.subscriber,o=r.params,u=o.callbackFunc,a=o.context,f=o.scheduler,c=o.subject;if(!c){c=o.subject=new sd.AsyncSubject;var l=s(function(){for(var p=[],_=0;_<arguments.length;_++)p[_]=arguments[_];var m=p.length<=1?p[0]:p;t.add(f.schedule(pI,0,{value:m,subject:c}))},"handler");try{u.apply(a,n.concat([l]))}catch(p){c.error(p)}}this.add(c.subscribe(i))}s(hI,"dispatch");function pI(r){var t=r.value,e=r.subject;e.next(t),e.complete()}s(pI,"dispatchNext")});var hd=h(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});var _I=j(),fd=Vn(),dI=me(),vI=Jo(),bI=xe(),yI=ne();function ld(r,t,e){if(t)if(bI.isScheduler(t))e=t;else return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return ld(r,e).apply(void 0,n).pipe(dI.map(function(o){return yI.isArray(o)?t.apply(void 0,o):t(o)}))};return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o={subject:void 0,args:n,callbackFunc:r,scheduler:e,context:this};return new _I.Observable(function(u){var a=o.context,f=o.subject;if(e)return e.schedule(mI,0,{params:o,subscriber:u,context:a});if(!f){f=o.subject=new fd.AsyncSubject;var c=s(function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];var _=l.shift();if(_){f.error(_);return}f.next(l.length<=1?l[0]:l),f.complete()},"handler");try{r.apply(a,n.concat([c]))}catch(l){vI.canReportError(f)?f.error(l):console.warn(l)}}return f.subscribe(u)})}}s(ld,"bindNodeCallback");uc.bindNodeCallback=ld;function mI(r){var t=this,e=r.params,n=r.subscriber,i=r.context,o=e.callbackFunc,u=e.args,a=e.scheduler,f=e.subject;if(!f){f=e.subject=new fd.AsyncSubject;var c=s(function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];var _=l.shift();if(_)t.add(a.schedule(cd,0,{err:_,subject:f}));else{var m=l.length<=1?l[0]:l;t.add(a.schedule(OI,0,{value:m,subject:f}))}},"handler");try{o.apply(i,u.concat([c]))}catch(l){this.add(a.schedule(cd,0,{err:l,subject:f}))}}this.add(f.subscribe(n))}s(mI,"dispatch");function OI(r){var t=r.value,e=r.subject;e.next(t),e.complete()}s(OI,"dispatchNext");function cd(r){var t=r.err,e=r.subject;e.error(t)}s(cd,"dispatchError")});var Ot=h(Kn=>{"use strict";var gI=Kn&&Kn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Kn,"__esModule",{value:!0});var SI=w(),EI=function(r){gI(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"OuterSubscriber"),t.prototype.notifyNext=function(e,n,i,o,u){this.destination.next(n)},t.prototype.notifyError=function(e,n){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(SI.Subscriber);Kn.OuterSubscriber=EI});var pd=h(Qn=>{"use strict";var wI=Qn&&Qn.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Qn,"__esModule",{value:!0});var TI=w(),PI=function(r){wI(t,r);function t(e,n,i){var o=r.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=i,o.index=0,o}return s(t,"InnerSubscriber"),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(TI.Subscriber);Qn.InnerSubscriber=PI});var _d=h(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});var CI=Go();ac.subscribeToPromise=function(r){return function(t){return r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,CI.hostReportError),t}}});var Vr=h(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});function dd(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}s(dd,"getSymbolIterator");Br.getSymbolIterator=dd;Br.iterator=dd();Br.$$iterator=Br.iterator});var vd=h(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});var II=Vr();cc.subscribeToIterable=function(r){return function(t){var e=r[II.iterator]();do{var n=void 0;try{n=e.next()}catch(i){return t.error(i),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}while(!0);return typeof e.return=="function"&&t.add(function(){e.return&&e.return()}),t}}});var bd=h(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});var RI=kt();fc.subscribeToObservable=function(r){return function(t){var e=r[RI.observable]();if(typeof e.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}}});var hc=h(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.isArrayLike=function(r){return r&&typeof r.length=="number"&&typeof r!="function"}});var _c=h(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});function AI(r){return!!r&&typeof r.subscribe!="function"&&typeof r.then=="function"}s(AI,"isPromise");pc.isPromise=AI});var Xn=h(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});var jI=Ya(),NI=_d(),qI=vd(),xI=bd(),DI=hc(),MI=_c(),kI=$o(),UI=Vr(),LI=kt();dc.subscribeTo=function(r){if(r&&typeof r[LI.observable]=="function")return xI.subscribeToObservable(r);if(DI.isArrayLike(r))return jI.subscribeToArray(r);if(MI.isPromise(r))return NI.subscribeToPromise(r);if(r&&typeof r[UI.iterator]=="function")return qI.subscribeToIterable(r);var t=kI.isObject(r)?"an invalid object":"'"+r+"'",e="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(e)}});var gt=h(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});var FI=pd(),BI=Xn(),VI=j();function WI(r,t,e,n,i){if(i===void 0&&(i=new FI.InnerSubscriber(r,e,n)),!i.closed)return t instanceof VI.Observable?t.subscribe(i):BI.subscribeTo(t)(i)}s(WI,"subscribeToResult");vc.subscribeToResult=WI});var ls=h(Lt=>{"use strict";var HI=Lt&&Lt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Lt,"__esModule",{value:!0});var zI=xe(),YI=ne(),ZI=Ot(),GI=gt(),$I=Mr(),yd={};function KI(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=void 0,n=void 0;return zI.isScheduler(r[r.length-1])&&(n=r.pop()),typeof r[r.length-1]=="function"&&(e=r.pop()),r.length===1&&YI.isArray(r[0])&&(r=r[0]),$I.fromArray(r,n).lift(new md(e))}s(KI,"combineLatest");Lt.combineLatest=KI;var md=function(){function r(t){this.resultSelector=t}return s(r,"CombineLatestOperator"),r.prototype.call=function(t,e){return e.subscribe(new Od(t,this.resultSelector))},r}();Lt.CombineLatestOperator=md;var Od=function(r){HI(t,r);function t(e,n){var i=r.call(this,e)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return s(t,"CombineLatestSubscriber"),t.prototype._next=function(e){this.values.push(yd),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,n=e.length;if(n===0)this.destination.complete();else{this.active=n,this.toRespond=n;for(var i=0;i<n;i++){var o=e[i];this.add(GI.subscribeToResult(this,o,void 0,i))}}},t.prototype.notifyComplete=function(e){(this.active-=1)===0&&this.destination.complete()},t.prototype.notifyNext=function(e,n,i){var o=this.values,u=o[i],a=this.toRespond?u===yd?--this.toRespond:this.toRespond:0;o[i]=n,a===0&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var n;try{n=this.resultSelector.apply(this,e)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(ZI.OuterSubscriber);Lt.CombineLatestSubscriber=Od});var gd=h(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});var QI=j(),XI=$(),JI=kt();function e1(r,t){return new QI.Observable(function(e){var n=new XI.Subscription;return n.add(t.schedule(function(){var i=r[JI.observable]();n.add(i.subscribe({next:function(o){n.add(t.schedule(function(){return e.next(o)}))},error:function(o){n.add(t.schedule(function(){return e.error(o)}))},complete:function(){n.add(t.schedule(function(){return e.complete()}))}}))})),n})}s(e1,"scheduleObservable");bc.scheduleObservable=e1});var Sd=h(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});var t1=j(),r1=$();function n1(r,t){return new t1.Observable(function(e){var n=new r1.Subscription;return n.add(t.schedule(function(){return r.then(function(i){n.add(t.schedule(function(){e.next(i),n.add(t.schedule(function(){return e.complete()}))}))},function(i){n.add(t.schedule(function(){return e.error(i)}))})})),n})}s(n1,"schedulePromise");yc.schedulePromise=n1});var Ed=h(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});var i1=j(),o1=$(),s1=Vr();function u1(r,t){if(!r)throw new Error("Iterable cannot be null");return new i1.Observable(function(e){var n=new o1.Subscription,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(t.schedule(function(){i=r[s1.iterator](),n.add(t.schedule(function(){if(!e.closed){var o,u;try{var a=i.next();o=a.value,u=a.done}catch(f){e.error(f);return}u?e.complete():(e.next(o),this.schedule())}}))})),n})}s(u1,"scheduleIterable");mc.scheduleIterable=u1});var wd=h(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});var a1=kt();function c1(r){return r&&typeof r[a1.observable]=="function"}s(c1,"isInteropObservable");Oc.isInteropObservable=c1});var Td=h(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});var f1=Vr();function l1(r){return r&&typeof r[f1.iterator]=="function"}s(l1,"isIterable");gc.isIterable=l1});var Ec=h(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});var h1=gd(),p1=Sd(),_1=os(),d1=Ed(),v1=wd(),b1=_c(),y1=hc(),m1=Td();function O1(r,t){if(r!=null){if(v1.isInteropObservable(r))return h1.scheduleObservable(r,t);if(b1.isPromise(r))return p1.schedulePromise(r,t);if(y1.isArrayLike(r))return _1.scheduleArray(r,t);if(m1.isIterable(r)||typeof r=="string")return d1.scheduleIterable(r,t)}throw new TypeError((r!==null&&typeof r||r)+" is not observable")}s(O1,"scheduled");Sc.scheduled=O1});var De=h(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});var Pd=j(),g1=Xn(),S1=Ec();function E1(r,t){return t?S1.scheduled(r,t):r instanceof Pd.Observable?r:new Pd.Observable(g1.subscribeTo(r))}s(E1,"from");wc.from=E1});var F=h(tt=>{"use strict";var hs=tt&&tt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(tt,"__esModule",{value:!0});var ps=w(),w1=j(),T1=Xn(),P1=function(r){hs(t,r);function t(e){var n=r.call(this)||this;return n.parent=e,n}return s(t,"SimpleInnerSubscriber"),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(ps.Subscriber);tt.SimpleInnerSubscriber=P1;var C1=function(r){hs(t,r);function t(e,n,i){var o=r.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=i,o}return s(t,"ComplexInnerSubscriber"),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(ps.Subscriber);tt.ComplexInnerSubscriber=C1;var I1=function(r){hs(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"SimpleOuterSubscriber"),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(ps.Subscriber);tt.SimpleOuterSubscriber=I1;var R1=function(r){hs(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"ComplexOuterSubscriber"),t.prototype.notifyNext=function(e,n,i,o){this.destination.next(n)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(ps.Subscriber);tt.ComplexOuterSubscriber=R1;function A1(r,t){if(!t.closed){if(r instanceof w1.Observable)return r.subscribe(t);var e;try{e=T1.subscribeTo(r)(t)}catch(n){t.error(n)}return e}}s(A1,"innerSubscribe");tt.innerSubscribe=A1});var Jn=h(St=>{"use strict";var j1=St&&St.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(St,"__esModule",{value:!0});var N1=me(),q1=De(),Tc=F();function Pc(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),typeof t=="function"?function(n){return n.pipe(Pc(function(i,o){return q1.from(r(i,o)).pipe(N1.map(function(u,a){return t(i,u,o,a)}))},e))}:(typeof t=="number"&&(e=t),function(n){return n.lift(new Cd(r,e))})}s(Pc,"mergeMap");St.mergeMap=Pc;var Cd=function(){function r(t,e){e===void 0&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return s(r,"MergeMapOperator"),r.prototype.call=function(t,e){return e.subscribe(new Id(t,this.project,this.concurrent))},r}();St.MergeMapOperator=Cd;var Id=function(r){j1(t,r);function t(e,n,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var o=r.call(this,e)||this;return o.project=n,o.concurrent=i,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return s(t,"MergeMapSubscriber"),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var n,i=this.index++;try{n=this.project(e,i)}catch(o){this.destination.error(o);return}this.active++,this._innerSub(n)},t.prototype._innerSub=function(e){var n=new Tc.SimpleInnerSubscriber(this),i=this.destination;i.add(n);var o=Tc.innerSubscribe(e,n);o!==n&&i.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},t}(Tc.SimpleOuterSubscriber);St.MergeMapSubscriber=Id;St.flatMap=Pc});var _s=h(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});var x1=Jn(),D1=yt();function M1(r){return r===void 0&&(r=Number.POSITIVE_INFINITY),x1.mergeMap(D1.identity,r)}s(M1,"mergeAll");Cc.mergeAll=M1});var Rc=h(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});var k1=_s();function U1(){return k1.mergeAll(1)}s(U1,"concatAll");Ic.concatAll=U1});var ei=h(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});var L1=kn(),F1=Rc();function B1(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return F1.concatAll()(L1.of.apply(void 0,r))}s(B1,"concat");Ac.concat=B1});var ds=h(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});var V1=j(),W1=De(),H1=qe();function z1(r){return new V1.Observable(function(t){var e;try{e=r()}catch(i){t.error(i);return}var n=e?W1.from(e):H1.empty();return n.subscribe(t)})}s(z1,"defer");jc.defer=z1});var Ad=h(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});var Y1=j(),Rd=ne(),Z1=me(),G1=$o(),$1=De();function K1(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1){var e=r[0];if(Rd.isArray(e))return vs(e,null);if(G1.isObject(e)&&Object.getPrototypeOf(e)===Object.prototype){var n=Object.keys(e);return vs(n.map(function(o){return e[o]}),n)}}if(typeof r[r.length-1]=="function"){var i=r.pop();return r=r.length===1&&Rd.isArray(r[0])?r[0]:r,vs(r,null).pipe(Z1.map(function(o){return i.apply(void 0,o)}))}return vs(r,null)}s(K1,"forkJoin");Nc.forkJoin=K1;function vs(r,t){return new Y1.Observable(function(e){var n=r.length;if(n===0){e.complete();return}for(var i=new Array(n),o=0,u=0,a=s(function(c){var l=$1.from(r[c]),p=!1;e.add(l.subscribe({next:function(_){p||(p=!0,u++),i[c]=_},error:function(_){return e.error(_)},complete:function(){o++,(o===n||!p)&&(u===n&&e.next(t?t.reduce(function(_,m,S){return _[m]=i[S],_},{}):i),e.complete())}}))},"_loop_1"),f=0;f<n;f++)a(f)})}s(vs,"forkJoinInternal")});var qd=h(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});var Q1=j(),X1=ne(),J1=Rr(),eR=me();function jd(r,t,e,n){return J1.isFunction(e)&&(n=e,e=void 0),n?jd(r,t,e).pipe(eR.map(function(i){return X1.isArray(i)?n.apply(void 0,i):n(i)})):new Q1.Observable(function(i){function o(u){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(u)}s(o,"handler"),Nd(r,t,o,i,e)})}s(jd,"fromEvent");qc.fromEvent=jd;function Nd(r,t,e,n,i){var o;if(nR(r)){var u=r;r.addEventListener(t,e,i),o=s(function(){return u.removeEventListener(t,e,i)},"unsubscribe")}else if(rR(r)){var a=r;r.on(t,e),o=s(function(){return a.off(t,e)},"unsubscribe")}else if(tR(r)){var f=r;r.addListener(t,e),o=s(function(){return f.removeListener(t,e)},"unsubscribe")}else if(r&&r.length)for(var c=0,l=r.length;c<l;c++)Nd(r[c],t,e,n,i);else throw new TypeError("Invalid event target");n.add(o)}s(Nd,"setupSubscription");function tR(r){return r&&typeof r.addListener=="function"&&typeof r.removeListener=="function"}s(tR,"isNodeStyleEventEmitter");function rR(r){return r&&typeof r.on=="function"&&typeof r.off=="function"}s(rR,"isJQueryStyleEventEmitter");function nR(r){return r&&typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}s(nR,"isEventTarget")});var Dd=h(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});var iR=j(),oR=ne(),sR=Rr(),uR=me();function xd(r,t,e){return e?xd(r,t).pipe(uR.map(function(n){return oR.isArray(n)?e.apply(void 0,n):e(n)})):new iR.Observable(function(n){var i=s(function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];return n.next(u.length===1?u[0]:u)},"handler"),o;try{o=r(i)}catch(u){n.error(u);return}if(sR.isFunction(t))return function(){return t(i,o)}})}s(xd,"fromEventPattern");xc.fromEventPattern=xd});var kd=h(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});var aR=j(),Md=yt(),cR=xe();function fR(r,t,e,n,i){var o,u;if(arguments.length==1){var a=r;u=a.initialState,t=a.condition,e=a.iterate,o=a.resultSelector||Md.identity,i=a.scheduler}else n===void 0||cR.isScheduler(n)?(u=r,o=Md.identity,i=n):(u=r,o=n);return new aR.Observable(function(f){var c=u;if(i)return i.schedule(lR,0,{subscriber:f,iterate:e,condition:t,resultSelector:o,state:c});do{if(t){var l=void 0;try{l=t(c)}catch(_){f.error(_);return}if(!l){f.complete();break}}var p=void 0;try{p=o(c)}catch(_){f.error(_);return}if(f.next(p),f.closed)break;try{c=e(c)}catch(_){f.error(_);return}}while(!0)})}s(fR,"generate");Dc.generate=fR;function lR(r){var t=r.subscriber,e=r.condition;if(!t.closed){if(r.needIterate)try{r.state=r.iterate(r.state)}catch(o){t.error(o);return}else r.needIterate=!0;if(e){var n=void 0;try{n=e(r.state)}catch(o){t.error(o);return}if(!n){t.complete();return}if(t.closed)return}var i;try{i=r.resultSelector(r.state)}catch(o){t.error(o);return}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(r)}}s(lR,"dispatch")});var Ld=h(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});var hR=ds(),Ud=qe();function pR(r,t,e){return t===void 0&&(t=Ud.EMPTY),e===void 0&&(e=Ud.EMPTY),hR.defer(function(){return r()?t:e})}s(pR,"iif");Mc.iif=pR});var ti=h(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});var _R=ne();function dR(r){return!_R.isArray(r)&&r-parseFloat(r)+1>=0}s(dR,"isNumeric");kc.isNumeric=dR});var Bd=h(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});var vR=j(),Fd=ie(),bR=ti();function yR(r,t){return r===void 0&&(r=0),t===void 0&&(t=Fd.async),(!bR.isNumeric(r)||r<0)&&(r=0),(!t||typeof t.schedule!="function")&&(t=Fd.async),new vR.Observable(function(e){return e.add(t.schedule(mR,r,{subscriber:e,counter:0,period:r})),e})}s(yR,"interval");Uc.interval=yR;function mR(r){var t=r.subscriber,e=r.counter,n=r.period;t.next(e),this.schedule({subscriber:t,counter:e+1,period:n},n)}s(mR,"dispatch")});var Fc=h(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});var OR=j(),gR=xe(),SR=_s(),ER=Mr();function wR(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=Number.POSITIVE_INFINITY,n=null,i=r[r.length-1];return gR.isScheduler(i)?(n=r.pop(),r.length>1&&typeof r[r.length-1]=="number"&&(e=r.pop())):typeof i=="number"&&(e=r.pop()),n===null&&r.length===1&&r[0]instanceof OR.Observable?r[0]:SR.mergeAll(e)(ER.fromArray(r,n))}s(wR,"merge");Lc.merge=wR});var Bc=h(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});var TR=j(),PR=fs();ri.NEVER=new TR.Observable(PR.noop);function CR(){return ri.NEVER}s(CR,"never");ri.never=CR});var Vd=h(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});var IR=j(),RR=De(),AR=ne(),jR=qe();function Vc(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===0)return jR.EMPTY;var e=r[0],n=r.slice(1);return r.length===1&&AR.isArray(e)?Vc.apply(void 0,e):new IR.Observable(function(i){var o=s(function(){return i.add(Vc.apply(void 0,n).subscribe(i))},"subNext");return RR.from(e).subscribe({next:function(u){i.next(u)},error:o,complete:o})})}s(Vc,"onErrorResumeNext");Wc.onErrorResumeNext=Vc});var zd=h(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});var Wd=j(),NR=$();function qR(r,t){return t?new Wd.Observable(function(e){var n=Object.keys(r),i=new NR.Subscription;return i.add(t.schedule(Hd,0,{keys:n,index:0,subscriber:e,subscription:i,obj:r})),i}):new Wd.Observable(function(e){for(var n=Object.keys(r),i=0;i<n.length&&!e.closed;i++){var o=n[i];r.hasOwnProperty(o)&&e.next([o,r[o]])}e.complete()})}s(qR,"pairs");bs.pairs=qR;function Hd(r){var t=r.keys,e=r.index,n=r.subscriber,i=r.subscription,o=r.obj;if(!n.closed)if(e<t.length){var u=t[e];n.next([u,o[u]]),i.add(this.schedule({keys:t,index:e+1,subscriber:n,subscription:i,obj:o}))}else n.complete()}s(Hd,"dispatch");bs.dispatch=Hd});var zc=h(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});function xR(r,t){function e(){return!e.pred.apply(e.thisArg,arguments)}return s(e,"notPred"),e.pred=r,e.thisArg=t,e}s(xR,"not");Hc.not=xR});var Ft=h(ni=>{"use strict";var DR=ni&&ni.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ni,"__esModule",{value:!0});var MR=w();function kR(r,t){return s(function(n){return n.lift(new UR(r,t))},"filterOperatorFunction")}s(kR,"filter");ni.filter=kR;var UR=function(){function r(t,e){this.predicate=t,this.thisArg=e}return s(r,"FilterOperator"),r.prototype.call=function(t,e){return e.subscribe(new LR(t,this.predicate,this.thisArg))},r}(),LR=function(r){DR(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.predicate=n,o.thisArg=i,o.count=0,o}return s(t,"FilterSubscriber"),t.prototype._next=function(e){var n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(i){this.destination.error(i);return}n&&this.destination.next(e)},t}(MR.Subscriber)});var $d=h(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});var FR=zc(),Yd=Xn(),Zd=Ft(),Gd=j();function BR(r,t,e){return[Zd.filter(t,e)(new Gd.Observable(Yd.subscribeTo(r))),Zd.filter(FR.not(t,e))(new Gd.Observable(Yd.subscribeTo(r)))]}s(BR,"partition");Yc.partition=BR});var Zc=h(Bt=>{"use strict";var VR=Bt&&Bt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Bt,"__esModule",{value:!0});var WR=ne(),HR=Mr(),zR=Ot(),YR=gt();function ZR(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1)if(WR.isArray(r[0]))r=r[0];else return r[0];return HR.fromArray(r,void 0).lift(new Kd)}s(ZR,"race");Bt.race=ZR;var Kd=function(){function r(){}return s(r,"RaceOperator"),r.prototype.call=function(t,e){return e.subscribe(new Qd(t))},r}();Bt.RaceOperator=Kd;var Qd=function(r){VR(t,r);function t(e){var n=r.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return s(t,"RaceSubscriber"),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,n=e.length;if(n===0)this.destination.complete();else{for(var i=0;i<n&&!this.hasFirst;i++){var o=e[i],u=YR.subscribeToResult(this,o,void 0,i);this.subscriptions&&this.subscriptions.push(u),this.add(u)}this.observables=null}},t.prototype.notifyNext=function(e,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==i){var u=this.subscriptions[o];u.unsubscribe(),this.remove(u)}this.subscriptions=null}this.destination.next(n)},t}(zR.OuterSubscriber);Bt.RaceSubscriber=Qd});var Jd=h(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});var GR=j();function $R(r,t,e){return r===void 0&&(r=0),new GR.Observable(function(n){t===void 0&&(t=r,r=0);var i=0,o=r;if(e)return e.schedule(Xd,0,{index:i,count:t,start:r,subscriber:n});do{if(i++>=t){n.complete();break}if(n.next(o++),n.closed)break}while(!0)})}s($R,"range");ys.range=$R;function Xd(r){var t=r.start,e=r.index,n=r.count,i=r.subscriber;if(e>=n){i.complete();return}i.next(t),!i.closed&&(r.index=e+1,r.start=t+1,this.schedule(r))}s(Xd,"dispatch");ys.dispatch=Xd});var $c=h(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});var KR=j(),QR=ie(),ev=ti(),tv=xe();function XR(r,t,e){r===void 0&&(r=0);var n=-1;return ev.isNumeric(t)?n=Number(t)<1&&1||Number(t):tv.isScheduler(t)&&(e=t),tv.isScheduler(e)||(e=QR.async),new KR.Observable(function(i){var o=ev.isNumeric(r)?r:+r-e.now();return e.schedule(JR,o,{index:0,period:n,subscriber:i})})}s(XR,"timer");Gc.timer=XR;function JR(r){var t=r.index,e=r.period,n=r.subscriber;if(n.next(t),!n.closed){if(e===-1)return n.complete();r.index=t+1,this.schedule(r,e)}}s(JR,"dispatch")});var rv=h(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});var eA=j(),tA=De(),rA=qe();function nA(r,t){return new eA.Observable(function(e){var n;try{n=r()}catch(a){e.error(a);return}var i;try{i=t(n)}catch(a){e.error(a);return}var o=i?tA.from(i):rA.EMPTY,u=o.subscribe(e);return function(){u.unsubscribe(),n&&n.unsubscribe()}})}s(nA,"using");Kc.using=nA});var Os=h(Vt=>{"use strict";var nv=Vt&&Vt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Vt,"__esModule",{value:!0});var iA=Mr(),oA=ne(),sA=w(),ms=Vr(),Qc=F();function uA(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return typeof e=="function"&&r.pop(),iA.fromArray(r,void 0).lift(new iv(e))}s(uA,"zip");Vt.zip=uA;var iv=function(){function r(t){this.resultSelector=t}return s(r,"ZipOperator"),r.prototype.call=function(t,e){return e.subscribe(new ov(t,this.resultSelector))},r}();Vt.ZipOperator=iv;var ov=function(r){nv(t,r);function t(e,n,i){i===void 0&&(i=Object.create(null));var o=r.call(this,e)||this;return o.resultSelector=n,o.iterators=[],o.active=0,o.resultSelector=typeof n=="function"?n:void 0,o}return s(t,"ZipSubscriber"),t.prototype._next=function(e){var n=this.iterators;oA.isArray(e)?n.push(new cA(e)):typeof e[ms.iterator]=="function"?n.push(new aA(e[ms.iterator]())):n.push(new fA(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,n=e.length;if(this.unsubscribe(),n===0){this.destination.complete();return}this.active=n;for(var i=0;i<n;i++){var o=e[i];if(o.stillUnsubscribed){var u=this.destination;u.add(o.subscribe())}else this.active--}},t.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,n=e.length,i=this.destination,o=0;o<n;o++){var u=e[o];if(typeof u.hasValue=="function"&&!u.hasValue())return}for(var a=!1,f=[],o=0;o<n;o++){var u=e[o],c=u.next();if(u.hasCompleted()&&(a=!0),c.done){i.complete();return}f.push(c.value)}this.resultSelector?this._tryresultSelector(f):i.next(f),a&&i.complete()},t.prototype._tryresultSelector=function(e){var n;try{n=this.resultSelector.apply(this,e)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(sA.Subscriber);Vt.ZipSubscriber=ov;var aA=function(){function r(t){this.iterator=t,this.nextResult=t.next()}return s(r,"StaticIterator"),r.prototype.hasValue=function(){return!0},r.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},r.prototype.hasCompleted=function(){var t=this.nextResult;return!!(t&&t.done)},r}(),cA=function(){function r(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return s(r,"StaticArrayIterator"),r.prototype[ms.iterator]=function(){return this},r.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},r.prototype.hasValue=function(){return this.array.length>this.index},r.prototype.hasCompleted=function(){return this.array.length===this.index},r}(),fA=function(r){nv(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.parent=n,o.observable=i,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return s(t,"ZipBufferIterator"),t.prototype[ms.iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return e.length===0&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return Qc.innerSubscribe(this.observable,new Qc.SimpleInnerSubscriber(this))},t}(Qc.SimpleOuterSubscriber)});var ii=h(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});var lA=j();O.Observable=lA.Observable;var hA=ka();O.ConnectableObservable=hA.ConnectableObservable;var pA=La();O.GroupedObservable=pA.GroupedObservable;var _A=kt();O.observable=_A.observable;var dA=J();O.Subject=dA.Subject;var vA=Fa();O.BehaviorSubject=vA.BehaviorSubject;var bA=us();O.ReplaySubject=bA.ReplaySubject;var yA=Vn();O.AsyncSubject=yA.AsyncSubject;var sv=Ja();O.asap=sv.asap;O.asapScheduler=sv.asapScheduler;var uv=ie();O.async=uv.async;O.asyncScheduler=uv.asyncScheduler;var av=Wa();O.queue=av.queue;O.queueScheduler=av.queueScheduler;var cv=ed();O.animationFrame=cv.animationFrame;O.animationFrameScheduler=cv.animationFrameScheduler;var fv=nd();O.VirtualTimeScheduler=fv.VirtualTimeScheduler;O.VirtualAction=fv.VirtualAction;var mA=Va();O.Scheduler=mA.Scheduler;var OA=$();O.Subscription=OA.Subscription;var gA=w();O.Subscriber=gA.Subscriber;var lv=Ln();O.Notification=lv.Notification;O.NotificationKind=lv.NotificationKind;var SA=ts();O.pipe=SA.pipe;var EA=fs();O.noop=EA.noop;var wA=yt();O.identity=wA.identity;var TA=id();O.isObservable=TA.isObservable;var PA=Ur();O.ArgumentOutOfRangeError=PA.ArgumentOutOfRangeError;var CA=Lr();O.EmptyError=CA.EmptyError;var IA=Tn();O.ObjectUnsubscribedError=IA.ObjectUnsubscribedError;var RA=ga();O.UnsubscriptionError=RA.UnsubscriptionError;var AA=oc();O.TimeoutError=AA.TimeoutError;var jA=ad();O.bindCallback=jA.bindCallback;var NA=hd();O.bindNodeCallback=NA.bindNodeCallback;var qA=ls();O.combineLatest=qA.combineLatest;var xA=ei();O.concat=xA.concat;var DA=ds();O.defer=DA.defer;var MA=qe();O.empty=MA.empty;var kA=Ad();O.forkJoin=kA.forkJoin;var UA=De();O.from=UA.from;var LA=qd();O.fromEvent=LA.fromEvent;var FA=Dd();O.fromEventPattern=FA.fromEventPattern;var BA=kd();O.generate=BA.generate;var VA=Ld();O.iif=VA.iif;var WA=Bd();O.interval=WA.interval;var HA=Fc();O.merge=HA.merge;var zA=Bc();O.never=zA.never;var YA=kn();O.of=YA.of;var ZA=Vd();O.onErrorResumeNext=ZA.onErrorResumeNext;var GA=zd();O.pairs=GA.pairs;var $A=$d();O.partition=$A.partition;var KA=Zc();O.race=KA.race;var QA=Jd();O.range=QA.range;var XA=ss();O.throwError=XA.throwError;var JA=$c();O.timer=JA.timer;var ej=rv();O.using=ej.using;var tj=Os();O.zip=tj.zip;var rj=Ec();O.scheduled=rj.scheduled;var nj=qe();O.EMPTY=nj.EMPTY;var ij=Bc();O.NEVER=ij.NEVER;var oj=En();O.config=oj.config});var Jc=h(oi=>{"use strict";var sj=oi&&oi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(oi,"__esModule",{value:!0});var Xc=F();function uj(r){return s(function(e){return e.lift(new aj(r))},"auditOperatorFunction")}s(uj,"audit");oi.audit=uj;var aj=function(){function r(t){this.durationSelector=t}return s(r,"AuditOperator"),r.prototype.call=function(t,e){return e.subscribe(new cj(t,this.durationSelector))},r}(),cj=function(r){sj(t,r);function t(e,n){var i=r.call(this,e)||this;return i.durationSelector=n,i.hasValue=!1,i}return s(t,"AuditSubscriber"),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var n=void 0;try{var i=this.durationSelector;n=i(e)}catch(u){return this.destination.error(u)}var o=Xc.innerSubscribe(n,new Xc.SimpleInnerSubscriber(this));!o||o.closed?this.clearThrottle():this.add(this.throttled=o)}},t.prototype.clearThrottle=function(){var e=this,n=e.value,i=e.hasValue,o=e.throttled;o&&(this.remove(o),this.throttled=void 0,o.unsubscribe()),i&&(this.value=void 0,this.hasValue=!1,this.destination.next(n))},t.prototype.notifyNext=function(){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(Xc.SimpleOuterSubscriber)});var hv=h(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});var fj=ie(),lj=Jc(),hj=$c();function pj(r,t){return t===void 0&&(t=fj.async),lj.audit(function(){return hj.timer(r,t)})}s(pj,"auditTime");ef.auditTime=pj});var pv=h(si=>{"use strict";var _j=si&&si.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(si,"__esModule",{value:!0});var tf=F();function dj(r){return s(function(e){return e.lift(new vj(r))},"bufferOperatorFunction")}s(dj,"buffer");si.buffer=dj;var vj=function(){function r(t){this.closingNotifier=t}return s(r,"BufferOperator"),r.prototype.call=function(t,e){return e.subscribe(new bj(t,this.closingNotifier))},r}(),bj=function(r){_j(t,r);function t(e,n){var i=r.call(this,e)||this;return i.buffer=[],i.add(tf.innerSubscribe(n,new tf.SimpleInnerSubscriber(i))),i}return s(t,"BufferSubscriber"),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(){var e=this.buffer;this.buffer=[],this.destination.next(e)},t}(tf.SimpleOuterSubscriber)});var vv=h(ui=>{"use strict";var _v=ui&&ui.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ui,"__esModule",{value:!0});var dv=w();function yj(r,t){return t===void 0&&(t=null),s(function(n){return n.lift(new mj(r,t))},"bufferCountOperatorFunction")}s(yj,"bufferCount");ui.bufferCount=yj;var mj=function(){function r(t,e){this.bufferSize=t,this.startBufferEvery=e,!e||t===e?this.subscriberClass=Oj:this.subscriberClass=gj}return s(r,"BufferCountOperator"),r.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},r}(),Oj=function(r){_v(t,r);function t(e,n){var i=r.call(this,e)||this;return i.bufferSize=n,i.buffer=[],i}return s(t,"BufferCountSubscriber"),t.prototype._next=function(e){var n=this.buffer;n.push(e),n.length==this.bufferSize&&(this.destination.next(n),this.buffer=[])},t.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),r.prototype._complete.call(this)},t}(dv.Subscriber),gj=function(r){_v(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.bufferSize=n,o.startBufferEvery=i,o.buffers=[],o.count=0,o}return s(t,"BufferSkipCountSubscriber"),t.prototype._next=function(e){var n=this,i=n.bufferSize,o=n.startBufferEvery,u=n.buffers,a=n.count;this.count++,a%o===0&&u.push([]);for(var f=u.length;f--;){var c=u[f];c.push(e),c.length===i&&(u.splice(f,1),this.destination.next(c))}},t.prototype._complete=function(){for(var e=this,n=e.buffers,i=e.destination;n.length>0;){var o=n.shift();o.length>0&&i.next(o)}r.prototype._complete.call(this)},t}(dv.Subscriber)});var mv=h(ai=>{"use strict";var Sj=ai&&ai.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ai,"__esModule",{value:!0});var Ej=ie(),wj=w(),Tj=xe();function Pj(r){var t=arguments.length,e=Ej.async;Tj.isScheduler(arguments[arguments.length-1])&&(e=arguments[arguments.length-1],t--);var n=null;t>=2&&(n=arguments[1]);var i=Number.POSITIVE_INFINITY;return t>=3&&(i=arguments[2]),s(function(u){return u.lift(new Cj(r,n,i,e))},"bufferTimeOperatorFunction")}s(Pj,"bufferTime");ai.bufferTime=Pj;var Cj=function(){function r(t,e,n,i){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=i}return s(r,"BufferTimeOperator"),r.prototype.call=function(t,e){return e.subscribe(new Rj(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},r}(),Ij=function(){function r(){this.buffer=[]}return s(r,"Context"),r}(),Rj=function(r){Sj(t,r);function t(e,n,i,o,u){var a=r.call(this,e)||this;a.bufferTimeSpan=n,a.bufferCreationInterval=i,a.maxBufferSize=o,a.scheduler=u,a.contexts=[];var f=a.openContext();if(a.timespanOnly=i==null||i<0,a.timespanOnly){var c={subscriber:a,context:f,bufferTimeSpan:n};a.add(f.closeAction=u.schedule(bv,n,c))}else{var l={subscriber:a,context:f},p={bufferTimeSpan:n,bufferCreationInterval:i,subscriber:a,scheduler:u};a.add(f.closeAction=u.schedule(yv,n,l)),a.add(u.schedule(Aj,i,p))}return a}return s(t,"BufferTimeSubscriber"),t.prototype._next=function(e){for(var n=this.contexts,i=n.length,o,u=0;u<i;u++){var a=n[u],f=a.buffer;f.push(e),f.length==this.maxBufferSize&&(o=a)}o&&this.onBufferFull(o)},t.prototype._error=function(e){this.contexts.length=0,r.prototype._error.call(this,e)},t.prototype._complete=function(){for(var e=this,n=e.contexts,i=e.destination;n.length>0;){var o=n.shift();i.next(o.buffer)}r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var n=e.closeAction;if(n.unsubscribe(),this.remove(n),!this.closed&&this.timespanOnly){e=this.openContext();var i=this.bufferTimeSpan,o={subscriber:this,context:e,bufferTimeSpan:i};this.add(e.closeAction=this.scheduler.schedule(bv,i,o))}},t.prototype.openContext=function(){var e=new Ij;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var n=this.contexts,i=n?n.indexOf(e):-1;i>=0&&n.splice(n.indexOf(e),1)},t}(wj.Subscriber);function bv(r){var t=r.subscriber,e=r.context;e&&t.closeContext(e),t.closed||(r.context=t.openContext(),r.context.closeAction=this.schedule(r,r.bufferTimeSpan))}s(bv,"dispatchBufferTimeSpanOnly");function Aj(r){var t=r.bufferCreationInterval,e=r.bufferTimeSpan,n=r.subscriber,i=r.scheduler,o=n.openContext(),u=this;n.closed||(n.add(o.closeAction=i.schedule(yv,e,{subscriber:n,context:o})),u.schedule(r,t))}s(Aj,"dispatchBufferCreation");function yv(r){var t=r.subscriber,e=r.context;t.closeContext(e)}s(yv,"dispatchBufferClose")});var gv=h(ci=>{"use strict";var jj=ci&&ci.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ci,"__esModule",{value:!0});var Nj=$(),Ov=gt(),qj=Ot();function xj(r,t){return s(function(n){return n.lift(new Dj(r,t))},"bufferToggleOperatorFunction")}s(xj,"bufferToggle");ci.bufferToggle=xj;var Dj=function(){function r(t,e){this.openings=t,this.closingSelector=e}return s(r,"BufferToggleOperator"),r.prototype.call=function(t,e){return e.subscribe(new Mj(t,this.openings,this.closingSelector))},r}(),Mj=function(r){jj(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.closingSelector=i,o.contexts=[],o.add(Ov.subscribeToResult(o,n)),o}return s(t,"BufferToggleSubscriber"),t.prototype._next=function(e){for(var n=this.contexts,i=n.length,o=0;o<i;o++)n[o].buffer.push(e)},t.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var i=n.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,r.prototype._error.call(this,e)},t.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,r.prototype._complete.call(this)},t.prototype.notifyNext=function(e,n){e?this.closeBuffer(e):this.openBuffer(n)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var n=this.closingSelector,i=n.call(this,e);i&&this.trySubscribe(i)}catch(o){this._error(o)}},t.prototype.closeBuffer=function(e){var n=this.contexts;if(n&&e){var i=e.buffer,o=e.subscription;this.destination.next(i),n.splice(n.indexOf(e),1),this.remove(o),o.unsubscribe()}},t.prototype.trySubscribe=function(e){var n=this.contexts,i=[],o=new Nj.Subscription,u={buffer:i,subscription:o};n.push(u);var a=Ov.subscribeToResult(this,e,u);!a||a.closed?this.closeBuffer(u):(a.context=u,this.add(a),o.add(a))},t}(qj.OuterSubscriber)});var Sv=h(fi=>{"use strict";var kj=fi&&fi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(fi,"__esModule",{value:!0});var Uj=$(),rf=F();function Lj(r){return function(t){return t.lift(new Fj(r))}}s(Lj,"bufferWhen");fi.bufferWhen=Lj;var Fj=function(){function r(t){this.closingSelector=t}return s(r,"BufferWhenOperator"),r.prototype.call=function(t,e){return e.subscribe(new Bj(t,this.closingSelector))},r}(),Bj=function(r){kj(t,r);function t(e,n){var i=r.call(this,e)||this;return i.closingSelector=n,i.subscribing=!1,i.openBuffer(),i}return s(t,"BufferWhenSubscriber"),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},t.prototype.notifyNext=function(){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];var i;try{var o=this.closingSelector;i=o()}catch(u){return this.error(u)}e=new Uj.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(rf.innerSubscribe(i,new rf.SimpleInnerSubscriber(this))),this.subscribing=!1},t}(rf.SimpleOuterSubscriber)});var Ev=h(li=>{"use strict";var Vj=li&&li.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(li,"__esModule",{value:!0});var nf=F();function Wj(r){return s(function(e){var n=new Hj(r),i=e.lift(n);return n.caught=i},"catchErrorOperatorFunction")}s(Wj,"catchError");li.catchError=Wj;var Hj=function(){function r(t){this.selector=t}return s(r,"CatchOperator"),r.prototype.call=function(t,e){return e.subscribe(new zj(t,this.selector,this.caught))},r}(),zj=function(r){Vj(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.selector=n,o.caught=i,o}return s(t,"CatchSubscriber"),t.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(u){r.prototype.error.call(this,u);return}this._unsubscribeAndRecycle();var i=new nf.SimpleInnerSubscriber(this);this.add(i);var o=nf.innerSubscribe(n,i);o!==i&&this.add(o)}},t}(nf.SimpleOuterSubscriber)});var wv=h(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});var Yj=ls();function Zj(r){return function(t){return t.lift(new Yj.CombineLatestOperator(r))}}s(Zj,"combineAll");of.combineAll=Zj});var Tv=h(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});var Gj=ne(),$j=ls(),Kj=De();function Qj(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=null;return typeof r[r.length-1]=="function"&&(e=r.pop()),r.length===1&&Gj.isArray(r[0])&&(r=r[0].slice()),function(n){return n.lift.call(Kj.from([n].concat(r)),new $j.CombineLatestOperator(e))}}s(Qj,"combineLatest");sf.combineLatest=Qj});var Pv=h(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});var Xj=ei();function Jj(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return e.lift.call(Xj.concat.apply(void 0,[e].concat(r)))}}s(Jj,"concat");uf.concat=Jj});var cf=h(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});var eN=Jn();function tN(r,t){return eN.mergeMap(r,t,1)}s(tN,"concatMap");af.concatMap=tN});var Cv=h(ff=>{"use strict";Object.defineProperty(ff,"__esModule",{value:!0});var rN=cf();function nN(r,t){return rN.concatMap(function(){return r},t)}s(nN,"concatMapTo");ff.concatMapTo=nN});var Iv=h(hi=>{"use strict";var iN=hi&&hi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(hi,"__esModule",{value:!0});var oN=w();function sN(r){return function(t){return t.lift(new uN(r,t))}}s(sN,"count");hi.count=sN;var uN=function(){function r(t,e){this.predicate=t,this.source=e}return s(r,"CountOperator"),r.prototype.call=function(t,e){return e.subscribe(new aN(t,this.predicate,this.source))},r}(),aN=function(r){iN(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.predicate=n,o.source=i,o.count=0,o.index=0,o}return s(t,"CountSubscriber"),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var n;try{n=this.predicate(e,this.index++,this.source)}catch(i){this.destination.error(i);return}n&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(oN.Subscriber)});var Rv=h(pi=>{"use strict";var cN=pi&&pi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(pi,"__esModule",{value:!0});var lf=F();function fN(r){return function(t){return t.lift(new lN(r))}}s(fN,"debounce");pi.debounce=fN;var lN=function(){function r(t){this.durationSelector=t}return s(r,"DebounceOperator"),r.prototype.call=function(t,e){return e.subscribe(new hN(t,this.durationSelector))},r}(),hN=function(r){cN(t,r);function t(e,n){var i=r.call(this,e)||this;return i.durationSelector=n,i.hasValue=!1,i}return s(t,"DebounceSubscriber"),t.prototype._next=function(e){try{var n=this.durationSelector.call(this,e);n&&this._tryNext(e,n)}catch(i){this.destination.error(i)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,n){var i=this.durationSubscription;this.value=e,this.hasValue=!0,i&&(i.unsubscribe(),this.remove(i)),i=lf.innerSubscribe(n,new lf.SimpleInnerSubscriber(this)),i&&!i.closed&&this.add(this.durationSubscription=i)},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=void 0,n.unsubscribe(),this.remove(n)),this.value=void 0,this.hasValue=!1,r.prototype._next.call(this,e)}},t}(lf.SimpleOuterSubscriber)});var Av=h(_i=>{"use strict";var pN=_i&&_i.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(_i,"__esModule",{value:!0});var _N=w(),dN=ie();function vN(r,t){return t===void 0&&(t=dN.async),function(e){return e.lift(new bN(r,t))}}s(vN,"debounceTime");_i.debounceTime=vN;var bN=function(){function r(t,e){this.dueTime=t,this.scheduler=e}return s(r,"DebounceTimeOperator"),r.prototype.call=function(t,e){return e.subscribe(new yN(t,this.dueTime,this.scheduler))},r}(),yN=function(r){pN(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.dueTime=n,o.scheduler=i,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return s(t,"DebounceTimeSubscriber"),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(mN,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;e!==null&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(_N.Subscriber);function mN(r){r.debouncedNext()}s(mN,"dispatchNext")});var Wr=h(di=>{"use strict";var ON=di&&di.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(di,"__esModule",{value:!0});var gN=w();function SN(r){return r===void 0&&(r=null),function(t){return t.lift(new EN(r))}}s(SN,"defaultIfEmpty");di.defaultIfEmpty=SN;var EN=function(){function r(t){this.defaultValue=t}return s(r,"DefaultIfEmptyOperator"),r.prototype.call=function(t,e){return e.subscribe(new wN(t,this.defaultValue))},r}(),wN=function(r){ON(t,r);function t(e,n){var i=r.call(this,e)||this;return i.defaultValue=n,i.isEmpty=!0,i}return s(t,"DefaultIfEmptySubscriber"),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(gN.Subscriber)});var pf=h(hf=>{"use strict";Object.defineProperty(hf,"__esModule",{value:!0});function TN(r){return r instanceof Date&&!isNaN(+r)}s(TN,"isDate");hf.isDate=TN});var Nv=h(vi=>{"use strict";var PN=vi&&vi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(vi,"__esModule",{value:!0});var CN=ie(),IN=pf(),RN=w(),jv=Ln();function AN(r,t){t===void 0&&(t=CN.async);var e=IN.isDate(r),n=e?+r-t.now():Math.abs(r);return function(i){return i.lift(new jN(n,t))}}s(AN,"delay");vi.delay=AN;var jN=function(){function r(t,e){this.delay=t,this.scheduler=e}return s(r,"DelayOperator"),r.prototype.call=function(t,e){return e.subscribe(new NN(t,this.delay,this.scheduler))},r}(),NN=function(r){PN(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.delay=n,o.scheduler=i,o.queue=[],o.active=!1,o.errored=!1,o}return s(t,"DelaySubscriber"),t.dispatch=function(e){for(var n=e.source,i=n.queue,o=e.scheduler,u=e.destination;i.length>0&&i[0].time-o.now()<=0;)i.shift().notification.observe(u);if(i.length>0){var a=Math.max(0,i[0].time-o.now());this.schedule(e,a)}else this.unsubscribe(),n.active=!1},t.prototype._schedule=function(e){this.active=!0;var n=this.destination;n.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(this.errored!==!0){var n=this.scheduler,i=new qN(n.now()+this.delay,e);this.queue.push(i),this.active===!1&&this._schedule(n)}},t.prototype._next=function(e){this.scheduleNotification(jv.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(jv.Notification.createComplete()),this.unsubscribe()},t}(RN.Subscriber),qN=function(){function r(t,e){this.time=t,this.notification=e}return s(r,"DelayMessage"),r}()});var xv=h(bi=>{"use strict";var _f=bi&&bi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(bi,"__esModule",{value:!0});var xN=w(),DN=j(),MN=Ot(),kN=gt();function UN(r,t){return t?function(e){return new FN(e,t).lift(new qv(r))}:function(e){return e.lift(new qv(r))}}s(UN,"delayWhen");bi.delayWhen=UN;var qv=function(){function r(t){this.delayDurationSelector=t}return s(r,"DelayWhenOperator"),r.prototype.call=function(t,e){return e.subscribe(new LN(t,this.delayDurationSelector))},r}(),LN=function(r){_f(t,r);function t(e,n){var i=r.call(this,e)||this;return i.delayDurationSelector=n,i.completed=!1,i.delayNotifierSubscriptions=[],i.index=0,i}return s(t,"DelayWhenSubscriber"),t.prototype.notifyNext=function(e,n,i,o,u){this.destination.next(e),this.removeSubscription(u),this.tryComplete()},t.prototype.notifyError=function(e,n){this._error(e)},t.prototype.notifyComplete=function(e){var n=this.removeSubscription(e);n&&this.destination.next(n),this.tryComplete()},t.prototype._next=function(e){var n=this.index++;try{var i=this.delayDurationSelector(e,n);i&&this.tryDelay(i,e)}catch(o){this.destination.error(o)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},t.prototype.removeSubscription=function(e){e.unsubscribe();var n=this.delayNotifierSubscriptions.indexOf(e);return n!==-1&&this.delayNotifierSubscriptions.splice(n,1),e.outerValue},t.prototype.tryDelay=function(e,n){var i=kN.subscribeToResult(this,e,n);if(i&&!i.closed){var o=this.destination;o.add(i),this.delayNotifierSubscriptions.push(i)}},t.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},t}(MN.OuterSubscriber),FN=function(r){_f(t,r);function t(e,n){var i=r.call(this)||this;return i.source=e,i.subscriptionDelay=n,i}return s(t,"SubscriptionDelayObservable"),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new BN(e,this.source))},t}(DN.Observable),BN=function(r){_f(t,r);function t(e,n){var i=r.call(this)||this;return i.parent=e,i.source=n,i.sourceSubscribed=!1,i}return s(t,"SubscriptionDelaySubscriber"),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(xN.Subscriber)});var Dv=h(yi=>{"use strict";var VN=yi&&yi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(yi,"__esModule",{value:!0});var WN=w();function HN(){return s(function(t){return t.lift(new zN)},"dematerializeOperatorFunction")}s(HN,"dematerialize");yi.dematerialize=HN;var zN=function(){function r(){}return s(r,"DeMaterializeOperator"),r.prototype.call=function(t,e){return e.subscribe(new YN(t))},r}(),YN=function(r){VN(t,r);function t(e){return r.call(this,e)||this}return s(t,"DeMaterializeSubscriber"),t.prototype._next=function(e){e.observe(this.destination)},t}(WN.Subscriber)});var kv=h(Hr=>{"use strict";var ZN=Hr&&Hr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Hr,"__esModule",{value:!0});var df=F();function GN(r,t){return function(e){return e.lift(new $N(r,t))}}s(GN,"distinct");Hr.distinct=GN;var $N=function(){function r(t,e){this.keySelector=t,this.flushes=e}return s(r,"DistinctOperator"),r.prototype.call=function(t,e){return e.subscribe(new Mv(t,this.keySelector,this.flushes))},r}(),Mv=function(r){ZN(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.keySelector=n,o.values=new Set,i&&o.add(df.innerSubscribe(i,new df.SimpleInnerSubscriber(o))),o}return s(t,"DistinctSubscriber"),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var n,i=this.destination;try{n=this.keySelector(e)}catch(o){i.error(o);return}this._finalizeNext(n,e)},t.prototype._finalizeNext=function(e,n){var i=this.values;i.has(e)||(i.add(e),this.destination.next(n))},t}(df.SimpleOuterSubscriber);Hr.DistinctSubscriber=Mv});var vf=h(mi=>{"use strict";var KN=mi&&mi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mi,"__esModule",{value:!0});var QN=w();function XN(r,t){return function(e){return e.lift(new JN(r,t))}}s(XN,"distinctUntilChanged");mi.distinctUntilChanged=XN;var JN=function(){function r(t,e){this.compare=t,this.keySelector=e}return s(r,"DistinctUntilChangedOperator"),r.prototype.call=function(t,e){return e.subscribe(new eq(t,this.compare,this.keySelector))},r}(),eq=function(r){KN(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.keySelector=i,o.hasKey=!1,typeof n=="function"&&(o.compare=n),o}return s(t,"DistinctUntilChangedSubscriber"),t.prototype.compare=function(e,n){return e===n},t.prototype._next=function(e){var n;try{var i=this.keySelector;n=i?i(e):e}catch(a){return this.destination.error(a)}var o=!1;if(this.hasKey)try{var u=this.compare;o=u(this.key,n)}catch(a){return this.destination.error(a)}else this.hasKey=!0;o||(this.key=n,this.destination.next(e))},t}(QN.Subscriber)});var Uv=h(bf=>{"use strict";Object.defineProperty(bf,"__esModule",{value:!0});var tq=vf();function rq(r,t){return tq.distinctUntilChanged(function(e,n){return t?t(e[r],n[r]):e[r]===n[r]})}s(rq,"distinctUntilKeyChanged");bf.distinctUntilKeyChanged=rq});var gi=h(Oi=>{"use strict";var nq=Oi&&Oi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Oi,"__esModule",{value:!0});var iq=Lr(),oq=w();function sq(r){return r===void 0&&(r=cq),function(t){return t.lift(new uq(r))}}s(sq,"throwIfEmpty");Oi.throwIfEmpty=sq;var uq=function(){function r(t){this.errorFactory=t}return s(r,"ThrowIfEmptyOperator"),r.prototype.call=function(t,e){return e.subscribe(new aq(t,this.errorFactory))},r}(),aq=function(r){nq(t,r);function t(e,n){var i=r.call(this,e)||this;return i.errorFactory=n,i.hasValue=!1,i}return s(t,"ThrowIfEmptySubscriber"),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(n){e=n}this.destination.error(e)},t}(oq.Subscriber);function cq(){return new iq.EmptyError}s(cq,"defaultErrorFactory")});var gs=h(Si=>{"use strict";var fq=Si&&Si.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Si,"__esModule",{value:!0});var lq=w(),hq=Ur(),pq=qe();function _q(r){return function(t){return r===0?pq.empty():t.lift(new dq(r))}}s(_q,"take");Si.take=_q;var dq=function(){function r(t){if(this.total=t,this.total<0)throw new hq.ArgumentOutOfRangeError}return s(r,"TakeOperator"),r.prototype.call=function(t,e){return e.subscribe(new vq(t,this.total))},r}(),vq=function(r){fq(t,r);function t(e,n){var i=r.call(this,e)||this;return i.total=n,i.count=0,i}return s(t,"TakeSubscriber"),t.prototype._next=function(e){var n=this.total,i=++this.count;i<=n&&(this.destination.next(e),i===n&&(this.destination.complete(),this.unsubscribe()))},t}(lq.Subscriber)});var Fv=h(yf=>{"use strict";Object.defineProperty(yf,"__esModule",{value:!0});var Lv=Ur(),bq=Ft(),yq=gi(),mq=Wr(),Oq=gs();function gq(r,t){if(r<0)throw new Lv.ArgumentOutOfRangeError;var e=arguments.length>=2;return function(n){return n.pipe(bq.filter(function(i,o){return o===r}),Oq.take(1),e?mq.defaultIfEmpty(t):yq.throwIfEmpty(function(){return new Lv.ArgumentOutOfRangeError}))}}s(gq,"elementAt");yf.elementAt=gq});var Bv=h(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});var Sq=ei(),Eq=kn();function wq(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return Sq.concat(e,Eq.of.apply(void 0,r))}}s(wq,"endWith");mf.endWith=wq});var Vv=h(Ei=>{"use strict";var Tq=Ei&&Ei.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ei,"__esModule",{value:!0});var Pq=w();function Cq(r,t){return function(e){return e.lift(new Iq(r,t,e))}}s(Cq,"every");Ei.every=Cq;var Iq=function(){function r(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return s(r,"EveryOperator"),r.prototype.call=function(t,e){return e.subscribe(new Rq(t,this.predicate,this.thisArg,this.source))},r}(),Rq=function(r){Tq(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.predicate=n,u.thisArg=i,u.source=o,u.index=0,u.thisArg=i||u,u}return s(t,"EverySubscriber"),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var n=!1;try{n=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(i){this.destination.error(i);return}n||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(Pq.Subscriber)});var Wv=h(wi=>{"use strict";var Aq=wi&&wi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(wi,"__esModule",{value:!0});var Of=F();function jq(){return function(r){return r.lift(new Nq)}}s(jq,"exhaust");wi.exhaust=jq;var Nq=function(){function r(){}return s(r,"SwitchFirstOperator"),r.prototype.call=function(t,e){return e.subscribe(new qq(t))},r}(),qq=function(r){Aq(t,r);function t(e){var n=r.call(this,e)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return s(t,"SwitchFirstSubscriber"),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(Of.innerSubscribe(e,new Of.SimpleInnerSubscriber(this))))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(Of.SimpleOuterSubscriber)});var zv=h(Ti=>{"use strict";var xq=Ti&&Ti.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ti,"__esModule",{value:!0});var Dq=me(),Mq=De(),gf=F();function Hv(r,t){return t?function(e){return e.pipe(Hv(function(n,i){return Mq.from(r(n,i)).pipe(Dq.map(function(o,u){return t(n,o,i,u)}))}))}:function(e){return e.lift(new kq(r))}}s(Hv,"exhaustMap");Ti.exhaustMap=Hv;var kq=function(){function r(t){this.project=t}return s(r,"ExhaustMapOperator"),r.prototype.call=function(t,e){return e.subscribe(new Uq(t,this.project))},r}(),Uq=function(r){xq(t,r);function t(e,n){var i=r.call(this,e)||this;return i.project=n,i.hasSubscription=!1,i.hasCompleted=!1,i.index=0,i}return s(t,"ExhaustMapSubscriber"),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var n,i=this.index++;try{n=this.project(e,i)}catch(o){this.destination.error(o);return}this.hasSubscription=!0,this._innerSub(n)},t.prototype._innerSub=function(e){var n=new gf.SimpleInnerSubscriber(this),i=this.destination;i.add(n);var o=gf.innerSubscribe(e,n);o!==n&&i.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(gf.SimpleOuterSubscriber)});var Gv=h(Wt=>{"use strict";var Lq=Wt&&Wt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Wt,"__esModule",{value:!0});var Sf=F();function Fq(r,t,e){return t===void 0&&(t=Number.POSITIVE_INFINITY),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(n){return n.lift(new Yv(r,t,e))}}s(Fq,"expand");Wt.expand=Fq;var Yv=function(){function r(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return s(r,"ExpandOperator"),r.prototype.call=function(t,e){return e.subscribe(new Zv(t,this.project,this.concurrent,this.scheduler))},r}();Wt.ExpandOperator=Yv;var Zv=function(r){Lq(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.project=n,u.concurrent=i,u.scheduler=o,u.index=0,u.active=0,u.hasCompleted=!1,i<Number.POSITIVE_INFINITY&&(u.buffer=[]),u}return s(t,"ExpandSubscriber"),t.dispatch=function(e){var n=e.subscriber,i=e.result,o=e.value,u=e.index;n.subscribeToProjection(i,o,u)},t.prototype._next=function(e){var n=this.destination;if(n.closed){this._complete();return}var i=this.index++;if(this.active<this.concurrent){n.next(e);try{var o=this.project,u=o(e,i);if(!this.scheduler)this.subscribeToProjection(u,e,i);else{var a={subscriber:this,result:u,value:e,index:i},f=this.destination;f.add(this.scheduler.schedule(t.dispatch,0,a))}}catch(c){n.error(c)}}else this.buffer.push(e)},t.prototype.subscribeToProjection=function(e,n,i){this.active++;var o=this.destination;o.add(Sf.innerSubscribe(e,new Sf.SimpleInnerSubscriber(this)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this._next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},t}(Sf.SimpleOuterSubscriber);Wt.ExpandSubscriber=Zv});var $v=h(Pi=>{"use strict";var Bq=Pi&&Pi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Pi,"__esModule",{value:!0});var Vq=w(),Wq=$();function Hq(r){return function(t){return t.lift(new zq(r))}}s(Hq,"finalize");Pi.finalize=Hq;var zq=function(){function r(t){this.callback=t}return s(r,"FinallyOperator"),r.prototype.call=function(t,e){return e.subscribe(new Yq(t,this.callback))},r}(),Yq=function(r){Bq(t,r);function t(e,n){var i=r.call(this,e)||this;return i.add(new Wq.Subscription(n)),i}return s(t,"FinallySubscriber"),t}(Vq.Subscriber)});var Ef=h(Ht=>{"use strict";var Zq=Ht&&Ht.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ht,"__esModule",{value:!0});var Gq=w();function $q(r,t){if(typeof r!="function")throw new TypeError("predicate is not a function");return function(e){return e.lift(new Kv(r,e,!1,t))}}s($q,"find");Ht.find=$q;var Kv=function(){function r(t,e,n,i){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=i}return s(r,"FindValueOperator"),r.prototype.call=function(t,e){return e.subscribe(new Qv(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},r}();Ht.FindValueOperator=Kv;var Qv=function(r){Zq(t,r);function t(e,n,i,o,u){var a=r.call(this,e)||this;return a.predicate=n,a.source=i,a.yieldIndex=o,a.thisArg=u,a.index=0,a}return s(t,"FindValueSubscriber"),t.prototype.notifyComplete=function(e){var n=this.destination;n.next(e),n.complete(),this.unsubscribe()},t.prototype._next=function(e){var n=this,i=n.predicate,o=n.thisArg,u=this.index++;try{var a=i.call(o||this,e,u,this.source);a&&this.notifyComplete(this.yieldIndex?u:e)}catch(f){this.destination.error(f)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(Gq.Subscriber);Ht.FindValueSubscriber=Qv});var Xv=h(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});var Kq=Ef();function Qq(r,t){return function(e){return e.lift(new Kq.FindValueOperator(r,e,!0,t))}}s(Qq,"findIndex");wf.findIndex=Qq});var Jv=h(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});var Xq=Lr(),Jq=Ft(),ex=gs(),tx=Wr(),rx=gi(),nx=yt();function ix(r,t){var e=arguments.length>=2;return function(n){return n.pipe(r?Jq.filter(function(i,o){return r(i,o,n)}):nx.identity,ex.take(1),e?tx.defaultIfEmpty(t):rx.throwIfEmpty(function(){return new Xq.EmptyError}))}}s(ix,"first");Tf.first=ix});var eb=h(Ci=>{"use strict";var ox=Ci&&Ci.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ci,"__esModule",{value:!0});var sx=w();function ux(){return s(function(t){return t.lift(new ax)},"ignoreElementsOperatorFunction")}s(ux,"ignoreElements");Ci.ignoreElements=ux;var ax=function(){function r(){}return s(r,"IgnoreElementsOperator"),r.prototype.call=function(t,e){return e.subscribe(new cx(t))},r}(),cx=function(r){ox(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"IgnoreElementsSubscriber"),t.prototype._next=function(e){},t}(sx.Subscriber)});var tb=h(Ii=>{"use strict";var fx=Ii&&Ii.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ii,"__esModule",{value:!0});var lx=w();function hx(){return function(r){return r.lift(new px)}}s(hx,"isEmpty");Ii.isEmpty=hx;var px=function(){function r(){}return s(r,"IsEmptyOperator"),r.prototype.call=function(t,e){return e.subscribe(new _x(t))},r}(),_x=function(r){fx(t,r);function t(e){return r.call(this,e)||this}return s(t,"IsEmptySubscriber"),t.prototype.notifyComplete=function(e){var n=this.destination;n.next(e),n.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(lx.Subscriber)});var Ss=h(Ri=>{"use strict";var dx=Ri&&Ri.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ri,"__esModule",{value:!0});var vx=w(),bx=Ur(),yx=qe();function mx(r){return s(function(e){return r===0?yx.empty():e.lift(new Ox(r))},"takeLastOperatorFunction")}s(mx,"takeLast");Ri.takeLast=mx;var Ox=function(){function r(t){if(this.total=t,this.total<0)throw new bx.ArgumentOutOfRangeError}return s(r,"TakeLastOperator"),r.prototype.call=function(t,e){return e.subscribe(new gx(t,this.total))},r}(),gx=function(r){dx(t,r);function t(e,n){var i=r.call(this,e)||this;return i.total=n,i.ring=new Array,i.count=0,i}return s(t,"TakeLastSubscriber"),t.prototype._next=function(e){var n=this.ring,i=this.total,o=this.count++;if(n.length<i)n.push(e);else{var u=o%i;n[u]=e}},t.prototype._complete=function(){var e=this.destination,n=this.count;if(n>0)for(var i=this.count>=this.total?this.total:this.count,o=this.ring,u=0;u<i;u++){var a=n++%i;e.next(o[a])}e.complete()},t}(vx.Subscriber)});var rb=h(Pf=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});var Sx=Lr(),Ex=Ft(),wx=Ss(),Tx=gi(),Px=Wr(),Cx=yt();function Ix(r,t){var e=arguments.length>=2;return function(n){return n.pipe(r?Ex.filter(function(i,o){return r(i,o,n)}):Cx.identity,wx.takeLast(1),e?Px.defaultIfEmpty(t):Tx.throwIfEmpty(function(){return new Sx.EmptyError}))}}s(Ix,"last");Pf.last=Ix});var nb=h(Ai=>{"use strict";var Rx=Ai&&Ai.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ai,"__esModule",{value:!0});var Ax=w();function jx(r){return function(t){return t.lift(new Nx(r))}}s(jx,"mapTo");Ai.mapTo=jx;var Nx=function(){function r(t){this.value=t}return s(r,"MapToOperator"),r.prototype.call=function(t,e){return e.subscribe(new qx(t,this.value))},r}(),qx=function(r){Rx(t,r);function t(e,n){var i=r.call(this,e)||this;return i.value=n,i}return s(t,"MapToSubscriber"),t.prototype._next=function(e){this.destination.next(this.value)},t}(Ax.Subscriber)});var ib=h(ji=>{"use strict";var xx=ji&&ji.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ji,"__esModule",{value:!0});var Dx=w(),Cf=Ln();function Mx(){return s(function(t){return t.lift(new kx)},"materializeOperatorFunction")}s(Mx,"materialize");ji.materialize=Mx;var kx=function(){function r(){}return s(r,"MaterializeOperator"),r.prototype.call=function(t,e){return e.subscribe(new Ux(t))},r}(),Ux=function(r){xx(t,r);function t(e){return r.call(this,e)||this}return s(t,"MaterializeSubscriber"),t.prototype._next=function(e){this.destination.next(Cf.Notification.createNext(e))},t.prototype._error=function(e){var n=this.destination;n.next(Cf.Notification.createError(e)),n.complete()},t.prototype._complete=function(){var e=this.destination;e.next(Cf.Notification.createComplete()),e.complete()},t}(Dx.Subscriber)});var Es=h(Ni=>{"use strict";var Lx=Ni&&Ni.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ni,"__esModule",{value:!0});var Fx=w();function Bx(r,t){var e=!1;return arguments.length>=2&&(e=!0),s(function(i){return i.lift(new Vx(r,t,e))},"scanOperatorFunction")}s(Bx,"scan");Ni.scan=Bx;var Vx=function(){function r(t,e,n){n===void 0&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return s(r,"ScanOperator"),r.prototype.call=function(t,e){return e.subscribe(new Wx(t,this.accumulator,this.seed,this.hasSeed))},r}(),Wx=function(r){Lx(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.accumulator=n,u._seed=i,u.hasSeed=o,u.index=0,u}return s(t,"ScanSubscriber"),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(!this.hasSeed)this.seed=e,this.destination.next(e);else return this._tryNext(e)},t.prototype._tryNext=function(e){var n=this.index++,i;try{i=this.accumulator(this.seed,e,n)}catch(o){this.destination.error(o)}this.seed=i,this.destination.next(i)},t}(Fx.Subscriber)});var qi=h(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});var ob=Es(),sb=Ss(),Hx=Wr(),ub=ts();function zx(r,t){return arguments.length>=2?s(function(n){return ub.pipe(ob.scan(r,t),sb.takeLast(1),Hx.defaultIfEmpty(t))(n)},"reduceOperatorFunctionWithSeed"):s(function(n){return ub.pipe(ob.scan(function(i,o,u){return r(i,o,u+1)}),sb.takeLast(1))(n)},"reduceOperatorFunction")}s(zx,"reduce");If.reduce=zx});var ab=h(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});var Yx=qi();function Zx(r){var t=typeof r=="function"?function(e,n){return r(e,n)>0?e:n}:function(e,n){return e>n?e:n};return Yx.reduce(t)}s(Zx,"max");Rf.max=Zx});var cb=h(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});var Gx=Fc();function $x(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return e.lift.call(Gx.merge.apply(void 0,[e].concat(r)))}}s($x,"merge");Af.merge=$x});var lb=h(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});var fb=Jn();function Kx(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),typeof t=="function"?fb.mergeMap(function(){return r},t,e):(typeof t=="number"&&(e=t),fb.mergeMap(function(){return r},e))}s(Kx,"mergeMapTo");jf.mergeMapTo=Kx});var _b=h(zt=>{"use strict";var Qx=zt&&zt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(zt,"__esModule",{value:!0});var Nf=F();function Xx(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),function(n){return n.lift(new hb(r,t,e))}}s(Xx,"mergeScan");zt.mergeScan=Xx;var hb=function(){function r(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return s(r,"MergeScanOperator"),r.prototype.call=function(t,e){return e.subscribe(new pb(t,this.accumulator,this.seed,this.concurrent))},r}();zt.MergeScanOperator=hb;var pb=function(r){Qx(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.accumulator=n,u.acc=i,u.concurrent=o,u.hasValue=!1,u.hasCompleted=!1,u.buffer=[],u.active=0,u.index=0,u}return s(t,"MergeScanSubscriber"),t.prototype._next=function(e){if(this.active<this.concurrent){var n=this.index++,i=this.destination,o=void 0;try{var u=this.accumulator;o=u(this.acc,e,n)}catch(a){return i.error(a)}this.active++,this._innerSub(o)}else this.buffer.push(e)},t.prototype._innerSub=function(e){var n=new Nf.SimpleInnerSubscriber(this),i=this.destination;i.add(n);var o=Nf.innerSubscribe(e,n);o!==n&&i.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},t.prototype.notifyNext=function(e){var n=this.destination;this.acc=e,this.hasValue=!0,n.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},t}(Nf.SimpleOuterSubscriber);zt.MergeScanSubscriber=pb});var db=h(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});var Jx=qi();function eD(r){var t=typeof r=="function"?function(e,n){return r(e,n)<0?e:n}:function(e,n){return e<n?e:n};return Jx.reduce(t)}s(eD,"min");qf.min=eD});var Yt=h(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});var tD=ka();function rD(r,t){return s(function(n){var i;if(typeof r=="function"?i=r:i=s(function(){return r},"subjectFactory"),typeof t=="function")return n.lift(new vb(i,t));var o=Object.create(n,tD.connectableObservableDescriptor);return o.source=n,o.subjectFactory=i,o},"multicastOperatorFunction")}s(rD,"multicast");ws.multicast=rD;var vb=function(){function r(t,e){this.subjectFactory=t,this.selector=e}return s(r,"MulticastOperator"),r.prototype.call=function(t,e){var n=this.selector,i=this.subjectFactory(),o=n(i).subscribe(t);return o.add(e.subscribe(i)),o},r}();ws.MulticastOperator=vb});var mb=h(zr=>{"use strict";var nD=zr&&zr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(zr,"__esModule",{value:!0});var iD=De(),bb=ne(),xf=F();function oD(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return r.length===1&&bb.isArray(r[0])&&(r=r[0]),function(e){return e.lift(new yb(r))}}s(oD,"onErrorResumeNext");zr.onErrorResumeNext=oD;function sD(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=void 0;return r.length===1&&bb.isArray(r[0])&&(r=r[0]),e=r.shift(),iD.from(e).lift(new yb(r))}s(sD,"onErrorResumeNextStatic");zr.onErrorResumeNextStatic=sD;var yb=function(){function r(t){this.nextSources=t}return s(r,"OnErrorResumeNextOperator"),r.prototype.call=function(t,e){return e.subscribe(new uD(t,this.nextSources))},r}(),uD=function(r){nD(t,r);function t(e,n){var i=r.call(this,e)||this;return i.destination=e,i.nextSources=n,i}return s(t,"OnErrorResumeNextSubscriber"),t.prototype.notifyError=function(){this.subscribeToNextSource()},t.prototype.notifyComplete=function(){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource(),this.unsubscribe()},t.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();if(e){var n=new xf.SimpleInnerSubscriber(this),i=this.destination;i.add(n);var o=xf.innerSubscribe(e,n);o!==n&&i.add(o)}else this.destination.complete()},t}(xf.SimpleOuterSubscriber)});var Ob=h(xi=>{"use strict";var aD=xi&&xi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(xi,"__esModule",{value:!0});var cD=w();function fD(){return function(r){return r.lift(new lD)}}s(fD,"pairwise");xi.pairwise=fD;var lD=function(){function r(){}return s(r,"PairwiseOperator"),r.prototype.call=function(t,e){return e.subscribe(new hD(t))},r}(),hD=function(r){aD(t,r);function t(e){var n=r.call(this,e)||this;return n.hasPrev=!1,n}return s(t,"PairwiseSubscriber"),t.prototype._next=function(e){var n;this.hasPrev?n=[this.prev,e]:this.hasPrev=!0,this.prev=e,n&&this.destination.next(n)},t}(cD.Subscriber)});var Sb=h(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});var pD=zc(),gb=Ft();function _D(r,t){return function(e){return[gb.filter(r,t)(e),gb.filter(pD.not(r,t))(e)]}}s(_D,"partition");Df.partition=_D});var Eb=h(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});var dD=me();function vD(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r.length;if(e===0)throw new Error("list of properties cannot be empty.");return function(n){return dD.map(bD(r,e))(n)}}s(vD,"pluck");Mf.pluck=vD;function bD(r,t){var e=s(function(n){for(var i=n,o=0;o<t;o++){var u=i!=null?i[r[o]]:void 0;if(u!==void 0)i=u;else return}return i},"mapper");return e}s(bD,"plucker")});var Pb=h(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});var wb=J(),Tb=Yt();function yD(r){return r?Tb.multicast(function(){return new wb.Subject},r):Tb.multicast(new wb.Subject)}s(yD,"publish");kf.publish=yD});var Cb=h(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});var mD=Fa(),OD=Yt();function gD(r){return function(t){return OD.multicast(new mD.BehaviorSubject(r))(t)}}s(gD,"publishBehavior");Uf.publishBehavior=gD});var Ib=h(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});var SD=Vn(),ED=Yt();function wD(){return function(r){return ED.multicast(new SD.AsyncSubject)(r)}}s(wD,"publishLast");Lf.publishLast=wD});var Rb=h(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});var TD=us(),PD=Yt();function CD(r,t,e,n){e&&typeof e!="function"&&(n=e);var i=typeof e=="function"?e:void 0,o=new TD.ReplaySubject(r,t,n);return function(u){return PD.multicast(function(){return o},i)(u)}}s(CD,"publishReplay");Ff.publishReplay=CD});var Ab=h(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});var ID=ne(),RD=Zc();function AD(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return s(function(n){return r.length===1&&ID.isArray(r[0])&&(r=r[0]),n.lift.call(RD.race.apply(void 0,[n].concat(r)))},"raceOperatorFunction")}s(AD,"race");Bf.race=AD});var Nb=h(Di=>{"use strict";var jD=Di&&Di.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Di,"__esModule",{value:!0});var ND=w(),qD=qe();function xD(r){return r===void 0&&(r=-1),function(t){return r===0?qD.empty():r<0?t.lift(new jb(-1,t)):t.lift(new jb(r-1,t))}}s(xD,"repeat");Di.repeat=xD;var jb=function(){function r(t,e){this.count=t,this.source=e}return s(r,"RepeatOperator"),r.prototype.call=function(t,e){return e.subscribe(new DD(t,this.count,this.source))},r}(),DD=function(r){jD(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.count=n,o.source=i,o}return s(t,"RepeatSubscriber"),t.prototype.complete=function(){if(!this.isStopped){var e=this,n=e.source,i=e.count;if(i===0)return r.prototype.complete.call(this);i>-1&&(this.count=i-1),n.subscribe(this._unsubscribeAndRecycle())}},t}(ND.Subscriber)});var qb=h(Mi=>{"use strict";var MD=Mi&&Mi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Mi,"__esModule",{value:!0});var kD=J(),Vf=F();function UD(r){return function(t){return t.lift(new LD(r))}}s(UD,"repeatWhen");Mi.repeatWhen=UD;var LD=function(){function r(t){this.notifier=t}return s(r,"RepeatWhenOperator"),r.prototype.call=function(t,e){return e.subscribe(new FD(t,this.notifier,e))},r}(),FD=function(r){MD(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.notifier=n,o.source=i,o.sourceIsBeingSubscribedTo=!0,o}return s(t,"RepeatWhenSubscriber"),t.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return r.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return r.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},t.prototype._unsubscribe=function(){var e=this,n=e.notifications,i=e.retriesSubscription;n&&(n.unsubscribe(),this.notifications=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,r.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},t.prototype.subscribeToRetries=function(){this.notifications=new kD.Subject;var e;try{var n=this.notifier;e=n(this.notifications)}catch{return r.prototype.complete.call(this)}this.retries=e,this.retriesSubscription=Vf.innerSubscribe(e,new Vf.SimpleInnerSubscriber(this))},t}(Vf.SimpleOuterSubscriber)});var xb=h(ki=>{"use strict";var BD=ki&&ki.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ki,"__esModule",{value:!0});var VD=w();function WD(r){return r===void 0&&(r=-1),function(t){return t.lift(new HD(r,t))}}s(WD,"retry");ki.retry=WD;var HD=function(){function r(t,e){this.count=t,this.source=e}return s(r,"RetryOperator"),r.prototype.call=function(t,e){return e.subscribe(new zD(t,this.count,this.source))},r}(),zD=function(r){BD(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.count=n,o.source=i,o}return s(t,"RetrySubscriber"),t.prototype.error=function(e){if(!this.isStopped){var n=this,i=n.source,o=n.count;if(o===0)return r.prototype.error.call(this,e);o>-1&&(this.count=o-1),i.subscribe(this._unsubscribeAndRecycle())}},t}(VD.Subscriber)});var Db=h(Ui=>{"use strict";var YD=Ui&&Ui.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ui,"__esModule",{value:!0});var ZD=J(),Wf=F();function GD(r){return function(t){return t.lift(new $D(r,t))}}s(GD,"retryWhen");Ui.retryWhen=GD;var $D=function(){function r(t,e){this.notifier=t,this.source=e}return s(r,"RetryWhenOperator"),r.prototype.call=function(t,e){return e.subscribe(new KD(t,this.notifier,this.source))},r}(),KD=function(r){YD(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.notifier=n,o.source=i,o}return s(t,"RetryWhenSubscriber"),t.prototype.error=function(e){if(!this.isStopped){var n=this.errors,i=this.retries,o=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{n=new ZD.Subject;try{var u=this.notifier;i=u(n)}catch(a){return r.prototype.error.call(this,a)}o=Wf.innerSubscribe(i,new Wf.SimpleInnerSubscriber(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=i,this.retriesSubscription=o,n.next(e)}},t.prototype._unsubscribe=function(){var e=this,n=e.errors,i=e.retriesSubscription;n&&(n.unsubscribe(),this.errors=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(Wf.SimpleOuterSubscriber)});var Mb=h(Li=>{"use strict";var QD=Li&&Li.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Li,"__esModule",{value:!0});var Hf=F();function XD(r){return function(t){return t.lift(new JD(r))}}s(XD,"sample");Li.sample=XD;var JD=function(){function r(t){this.notifier=t}return s(r,"SampleOperator"),r.prototype.call=function(t,e){var n=new eM(t),i=e.subscribe(n);return i.add(Hf.innerSubscribe(this.notifier,new Hf.SimpleInnerSubscriber(n))),i},r}(),eM=function(r){QD(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.hasValue=!1,e}return s(t,"SampleSubscriber"),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(Hf.SimpleOuterSubscriber)});var kb=h(Fi=>{"use strict";var tM=Fi&&Fi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Fi,"__esModule",{value:!0});var rM=w(),nM=ie();function iM(r,t){return t===void 0&&(t=nM.async),function(e){return e.lift(new oM(r,t))}}s(iM,"sampleTime");Fi.sampleTime=iM;var oM=function(){function r(t,e){this.period=t,this.scheduler=e}return s(r,"SampleTimeOperator"),r.prototype.call=function(t,e){return e.subscribe(new sM(t,this.period,this.scheduler))},r}(),sM=function(r){tM(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.period=n,o.scheduler=i,o.hasValue=!1,o.add(i.schedule(uM,n,{subscriber:o,period:n})),o}return s(t,"SampleTimeSubscriber"),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(rM.Subscriber);function uM(r){var t=r.subscriber,e=r.period;t.notifyNext(),this.schedule(r,e)}s(uM,"dispatchNotification")});var Vb=h(Zt=>{"use strict";var Ub=Zt&&Zt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Zt,"__esModule",{value:!0});var Lb=w();function aM(r,t){return function(e){return e.lift(new Fb(r,t))}}s(aM,"sequenceEqual");Zt.sequenceEqual=aM;var Fb=function(){function r(t,e){this.compareTo=t,this.comparator=e}return s(r,"SequenceEqualOperator"),r.prototype.call=function(t,e){return e.subscribe(new Bb(t,this.compareTo,this.comparator))},r}();Zt.SequenceEqualOperator=Fb;var Bb=function(r){Ub(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.compareTo=n,o.comparator=i,o._a=[],o._b=[],o._oneComplete=!1,o.destination.add(n.subscribe(new cM(e,o))),o}return s(t,"SequenceEqualSubscriber"),t.prototype._next=function(e){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},t.prototype.checkValues=function(){for(var e=this,n=e._a,i=e._b,o=e.comparator;n.length>0&&i.length>0;){var u=n.shift(),a=i.shift(),f=!1;try{f=o?o(u,a):u===a}catch(c){this.destination.error(c)}f||this.emit(!1)}},t.prototype.emit=function(e){var n=this.destination;n.next(e),n.complete()},t.prototype.nextB=function(e){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(e),this.checkValues())},t.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},t}(Lb.Subscriber);Zt.SequenceEqualSubscriber=Bb;var cM=function(r){Ub(t,r);function t(e,n){var i=r.call(this,e)||this;return i.parent=n,i}return s(t,"SequenceEqualCompareToSubscriber"),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},t}(Lb.Subscriber)});var Wb=h(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});var fM=Yt(),lM=ns(),hM=J();function pM(){return new hM.Subject}s(pM,"shareSubjectFactory");function _M(){return function(r){return lM.refCount()(fM.multicast(pM)(r))}}s(_M,"share");zf.share=_M});var Hb=h(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});var dM=us();function vM(r,t,e){var n;return r&&typeof r=="object"?n=r:n={bufferSize:r,windowTime:t,refCount:!1,scheduler:e},function(i){return i.lift(bM(n))}}s(vM,"shareReplay");Yf.shareReplay=vM;function bM(r){var t=r.bufferSize,e=t===void 0?Number.POSITIVE_INFINITY:t,n=r.windowTime,i=n===void 0?Number.POSITIVE_INFINITY:n,o=r.refCount,u=r.scheduler,a,f=0,c,l=!1,p=!1;return s(function(m){f++;var S;!a||l?(l=!1,a=new dM.ReplaySubject(e,i,u),S=a.subscribe(this),c=m.subscribe({next:function(C){a.next(C)},error:function(C){l=!0,a.error(C)},complete:function(){p=!0,c=void 0,a.complete()}}),p&&(c=void 0)):S=a.subscribe(this),this.add(function(){f--,S.unsubscribe(),S=void 0,c&&!p&&o&&f===0&&(c.unsubscribe(),c=void 0,a=void 0)})},"shareReplayOperation")}s(bM,"shareReplayOperator")});var zb=h(Bi=>{"use strict";var yM=Bi&&Bi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Bi,"__esModule",{value:!0});var mM=w(),OM=Lr();function gM(r){return function(t){return t.lift(new SM(r,t))}}s(gM,"single");Bi.single=gM;var SM=function(){function r(t,e){this.predicate=t,this.source=e}return s(r,"SingleOperator"),r.prototype.call=function(t,e){return e.subscribe(new EM(t,this.predicate,this.source))},r}(),EM=function(r){yM(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.predicate=n,o.source=i,o.seenValue=!1,o.index=0,o}return s(t,"SingleSubscriber"),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var n=this.index++;this.predicate?this.tryNext(e,n):this.applySingleValue(e)},t.prototype.tryNext=function(e,n){try{this.predicate(e,n,this.source)&&this.applySingleValue(e)}catch(i){this.destination.error(i)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new OM.EmptyError)},t}(mM.Subscriber)});var Yb=h(Vi=>{"use strict";var wM=Vi&&Vi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Vi,"__esModule",{value:!0});var TM=w();function PM(r){return function(t){return t.lift(new CM(r))}}s(PM,"skip");Vi.skip=PM;var CM=function(){function r(t){this.total=t}return s(r,"SkipOperator"),r.prototype.call=function(t,e){return e.subscribe(new IM(t,this.total))},r}(),IM=function(r){wM(t,r);function t(e,n){var i=r.call(this,e)||this;return i.total=n,i.count=0,i}return s(t,"SkipSubscriber"),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(TM.Subscriber)});var Gb=h(Wi=>{"use strict";var RM=Wi&&Wi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Wi,"__esModule",{value:!0});var Zb=w(),AM=Ur();function jM(r){return function(t){return t.lift(new NM(r))}}s(jM,"skipLast");Wi.skipLast=jM;var NM=function(){function r(t){if(this._skipCount=t,this._skipCount<0)throw new AM.ArgumentOutOfRangeError}return s(r,"SkipLastOperator"),r.prototype.call=function(t,e){return this._skipCount===0?e.subscribe(new Zb.Subscriber(t)):e.subscribe(new qM(t,this._skipCount))},r}(),qM=function(r){RM(t,r);function t(e,n){var i=r.call(this,e)||this;return i._skipCount=n,i._count=0,i._ring=new Array(n),i}return s(t,"SkipLastSubscriber"),t.prototype._next=function(e){var n=this._skipCount,i=this._count++;if(i<n)this._ring[i]=e;else{var o=i%n,u=this._ring,a=u[o];u[o]=e,this.destination.next(a)}},t}(Zb.Subscriber)});var $b=h(Hi=>{"use strict";var xM=Hi&&Hi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Hi,"__esModule",{value:!0});var Zf=F();function DM(r){return function(t){return t.lift(new MM(r))}}s(DM,"skipUntil");Hi.skipUntil=DM;var MM=function(){function r(t){this.notifier=t}return s(r,"SkipUntilOperator"),r.prototype.call=function(t,e){return e.subscribe(new kM(t,this.notifier))},r}(),kM=function(r){xM(t,r);function t(e,n){var i=r.call(this,e)||this;i.hasValue=!1;var o=new Zf.SimpleInnerSubscriber(i);i.add(o),i.innerSubscription=o;var u=Zf.innerSubscribe(n,o);return u!==o&&(i.add(u),i.innerSubscription=u),i}return s(t,"SkipUntilSubscriber"),t.prototype._next=function(e){this.hasValue&&r.prototype._next.call(this,e)},t.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},t.prototype.notifyComplete=function(){},t}(Zf.SimpleOuterSubscriber)});var Kb=h(zi=>{"use strict";var UM=zi&&zi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(zi,"__esModule",{value:!0});var LM=w();function FM(r){return function(t){return t.lift(new BM(r))}}s(FM,"skipWhile");zi.skipWhile=FM;var BM=function(){function r(t){this.predicate=t}return s(r,"SkipWhileOperator"),r.prototype.call=function(t,e){return e.subscribe(new VM(t,this.predicate))},r}(),VM=function(r){UM(t,r);function t(e,n){var i=r.call(this,e)||this;return i.predicate=n,i.skipping=!0,i.index=0,i}return s(t,"SkipWhileSubscriber"),t.prototype._next=function(e){var n=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||n.next(e)},t.prototype.tryCallPredicate=function(e){try{var n=this.predicate(e,this.index++);this.skipping=!!n}catch(i){this.destination.error(i)}},t}(LM.Subscriber)});var Xb=h(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});var Qb=ei(),WM=xe();function HM(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return WM.isScheduler(e)?(r.pop(),function(n){return Qb.concat(r,n,e)}):function(n){return Qb.concat(r,n)}}s(HM,"startWith");Gf.startWith=HM});var Jb=h(Yi=>{"use strict";var zM=Yi&&Yi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Yi,"__esModule",{value:!0});var YM=j(),$f=Ja(),ZM=ti(),GM=function(r){zM(t,r);function t(e,n,i){n===void 0&&(n=0),i===void 0&&(i=$f.asap);var o=r.call(this)||this;return o.source=e,o.delayTime=n,o.scheduler=i,(!ZM.isNumeric(n)||n<0)&&(o.delayTime=0),(!i||typeof i.schedule!="function")&&(o.scheduler=$f.asap),o}return s(t,"SubscribeOnObservable"),t.create=function(e,n,i){return n===void 0&&(n=0),i===void 0&&(i=$f.asap),new t(e,n,i)},t.dispatch=function(e){var n=e.source,i=e.subscriber;return this.add(n.subscribe(i))},t.prototype._subscribe=function(e){var n=this.delayTime,i=this.source,o=this.scheduler;return o.schedule(t.dispatch,n,{source:i,subscriber:e})},t}(YM.Observable);Yi.SubscribeOnObservable=GM});var ey=h(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});var $M=Jb();function KM(r,t){return t===void 0&&(t=0),s(function(n){return n.lift(new QM(r,t))},"subscribeOnOperatorFunction")}s(KM,"subscribeOn");Kf.subscribeOn=KM;var QM=function(){function r(t,e){this.scheduler=t,this.delay=e}return s(r,"SubscribeOnOperator"),r.prototype.call=function(t,e){return new $M.SubscribeOnObservable(e,this.delay,this.scheduler).subscribe(t)},r}()});var Ts=h(Zi=>{"use strict";var XM=Zi&&Zi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Zi,"__esModule",{value:!0});var JM=me(),ek=De(),Qf=F();function ty(r,t){return typeof t=="function"?function(e){return e.pipe(ty(function(n,i){return ek.from(r(n,i)).pipe(JM.map(function(o,u){return t(n,o,i,u)}))}))}:function(e){return e.lift(new tk(r))}}s(ty,"switchMap");Zi.switchMap=ty;var tk=function(){function r(t){this.project=t}return s(r,"SwitchMapOperator"),r.prototype.call=function(t,e){return e.subscribe(new rk(t,this.project))},r}(),rk=function(r){XM(t,r);function t(e,n){var i=r.call(this,e)||this;return i.project=n,i.index=0,i}return s(t,"SwitchMapSubscriber"),t.prototype._next=function(e){var n,i=this.index++;try{n=this.project(e,i)}catch(o){this.destination.error(o);return}this._innerSub(n)},t.prototype._innerSub=function(e){var n=this.innerSubscription;n&&n.unsubscribe();var i=new Qf.SimpleInnerSubscriber(this),o=this.destination;o.add(i),this.innerSubscription=Qf.innerSubscribe(e,i),this.innerSubscription!==i&&o.add(this.innerSubscription)},t.prototype._complete=function(){var e=this.innerSubscription;(!e||e.closed)&&r.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&r.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(Qf.SimpleOuterSubscriber)});var ry=h(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});var nk=Ts(),ik=yt();function ok(){return nk.switchMap(ik.identity)}s(ok,"switchAll");Xf.switchAll=ok});var iy=h(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});var ny=Ts();function sk(r,t){return t?ny.switchMap(function(){return r},t):ny.switchMap(function(){return r})}s(sk,"switchMapTo");Jf.switchMapTo=sk});var oy=h(Gi=>{"use strict";var uk=Gi&&Gi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Gi,"__esModule",{value:!0});var el=F();function ak(r){return function(t){return t.lift(new ck(r))}}s(ak,"takeUntil");Gi.takeUntil=ak;var ck=function(){function r(t){this.notifier=t}return s(r,"TakeUntilOperator"),r.prototype.call=function(t,e){var n=new fk(t),i=el.innerSubscribe(this.notifier,new el.SimpleInnerSubscriber(n));return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n},r}(),fk=function(r){uk(t,r);function t(e){var n=r.call(this,e)||this;return n.seenValue=!1,n}return s(t,"TakeUntilSubscriber"),t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(el.SimpleOuterSubscriber)});var sy=h($i=>{"use strict";var lk=$i&&$i.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty($i,"__esModule",{value:!0});var hk=w();function pk(r,t){return t===void 0&&(t=!1),function(e){return e.lift(new _k(r,t))}}s(pk,"takeWhile");$i.takeWhile=pk;var _k=function(){function r(t,e){this.predicate=t,this.inclusive=e}return s(r,"TakeWhileOperator"),r.prototype.call=function(t,e){return e.subscribe(new dk(t,this.predicate,this.inclusive))},r}(),dk=function(r){lk(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.predicate=n,o.inclusive=i,o.index=0,o}return s(t,"TakeWhileSubscriber"),t.prototype._next=function(e){var n=this.destination,i;try{i=this.predicate(e,this.index++)}catch(o){n.error(o);return}this.nextOrComplete(e,i)},t.prototype.nextOrComplete=function(e,n){var i=this.destination;n?i.next(e):(this.inclusive&&i.next(e),i.complete())},t}(hk.Subscriber)});var uy=h(Ki=>{"use strict";var vk=Ki&&Ki.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ki,"__esModule",{value:!0});var bk=w(),Et=fs(),yk=Rr();function mk(r,t,e){return s(function(i){return i.lift(new Ok(r,t,e))},"tapOperatorFunction")}s(mk,"tap");Ki.tap=mk;var Ok=function(){function r(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return s(r,"DoOperator"),r.prototype.call=function(t,e){return e.subscribe(new gk(t,this.nextOrObserver,this.error,this.complete))},r}(),gk=function(r){vk(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u._tapNext=Et.noop,u._tapError=Et.noop,u._tapComplete=Et.noop,u._tapError=i||Et.noop,u._tapComplete=o||Et.noop,yk.isFunction(n)?(u._context=u,u._tapNext=n):n&&(u._context=n,u._tapNext=n.next||Et.noop,u._tapError=n.error||Et.noop,u._tapComplete=n.complete||Et.noop),u}return s(t,"TapSubscriber"),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(n){this.destination.error(n);return}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(n){this.destination.error(n);return}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){this.destination.error(e);return}return this.destination.complete()},t}(bk.Subscriber)});var rl=h(Gt=>{"use strict";var Sk=Gt&&Gt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Gt,"__esModule",{value:!0});var tl=F();Gt.defaultThrottleConfig={leading:!0,trailing:!1};function Ek(r,t){return t===void 0&&(t=Gt.defaultThrottleConfig),function(e){return e.lift(new wk(r,!!t.leading,!!t.trailing))}}s(Ek,"throttle");Gt.throttle=Ek;var wk=function(){function r(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return s(r,"ThrottleOperator"),r.prototype.call=function(t,e){return e.subscribe(new Tk(t,this.durationSelector,this.leading,this.trailing))},r}(),Tk=function(r){Sk(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.destination=e,u.durationSelector=n,u._leading=i,u._trailing=o,u._hasValue=!1,u}return s(t,"ThrottleSubscriber"),t.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},t.prototype.send=function(){var e=this,n=e._hasValue,i=e._sendValue;n&&(this.destination.next(i),this.throttle(i)),this._hasValue=!1,this._sendValue=void 0},t.prototype.throttle=function(e){var n=this.tryDurationSelector(e);n&&this.add(this._throttled=tl.innerSubscribe(n,new tl.SimpleInnerSubscriber(this)))},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(n){return this.destination.error(n),null}},t.prototype.throttlingDone=function(){var e=this,n=e._throttled,i=e._trailing;n&&n.unsubscribe(),this._throttled=void 0,i&&this.send()},t.prototype.notifyNext=function(){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()},t}(tl.SimpleOuterSubscriber)});var ay=h(Qi=>{"use strict";var Pk=Qi&&Qi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Qi,"__esModule",{value:!0});var Ck=w(),Ik=ie(),Rk=rl();function Ak(r,t,e){return t===void 0&&(t=Ik.async),e===void 0&&(e=Rk.defaultThrottleConfig),function(n){return n.lift(new jk(r,t,e.leading,e.trailing))}}s(Ak,"throttleTime");Qi.throttleTime=Ak;var jk=function(){function r(t,e,n,i){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=i}return s(r,"ThrottleTimeOperator"),r.prototype.call=function(t,e){return e.subscribe(new Nk(t,this.duration,this.scheduler,this.leading,this.trailing))},r}(),Nk=function(r){Pk(t,r);function t(e,n,i,o,u){var a=r.call(this,e)||this;return a.duration=n,a.scheduler=i,a.leading=o,a.trailing=u,a._hasTrailingValue=!1,a._trailingValue=null,a}return s(t,"ThrottleTimeSubscriber"),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(qk,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(Ck.Subscriber);function qk(r){var t=r.subscriber;t.clearThrottle()}s(qk,"dispatchNext")});var fy=h(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});var xk=ie(),Dk=Es(),Mk=ds(),kk=me();function Uk(r){return r===void 0&&(r=xk.async),function(t){return Mk.defer(function(){return t.pipe(Dk.scan(function(e,n){var i=e.current;return{value:n,current:r.now(),last:i}},{current:r.now(),value:void 0,last:void 0}),kk.map(function(e){var n=e.current,i=e.last,o=e.value;return new cy(o,n-i)}))})}}s(Uk,"timeInterval");Ps.timeInterval=Uk;var cy=function(){function r(t,e){this.value=t,this.interval=e}return s(r,"TimeInterval"),r}();Ps.TimeInterval=cy});var il=h(Xi=>{"use strict";var Lk=Xi&&Xi.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Xi,"__esModule",{value:!0});var Fk=ie(),Bk=pf(),nl=F();function Vk(r,t,e){return e===void 0&&(e=Fk.async),function(n){var i=Bk.isDate(r),o=i?+r-e.now():Math.abs(r);return n.lift(new Wk(o,i,t,e))}}s(Vk,"timeoutWith");Xi.timeoutWith=Vk;var Wk=function(){function r(t,e,n,i){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=i}return s(r,"TimeoutWithOperator"),r.prototype.call=function(t,e){return e.subscribe(new Hk(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},r}(),Hk=function(r){Lk(t,r);function t(e,n,i,o,u){var a=r.call(this,e)||this;return a.absoluteTimeout=n,a.waitFor=i,a.withObservable=o,a.scheduler=u,a.scheduleTimeout(),a}return s(t,"TimeoutWithSubscriber"),t.dispatchTimeout=function(e){var n=e.withObservable;e._unsubscribeAndRecycle(),e.add(nl.innerSubscribe(n,new nl.SimpleInnerSubscriber(e)))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),r.prototype._next.call(this,e)},t.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},t}(nl.SimpleOuterSubscriber)});var ly=h(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});var zk=ie(),Yk=oc(),Zk=il(),Gk=ss();function $k(r,t){return t===void 0&&(t=zk.async),Zk.timeoutWith(r,Gk.throwError(new Yk.TimeoutError),t)}s($k,"timeout");ol.timeout=$k});var py=h(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});var Kk=ie(),Qk=me();function Xk(r){return r===void 0&&(r=Kk.async),Qk.map(function(t){return new hy(t,r.now())})}s(Xk,"timestamp");Cs.timestamp=Xk;var hy=function(){function r(t,e){this.value=t,this.timestamp=e}return s(r,"Timestamp"),r}();Cs.Timestamp=hy});var _y=h(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});var Jk=qi();function eU(r,t,e){return e===0?[t]:(r.push(t),r)}s(eU,"toArrayReducer");function tU(){return Jk.reduce(eU,[])}s(tU,"toArray");sl.toArray=tU});var vy=h(Ji=>{"use strict";var rU=Ji&&Ji.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ji,"__esModule",{value:!0});var dy=J(),ul=F();function nU(r){return s(function(e){return e.lift(new iU(r))},"windowOperatorFunction")}s(nU,"window");Ji.window=nU;var iU=function(){function r(t){this.windowBoundaries=t}return s(r,"WindowOperator"),r.prototype.call=function(t,e){var n=new oU(t),i=e.subscribe(n);return i.closed||n.add(ul.innerSubscribe(this.windowBoundaries,new ul.SimpleInnerSubscriber(n))),i},r}(),oU=function(r){rU(t,r);function t(e){var n=r.call(this,e)||this;return n.window=new dy.Subject,e.next(n.window),n}return s(t,"WindowSubscriber"),t.prototype.notifyNext=function(){this.openWindow()},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var n=this.destination,i=this.window=new dy.Subject;n.next(i)},t}(ul.SimpleOuterSubscriber)});var yy=h(eo=>{"use strict";var sU=eo&&eo.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(eo,"__esModule",{value:!0});var uU=w(),by=J();function aU(r,t){return t===void 0&&(t=0),s(function(n){return n.lift(new cU(r,t))},"windowCountOperatorFunction")}s(aU,"windowCount");eo.windowCount=aU;var cU=function(){function r(t,e){this.windowSize=t,this.startWindowEvery=e}return s(r,"WindowCountOperator"),r.prototype.call=function(t,e){return e.subscribe(new fU(t,this.windowSize,this.startWindowEvery))},r}(),fU=function(r){sU(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.destination=e,o.windowSize=n,o.startWindowEvery=i,o.windows=[new by.Subject],o.count=0,e.next(o.windows[0]),o}return s(t,"WindowCountSubscriber"),t.prototype._next=function(e){for(var n=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,i=this.destination,o=this.windowSize,u=this.windows,a=u.length,f=0;f<a&&!this.closed;f++)u[f].next(e);var c=this.count-o+1;if(c>=0&&c%n===0&&!this.closed&&u.shift().complete(),++this.count%n===0&&!this.closed){var l=new by.Subject;u.push(l),i.next(l)}},t.prototype._error=function(e){var n=this.windows;if(n)for(;n.length>0&&!this.closed;)n.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(uU.Subscriber)});var Sy=h(to=>{"use strict";var Oy=to&&to.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(to,"__esModule",{value:!0});var lU=J(),hU=ie(),pU=w(),my=ti(),al=xe();function _U(r){var t=hU.async,e=null,n=Number.POSITIVE_INFINITY;return al.isScheduler(arguments[3])&&(t=arguments[3]),al.isScheduler(arguments[2])?t=arguments[2]:my.isNumeric(arguments[2])&&(n=Number(arguments[2])),al.isScheduler(arguments[1])?t=arguments[1]:my.isNumeric(arguments[1])&&(e=Number(arguments[1])),s(function(o){return o.lift(new dU(r,e,n,t))},"windowTimeOperatorFunction")}s(_U,"windowTime");to.windowTime=_U;var dU=function(){function r(t,e,n,i){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=i}return s(r,"WindowTimeOperator"),r.prototype.call=function(t,e){return e.subscribe(new bU(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},r}(),vU=function(r){Oy(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return s(t,"CountedSubject"),t.prototype.next=function(e){this._numberOfNextedValues++,r.prototype.next.call(this,e)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(lU.Subject),bU=function(r){Oy(t,r);function t(e,n,i,o,u){var a=r.call(this,e)||this;a.destination=e,a.windowTimeSpan=n,a.windowCreationInterval=i,a.maxWindowSize=o,a.scheduler=u,a.windows=[];var f=a.openWindow();if(i!==null&&i>=0){var c={subscriber:a,window:f,context:null},l={windowTimeSpan:n,windowCreationInterval:i,subscriber:a,scheduler:u};a.add(u.schedule(gy,n,c)),a.add(u.schedule(mU,i,l))}else{var p={subscriber:a,window:f,windowTimeSpan:n};a.add(u.schedule(yU,n,p))}return a}return s(t,"WindowTimeSubscriber"),t.prototype._next=function(e){for(var n=this.windows,i=n.length,o=0;o<i;o++){var u=n[o];u.closed||(u.next(e),u.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(u))}},t.prototype._error=function(e){for(var n=this.windows;n.length>0;)n.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var n=e.shift();n.closed||n.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new vU;this.windows.push(e);var n=this.destination;return n.next(e),e},t.prototype.closeWindow=function(e){e.complete();var n=this.windows;n.splice(n.indexOf(e),1)},t}(pU.Subscriber);function yU(r){var t=r.subscriber,e=r.windowTimeSpan,n=r.window;n&&t.closeWindow(n),r.window=t.openWindow(),this.schedule(r,e)}s(yU,"dispatchWindowTimeSpanOnly");function mU(r){var t=r.windowTimeSpan,e=r.subscriber,n=r.scheduler,i=r.windowCreationInterval,o=e.openWindow(),u=this,a={action:u,subscription:null},f={subscriber:e,window:o,context:a};a.subscription=n.schedule(gy,t,f),u.add(a.subscription),u.schedule(r,i)}s(mU,"dispatchWindowCreation");function gy(r){var t=r.subscriber,e=r.window,n=r.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),t.closeWindow(e)}s(gy,"dispatchWindowClose")});var wy=h(ro=>{"use strict";var OU=ro&&ro.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ro,"__esModule",{value:!0});var gU=J(),SU=$(),EU=Ot(),Ey=gt();function wU(r,t){return function(e){return e.lift(new TU(r,t))}}s(wU,"windowToggle");ro.windowToggle=wU;var TU=function(){function r(t,e){this.openings=t,this.closingSelector=e}return s(r,"WindowToggleOperator"),r.prototype.call=function(t,e){return e.subscribe(new PU(t,this.openings,this.closingSelector))},r}(),PU=function(r){OU(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.openings=n,o.closingSelector=i,o.contexts=[],o.add(o.openSubscription=Ey.subscribeToResult(o,n,n)),o}return s(t,"WindowToggleSubscriber"),t.prototype._next=function(e){var n=this.contexts;if(n)for(var i=n.length,o=0;o<i;o++)n[o].window.next(e)},t.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var i=n.length,o=-1;++o<i;){var u=n[o];u.window.error(e),u.subscription.unsubscribe()}r.prototype._error.call(this,e)},t.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,i=-1;++i<n;){var o=e[i];o.window.complete(),o.subscription.unsubscribe()}r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,i=-1;++i<n;){var o=e[i];o.window.unsubscribe(),o.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,n,i,o,u){if(e===this.openings){var a=void 0;try{var f=this.closingSelector;a=f(n)}catch(m){return this.error(m)}var c=new gU.Subject,l=new SU.Subscription,p={window:c,subscription:l};this.contexts.push(p);var _=Ey.subscribeToResult(this,a,p);_.closed?this.closeWindow(this.contexts.length-1):(_.context=p,l.add(_)),this.destination.next(c)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(e!==-1){var n=this.contexts,i=n[e],o=i.window,u=i.subscription;n.splice(e,1),o.complete(),u.unsubscribe()}},t}(EU.OuterSubscriber)});var Ty=h(no=>{"use strict";var CU=no&&no.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(no,"__esModule",{value:!0});var IU=J(),RU=Ot(),AU=gt();function jU(r){return s(function(e){return e.lift(new NU(r))},"windowWhenOperatorFunction")}s(jU,"windowWhen");no.windowWhen=jU;var NU=function(){function r(t){this.closingSelector=t}return s(r,"WindowOperator"),r.prototype.call=function(t,e){return e.subscribe(new qU(t,this.closingSelector))},r}(),qU=function(r){CU(t,r);function t(e,n){var i=r.call(this,e)||this;return i.destination=e,i.closingSelector=n,i.openWindow(),i}return s(t,"WindowSubscriber"),t.prototype.notifyNext=function(e,n,i,o,u){this.openWindow(u)},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){e===void 0&&(e=null),e&&(this.remove(e),e.unsubscribe());var n=this.window;n&&n.complete();var i=this.window=new IU.Subject;this.destination.next(i);var o;try{var u=this.closingSelector;o=u()}catch(a){this.destination.error(a),this.window.error(a);return}this.add(this.closingNotification=AU.subscribeToResult(this,o))},t}(RU.OuterSubscriber)});var Py=h(io=>{"use strict";var xU=io&&io.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(io,"__esModule",{value:!0});var DU=Ot(),MU=gt();function kU(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){var n;typeof r[r.length-1]=="function"&&(n=r.pop());var i=r;return e.lift(new UU(i,n))}}s(kU,"withLatestFrom");io.withLatestFrom=kU;var UU=function(){function r(t,e){this.observables=t,this.project=e}return s(r,"WithLatestFromOperator"),r.prototype.call=function(t,e){return e.subscribe(new LU(t,this.observables,this.project))},r}(),LU=function(r){xU(t,r);function t(e,n,i){var o=r.call(this,e)||this;o.observables=n,o.project=i,o.toRespond=[];var u=n.length;o.values=new Array(u);for(var a=0;a<u;a++)o.toRespond.push(a);for(var a=0;a<u;a++){var f=n[a];o.add(MU.subscribeToResult(o,f,void 0,a))}return o}return s(t,"WithLatestFromSubscriber"),t.prototype.notifyNext=function(e,n,i){this.values[i]=n;var o=this.toRespond;if(o.length>0){var u=o.indexOf(i);u!==-1&&o.splice(u,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(this.toRespond.length===0){var n=[e].concat(this.values);this.project?this._tryProject(n):this.destination.next(n)}},t.prototype._tryProject=function(e){var n;try{n=this.project.apply(this,e)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(DU.OuterSubscriber)});var Cy=h(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});var FU=Os();function BU(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return s(function(n){return n.lift.call(FU.zip.apply(void 0,[n].concat(r)))},"zipOperatorFunction")}s(BU,"zip");cl.zip=BU});var Iy=h(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var VU=Os();function WU(r){return function(t){return t.lift(new VU.ZipOperator(r))}}s(WU,"zipAll");fl.zipAll=WU});var Is=h(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var HU=Jc();b.audit=HU.audit;var zU=hv();b.auditTime=zU.auditTime;var YU=pv();b.buffer=YU.buffer;var ZU=vv();b.bufferCount=ZU.bufferCount;var GU=mv();b.bufferTime=GU.bufferTime;var $U=gv();b.bufferToggle=$U.bufferToggle;var KU=Sv();b.bufferWhen=KU.bufferWhen;var QU=Ev();b.catchError=QU.catchError;var XU=wv();b.combineAll=XU.combineAll;var JU=Tv();b.combineLatest=JU.combineLatest;var eL=Pv();b.concat=eL.concat;var tL=Rc();b.concatAll=tL.concatAll;var rL=cf();b.concatMap=rL.concatMap;var nL=Cv();b.concatMapTo=nL.concatMapTo;var iL=Iv();b.count=iL.count;var oL=Rv();b.debounce=oL.debounce;var sL=Av();b.debounceTime=sL.debounceTime;var uL=Wr();b.defaultIfEmpty=uL.defaultIfEmpty;var aL=Nv();b.delay=aL.delay;var cL=xv();b.delayWhen=cL.delayWhen;var fL=Dv();b.dematerialize=fL.dematerialize;var lL=kv();b.distinct=lL.distinct;var hL=vf();b.distinctUntilChanged=hL.distinctUntilChanged;var pL=Uv();b.distinctUntilKeyChanged=pL.distinctUntilKeyChanged;var _L=Fv();b.elementAt=_L.elementAt;var dL=Bv();b.endWith=dL.endWith;var vL=Vv();b.every=vL.every;var bL=Wv();b.exhaust=bL.exhaust;var yL=zv();b.exhaustMap=yL.exhaustMap;var mL=Gv();b.expand=mL.expand;var OL=Ft();b.filter=OL.filter;var gL=$v();b.finalize=gL.finalize;var SL=Ef();b.find=SL.find;var EL=Xv();b.findIndex=EL.findIndex;var wL=Jv();b.first=wL.first;var TL=La();b.groupBy=TL.groupBy;var PL=eb();b.ignoreElements=PL.ignoreElements;var CL=tb();b.isEmpty=CL.isEmpty;var IL=rb();b.last=IL.last;var RL=me();b.map=RL.map;var AL=nb();b.mapTo=AL.mapTo;var jL=ib();b.materialize=jL.materialize;var NL=ab();b.max=NL.max;var qL=cb();b.merge=qL.merge;var xL=_s();b.mergeAll=xL.mergeAll;var Ry=Jn();b.mergeMap=Ry.mergeMap;b.flatMap=Ry.flatMap;var DL=lb();b.mergeMapTo=DL.mergeMapTo;var ML=_b();b.mergeScan=ML.mergeScan;var kL=db();b.min=kL.min;var UL=Yt();b.multicast=UL.multicast;var LL=Xa();b.observeOn=LL.observeOn;var FL=mb();b.onErrorResumeNext=FL.onErrorResumeNext;var BL=Ob();b.pairwise=BL.pairwise;var VL=Sb();b.partition=VL.partition;var WL=Eb();b.pluck=WL.pluck;var HL=Pb();b.publish=HL.publish;var zL=Cb();b.publishBehavior=zL.publishBehavior;var YL=Ib();b.publishLast=YL.publishLast;var ZL=Rb();b.publishReplay=ZL.publishReplay;var GL=Ab();b.race=GL.race;var $L=qi();b.reduce=$L.reduce;var KL=Nb();b.repeat=KL.repeat;var QL=qb();b.repeatWhen=QL.repeatWhen;var XL=xb();b.retry=XL.retry;var JL=Db();b.retryWhen=JL.retryWhen;var eF=ns();b.refCount=eF.refCount;var tF=Mb();b.sample=tF.sample;var rF=kb();b.sampleTime=rF.sampleTime;var nF=Es();b.scan=nF.scan;var iF=Vb();b.sequenceEqual=iF.sequenceEqual;var oF=Wb();b.share=oF.share;var sF=Hb();b.shareReplay=sF.shareReplay;var uF=zb();b.single=uF.single;var aF=Yb();b.skip=aF.skip;var cF=Gb();b.skipLast=cF.skipLast;var fF=$b();b.skipUntil=fF.skipUntil;var lF=Kb();b.skipWhile=lF.skipWhile;var hF=Xb();b.startWith=hF.startWith;var pF=ey();b.subscribeOn=pF.subscribeOn;var _F=ry();b.switchAll=_F.switchAll;var dF=Ts();b.switchMap=dF.switchMap;var vF=iy();b.switchMapTo=vF.switchMapTo;var bF=gs();b.take=bF.take;var yF=Ss();b.takeLast=yF.takeLast;var mF=oy();b.takeUntil=mF.takeUntil;var OF=sy();b.takeWhile=OF.takeWhile;var gF=uy();b.tap=gF.tap;var SF=rl();b.throttle=SF.throttle;var EF=ay();b.throttleTime=EF.throttleTime;var wF=gi();b.throwIfEmpty=wF.throwIfEmpty;var TF=fy();b.timeInterval=TF.timeInterval;var PF=ly();b.timeout=PF.timeout;var CF=il();b.timeoutWith=CF.timeoutWith;var IF=py();b.timestamp=IF.timestamp;var RF=_y();b.toArray=RF.toArray;var AF=vy();b.window=AF.window;var jF=yy();b.windowCount=jF.windowCount;var NF=Sy();b.windowTime=NF.windowTime;var qF=wy();b.windowToggle=qF.windowToggle;var xF=Ty();b.windowWhen=xF.windowWhen;var DF=Py();b.withLatestFrom=DF.withLatestFrom;var MF=Cy();b.zip=MF.zip;var kF=Iy();b.zipAll=kF.zipAll});var As=h(Rs=>{"use strict";var Ay=Rt();Object.defineProperty(Rs,"__esModule",{value:!0});Rs.default=void 0;var UF=Ay(pr()),LF=Ay(_r()),FF=R(),oo=ii(),$t=Is(),so={READY:0,STREAMING:1,COMPLETED:2},BF=function(){function r(t){(0,UF.default)(this,r);var e=t.pipe((0,$t.publishReplay)(1),(0,$t.refCount)());this._result=e,this._keys=e.pipe((0,$t.flatMap)(function(n){return(0,oo.from)(n.keys())}),(0,$t.publishReplay)(1),(0,$t.refCount)()),this._records=new oo.Subject,this._summary=new oo.ReplaySubject,this._state=so.READY}return s(r,"RxResult"),(0,LF.default)(r,[{key:"keys",value:s(function(){return this._keys},"keys")},{key:"records",value:s(function(){var e=this;return this._result.pipe((0,$t.flatMap)(function(n){return new oo.Observable(function(i){return e._startStreaming({result:n,recordsObserver:i})})}))},"records")},{key:"consume",value:s(function(){var e=this;return this._result.pipe((0,$t.flatMap)(function(n){return new oo.Observable(function(i){return e._startStreaming({result:n,summaryObserver:i})})}))},"consume")},{key:"_startStreaming",value:s(function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.result,o=n.recordsObserver,u=o===void 0?null:o,a=n.summaryObserver,f=a===void 0?null:a,c=[];return f&&c.push(this._summary.subscribe(f)),this._state<so.STREAMING?(this._state=so.STREAMING,u&&c.push(this._records.subscribe(u)),c.push({unsubscribe:s(function(){i._cancel&&i._cancel()},"unsubscribe")}),this._records.observers.length===0&&i._cancel(),i.subscribe({onNext:s(function(p){e._records.next(p)},"onNext"),onCompleted:s(function(p){e._records.complete(),e._summary.next(p),e._summary.complete(),e._state=so.COMPLETED},"onCompleted"),onError:s(function(p){e._records.error(p),e._summary.error(p),e._state=so.COMPLETED},"onError")})):u&&u.error((0,FF.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){c.forEach(function(l){return l.unsubscribe()})}},"_startStreaming")}]),r}();Rs.default=BF});var ll=h(qs=>{"use strict";var Ns=Rt();Object.defineProperty(qs,"__esModule",{value:!0});qs.default=void 0;var VF=Ns(pr()),WF=Ns(_r()),js=ii(),HF=Ns(As()),H5=Ns(R()),zF=function(){function r(t){(0,VF.default)(this,r),this._txc=t}return s(r,"RxTransaction"),(0,WF.default)(r,[{key:"run",value:s(function(e,n){var i=this;return new HF.default(new js.Observable(function(o){try{o.next(i._txc.run(e,n)),o.complete()}catch(u){o.error(u)}return function(){}}))},"run")},{key:"commit",value:s(function(){var e=this;return new js.Observable(function(n){e._txc.commit().then(function(){n.complete()}).catch(function(i){return n.error(i)})})},"commit")},{key:"rollback",value:s(function(){var e=this;return new js.Observable(function(n){e._txc.rollback().then(function(){n.complete()}).catch(function(i){return n.error(i)})})},"rollback")},{key:"close",value:s(function(){var e=this;return new js.Observable(function(n){e._txc.close().then(function(){n.complete()}).catch(function(i){return n.error(i)})})},"close")}]),r}();qs.default=zF});var My=h(Ds=>{"use strict";var Dy=Rt();Object.defineProperty(Ds,"__esModule",{value:!0});Ds.default=void 0;var YF=Dy(pr()),ZF=Dy(_r()),uo=R(),hl=ii(),pl=Is(),Z5=uo.internal.logger.Logger,GF=uo.internal.retryStrategy.canRetryOn,$F=uo.error.SERVICE_UNAVAILABLE,G5=uo.error.SESSION_EXPIRED,jy=30*1e3,Ny=1e3,qy=2,xy=.2,KF=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.maxRetryTimeout,n=e===void 0?jy:e,i=t.initialDelay,o=i===void 0?Ny:i,u=t.delayMultiplier,a=u===void 0?qy:u,f=t.delayJitter,c=f===void 0?xy:f,l=t.logger,p=l===void 0?null:l;(0,YF.default)(this,r),this._maxRetryTimeout=xs(n,jy),this._initialDelay=xs(o,Ny),this._delayMultiplier=xs(a,qy),this._delayJitter=xs(c,xy),this._logger=p}return s(r,"RxRetryLogic"),(0,ZF.default)(r,[{key:"retry",value:s(function(e){var n=this;return e.pipe((0,pl.retryWhen)(function(i){var o=[],u=Date.now(),a=1,f=n._initialDelay;return i.pipe((0,pl.flatMap)(function(c){if(!GF(c))return(0,hl.throwError)(c);if(o.push(c),a>=2&&Date.now()-u>=n._maxRetryTimeout){var l=(0,uo.newError)("Failed after retried for ".concat(a," times in ").concat(n._maxRetryTimeout," ms. Make sure that your database is online and retry again."),$F);return l.seenErrors=o,(0,hl.throwError)(l)}var p=n._computeNextDelay(f);return f=f*n._delayMultiplier,a++,n._logger&&n._logger.warn("Transaction failed and will be retried in ".concat(p)),(0,hl.of)(1).pipe((0,pl.delay)(p))}))}))},"retry")},{key:"_computeNextDelay",value:s(function(e){var n=e*this._delayJitter;return e-n+2*n*Math.random()},"_computeNextDelay")}]),r}();Ds.default=KF;function xs(r,t){return r||r===0?r:t}s(xs,"valueOrDefault")});var _l=h(Us=>{"use strict";var ao=Rt();Object.defineProperty(Us,"__esModule",{value:!0});Us.default=void 0;var QF=ao(pr()),XF=ao(_r()),Yr=ii(),Ms=Is(),JF=ao(As()),ky=R(),eB=ao(ll()),tB=ao(My()),Uy=ky.internal.constants,rB=Uy.ACCESS_MODE_READ,nB=Uy.ACCESS_MODE_WRITE,ks=ky.internal.txConfig.TxConfig,iB=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.session,n=t.config;(0,QF.default)(this,r),this._session=e,this._retryLogic=oB(n)}return s(r,"RxSession"),(0,XF.default)(r,[{key:"run",value:s(function(e,n,i){var o=this;return new JF.default(new Yr.Observable(function(u){try{u.next(o._session.run(e,n,i)),u.complete()}catch(a){u.error(a)}return function(){}}))},"run")},{key:"beginTransaction",value:s(function(e){return this._beginTransaction(this._session._mode,e)},"beginTransaction")},{key:"readTransaction",value:s(function(e,n){return this._runTransaction(rB,e,n)},"readTransaction")},{key:"writeTransaction",value:s(function(e,n){return this._runTransaction(nB,e,n)},"writeTransaction")},{key:"close",value:s(function(){var e=this;return new Yr.Observable(function(n){e._session.close().then(function(){n.complete()}).catch(function(i){return n.error(i)})})},"close")},{key:"lastBookmark",value:s(function(){return this._session.lastBookmark()},"lastBookmark")},{key:"_beginTransaction",value:s(function(e,n){var i=this,o=ks.empty();return n&&(o=new ks(n)),new Yr.Observable(function(u){try{u.next(new eB.default(i._session._beginTransaction(e,o))),u.complete()}catch(a){u.error(a)}return function(){}})},"_beginTransaction")},{key:"_runTransaction",value:s(function(e,n,i){var o=ks.empty();return i&&(o=new ks(i)),this._retryLogic.retry(this._beginTransaction(e,i).pipe((0,Ms.flatMap)(function(u){return(0,Yr.defer)(function(){try{return n(u)}catch(a){return(0,Yr.throwError)(a)}}).pipe((0,Ms.catchError)(function(a){return u.rollback().pipe((0,Ms.concat)((0,Yr.throwError)(a)))}),(0,Ms.concat)(u.commit()))})))},"_runTransaction")}]),r}();Us.default=iB;function oB(r){var t=r&&r.maxTransactionRetryTime?r.maxTransactionRetryTime:null;return new tB.default({maxRetryTimeout:t})}s(oB,"_createRetryLogic")});var Wy=h(We=>{"use strict";var Zr=Rt();Object.defineProperty(We,"__esModule",{value:!0});We.default=We.WRITE=We.READ=We.Driver=void 0;var sB=Zr(pr()),uB=Zr(_r()),aB=Zr(jh()),cB=Zr(qh()),Ly=Zr(xh()),Ls=R(),fB=Zr(_l());function lB(r){var t=hB();return s(function(){var n=(0,Ly.default)(r),i;if(t){var o=(0,Ly.default)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,cB.default)(this,i)},"_createSuperInternal")}s(lB,"_createSuper");function hB(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}s(hB,"_isNativeReflectConstruct");var Fy=Ls.internal.constants.FETCH_ALL,pB=Ls.driver.READ,By=Ls.driver.WRITE;We.WRITE=By;We.READ=pB;var Vy=function(r){(0,aB.default)(e,r);var t=lB(e);function e(){return(0,sB.default)(this,e),t.apply(this,arguments)}return s(e,"Driver"),(0,uB.default)(e,[{key:"rxSession",value:s(function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.defaultAccessMode,u=o===void 0?By:o,a=i.bookmarks,f=i.database,c=f===void 0?"":f,l=i.fetchSize,p=i.impersonatedUser;return new fB.default({session:this._newSession({defaultAccessMode:u,bookmarkOrBookmarks:a,database:c,impersonatedUser:p,reactive:!0,fetchSize:_B(l,this._config.fetchSize)}),config:this._config})},"rxSession")}]),e}(Ls.Driver);We.Driver=Vy;function _B(r,t){var e=parseInt(r,10);if(e>0||e===Fy)return e;if(e===0||e<0)throw new Error("The fetch size can only be a positive value or ".concat(Fy," for ALL. However fetchSize = ").concat(e));return t}s(_B,"validateFetchSizeValue");var dB=Vy;We.default=dB});var Hy=h(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.default=void 0;var vB="4.4.10";Fs.default=vB});var vl=h(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});var bB=function(){function r(){}return s(r,"LoadBalancingStrategy"),r.prototype.selectReader=function(t){throw new Error("Abstract function")},r.prototype.selectWriter=function(t){throw new Error("Abstract function")},r}();dl.default=bB});var zy=h(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});var yB=function(){function r(t){this._offset=t||0}return s(r,"RoundRobinArrayIndex"),r.prototype.next=function(t){if(t===0)return-1;var e=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),e%t},r}();bl.default=yB});var Gy=h(Kt=>{"use strict";var mB=Kt&&Kt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Zy=Kt&&Kt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Kt,"__esModule",{value:!0});var Yy=Zy(zy()),OB=Zy(vl()),gB=function(r){mB(t,r);function t(e){var n=r.call(this)||this;return n._readersIndex=new Yy.default,n._writersIndex=new Yy.default,n._connectionPool=e,n}return s(t,"LeastConnectedLoadBalancingStrategy"),t.prototype.selectReader=function(e){return this._select(e,this._readersIndex)},t.prototype.selectWriter=function(e){return this._select(e,this._writersIndex)},t.prototype._select=function(e,n){var i=e.length;if(i===0)return null;var o=n.next(i),u=o,a=null,f=Number.MAX_SAFE_INTEGER;do{var c=e[u],l=this._connectionPool.activeResourceCount(c);l<f&&(a=c,f=l),u===i-1?u=0:u++}while(u!==o);return a},t}(OB.default);Kt.default=gB});var yl=h(rt=>{"use strict";var $y=rt&&rt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rt,"__esModule",{value:!0});rt.LeastConnectedLoadBalancingStrategy=rt.LoadBalancingStrategy=void 0;var SB=$y(vl());rt.LoadBalancingStrategy=SB.default;var Ky=$y(Gy());rt.LeastConnectedLoadBalancingStrategy=Ky.default;rt.default=Ky.default});var ml=h(co=>{"use strict";var EB=co&&co.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(co,"__esModule",{value:!0});var Qy=function(){function r(t){this.position=0,this.length=t}return s(r,"BaseBuffer"),r.prototype.getUInt8=function(t){throw new Error("Not implemented")},r.prototype.getInt8=function(t){throw new Error("Not implemented")},r.prototype.getFloat64=function(t){throw new Error("Not implemented")},r.prototype.putUInt8=function(t,e){throw new Error("Not implemented")},r.prototype.putInt8=function(t,e){throw new Error("Not implemented")},r.prototype.putFloat64=function(t,e){throw new Error("Not implemented")},r.prototype.getInt16=function(t){return this.getInt8(t)<<8|this.getUInt8(t+1)},r.prototype.getUInt16=function(t){return this.getUInt8(t)<<8|this.getUInt8(t+1)},r.prototype.getInt32=function(t){return this.getInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)},r.prototype.getUInt32=function(t){return this.getUInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)},r.prototype.getInt64=function(t){return this.getInt8(t)<<56|this.getUInt8(t+1)<<48|this.getUInt8(t+2)<<40|this.getUInt8(t+3)<<32|this.getUInt8(t+4)<<24|this.getUInt8(t+5)<<16|this.getUInt8(t+6)<<8|this.getUInt8(t+7)},r.prototype.getSlice=function(t,e){return new wB(t,e,this)},r.prototype.putInt16=function(t,e){this.putInt8(t,e>>8),this.putUInt8(t+1,e&255)},r.prototype.putUInt16=function(t,e){this.putUInt8(t,e>>8&255),this.putUInt8(t+1,e&255)},r.prototype.putInt32=function(t,e){this.putInt8(t,e>>24),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,e&255)},r.prototype.putUInt32=function(t,e){this.putUInt8(t,e>>24&255),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,e&255)},r.prototype.putInt64=function(t,e){this.putInt8(t,e>>48),this.putUInt8(t+1,e>>42&255),this.putUInt8(t+2,e>>36&255),this.putUInt8(t+3,e>>30&255),this.putUInt8(t+4,e>>24&255),this.putUInt8(t+5,e>>16&255),this.putUInt8(t+6,e>>8&255),this.putUInt8(t+7,e&255)},r.prototype.putBytes=function(t,e){for(var n=0,i=e.remaining();n<i;n++)this.putUInt8(t+n,e.readUInt8())},r.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},r.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},r.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},r.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},r.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},r.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},r.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},r.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},r.prototype.writeUInt8=function(t){this.putUInt8(this._updatePos(1),t)},r.prototype.writeInt8=function(t){this.putInt8(this._updatePos(1),t)},r.prototype.writeInt16=function(t){this.putInt16(this._updatePos(2),t)},r.prototype.writeInt32=function(t){this.putInt32(this._updatePos(4),t)},r.prototype.writeUInt32=function(t){this.putUInt32(this._updatePos(4),t)},r.prototype.writeInt64=function(t){this.putInt64(this._updatePos(8),t)},r.prototype.writeFloat64=function(t){this.putFloat64(this._updatePos(8),t)},r.prototype.writeBytes=function(t){this.putBytes(this._updatePos(t.remaining()),t)},r.prototype.readSlice=function(t){return this.getSlice(this._updatePos(t),t)},r.prototype._updatePos=function(t){var e=this.position;return this.position+=t,e},r.prototype.remaining=function(){return this.length-this.position},r.prototype.hasRemaining=function(){return this.remaining()>0},r.prototype.reset=function(){this.position=0},r.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},r.prototype.toHex=function(){for(var t="",e=0;e<this.length;e++){var n=this.getUInt8(e).toString(16);n.length===1&&(n="0"+n),t+=n,e!==this.length-1&&(t+=" ")}return t},r}();co.default=Qy;var wB=function(r){EB(t,r);function t(e,n,i){var o=r.call(this,n)||this;return o._start=e,o._inner=i,o}return s(t,"SliceBuffer"),t.prototype.putUInt8=function(e,n){this._inner.putUInt8(this._start+e,n)},t.prototype.getUInt8=function(e){return this._inner.getUInt8(this._start+e)},t.prototype.putInt8=function(e,n){this._inner.putInt8(this._start+e,n)},t.prototype.putFloat64=function(e,n){this._inner.putFloat64(this._start+e,n)},t.prototype.getInt8=function(e){return this._inner.getInt8(this._start+e)},t.prototype.getFloat64=function(e){return this._inner.getFloat64(this._start+e)},t}(Qy)});var Bs=h(Qt=>{"use strict";var TB=Qt&&Qt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.BaseBuffer=void 0;var Xy=TB(ml());Qt.BaseBuffer=Xy.default;Qt.default=Xy.default});var Gr=h(nt=>{"use strict";var PB=nt&&nt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Jy=nt&&nt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(nt,"__esModule",{value:!0});nt.alloc=void 0;var Vs=Jy(require("buffer")),CB=Jy(Bs()),em=function(r){PB(t,r);function t(e){var n=this,i=RB(e);return n=r.call(this,i.length)||this,n._buffer=i,n}return s(t,"ChannelBuffer"),t.prototype.getUInt8=function(e){return this._buffer.readUInt8(e)},t.prototype.getInt8=function(e){return this._buffer.readInt8(e)},t.prototype.getFloat64=function(e){return this._buffer.readDoubleBE(e)},t.prototype.putUInt8=function(e,n){this._buffer.writeUInt8(n,e)},t.prototype.putInt8=function(e,n){this._buffer.writeInt8(n,e)},t.prototype.putFloat64=function(e,n){this._buffer.writeDoubleBE(n,e)},t.prototype.putBytes=function(e,n){if(n instanceof t){var i=Math.min(n.length-n.position,this.length-e);n._buffer.copy(this._buffer,e,n.position,n.position+i),n.position+=i}else r.prototype.putBytes.call(this,e,n)},t.prototype.getSlice=function(e,n){return new t(this._buffer.slice(e,e+n))},t}(CB.default);nt.default=em;function IB(r){return new em(r)}s(IB,"alloc");nt.alloc=IB;function RB(r){return r instanceof Vs.default.Buffer?r:typeof r=="number"&&typeof Vs.default.Buffer.alloc=="function"?Vs.default.Buffer.alloc(r):new Vs.default.Buffer(r)}s(RB,"newChannelJSBuffer")});var nm=h(lo=>{"use strict";var Hs=lo&&lo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(lo,"__esModule",{value:!0});var AB=Hs(require("net")),Ol=Hs(require("tls")),jB=Hs(require("fs")),tm=Hs(Gr()),Me=R(),Sl=Me.internal.util,fo=Sl.ENCRYPTION_OFF,NB=Sl.ENCRYPTION_ON,qB=Sl.isEmptyObjectOrNull,xB=0,rm={TRUST_CUSTOM_CA_SIGNED_CERTIFICATES:function(r,t,e){if(!r.trustedCertificates||r.trustedCertificates.length===0){e((0,Me.newError)('You are using TRUST_CUSTOM_CA_SIGNED_CERTIFICATES as the method to verify trust for encrypted  connections, but have not configured any trustedCertificates. You  must specify the path to at least one trusted X.509 certificate for this to work. Two other alternatives is to use TRUST_ALL_CERTIFICATES or to disable encryption by setting encrypted="'+fo+'"in your driver configuration.'));return}var n=gl(r.address.host(),r.trustedCertificates.map(function(o){return jB.default.readFileSync(o)})),i=Ol.default.connect(r.address.port(),r.address.resolvedHost(),n,function(){i.authorized?t():e((0,Me.newError)("Server certificate is not trusted. If you trust the database you are connecting to, add the signing certificate, or the server certificate, to the list of certificates trusted by this driver using `neo4j.driver(.., { trustedCertificates:['path/to/certificate.crt']}). This  is a security measure to protect against man-in-the-middle attacks. If you are just trying  Neo4j out and are not concerned about encryption, simply disable it using `encrypted=\""+fo+'"` in the driver options. Socket responded with: '+i.authorizationError))});return i.on("error",e),Ws(i)},TRUST_SYSTEM_CA_SIGNED_CERTIFICATES:function(r,t,e){var n=gl(r.address.host()),i=Ol.default.connect(r.address.port(),r.address.resolvedHost(),n,function(){i.authorized?t():e((0,Me.newError)("Server certificate is not trusted. If you trust the database you are connecting to, use TRUST_CUSTOM_CA_SIGNED_CERTIFICATES and add the signing certificate, or the server certificate, to the list of certificates trusted by this driver using `neo4j.driver(.., { trustedCertificates:['path/to/certificate.crt']}). This  is a security measure to protect against man-in-the-middle attacks. If you are just trying  Neo4j out and are not concerned about encryption, simply disable it using `encrypted=\""+fo+'"` in the driver options. Socket responded with: '+i.authorizationError))});return i.on("error",e),Ws(i)},TRUST_ALL_CERTIFICATES:function(r,t,e){var n=gl(r.address.host()),i=Ol.default.connect(r.address.port(),r.address.resolvedHost(),n,function(){var o=i.getPeerCertificate();qB(o)?e((0,Me.newError)('Secure connection was successful but server did not return any valid certificates. Such connection can not be trusted. If you are just trying  Neo4j out and are not concerned about encryption, simply disable it using `encrypted="'+fo+'"` in the driver options. Socket responded with: '+i.authorizationError)):t()});return i.on("error",e),Ws(i)}};function DB(r,t,e){e===void 0&&(e=s(function(){return null},"onFailure"));var n=kB(r);if(MB(r)){if(rm[n])return rm[n](r,t,e);e((0,Me.newError)("Unknown trust strategy: "+r.trust+". Please use either trust:'TRUST_CUSTOM_CA_SIGNED_CERTIFICATES' or trust:'TRUST_ALL_CERTIFICATES' in your driver configuration. Alternatively, you can disable encryption by setting `encrypted:\""+fo+'"`. There is no mechanism to use encryption without trust verification, because this incurs the overhead of encryption without improving security. If the driver does not verify that the peer it is connected to is really Neo4j, it is very easy for an attacker to bypass the encryption by pretending to be Neo4j.'))}else{var i=AB.default.connect(r.address.port(),r.address.resolvedHost(),t);return i.on("error",e),Ws(i)}}s(DB,"_connect");function MB(r){var t=r.encrypted==null||r.encrypted===void 0;return t?!1:r.encrypted===!0||r.encrypted===NB}s(MB,"isEncrypted");function kB(r){return r.trust?r.trust:"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"}s(kB,"trustStrategyName");function gl(r,t){return t===void 0&&(t=void 0),{rejectUnauthorized:!1,servername:r,ca:t}}s(gl,"newTlsOptions");function Ws(r){return r.setKeepAlive(!0),r}s(Ws,"configureSocket");var UB=function(){function r(t,e){e===void 0&&(e=DB);var n=this;this.id=xB++,this._pending=[],this._open=!0,this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._handleConnectionTerminated=this._handleConnectionTerminated.bind(this),this._connectionErrorCode=t.connectionErrorCode,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._conn=e(t,function(){if(n._open){n._conn.on("data",function(u){n.onmessage&&n.onmessage(new tm.default(u))}),n._conn.on("error",n._handleConnectionError),n._conn.on("end",n._handleConnectionTerminated);var i=n._pending;n._pending=null;for(var o=0;o<i.length;o++)n.write(i[o])}},this._handleConnectionError),this._setupConnectionTimeout(t,this._conn)}return s(r,"NodeChannel"),r.prototype._handleConnectionError=function(t){var e="Failed to connect to server. Please ensure that your database is listening on the correct host and port and that you have compatible encryption settings both on Neo4j server and driver. Note that the default encryption setting has changed in Neo4j 4.0.";t.message&&(e+=" Caused by: "+t.message),this._error=(0,Me.newError)(e,this._connectionErrorCode),this.onerror&&this.onerror(this._error)},r.prototype._handleConnectionTerminated=function(){this._open=!1,this._error=(0,Me.newError)("Connection was closed by server",this._connectionErrorCode),this.onerror&&this.onerror(this._error)},r.prototype._setupConnectionTimeout=function(t,e){var n=this,i=t.connectionTimeout;if(i){var o=s(function(){e.setTimeout(0)},"connectListener_1"),u=s(function(){e.setTimeout(0),e.destroy((0,Me.newError)("Failed to establish connection in "+i+"ms",t.connectionErrorCode))},"timeoutListener_1");e.on("connect",o),e.on("timeout",u),this._removeConnectionTimeoutListeners=function(){n._conn.off("connect",o),n._conn.off("timeout",u)},e.setTimeout(i)}},r.prototype.setupReceiveTimeout=function(t){var e=this;this._removeConnectionTimeoutListeners&&this._removeConnectionTimeoutListeners(),this._conn.on("timeout",function(){e._conn.destroy((0,Me.newError)("Connection lost. Server didn't respond in "+t+"ms",e._connectionErrorCode))}),this._receiveTimeout=t},r.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._conn.setTimeout(0))},r.prototype.startReceiveTimeout=function(){this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._conn.setTimeout(this._receiveTimeout))},r.prototype.write=function(t){if(this._pending!==null)this._pending.push(t);else if(t instanceof tm.default)this._conn.write(t._buffer);else throw(0,Me.newError)("Don't know how to write: "+t)},r.prototype.close=function(){var t=this;return new Promise(function(e,n){var i=s(function(){t._conn.destroyed||t._conn.destroy(),e()},"cleanup");t._open?(t._open=!1,t._conn.removeListener("end",t._handleConnectionTerminated),t._conn.on("end",function(){return i()}),t._conn.on("close",function(){return i()}),t._conn.end(),t._conn.destroy()):i()})},r}();lo.default=UB});var im=h(Xt=>{"use strict";var LB=Xt&&Xt.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),FB=Xt&&Xt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xt,"__esModule",{value:!0});var BB=FB(require("dns")),VB=R(),WB=VB.internal.resolver.BaseHostNameResolver,HB=function(r){LB(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"NodeHostNameResolver"),t.prototype.resolve=function(e){return new Promise(function(n){BB.default.lookup(e.host(),{all:!0},function(i,o){if(i)n([e]);else{var u=o.map(function(a){return e.resolveWith(a.address)});n(u)}})})},t}(WB);Xt.default=HB});var sm=h(wt=>{"use strict";var om=wt&&wt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wt,"__esModule",{value:!0});wt.HostNameResolver=wt.Channel=void 0;var zB=om(nm()),YB=om(im());wt.Channel=zB.default;wt.HostNameResolver=YB.default});var um=h(ho=>{"use strict";var ZB=ho&&ho.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ho,"__esModule",{value:!0});var GB=Bs(),$B=Gr(),KB=function(r){ZB(t,r);function t(e){for(var n=this,i=0,o=0;o<e.length;o++)i+=e[o].length;return n=r.call(this,i)||this,n._buffers=e,n}return s(t,"CombinedBuffer"),t.prototype.getUInt8=function(e){for(var n=0;n<this._buffers.length;n++){var i=this._buffers[n];if(e>=i.length)e-=i.length;else return i.getUInt8(e)}},t.prototype.getInt8=function(e){for(var n=0;n<this._buffers.length;n++){var i=this._buffers[n];if(e>=i.length)e-=i.length;else return i.getInt8(e)}},t.prototype.getFloat64=function(e){for(var n=(0,$B.alloc)(8),i=0;i<8;i++)n.putUInt8(i,this.getUInt8(e+i));return n.getFloat64(0)},t}(GB.BaseBuffer);ho.default=KB});var fm=h(He=>{"use strict";var QB=He&&He.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),cm=He&&He.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(He,"__esModule",{value:!0});He.Dechunker=He.Chunker=void 0;var XB=cm(ml()),am=Gr(),JB=cm(um()),zs=2,eV=0,tV=1400,rV=function(r){QB(t,r);function t(e,n){var i=r.call(this,0)||this;return i._bufferSize=n||tV,i._ch=e,i._buffer=(0,am.alloc)(i._bufferSize),i._currentChunkStart=0,i._chunkOpen=!1,i}return s(t,"Chunker"),t.prototype.putUInt8=function(e,n){this._ensure(1),this._buffer.writeUInt8(n)},t.prototype.putInt8=function(e,n){this._ensure(1),this._buffer.writeInt8(n)},t.prototype.putFloat64=function(e,n){this._ensure(8),this._buffer.writeFloat64(n)},t.prototype.putBytes=function(e,n){for(;n.remaining()>0;)this._ensure(1),this._buffer.remaining()>n.remaining()?this._buffer.writeBytes(n):this._buffer.writeBytes(n.readSlice(this._buffer.remaining()));return this},t.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var e=this._buffer;this._buffer=null,this._ch.write(e.getSlice(0,e.position)),this._buffer=(0,am.alloc)(this._bufferSize),this._chunkOpen=!1}return this},t.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<zs&&this.flush(),this._buffer.writeInt16(eV)},t.prototype._ensure=function(e){var n=this._chunkOpen?e:e+zs;this._buffer.remaining()<n&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+zs,this._chunkOpen=!0)},t.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var e=this._buffer.position-(this._currentChunkStart+zs);this._buffer.putUInt16(this._currentChunkStart,e),this._chunkOpen=!1}},t}(XB.default);He.Chunker=rV;var nV=function(){function r(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return s(r,"Dechunker"),r.prototype.AWAITING_CHUNK=function(t){return t.remaining()>=2?this._onHeader(t.readUInt16()):(this._partialChunkHeader=t.readUInt8()<<8,this.IN_HEADER)},r.prototype.IN_HEADER=function(t){return this._onHeader((this._partialChunkHeader|t.readUInt8())&65535)},r.prototype.IN_CHUNK=function(t){return this._chunkSize<=t.remaining()?(this._currentMessage.push(t.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=t.remaining(),this._currentMessage.push(t.readSlice(t.remaining())),this.IN_CHUNK)},r.prototype.CLOSED=function(t){},r.prototype._onHeader=function(t){if(t===0){var e=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:e=this._currentMessage[0];break;default:e=new JB.default(this._currentMessage);break}return this._currentMessage=[],this.onmessage(e),this.AWAITING_CHUNK}else return this._chunkSize=t,this.IN_CHUNK},r.prototype.write=function(t){for(;t.hasRemaining();)this._state=this._state(t)},r}();He.Dechunker=nV});var _m=h(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});var Ys=R(),pm=Ys.internal.util,iV=pm.ENCRYPTION_OFF,oV=pm.ENCRYPTION_ON,sV=Ys.error.SERVICE_UNAVAILABLE,uV=3e4,lm=[null,void 0,!0,!1,oV,iV],hm=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],aV=function(){function r(t,e,n){this.address=t,this.encrypted=cV(e),this.trust=fV(e),this.trustedCertificates=lV(e),this.knownHostsPath=hV(e),this.connectionErrorCode=n||sV,this.connectionTimeout=pV(e)}return s(r,"ChannelConfig"),r}();El.default=aV;function cV(r){var t=r.encrypted;if(lm.indexOf(t)===-1)throw(0,Ys.newError)("Illegal value of the encrypted setting "+t+". Expected one of "+lm);return t}s(cV,"extractEncrypted");function fV(r){var t=r.trust;if(hm.indexOf(t)===-1)throw(0,Ys.newError)("Illegal value of the trust setting "+t+". Expected one of "+hm);return t}s(fV,"extractTrust");function lV(r){return r.trustedCertificates||[]}s(lV,"extractTrustedCertificates");function hV(r){return r.knownHosts||null}s(hV,"extractKnownHostsPath");function pV(r){var t=parseInt(r.connectionTimeout,10);return t===0||t&&t<0?null:t||uV}s(pV,"extractConnectionTimeout")});var bm=h(po=>{"use strict";var vm=po&&po.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(po,"__esModule",{value:!0});var _V=vm(Gr()),dV=R(),wl=vm(require("buffer")),vV=require("string_decoder"),dm=new vV.StringDecoder("utf8");function bV(r){return new _V.default(SV(r))}s(bV,"encode");function yV(r,t){if(Object.prototype.hasOwnProperty.call(r,"_buffer"))return mV(r,t);if(Object.prototype.hasOwnProperty.call(r,"_buffers"))return OV(r,t);throw(0,dV.newError)("Don't know how to decode strings from '"+r+"'")}s(yV,"decode");function mV(r,t){var e=r.position,n=e+t;return r.position=Math.min(n,r.length),r._buffer.toString("utf8",e,n)}s(mV,"decodeChannelBuffer");function OV(r,t){return gV(r,t,function(e){return dm.write(e._buffer)},function(){return dm.end()})}s(OV,"decodeCombinedBuffer");function gV(r,t,e,n){var i=t,o=r.position;r._updatePos(Math.min(t,r.length-o));var u=r._buffers.reduce(function(a,f){if(i<=0)return a;if(o>=f.length)return o-=f.length,"";f._updatePos(o-f.position);var c=Math.min(f.length-o,i),l=f.readSlice(c);return f._updatePos(c),i=Math.max(i-l.length,0),o=0,a+e(l)},"");return u+n()}s(gV,"streamDecodeCombinedBuffer");function SV(r){return typeof wl.default.Buffer.from=="function"?wl.default.Buffer.from(r,"utf8"):new wl.default.Buffer(r,"utf8")}s(SV,"newBuffer");po.default={encode:bV,decode:yV}});var $r=h(ee=>{"use strict";var EV=ee&&ee.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),ym=ee&&ee.__exportStar||function(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&EV(t,r,e)},mm=ee&&ee.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ee,"__esModule",{value:!0});ee.utf8=ee.alloc=ee.ChannelConfig=void 0;ym(sm(),ee);ym(fm(),ee);var wV=_m();Object.defineProperty(ee,"ChannelConfig",{enumerable:!0,get:function(){return mm(wV).default}});var TV=Gr();Object.defineProperty(ee,"alloc",{enumerable:!0,get:function(){return TV.alloc}});var PV=bm();Object.defineProperty(ee,"utf8",{enumerable:!0,get:function(){return mm(PV).default}})});var gm=h(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});var CV=$r(),Om=R(),IV=1616949271;function _o(r,t){return{major:r,minor:t}}s(_o,"version");function RV(r){if(r.length>4)throw(0,Om.newError)("It should not have more than 4 versions of the protocol");var t=(0,CV.alloc)(5*4);return t.writeInt32(IV),r.forEach(function(e){if(e instanceof Array){var n=e[0],i=n.major,o=n.minor,u=e[1].minor,a=o-u;t.writeInt32(a<<16|o<<8|i)}else{var i=e.major,o=e.minor;t.writeInt32(o<<8|i)}}),t.reset(),t}s(RV,"createHandshakeMessage");function AV(r){var t=[r.readUInt8(),r.readUInt8(),r.readUInt8(),r.readUInt8()];if(t[0]===72&&t[1]===84&&t[2]===84&&t[3]===80)throw(0,Om.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(t[3]+"."+t[2])}s(AV,"parseNegotiatedResponse");function jV(){return RV([[_o(4,4),_o(4,2)],_o(4,1),_o(4,0),_o(3,0)])}s(jV,"newHandshakeBuffer");function NV(r){var t=this;return new Promise(function(e,n){var i=s(function(o){n(o)},"handshakeErrorHandler");r.onerror=i.bind(t),r._error&&i(r._error),r.onmessage=function(o){try{var u=AV(o);e({protocolVersion:u,consumeRemainingBuffer:function(a){o.hasRemaining()&&a(o.readSlice(o.remaining()))}})}catch(a){n(a)}},r.write(jV())})}s(NV,"handshake");Tl.default=NV});var Zs=h(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.assertImpersonatedUserIsEmpty=Tt.assertTxConfigIsEmpty=Tt.assertDatabaseIsEmpty=void 0;var Pl=R();function qV(r,t,e){if(t===void 0&&(t=s(function(){},"onProtocolError")),r&&!r.isEmpty()){var n=(0,Pl.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw t(n.message),e.onError(n),n}}s(qV,"assertTxConfigIsEmpty");Tt.assertTxConfigIsEmpty=qV;function xV(r,t,e){if(t===void 0&&(t=s(function(){},"onProtocolError")),r){var n=(0,Pl.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw t(n.message),e.onError(n),n}}s(xV,"assertDatabaseIsEmpty");Tt.assertDatabaseIsEmpty=xV;function DV(r,t,e){if(t===void 0&&(t=s(function(){},"onProtocolError")),r){var n=(0,Pl.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+("Trying to impersonate "+r+"."));throw t(n.message),e.onError(n),n}}s(DV,"assertImpersonatedUserIsEmpty");Tt.assertImpersonatedUserIsEmpty=DV});var Il=h(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.Structure=Pt.Unpacker=Pt.Packer=void 0;var vo=$r(),N=R(),MV=N.internal.objectUtil,Sm=N.error.PROTOCOL_ERROR,Em=128,wm=144,Tm=160,Pm=176,Cm=192,Im=193,Rm=194,Am=195,jm=200,Nm=201,qm=202,xm=203,Dm=208,Mm=209,km=210,Um=212,Lm=213,Fm=214,Bm=204,Vm=205,Wm=206,Hm=216,zm=217,Ym=218,Zm=220,Gm=221,kV=78,UV=3,LV=82,FV=5,BV=114,VV=3,WV=80,HV=3,Cl=function(){function r(t,e){this.signature=t,this.fields=e}return s(r,"Structure"),r.prototype.toString=function(){for(var t="",e=0;e<this.fields.length;e++)e>0&&(t+=", "),t+=this.fields[e];return"Structure("+this.signature+", ["+t+"])"},r}();Pt.Structure=Cl;var zV=function(){function r(t){this._ch=t,this._byteArraysSupported=!0}return s(r,"Packer"),r.prototype.packable=function(t){var e=this;if(t===null)return function(){return e._ch.writeUInt8(Cm)};if(t===!0)return function(){return e._ch.writeUInt8(Am)};if(t===!1)return function(){return e._ch.writeUInt8(Rm)};if(typeof t=="number")return function(){return e.packFloat(t)};if(typeof t=="string")return function(){return e.packString(t)};if(typeof t=="bigint")return function(){return e.packInteger((0,N.int)(t))};if((0,N.isInt)(t))return function(){return e.packInteger(t)};if(t instanceof Int8Array)return function(){return e.packBytes(t)};if(t instanceof Array)return function(){e.packListHeader(t.length);for(var o=0;o<t.length;o++)e.packable(t[o]===void 0?null:t[o])()};if(ZV(t))return this.packableIterable(t);if(t instanceof N.Node)return this._nonPackableValue("It is not allowed to pass nodes in query parameters, given: "+t);if(t instanceof N.Relationship)return this._nonPackableValue("It is not allowed to pass relationships in query parameters, given: "+t);if(t instanceof N.Path)return this._nonPackableValue("It is not allowed to pass paths in query parameters, given: "+t);if(t instanceof Cl){for(var n=[],i=0;i<t.fields.length;i++)n[i]=this.packable(t.fields[i]);return function(){return e.packStruct(t.signature,n)}}else return typeof t=="object"?function(){for(var o=Object.keys(t),u=0,a=0;a<o.length;a++)t[o[a]]!==void 0&&u++;e.packMapHeader(u);for(var f=0;f<o.length;f++){var c=o[f];t[c]!==void 0&&(e.packString(c),e.packable(t[c])())}}:this._nonPackableValue("Unable to pack the given value: "+t)},r.prototype.packableIterable=function(t){try{var e=Array.from(t);return this.packable(e)}catch(n){throw(0,N.newError)("Cannot pack given iterable, "+n.message+": "+t)}},r.prototype.packStruct=function(t,e){e=e||[],this.packStructHeader(e.length,t);for(var n=0;n<e.length;n++)e[n]()},r.prototype.packInteger=function(t){var e=t.high,n=t.low;t.greaterThanOrEqual(-16)&&t.lessThan(128)?this._ch.writeInt8(n):t.greaterThanOrEqual(-128)&&t.lessThan(-16)?(this._ch.writeUInt8(jm),this._ch.writeInt8(n)):t.greaterThanOrEqual(-32768)&&t.lessThan(32768)?(this._ch.writeUInt8(Nm),this._ch.writeInt16(n)):t.greaterThanOrEqual(-2147483648)&&t.lessThan(2147483648)?(this._ch.writeUInt8(qm),this._ch.writeInt32(n)):(this._ch.writeUInt8(xm),this._ch.writeInt32(e),this._ch.writeInt32(n))},r.prototype.packFloat=function(t){this._ch.writeUInt8(Im),this._ch.writeFloat64(t)},r.prototype.packString=function(t){var e=vo.utf8.encode(t),n=e.length;if(n<16)this._ch.writeUInt8(Em|n),this._ch.writeBytes(e);else if(n<256)this._ch.writeUInt8(Dm),this._ch.writeUInt8(n),this._ch.writeBytes(e);else if(n<65536)this._ch.writeUInt8(Mm),this._ch.writeUInt8(n/256>>0),this._ch.writeUInt8(n%256),this._ch.writeBytes(e);else if(n<4294967296)this._ch.writeUInt8(km),this._ch.writeUInt8((n/16777216>>0)%256),this._ch.writeUInt8((n/65536>>0)%256),this._ch.writeUInt8((n/256>>0)%256),this._ch.writeUInt8(n%256),this._ch.writeBytes(e);else throw(0,N.newError)("UTF-8 strings of size "+n+" are not supported")},r.prototype.packListHeader=function(t){if(t<16)this._ch.writeUInt8(wm|t);else if(t<256)this._ch.writeUInt8(Um),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(Lm),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else if(t<4294967296)this._ch.writeUInt8(Fm),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else throw(0,N.newError)("Lists of size "+t+" are not supported")},r.prototype.packBytes=function(t){if(this._byteArraysSupported){this.packBytesHeader(t.length);for(var e=0;e<t.length;e++)this._ch.writeInt8(t[e])}else throw(0,N.newError)("Byte arrays are not supported by the database this driver is connected to")},r.prototype.packBytesHeader=function(t){if(t<256)this._ch.writeUInt8(Bm),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(Vm),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else if(t<4294967296)this._ch.writeUInt8(Wm),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else throw(0,N.newError)("Byte arrays of size "+t+" are not supported")},r.prototype.packMapHeader=function(t){if(t<16)this._ch.writeUInt8(Tm|t);else if(t<256)this._ch.writeUInt8(Hm),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(zm),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256);else if(t<4294967296)this._ch.writeUInt8(Ym),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else throw(0,N.newError)("Maps of size "+t+" are not supported")},r.prototype.packStructHeader=function(t,e){if(t<16)this._ch.writeUInt8(Pm|t),this._ch.writeUInt8(e);else if(t<256)this._ch.writeUInt8(Zm),this._ch.writeUInt8(t),this._ch.writeUInt8(e);else if(t<65536)this._ch.writeUInt8(Gm),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256);else throw(0,N.newError)("Structures of size "+t+" are not supported")},r.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},r.prototype._nonPackableValue=function(t){return function(){throw(0,N.newError)(t,Sm)}},r}();Pt.Packer=zV;var YV=function(){function r(t,e){t===void 0&&(t=!1),e===void 0&&(e=!1),this._disableLosslessIntegers=t,this._useBigInt=e}return s(r,"Unpacker"),r.prototype.unpack=function(t){var e=t.readUInt8(),n=e&240,i=e&15;if(e===Cm)return null;var o=this._unpackBoolean(e);if(o!==null)return o;var u=this._unpackNumberOrInteger(e,t);if(u!==null){if((0,N.isInt)(u)){if(this._useBigInt)return u.toBigInt();if(this._disableLosslessIntegers)return u.toNumberOrInfinity()}return u}var a=this._unpackString(e,n,i,t);if(a!==null)return a;var f=this._unpackList(e,n,i,t);if(f!==null)return f;var c=this._unpackByteArray(e,t);if(c!==null)return c;var l=this._unpackMap(e,n,i,t);if(l!==null)return l;var p=this._unpackStruct(e,n,i,t);if(p!==null)return p;throw(0,N.newError)("Unknown packed value with marker "+e.toString(16))},r.prototype.unpackInteger=function(t){var e=t.readUInt8(),n=this._unpackInteger(e,t);if(n==null)throw(0,N.newError)("Unable to unpack integer value with marker "+e.toString(16));return n},r.prototype._unpackBoolean=function(t){return t===Am?!0:t===Rm?!1:null},r.prototype._unpackNumberOrInteger=function(t,e){return t===Im?e.readFloat64():this._unpackInteger(t,e)},r.prototype._unpackInteger=function(t,e){if(t>=0&&t<128)return(0,N.int)(t);if(t>=240&&t<256)return(0,N.int)(t-256);if(t===jm)return(0,N.int)(e.readInt8());if(t===Nm)return(0,N.int)(e.readInt16());if(t===qm){var n=e.readInt32();return(0,N.int)(n)}else if(t===xm){var i=e.readInt32(),o=e.readInt32();return new N.Integer(o,i)}else return null},r.prototype._unpackString=function(t,e,n,i){return e===Em?vo.utf8.decode(i,n):t===Dm?vo.utf8.decode(i,i.readUInt8()):t===Mm?vo.utf8.decode(i,i.readUInt16()):t===km?vo.utf8.decode(i,i.readUInt32()):null},r.prototype._unpackList=function(t,e,n,i){return e===wm?this._unpackListWithSize(n,i):t===Um?this._unpackListWithSize(i.readUInt8(),i):t===Lm?this._unpackListWithSize(i.readUInt16(),i):t===Fm?this._unpackListWithSize(i.readUInt32(),i):null},r.prototype._unpackListWithSize=function(t,e){for(var n=[],i=0;i<t;i++)n.push(this.unpack(e));return n},r.prototype._unpackByteArray=function(t,e){return t===Bm?this._unpackByteArrayWithSize(e.readUInt8(),e):t===Vm?this._unpackByteArrayWithSize(e.readUInt16(),e):t===Wm?this._unpackByteArrayWithSize(e.readUInt32(),e):null},r.prototype._unpackByteArrayWithSize=function(t,e){for(var n=new Int8Array(t),i=0;i<t;i++)n[i]=e.readInt8();return n},r.prototype._unpackMap=function(t,e,n,i){return e===Tm?this._unpackMapWithSize(n,i):t===Hm?this._unpackMapWithSize(i.readUInt8(),i):t===zm?this._unpackMapWithSize(i.readUInt16(),i):t===Ym?this._unpackMapWithSize(i.readUInt32(),i):null},r.prototype._unpackMapWithSize=function(t,e){for(var n={},i=0;i<t;i++){var o=this.unpack(e);n[o]=this.unpack(e)}return n},r.prototype._unpackStruct=function(t,e,n,i){try{return e===Pm?this._unpackStructWithSize(n,i):t===Zm?this._unpackStructWithSize(i.readUInt8(),i):t===Gm?this._unpackStructWithSize(i.readUInt16(),i):null}catch(o){return MV.createBrokenObject(o)}},r.prototype._unpackStructWithSize=function(t,e){var n=e.readUInt8();return n===kV?this._unpackNode(t,e):n===LV?this._unpackRelationship(t,e):n===BV?this._unpackUnboundRelationship(t,e):n===WV?this._unpackPath(t,e):this._unpackUnknownStruct(n,t,e)},r.prototype._unpackNode=function(t,e){return this._verifyStructSize("Node",UV,t),new N.Node(this.unpack(e),this.unpack(e),this.unpack(e))},r.prototype._unpackRelationship=function(t,e){return this._verifyStructSize("Relationship",FV,t),new N.Relationship(this.unpack(e),this.unpack(e),this.unpack(e),this.unpack(e),this.unpack(e))},r.prototype._unpackUnboundRelationship=function(t,e){return this._verifyStructSize("UnboundRelationship",VV,t),new N.UnboundRelationship(this.unpack(e),this.unpack(e),this.unpack(e))},r.prototype._unpackPath=function(t,e){this._verifyStructSize("Path",HV,t);for(var n=this.unpack(e),i=this.unpack(e),o=this.unpack(e),u=[],a=n[0],f=0;f<o.length;f+=2){var c=n[o[f+1]],l=(0,N.toNumber)(o[f]),p=void 0;l>0?(p=i[l-1],p instanceof N.UnboundRelationship&&(i[l-1]=p=p.bind(a.identity,c.identity))):(p=i[-l-1],p instanceof N.UnboundRelationship&&(i[-l-1]=p=p.bind(c.identity,a.identity))),u.push(new N.PathSegment(a,p,c)),a=c}return new N.Path(n[0],n[n.length-1],u)},r.prototype._unpackUnknownStruct=function(t,e,n){for(var i=new Cl(t,[]),o=0;o<e;o++)i.fields.push(this.unpack(n));return i},r.prototype._verifyStructSize=function(t,e,n){if(e!==n)throw(0,N.newError)("Wrong struct size for "+t+", expected "+e+" but was "+n,Sm)},r}();Pt.Unpacker=YV;function ZV(r){return r==null?!1:typeof r[Symbol.iterator]=="function"}s(ZV,"isIterable")});var jl=h(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.epochSecondAndNanoToLocalDateTime=Ct.nanoOfDayToLocalTime=Ct.epochDayToDate=void 0;var Jt=R(),It=Jt.internal.temporalUtil,GV=It.DAYS_0000_TO_1970,Rl=It.DAYS_PER_400_YEAR_CYCLE,$m=It.NANOS_PER_HOUR,Km=It.NANOS_PER_MINUTE,Al=It.NANOS_PER_SECOND,Qm=It.SECONDS_PER_DAY,$V=It.floorDiv,KV=It.floorMod;function Xm(r){r=(0,Jt.int)(r);var t=r.add(GV).subtract(60),e=(0,Jt.int)(0);if(t.lessThan(0)){var n=t.add(1).div(Rl).subtract(1);e=n.multiply(400),t=t.add(n.multiply(-Rl))}var i=t.multiply(400).add(591).div(Rl),o=t.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)));o.lessThan(0)&&(i=i.subtract(1),o=t.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)))),i=i.add(e);var u=o,a=u.multiply(5).add(2).div(153),f=a.add(2).modulo(12).add(1),c=u.subtract(a.multiply(306).add(5).div(10)).add(1);return i=i.add(a.div(10)),new Jt.Date(i,f,c)}s(Xm,"epochDayToDate");Ct.epochDayToDate=Xm;function Jm(r){r=(0,Jt.int)(r);var t=r.div($m);r=r.subtract(t.multiply($m));var e=r.div(Km);r=r.subtract(e.multiply(Km));var n=r.div(Al),i=r.subtract(n.multiply(Al));return new Jt.LocalTime(t,e,n,i)}s(Jm,"nanoOfDayToLocalTime");Ct.nanoOfDayToLocalTime=Jm;function QV(r,t){var e=$V(r,Qm),n=KV(r,Qm),i=n.multiply(Al).add(t),o=Xm(e),u=Jm(i);return new Jt.LocalDateTime(o.year,o.month,o.day,u.hour,u.minute,u.second,u.nanosecond)}s(QV,"epochSecondAndNanoToLocalDateTime");Ct.epochSecondAndNanoToLocalDateTime=QV});var tO=h(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.packDateTime=le.unpackDateTimeWithZoneId=le.unpackDateTimeWithZoneOffset=le.DATE_TIME_WITH_ZONE_ID=le.DATE_TIME_WITH_ZONE_OFFSET=void 0;var Oe=R(),XV=jl(),bo=Oe.internal.temporalUtil.localDateTimeToEpochSecond;le.DATE_TIME_WITH_ZONE_OFFSET=73;var JV=3;le.DATE_TIME_WITH_ZONE_ID=105;var e4=3;function t4(r,t,e,n,i){r._verifyStructSize("DateTimeWithZoneOffset",JV,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),a=r.unpackInteger(e),f=(0,Oe.int)(o).add(a),c=(0,XV.epochSecondAndNanoToLocalDateTime)(f,u),l=new Oe.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,a,null);return eO(l,n,i)}s(t4,"unpackDateTimeWithZoneOffset");le.unpackDateTimeWithZoneOffset=t4;function r4(r,t,e,n,i){r._verifyStructSize("DateTimeWithZoneId",e4,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),a=r.unpack(e),f=Nl(a,o,u),c=new Oe.DateTime(f.year,f.month,f.day,f.hour,f.minute,f.second,(0,Oe.int)(u),f.timeZoneOffsetSeconds,a);return eO(c,n,i)}s(r4,"unpackDateTimeWithZoneId");le.unpackDateTimeWithZoneId=r4;function n4(r,t){r.timeZoneId?i4(r,t):o4(r,t)}s(n4,"packDateTime");le.packDateTime=n4;function i4(r,t){var e=bo(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=r.timeZoneOffsetSeconds!=null?r.timeZoneOffsetSeconds:s4(r.timeZoneId,e,r.nanosecond),i=e.subtract(n),o=(0,Oe.int)(r.nanosecond),u=r.timeZoneId,a=[t.packable(i),t.packable(o),t.packable(u)];t.packStruct(le.DATE_TIME_WITH_ZONE_ID,a)}s(i4,"packDateTimeWithZoneId");function o4(r,t){var e=bo(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=(0,Oe.int)(r.nanosecond),i=(0,Oe.int)(r.timeZoneOffsetSeconds),o=e.subtract(i),u=[t.packable(o),t.packable(n),t.packable(i)];t.packStruct(le.DATE_TIME_WITH_ZONE_OFFSET,u)}s(o4,"packDateTimeWithZoneOffset");function s4(r,t,e){var n=Nl(r,t,e),i=bo(n.year,n.month,n.day,n.hour,n.minute,n.second,e),o=i.subtract(t),u=t.subtract(o),a=Nl(r,u,e),f=bo(a.year,a.month,a.day,a.hour,a.minute,a.second,e),c=f.subtract(u);return c}s(s4,"getOffsetFromZoneId");function Nl(r,t,e){var n=new Intl.DateTimeFormat("en-US",{timeZone:r,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"}),i=(0,Oe.int)(t).multiply(1e3).add((0,Oe.int)(e).div(1e6)).toNumber(),o=n.formatToParts(i),u=o.reduce(function(f,c){return c.type==="era"?f.adjustEra=c.value.toUpperCase()==="B"?function(l){return l.subtract(1).negate()}:function(l){return l}:c.type==="hour"?f.hour=(0,Oe.int)(c.value).modulo(24):c.type!=="literal"&&(f[c.type]=(0,Oe.int)(c.value)),f},{});u.year=u.adjustEra(u.year);var a=bo(u.year,u.month,u.day,u.hour,u.minute,u.second,u.nanosecond);return u.timeZoneOffsetSeconds=a.subtract(t),u.hour=u.hour.modulo(24),u}s(Nl,"getTimeInZoneId");function eO(r,t,e){if(!t&&!e)return r;var n=s(function(a){return e?a.toBigInt():a.toNumberOrInfinity()},"convert"),i=Object.create(Object.getPrototypeOf(r));for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)===!0){var u=r[o];i[o]=(0,Oe.isInt)(u)?n(u):u}return Object.freeze(i),i}s(eO,"convertIntegerPropsIfNeeded")});var dO=h(he=>{"use strict";var rO=he&&he.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),u4=he&&he.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),a4=he&&he.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),nO=he&&he.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&u4(t,r,e);return a4(t,r),t};Object.defineProperty(he,"__esModule",{value:!0});he.Unpacker=he.Packer=void 0;var iO=nO(Il()),yo=nO(tO()),M=R(),Kr=jl(),ql=M.internal.temporalUtil,c4=ql.dateToEpochDay,xl=ql.localDateTimeToEpochSecond,oO=ql.localTimeToNanoOfDay,sO=88,f4=3,uO=89,l4=4,aO=69,h4=4,cO=116,p4=1,fO=84,_4=2,lO=68,d4=1,hO=100,v4=2,pO=70,b4=3,_O=102,y4=3,m4=function(r){rO(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"Packer"),t.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},t.prototype.packable=function(e){var n=this;return(0,M.isPoint)(e)?function(){return g4(e,n)}:(0,M.isDuration)(e)?function(){return P4(e,n)}:(0,M.isLocalTime)(e)?function(){return I4(e,n)}:(0,M.isTime)(e)?function(){return A4(e,n)}:(0,M.isDate)(e)?function(){return N4(e,n)}:(0,M.isLocalDateTime)(e)?function(){return x4(e,n)}:(0,M.isDateTime)(e)&&this.useUtc?function(){return yo.packDateTime(e,n)}:(0,M.isDateTime)(e)&&!this.useUtc?function(){return M4(e,n)}:r.prototype.packable.call(this,e)},t}(iO.Packer);he.Packer=m4;var O4=function(r){rO(t,r);function t(e,n){return e===void 0&&(e=!1),n===void 0&&(n=!1),r.call(this,e,n)||this}return s(t,"Unpacker"),t.prototype._unpackUnknownStruct=function(e,n,i){return e===sO?w4(this,n,i):e===uO?T4(this,n,i):e===aO?C4(this,n,i):e===cO?R4(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===fO?j4(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===lO?q4(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===hO?D4(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===yo.DATE_TIME_WITH_ZONE_OFFSET&&this.useUtc?yo.unpackDateTimeWithZoneOffset(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===pO&&!this.useUtc?U4(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===yo.DATE_TIME_WITH_ZONE_ID&&this.useUtc?yo.unpackDateTimeWithZoneId(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===_O&&!this.useUtc?F4(this,n,i,this._disableLosslessIntegers,this._useBigInt):r.prototype._unpackUnknownStruct.call(this,e,n,i,this._disableLosslessIntegers,this._useBigInt)},t}(iO.Unpacker);he.Unpacker=O4;function g4(r,t){var e=r.z===null||r.z===void 0;e?S4(r,t):E4(r,t)}s(g4,"packPoint");function S4(r,t){var e=[t.packable((0,M.int)(r.srid)),t.packable(r.x),t.packable(r.y)];t.packStruct(sO,e)}s(S4,"packPoint2D");function E4(r,t){var e=[t.packable((0,M.int)(r.srid)),t.packable(r.x),t.packable(r.y),t.packable(r.z)];t.packStruct(uO,e)}s(E4,"packPoint3D");function w4(r,t,e){return r._verifyStructSize("Point2D",f4,t),new M.Point(r.unpack(e),r.unpack(e),r.unpack(e),void 0)}s(w4,"unpackPoint2D");function T4(r,t,e){return r._verifyStructSize("Point3D",l4,t),new M.Point(r.unpack(e),r.unpack(e),r.unpack(e),r.unpack(e))}s(T4,"unpackPoint3D");function P4(r,t){var e=(0,M.int)(r.months),n=(0,M.int)(r.days),i=(0,M.int)(r.seconds),o=(0,M.int)(r.nanoseconds),u=[t.packable(e),t.packable(n),t.packable(i),t.packable(o)];t.packStruct(aO,u)}s(P4,"packDuration");function C4(r,t,e){r._verifyStructSize("Duration",h4,t);var n=r.unpack(e),i=r.unpack(e),o=r.unpack(e),u=r.unpack(e);return new M.Duration(n,i,o,u)}s(C4,"unpackDuration");function I4(r,t){var e=oO(r.hour,r.minute,r.second,r.nanosecond),n=[t.packable(e)];t.packStruct(cO,n)}s(I4,"packLocalTime");function R4(r,t,e,n){r._verifyStructSize("LocalTime",p4,t);var i=r.unpackInteger(e),o=(0,Kr.nanoOfDayToLocalTime)(i);return Qr(o,n)}s(R4,"unpackLocalTime");function A4(r,t){var e=oO(r.hour,r.minute,r.second,r.nanosecond),n=(0,M.int)(r.timeZoneOffsetSeconds),i=[t.packable(e),t.packable(n)];t.packStruct(fO,i)}s(A4,"packTime");function j4(r,t,e,n,i){r._verifyStructSize("Time",_4,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),a=(0,Kr.nanoOfDayToLocalTime)(o),f=new M.Time(a.hour,a.minute,a.second,a.nanosecond,u);return Qr(f,n,i)}s(j4,"unpackTime");function N4(r,t){var e=c4(r.year,r.month,r.day),n=[t.packable(e)];t.packStruct(lO,n)}s(N4,"packDate");function q4(r,t,e,n,i){r._verifyStructSize("Date",d4,t);var o=r.unpackInteger(e),u=(0,Kr.epochDayToDate)(o);return Qr(u,n,i)}s(q4,"unpackDate");function x4(r,t){var e=xl(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=(0,M.int)(r.nanosecond),i=[t.packable(e),t.packable(n)];t.packStruct(hO,i)}s(x4,"packLocalDateTime");function D4(r,t,e,n,i){r._verifyStructSize("LocalDateTime",v4,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),a=(0,Kr.epochSecondAndNanoToLocalDateTime)(o,u);return Qr(a,n,i)}s(D4,"unpackLocalDateTime");function M4(r,t){r.timeZoneId?L4(r,t):k4(r,t)}s(M4,"packDateTime");function k4(r,t){var e=xl(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=(0,M.int)(r.nanosecond),i=(0,M.int)(r.timeZoneOffsetSeconds),o=[t.packable(e),t.packable(n),t.packable(i)];t.packStruct(pO,o)}s(k4,"packDateTimeWithZoneOffset");function U4(r,t,e,n,i){r._verifyStructSize("DateTimeWithZoneOffset",b4,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),a=r.unpackInteger(e),f=(0,Kr.epochSecondAndNanoToLocalDateTime)(o,u),c=new M.DateTime(f.year,f.month,f.day,f.hour,f.minute,f.second,f.nanosecond,a,null);return Qr(c,n,i)}s(U4,"unpackDateTimeWithZoneOffset");function L4(r,t){var e=xl(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=(0,M.int)(r.nanosecond),i=r.timeZoneId,o=[t.packable(e),t.packable(n),t.packable(i)];t.packStruct(_O,o)}s(L4,"packDateTimeWithZoneId");function F4(r,t,e,n,i){r._verifyStructSize("DateTimeWithZoneId",y4,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),a=r.unpack(e),f=(0,Kr.epochSecondAndNanoToLocalDateTime)(o,u),c=new M.DateTime(f.year,f.month,f.day,f.hour,f.minute,f.second,f.nanosecond,null,a);return Qr(c,n,i)}s(F4,"unpackDateTimeWithZoneId");function Qr(r,t,e){if(!t&&!e)return r;var n=s(function(a){return e?a.toBigInt():a.toNumberOrInfinity()},"convert"),i=Object.create(Object.getPrototypeOf(r));for(var o in r)if(r.hasOwnProperty(o)){var u=r[o];i[o]=(0,M.isInt)(u)?n(u):u}return Object.freeze(i),i}s(Qr,"convertIntegerPropsIfNeeded")});var Gs=h(ge=>{"use strict";var B4=ge&&ge.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),V4=ge&&ge.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),vO=ge&&ge.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&B4(t,r,e);return V4(t,r),t};Object.defineProperty(ge,"__esModule",{value:!0});ge.v2=ge.v1=void 0;var W4=vO(Il());ge.v1=W4;var bO=vO(dO());ge.v2=bO;ge.default=bO});var er=h(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});var oe=R(),EO=oe.internal.constants,H4=EO.ACCESS_MODE_READ,$s=EO.FETCH_ALL,yO=oe.internal.util.assertString,z4=1,Y4=15,mO=16,Z4=63,G4=1,$4=2,K4=17,Q4=18,X4=19,OO=102,J4=47,eW=63,tW="r",mo=-1,Xr=function(){function r(t,e,n){this.signature=t,this.fields=e,this.toString=n}return s(r,"RequestMessage"),r.init=function(t,e){return new r(z4,[t,e],function(){return"INIT "+t+" {...}"})},r.run=function(t,e){return new r(mO,[t,e],function(){return"RUN "+t+" "+oe.json.stringify(e)})},r.pullAll=function(){return rW},r.reset=function(){return nW},r.hello=function(t,e,n,i){n===void 0&&(n=null),i===void 0&&(i=null);var o=Object.assign({user_agent:t},e);return n&&(o.routing=n),i&&(o.patch_bolt=i),new r(G4,[o],function(){return"HELLO {user_agent: '"+t+"', ...}"})},r.begin=function(t){var e=t===void 0?{}:t,n=e.bookmark,i=e.txConfig,o=e.database,u=e.mode,a=e.impersonatedUser,f=gO(n,i,o,u,a);return new r(K4,[f],function(){return"BEGIN "+oe.json.stringify(f)})},r.commit=function(){return iW},r.rollback=function(){return oW},r.runWithMetadata=function(t,e,n){var i=n===void 0?{}:n,o=i.bookmark,u=i.txConfig,a=i.database,f=i.mode,c=i.impersonatedUser,l=gO(o,u,a,f,c);return new r(mO,[t,e,l],function(){return"RUN "+t+" "+oe.json.stringify(e)+" "+oe.json.stringify(l)})},r.goodbye=function(){return sW},r.pull=function(t){var e=t===void 0?{}:t,n=e.stmtId,i=n===void 0?mo:n,o=e.n,u=o===void 0?$s:o,a=SO(i??mo,u||$s);return new r(eW,[a],function(){return"PULL "+oe.json.stringify(a)})},r.discard=function(t){var e=t===void 0?{}:t,n=e.stmtId,i=n===void 0?mo:n,o=e.n,u=o===void 0?$s:o,a=SO(i??mo,u||$s);return new r(J4,[a],function(){return"DISCARD "+oe.json.stringify(a)})},r.route=function(t,e,n){return t===void 0&&(t={}),e===void 0&&(e=[]),n===void 0&&(n=null),new r(OO,[t,e,n],function(){return"ROUTE "+oe.json.stringify(t)+" "+oe.json.stringify(e)+" "+n})},r.routeV4x4=function(t,e,n){t===void 0&&(t={}),e===void 0&&(e=[]),n===void 0&&(n={});var i={};return n.databaseName&&(i.db=n.databaseName),n.impersonatedUser&&(i.imp_user=n.impersonatedUser),new r(OO,[t,e,i],function(){return"ROUTE "+oe.json.stringify(t)+" "+oe.json.stringify(e)+" "+oe.json.stringify(i)})},r}();Dl.default=Xr;function gO(r,t,e,n,i){var o={};return r.isEmpty()||(o.bookmarks=r.values()),t.timeout&&(o.tx_timeout=t.timeout),t.metadata&&(o.tx_metadata=t.metadata),e&&(o.db=yO(e,"database")),i&&(o.imp_user=yO(i,"impersonatedUser")),n===H4&&(o.mode=tW),o}s(gO,"buildTxMetadata");function SO(r,t){var e={n:(0,oe.int)(t)};return r!==mo&&(e.qid=(0,oe.int)(r)),e}s(SO,"buildStreamMetadata");var rW=new Xr(Z4,[],function(){return"PULL_ALL"}),nW=new Xr(Y4,[],function(){return"RESET"}),iW=new Xr(Q4,[],function(){return"COMMIT"}),oW=new Xr(X4,[],function(){return"ROLLBACK"}),sW=new Xr($4,[],function(){return"GOODBYE"})});var kl=h(Oo=>{"use strict";var Ml=Oo&&Oo.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Oo,"__esModule",{value:!0});var Ks=function(){function r(){}return s(r,"RawRoutingTable"),r.ofRecord=function(t){return t===null?r.ofNull():new cW(t)},r.ofMessageResponse=function(t){return t===null?r.ofNull():new uW(t)},r.ofNull=function(){return new aW},Object.defineProperty(r.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),r}();Oo.default=Ks;var uW=function(r){Ml(t,r);function t(e){var n=r.call(this)||this;return n._response=e,n}return s(t,"ResponseRawRoutingTable"),Object.defineProperty(t.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),t}(Ks),aW=function(r){Ml(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"NullRawRoutingTable"),Object.defineProperty(t.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),t}(Ks),cW=function(r){Ml(t,r);function t(e){var n=r.call(this)||this;return n._record=e,n}return s(t,"RecordRawRoutingTable"),Object.defineProperty(t.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),t}(Ks)});var it=h(z=>{"use strict";var tr=z&&z.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),fW=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(z,"__esModule",{value:!0});z.ProcedureRouteObserver=z.RouteObserver=z.CompletedObserver=z.FailedObserver=z.ResetObserver=z.LoginObserver=z.ResultStreamObserver=z.StreamObserver=void 0;var ke=R(),TO=fW(kl()),wO=ke.internal.constants.FETCH_ALL,Jr=ke.error.PROTOCOL_ERROR,en=function(){function r(){}return s(r,"StreamObserver"),r.prototype.onNext=function(t){},r.prototype.onError=function(t){},r.prototype.onCompleted=function(t){},r}();z.StreamObserver=en;var Ul=function(r){tr(t,r);function t(e){var n=e===void 0?{}:e,i=n.reactive,o=i===void 0?!1:i,u=n.moreFunction,a=n.discardFunction,f=n.fetchSize,c=f===void 0?wO:f,l=n.beforeError,p=n.afterError,_=n.beforeKeys,m=n.afterKeys,S=n.beforeComplete,C=n.afterComplete,Y=n.server,T=r.call(this)||this;return T._fieldKeys=null,T._fieldLookup=null,T._head=null,T._queuedRecords=[],T._tail=null,T._error=null,T._observers=[],T._meta={},T._server=Y,T._beforeError=l,T._afterError=p,T._beforeKeys=_,T._afterKeys=m,T._beforeComplete=S,T._afterComplete=C,T._queryId=null,T._moreFunction=u,T._discardFunction=a,T._discard=!1,T._fetchSize=c,T._setState(o?we.READY:we.READY_STREAMING),T._setupAuoPull(c),T}return s(t,"ResultStreamObserver"),t.prototype.onNext=function(e){var n=new ke.Record(this._fieldKeys,e,this._fieldLookup);this._observers.some(function(i){return i.onNext})?this._observers.forEach(function(i){i.onNext&&i.onNext(n)}):(this._queuedRecords.push(n),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},t.prototype.onCompleted=function(e){this._state.onSuccess(this,e)},t.prototype.onError=function(e){this._state.onError(this,e)},t.prototype.cancel=function(){this._discard=!0},t.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(we.STREAMING)},t.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(we.SUCCEEDED)},t.prototype.subscribe=function(e){if(this._error){e.onError(this._error);return}if(this._head&&e.onKeys&&e.onKeys(this._head),this._queuedRecords.length>0&&e.onNext)for(var n=0;n<this._queuedRecords.length;n++)e.onNext(this._queuedRecords[n]),this._queuedRecords.length-n-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===we.READY&&this._handleStreaming());this._tail&&e.onCompleted&&e.onCompleted(this._tail),this._observers.push(e),this._state===we.READY&&this._handleStreaming()},t.prototype._handleHasMore=function(e){this._setState(we.READY),this._handleStreaming(),delete e.has_more},t.prototype._handlePullSuccess=function(e){var n=this;this._setState(we.SUCCEEDED);var i=Object.assign(this._server?{server:this._server}:{},this._meta,e),o=null;this._beforeComplete&&(o=this._beforeComplete(i));var u=s(function(){n._tail=i,n._observers.some(function(a){return a.onCompleted})&&n._observers.forEach(function(a){a.onCompleted&&a.onCompleted(i)}),n._afterComplete&&n._afterComplete(i)},"continuation");o?Promise.resolve(o).then(function(){return u()}):u()},t.prototype._handleRunSuccess=function(e,n){var i=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},e.fields&&e.fields.length>0){this._fieldKeys=e.fields;for(var o=0;o<e.fields.length;o++)this._fieldLookup[e.fields[o]]=o;delete e.fields}e.qid!==null&&e.qid!==void 0&&(this._queryId=e.qid,delete e.qid),this._storeMetadataForCompletion(e);var u=null;this._beforeKeys&&(u=this._beforeKeys(this._fieldKeys));var a=s(function(){i._head=i._fieldKeys,i._observers.some(function(f){return f.onKeys})&&i._observers.forEach(function(f){f.onKeys&&f.onKeys(i._fieldKeys)}),i._afterKeys&&i._afterKeys(i._fieldKeys),n()},"continuation_1");u?Promise.resolve(u).then(function(){return a()}):a()}},t.prototype._handleError=function(e){var n=this;this._setState(we.FAILED),this._error=e;var i=null;this._beforeError&&(i=this._beforeError(e));var o=s(function(){n._observers.some(function(u){return u.onError})&&n._observers.forEach(function(u){u.onError&&u.onError(e)}),n._afterError&&n._afterError(e)},"continuation");i?Promise.resolve(i).then(function(){return o()}):o()},t.prototype._handleStreaming=function(){this._head&&this._observers.some(function(e){return e.onNext||e.onCompleted})&&(this._discard?(this._discardFunction(this._queryId,this),this._setState(we.STREAMING)):this._autoPull&&(this._moreFunction(this._queryId,this._fetchSize,this),this._setState(we.STREAMING)))},t.prototype._storeMetadataForCompletion=function(e){for(var n=Object.keys(e),i=n.length,o="";i--;)o=n[i],this._meta[o]=e[o]},t.prototype._setState=function(e){this._state=e},t.prototype._setupAuoPull=function(e){this._autoPull=!0,e===wO?(this._lowRecordWatermark=Number.MAX_VALUE,this._highRecordWatermark=Number.MAX_VALUE):(this._lowRecordWatermark=.3*e,this._highRecordWatermark=.7*e)},t}(en);z.ResultStreamObserver=Ul;var lW=function(r){tr(t,r);function t(e){var n=e===void 0?{}:e,i=n.onError,o=n.onCompleted,u=r.call(this)||this;return u._onError=i,u._onCompleted=o,u}return s(t,"LoginObserver"),t.prototype.onNext=function(e){this.onError((0,ke.newError)("Received RECORD when initializing "+ke.json.stringify(e)))},t.prototype.onError=function(e){this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(e)},t}(en);z.LoginObserver=lW;var hW=function(r){tr(t,r);function t(e){var n=e===void 0?{}:e,i=n.onProtocolError,o=n.onError,u=n.onComplete,a=r.call(this)||this;return a._onProtocolError=i,a._onError=o,a._onComplete=u,a}return s(t,"ResetObserver"),t.prototype.onNext=function(e){this.onError((0,ke.newError)("Received RECORD when resetting: received record is: "+ke.json.stringify(e),Jr))},t.prototype.onError=function(e){e.code===Jr&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onComplete&&this._onComplete(e)},t}(en);z.ResetObserver=hW;var pW=function(r){tr(t,r);function t(e){var n=e.error,i=e.onError,o=r.call(this,{beforeError:i})||this;return o.onError(n),o}return s(t,"FailedObserver"),t}(Ul);z.FailedObserver=pW;var _W=function(r){tr(t,r);function t(){var e=r.call(this)||this;return r.prototype.markCompleted.call(e),e}return s(t,"CompletedObserver"),t}(Ul);z.CompletedObserver=_W;var dW=function(r){tr(t,r);function t(e){var n=e.resultObserver,i=e.onProtocolError,o=e.onError,u=e.onCompleted,a=r.call(this)||this;return a._resultObserver=n,a._onError=o,a._onCompleted=u,a._records=[],a._onProtocolError=i,n.subscribe(a),a}return s(t,"ProcedureRouteObserver"),t.prototype.onNext=function(e){this._records.push(e)},t.prototype.onError=function(e){e.code===Jr&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},t.prototype.onCompleted=function(){if(this._records!==null&&this._records.length!==1){this.onError((0,ke.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+ke.json.stringify(this._records),Jr));return}this._onCompleted&&this._onCompleted(TO.default.ofRecord(this._records[0]))},t}(en);z.ProcedureRouteObserver=dW;var vW=function(r){tr(t,r);function t(e){var n=e===void 0?{}:e,i=n.onProtocolError,o=n.onError,u=n.onCompleted,a=r.call(this)||this;return a._onProtocolError=i,a._onError=o,a._onCompleted=u,a}return s(t,"RouteObserver"),t.prototype.onNext=function(e){this.onError((0,ke.newError)("Received RECORD when resetting: received record is: "+ke.json.stringify(e),Jr))},t.prototype.onError=function(e){e.code===Jr&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(TO.default.ofMessageResponse(e))},t}(en);z.RouteObserver=vW;var we={READY_STREAMING:{onSuccess:function(r,t){r._handleRunSuccess(t,function(){r._setState(we.STREAMING)})},onError:function(r,t){r._handleError(t)},name:function(){return"READY_STREAMING"}},READY:{onSuccess:function(r,t){r._handleRunSuccess(t,function(){return r._handleStreaming()})},onError:function(r,t){r._handleError(t)},name:function(){return"READY"}},STREAMING:{onSuccess:function(r,t){t.has_more?r._handleHasMore(t):r._handlePullSuccess(t)},onError:function(r,t){r._handleError(t)},name:function(){return"STREAMING"}},FAILED:{onError:function(r){},name:function(){return"FAILED"}},SUCCEEDED:{name:function(){return"SUCCEEDED"}}}});var Bl=h(go=>{"use strict";var bW=go&&go.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(go,"__esModule",{value:!0});var Ll=Zs(),PO=Gs(),Qs=bW(er()),Fl=it(),Xs=R(),CO=Xs.internal.bookmark.Bookmark,AO=Xs.internal.constants,IO=AO.ACCESS_MODE_WRITE,yW=AO.BOLT_PROTOCOL_V1,ZQ=Xs.internal.logger.Logger,RO=Xs.internal.txConfig.TxConfig,mW=function(){function r(t,e,n,i,o,u){var a=n===void 0?{}:n,f=a.disableLosslessIntegers,c=a.useBigInt;i===void 0&&(i=s(function(){return null},"createResponseHandler")),this._server=t||{},this._chunker=e,this._packer=this._createPacker(e),this._unpacker=this._createUnpacker(f,c),this._responseHandler=i(this),this._log=o,this._onProtocolError=u,this._fatalError=null}return s(r,"BoltProtocol"),Object.defineProperty(r.prototype,"version",{get:function(){return yW},enumerable:!1,configurable:!0}),r.prototype.packer=function(){return this._packer},r.prototype.unpacker=function(){return this._unpacker},r.prototype.transformMetadata=function(t){return t},r.prototype.initialize=function(t){var e=this,n=t===void 0?{}:t,i=n.userAgent,o=n.authToken,u=n.onError,a=n.onComplete,f=new Fl.LoginObserver({onError:function(c){return e._onLoginError(c,u)},onCompleted:function(c){return e._onLoginCompleted(c,a)}});return this.write(Qs.default.init(i,o),f,!0),f},r.prototype.prepareToClose=function(){},r.prototype.beginTransaction=function(t){var e=t===void 0?{}:t,n=e.bookmark,i=e.txConfig,o=e.database,u=e.mode,a=e.impersonatedUser,f=e.beforeError,c=e.afterError,l=e.beforeComplete,p=e.afterComplete;return this.run("BEGIN",n?n.asBeginTransactionParameters():{},{bookmark:n,txConfig:i,database:o,mode:u,impersonatedUser:a,beforeError:f,afterError:c,beforeComplete:l,afterComplete:p,flush:!1})},r.prototype.commitTransaction=function(t){var e=t===void 0?{}:t,n=e.beforeError,i=e.afterError,o=e.beforeComplete,u=e.afterComplete;return this.run("COMMIT",{},{bookmark:CO.empty(),txConfig:RO.empty(),mode:IO,beforeError:n,afterError:i,beforeComplete:o,afterComplete:u})},r.prototype.rollbackTransaction=function(t){var e=t===void 0?{}:t,n=e.beforeError,i=e.afterError,o=e.beforeComplete,u=e.afterComplete;return this.run("ROLLBACK",{},{bookmark:CO.empty(),txConfig:RO.empty(),mode:IO,beforeError:n,afterError:i,beforeComplete:o,afterComplete:u})},r.prototype.run=function(t,e,n){var i=n===void 0?{}:n,o=i.bookmark,u=i.txConfig,a=i.database,f=i.mode,c=i.impersonatedUser,l=i.beforeKeys,p=i.afterKeys,_=i.beforeError,m=i.afterError,S=i.beforeComplete,C=i.afterComplete,Y=i.flush,T=Y===void 0?!0:Y,D=new Fl.ResultStreamObserver({server:this._server,beforeKeys:l,afterKeys:p,beforeError:_,afterError:m,beforeComplete:S,afterComplete:C});return(0,Ll.assertTxConfigIsEmpty)(u,this._onProtocolError,D),(0,Ll.assertDatabaseIsEmpty)(a,this._onProtocolError,D),(0,Ll.assertImpersonatedUserIsEmpty)(c,this._onProtocolError,D),this.write(Qs.default.run(t,e),D,!1),this.write(Qs.default.pullAll(),D,T),D},Object.defineProperty(r.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),r.prototype.reset=function(t){var e=t===void 0?{}:t,n=e.onError,i=e.onComplete,o=new Fl.ResetObserver({onProtocolError:this._onProtocolError,onError:n,onComplete:i});return this.write(Qs.default.reset(),o,!0),o},r.prototype._createPacker=function(t){return new PO.v1.Packer(t)},r.prototype._createUnpacker=function(t,e){return new PO.v1.Unpacker(t,e)},r.prototype.write=function(t,e,n){var i=this,o=this.queueObserverIfProtocolIsNotBroken(e);o&&(this._log.isDebugEnabled()&&this._log.debug("C: "+t),this.packer().packStruct(t.signature,t.fields.map(function(u){return i.packer().packable(u)})),this._chunker.messageBoundary(),n&&this._chunker.flush())},r.prototype.notifyFatalError=function(t){return this._fatalError=t,this._responseHandler._notifyErrorToObservers(t)},r.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},r.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},r.prototype.queueObserverIfProtocolIsNotBroken=function(t){return this.isBroken()?(this.notifyFatalErrorToObserver(t),!1):this._responseHandler._queueObserver(t)},r.prototype.isBroken=function(){return!!this._fatalError},r.prototype.notifyFatalErrorToObserver=function(t){t&&t.onError&&t.onError(this._fatalError)},r.prototype.resetFailure=function(){this._responseHandler._resetFailure()},r.prototype._onLoginCompleted=function(t,e){if(t){var n=t.server;this._server.version||(this._server.version=n)}e&&e(t)},r.prototype._onLoginError=function(t,e){this._onProtocolError(t.message),e&&e(t)},r}();go.default=mW});var Vl=h(rr=>{"use strict";var OW=rr&&rr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),NO=rr&&rr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rr,"__esModule",{value:!0});var gW=NO(Bl()),jO=NO(Gs()),SW=R(),EW=SW.internal.constants.BOLT_PROTOCOL_V2,wW=function(r){OW(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"BoltProtocol"),t.prototype._createPacker=function(e){return new jO.default.Packer(e)},t.prototype._createUnpacker=function(e,n){return new jO.default.Unpacker(e,n)},Object.defineProperty(t.prototype,"version",{get:function(){return EW},enumerable:!1,configurable:!0}),t}(gW.default);rr.default=wW});var Hl=h(ot=>{"use strict";var TW=ot&&ot.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),eu=ot&&ot.__assign||function(){return eu=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},eu.apply(this,arguments)},qO=ot&&ot.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ot,"__esModule",{value:!0});var PW=qO(Vl()),nr=qO(er()),Js=Zs(),ir=it(),Wl=R(),XQ=Wl.internal.bookmark.Bookmark,CW=Wl.internal.constants.BOLT_PROTOCOL_V3,IW=Wl.internal.txConfig.TxConfig,xO="context",RW="CALL dbms.cluster.routing.getRoutingTable($"+xO+")",AW=new ir.StreamObserver,jW=function(r){TW(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"BoltProtocol"),Object.defineProperty(t.prototype,"version",{get:function(){return CW},enumerable:!1,configurable:!0}),t.prototype.transformMetadata=function(e){return"t_first"in e&&(e.result_available_after=e.t_first,delete e.t_first),"t_last"in e&&(e.result_consumed_after=e.t_last,delete e.t_last),e},t.prototype.initialize=function(e){var n=this,i=e===void 0?{}:e,o=i.userAgent,u=i.authToken,a=i.onError,f=i.onComplete,c=new ir.LoginObserver({onError:function(l){return n._onLoginError(l,a)},onCompleted:function(l){return n._onLoginCompleted(l,f)}});return this.write(nr.default.hello(o,u),c,!0),c},t.prototype.prepareToClose=function(){this.write(nr.default.goodbye(),AW,!0)},t.prototype.beginTransaction=function(e){var n=e===void 0?{}:e,i=n.bookmark,o=n.txConfig,u=n.database,a=n.impersonatedUser,f=n.mode,c=n.beforeError,l=n.afterError,p=n.beforeComplete,_=n.afterComplete,m=new ir.ResultStreamObserver({server:this._server,beforeError:c,afterError:l,beforeComplete:p,afterComplete:_});return m.prepareToHandleSingleResponse(),(0,Js.assertDatabaseIsEmpty)(u,this._onProtocolError,m),(0,Js.assertImpersonatedUserIsEmpty)(a,this._onProtocolError,m),this.write(nr.default.begin({bookmark:i,txConfig:o,mode:f}),m,!0),m},t.prototype.commitTransaction=function(e){var n=e===void 0?{}:e,i=n.beforeError,o=n.afterError,u=n.beforeComplete,a=n.afterComplete,f=new ir.ResultStreamObserver({server:this._server,beforeError:i,afterError:o,beforeComplete:u,afterComplete:a});return f.prepareToHandleSingleResponse(),this.write(nr.default.commit(),f,!0),f},t.prototype.rollbackTransaction=function(e){var n=e===void 0?{}:e,i=n.beforeError,o=n.afterError,u=n.beforeComplete,a=n.afterComplete,f=new ir.ResultStreamObserver({server:this._server,beforeError:i,afterError:o,beforeComplete:u,afterComplete:a});return f.prepareToHandleSingleResponse(),this.write(nr.default.rollback(),f,!0),f},t.prototype.run=function(e,n,i){var o=i===void 0?{}:i,u=o.bookmark,a=o.txConfig,f=o.database,c=o.impersonatedUser,l=o.mode,p=o.beforeKeys,_=o.afterKeys,m=o.beforeError,S=o.afterError,C=o.beforeComplete,Y=o.afterComplete,T=o.flush,D=T===void 0?!0:T,W=new ir.ResultStreamObserver({server:this._server,beforeKeys:p,afterKeys:_,beforeError:m,afterError:S,beforeComplete:C,afterComplete:Y});return(0,Js.assertDatabaseIsEmpty)(f,this._onProtocolError,W),(0,Js.assertImpersonatedUserIsEmpty)(c,this._onProtocolError,W),this.write(nr.default.runWithMetadata(e,n,{bookmark:u,txConfig:a,mode:l}),W,!1),this.write(nr.default.pullAll(),W,D),W},t.prototype.requestRoutingInformation=function(e){var n,i=e.routingContext,o=i===void 0?{}:i,u=e.sessionContext,a=u===void 0?{}:u,f=e.onError,c=e.onCompleted,l=this.run(RW,(n={},n[xO]=o,n),eu(eu({},a),{txConfig:IW.empty()}));return new ir.ProcedureRouteObserver({resultObserver:l,onProtocolError:this._onProtocolError,onError:f,onCompleted:c})},t}(PW.default);ot.default=jW});var Zl=h(st=>{"use strict";var NW=st&&st.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),tu=st&&st.__assign||function(){return tu=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},tu.apply(this,arguments)},MO=st&&st.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(st,"__esModule",{value:!0});var qW=MO(Hl()),So=MO(er()),DO=Zs(),zl=it(),Yl=R(),t9=Yl.internal.bookmark.Bookmark,kO=Yl.internal.constants,xW=kO.BOLT_PROTOCOL_V4_0,DW=kO.FETCH_ALL,MW=Yl.internal.txConfig.TxConfig,UO="context",LO="database",kW="CALL dbms.routing.getRoutingTable($"+UO+", $"+LO+")",UW=function(r){NW(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"BoltProtocol"),Object.defineProperty(t.prototype,"version",{get:function(){return xW},enumerable:!1,configurable:!0}),t.prototype.beginTransaction=function(e){var n=e===void 0?{}:e,i=n.bookmark,o=n.txConfig,u=n.database,a=n.impersonatedUser,f=n.mode,c=n.beforeError,l=n.afterError,p=n.beforeComplete,_=n.afterComplete,m=new zl.ResultStreamObserver({server:this._server,beforeError:c,afterError:l,beforeComplete:p,afterComplete:_});return m.prepareToHandleSingleResponse(),(0,DO.assertImpersonatedUserIsEmpty)(a,this._onProtocolError,m),this.write(So.default.begin({bookmark:i,txConfig:o,database:u,mode:f}),m,!0),m},t.prototype.run=function(e,n,i){var o=i===void 0?{}:i,u=o.bookmark,a=o.txConfig,f=o.database,c=o.impersonatedUser,l=o.mode,p=o.beforeKeys,_=o.afterKeys,m=o.beforeError,S=o.afterError,C=o.beforeComplete,Y=o.afterComplete,T=o.flush,D=T===void 0?!0:T,W=o.reactive,te=W===void 0?!1:W,pt=o.fetchSize,nn=pt===void 0?DW:pt,_t=new zl.ResultStreamObserver({server:this._server,reactive:te,fetchSize:nn,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:p,afterKeys:_,beforeError:m,afterError:S,beforeComplete:C,afterComplete:Y});(0,DO.assertImpersonatedUserIsEmpty)(c,this._onProtocolError,_t);var Eu=te;return this.write(So.default.runWithMetadata(e,n,{bookmark:u,txConfig:a,database:f,mode:l}),_t,Eu&&D),te||this.write(So.default.pull({n:nn}),_t,D),_t},t.prototype._requestMore=function(e,n,i){this.write(So.default.pull({stmtId:e,n}),i,!0)},t.prototype._requestDiscard=function(e,n){this.write(So.default.discard({stmtId:e}),n,!0)},t.prototype._noOp=function(){},t.prototype.requestRoutingInformation=function(e){var n,i=e.routingContext,o=i===void 0?{}:i,u=e.databaseName,a=u===void 0?null:u,f=e.sessionContext,c=f===void 0?{}:f,l=e.onError,p=e.onCompleted,_=this.run(kW,(n={},n[UO]=o,n[LO]=a,n),tu(tu({},c),{txConfig:MW.empty()}));return new zl.ProcedureRouteObserver({resultObserver:_,onProtocolError:this._onProtocolError,onError:l,onCompleted:p})},t}(qW.default);st.default=UW});var Gl=h(or=>{"use strict";var LW=or&&or.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),FO=or&&or.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(or,"__esModule",{value:!0});var FW=FO(Zl()),BW=FO(er()),VW=it(),WW=R(),HW=WW.internal.constants.BOLT_PROTOCOL_V4_1,zW=function(r){LW(t,r);function t(e,n,i,o,u,a,f){o===void 0&&(o=s(function(){return null},"createResponseHandler"));var c=r.call(this,e,n,i,o,u,a)||this;return c._serversideRouting=f,c}return s(t,"BoltProtocol"),Object.defineProperty(t.prototype,"version",{get:function(){return HW},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var n=this,i=e===void 0?{}:e,o=i.userAgent,u=i.authToken,a=i.onError,f=i.onComplete,c=new VW.LoginObserver({onError:function(l){return n._onLoginError(l,a)},onCompleted:function(l){return n._onLoginCompleted(l,f)}});return this.write(BW.default.hello(o,u,this._serversideRouting),c,!0),c},t}(FW.default);or.default=zW});var $l=h(sr=>{"use strict";var YW=sr&&sr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ZW=sr&&sr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(sr,"__esModule",{value:!0});var GW=ZW(Gl()),$W=R(),KW=$W.internal.constants.BOLT_PROTOCOL_V4_2,QW=function(r){YW(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"BoltProtocol"),Object.defineProperty(t.prototype,"version",{get:function(){return KW},enumerable:!1,configurable:!0}),t}(GW.default);sr.default=QW});var ru=h(ur=>{"use strict";var XW=ur&&ur.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),VO=ur&&ur.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ur,"__esModule",{value:!0});var JW=VO($l()),BO=VO(er()),e2=it(),t2=it(),WO=R(),r2=WO.internal.bookmark.Bookmark,n2=WO.internal.constants.BOLT_PROTOCOL_V4_3,i2=function(r){XW(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"BoltProtocol"),Object.defineProperty(t.prototype,"version",{get:function(){return n2},enumerable:!1,configurable:!0}),t.prototype.requestRoutingInformation=function(e){var n=e.routingContext,i=n===void 0?{}:n,o=e.databaseName,u=o===void 0?null:o,a=e.sessionContext,f=a===void 0?{}:a,c=e.onError,l=e.onCompleted,p=new e2.RouteObserver({onProtocolError:this._onProtocolError,onError:c,onCompleted:l}),_=f.bookmark||r2.empty();return this.write(BO.default.route(i,_.values(),u),p,!0),p},t.prototype.initialize=function(e){var n=this,i=e===void 0?{}:e,o=i.userAgent,u=i.authToken,a=i.onError,f=i.onComplete,c=new t2.LoginObserver({onError:function(l){return n._onLoginError(l,a)},onCompleted:function(l){return l.patch_bolt!==void 0&&n._applyPatches(l.patch_bolt),n._onLoginCompleted(l,f)}});return this.write(BO.default.hello(o,u,this._serversideRouting,["utc"]),c,!0),c},t.prototype._applyPatches=function(e){e.includes("utc")&&this._applyUtcPatch()},t.prototype._applyUtcPatch=function(){this._packer.useUtc=!0,this._unpacker.useUtc=!0},t}(JW.default);ur.default=i2});var ZO=h(ar=>{"use strict";var o2=ar&&ar.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),HO=ar&&ar.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ar,"__esModule",{value:!0});var s2=HO(ru()),zO=R(),nu=HO(er()),Kl=it(),YO=zO.internal.constants,u2=YO.BOLT_PROTOCOL_V4_4,a2=YO.FETCH_ALL,c2=zO.internal.bookmark.Bookmark,f2=function(r){o2(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return s(t,"BoltProtocol"),Object.defineProperty(t.prototype,"version",{get:function(){return u2},enumerable:!1,configurable:!0}),t.prototype.requestRoutingInformation=function(e){var n=e.routingContext,i=n===void 0?{}:n,o=e.databaseName,u=o===void 0?null:o,a=e.impersonatedUser,f=a===void 0?null:a,c=e.sessionContext,l=c===void 0?{}:c,p=e.onError,_=e.onCompleted,m=new Kl.RouteObserver({onProtocolError:this._onProtocolError,onError:p,onCompleted:_}),S=l.bookmark||c2.empty();return this.write(nu.default.routeV4x4(i,S.values(),{databaseName:u,impersonatedUser:f}),m,!0),m},t.prototype.run=function(e,n,i){var o=i===void 0?{}:i,u=o.bookmark,a=o.txConfig,f=o.database,c=o.mode,l=o.impersonatedUser,p=o.beforeKeys,_=o.afterKeys,m=o.beforeError,S=o.afterError,C=o.beforeComplete,Y=o.afterComplete,T=o.flush,D=T===void 0?!0:T,W=o.reactive,te=W===void 0?!1:W,pt=o.fetchSize,nn=pt===void 0?a2:pt,_t=new Kl.ResultStreamObserver({server:this._server,reactive:te,fetchSize:nn,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:p,afterKeys:_,beforeError:m,afterError:S,beforeComplete:C,afterComplete:Y}),Eu=te;return this.write(nu.default.runWithMetadata(e,n,{bookmark:u,txConfig:a,database:f,mode:c,impersonatedUser:l}),_t,Eu&&D),te||this.write(nu.default.pull({n:nn}),_t,D),_t},t.prototype.beginTransaction=function(e){var n=e===void 0?{}:e,i=n.bookmark,o=n.txConfig,u=n.database,a=n.mode,f=n.impersonatedUser,c=n.beforeError,l=n.afterError,p=n.beforeComplete,_=n.afterComplete,m=new Kl.ResultStreamObserver({server:this._server,beforeError:c,afterError:l,beforeComplete:p,afterComplete:_});return m.prepareToHandleSingleResponse(),this.write(nu.default.begin({bookmark:i,txConfig:o,database:u,mode:a,impersonatedUser:f}),m,!0),m},t}(s2.default);ar.default=f2});var $O=h(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});var cr=R(),l2=112,h2=113,p2=126,_2=127;function ut(){}s(ut,"NO_OP");function GO(r){return r}s(GO,"NO_OP_IDENTITY");var d2={onNext:ut,onCompleted:ut,onError:ut},v2=function(){function r(t){var e=t===void 0?{}:t,n=e.transformMetadata,i=e.log,o=e.observer;this._pendingObservers=[],this._log=i,this._transformMetadata=n||GO,this._observer=Object.assign({onPendingObserversChange:ut,onError:ut,onFailure:ut,onErrorApplyTransformation:GO},o)}return s(r,"ResponseHandler"),Object.defineProperty(r.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),r.prototype.handleResponse=function(t){var e=t.fields[0];switch(t.signature){case h2:this._log.isDebugEnabled()&&this._log.debug("S: RECORD "+cr.json.stringify(t)),this._currentObserver.onNext(e);break;case l2:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS "+cr.json.stringify(t));try{var n=this._transformMetadata(e);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case _2:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE "+cr.json.stringify(t));try{var i=(0,cr.newError)(e.message,e.code);this._currentFailure=this._observer.onErrorApplyTransformation(i),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case p2:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED "+cr.json.stringify(t));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,cr.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,cr.newError)("Unknown Bolt protocol message: "+t))}},r.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onPendingObserversChange(this._pendingObservers.length)},r.prototype._queueObserver=function(t){return t=t||d2,t.onCompleted=t.onCompleted||ut,t.onError=t.onError||ut,t.onNext=t.onNext||ut,this._currentObserver===void 0?this._currentObserver=t:this._pendingObservers.push(t),this._observer.onPendingObserversChange(this._pendingObservers.length),!0},r.prototype._notifyErrorToObservers=function(t){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(t);this._pendingObservers.length>0;){var e=this._pendingObservers.shift();e&&e.onError&&e.onError(t)}},r.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},r.prototype._resetFailure=function(){this._currentFailure=null},r}();Ql.default=v2});var KO=h(Eo=>{"use strict";var at=Eo&&Eo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Eo,"__esModule",{value:!0});var b2=R(),y2=at(Bl()),m2=at(Vl()),O2=at(Hl()),g2=at(Zl()),S2=at(Gl()),E2=at($l()),w2=at(ru()),T2=at(ZO()),P2=at($O());function C2(r){var t=r===void 0?{}:r,e=t.version,n=t.chunker,i=t.dechunker,o=t.channel,u=t.disableLosslessIntegers,a=t.useBigInt,f=t.serversideRouting,c=t.server,l=t.log,p=t.observer,_=s(function(m){var S=new P2.default({transformMetadata:m.transformMetadata.bind(m),log:l,observer:p});return o.onerror=p.onError.bind(p),o.onmessage=function(C){return i.write(C)},i.onmessage=function(C){try{S.handleResponse(m.unpacker().unpack(C))}catch(Y){return p.onError(Y)}},S},"createResponseHandler");return I2(e,c,n,{disableLosslessIntegers:u,useBigInt:a},f,_,p.onProtocolError.bind(p),l)}s(C2,"create");Eo.default=C2;function I2(r,t,e,n,i,o,u,a){switch(r){case 1:return new y2.default(t,e,n,o,a,u);case 2:return new m2.default(t,e,n,o,a,u);case 3:return new O2.default(t,e,n,o,a,u);case 4:return new g2.default(t,e,n,o,a,u);case 4.1:return new S2.default(t,e,n,o,a,u,i);case 4.2:return new E2.default(t,e,n,o,a,u,i);case 4.3:return new w2.default(t,e,n,o,a,u,i);case 4.4:return new T2.default(t,e,n,o,a,u,i);default:throw(0,b2.newError)("Unknown Bolt protocol version: "+r)}}s(I2,"createProtocol")});var ou=h(pe=>{"use strict";var R2=pe&&pe.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),A2=pe&&pe.__exportStar||function(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&R2(t,r,e)},iu=pe&&pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pe,"__esModule",{value:!0});pe.RawRoutingTable=pe.BoltProtocol=void 0;var j2=iu(gm()),N2=iu(KO()),q2=iu(ru()),x2=iu(kl());A2(it(),pe);pe.BoltProtocol=q2.default;pe.RawRoutingTable=x2.default;pe.default={handshake:j2.default,create:N2.default}});var Xl=h(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.DEFAULT_ACQUISITION_TIMEOUT=fr.DEFAULT_MAX_SIZE=void 0;var su=100;fr.DEFAULT_MAX_SIZE=su;var uu=60*1e3;fr.DEFAULT_ACQUISITION_TIMEOUT=uu;var D2=function(){function r(t,e){this.maxSize=QO(t,su),this.acquisitionTimeout=QO(e,uu)}return s(r,"PoolConfig"),r.defaultConfig=function(){return new r(su,uu)},r.fromDriverConfig=function(t){var e=XO(t.maxConnectionPoolSize),n=e?t.maxConnectionPoolSize:su,i=XO(t.connectionAcquisitionTimeout),o=i?t.connectionAcquisitionTimeout:uu;return new r(n,o)},r}();fr.default=D2;function QO(r,t){return r===0||r?r:t}s(QO,"valueOrDefault");function XO(r){return r===0||r}s(XO,"isConfigured")});var tg=h(ct=>{"use strict";var au=ct&&ct.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function a(l){try{c(n.next(l))}catch(p){u(p)}}s(a,"fulfilled");function f(l){try{c(n.throw(l))}catch(p){u(p)}}s(f,"rejected");function c(l){l.done?o(l.value):i(l.value).then(a,f)}s(c,"step"),c((n=n.apply(r,t||[])).next())})},cu=ct&&ct.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(l){return f([c,l])}}function f(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},M2=ct&&ct.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ct,"__esModule",{value:!0});var k2=M2(Xl()),Jl=R(),U2=Jl.internal.logger.Logger,L2=function(){function r(t){var e=t===void 0?{}:t,n=e.create,i=n===void 0?function(T,D){return Promise.resolve()}:n,o=e.destroy,u=o===void 0?function(T){return Promise.resolve()}:o,a=e.validate,f=a===void 0?function(T){return!0}:a,c=e.installIdleObserver,l=c===void 0?function(T,D){}:c,p=e.removeIdleObserver,_=p===void 0?function(T){}:p,m=e.config,S=m===void 0?k2.default.defaultConfig():m,C=e.log,Y=C===void 0?U2.noOp():C;this._create=i,this._destroy=u,this._validate=f,this._installIdleObserver=l,this._removeIdleObserver=_,this._maxSize=S.maxSize,this._acquisitionTimeout=S.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._poolState={},this._release=this._release.bind(this),this._log=Y,this._closed=!1}return s(r,"Pool"),r.prototype.acquire=function(t){var e=this;return this._acquire(t).then(function(n){var i=t.asKey();if(n)return n;var o=e._acquireRequests,u=o[i];return u||(o[i]=[]),new Promise(function(a,f){var c,l=setTimeout(function(){var p=o[i];if(p&&(o[i]=p.filter(function(S){return S!==c})),!c.isCompleted()){var _=e.activeResourceCount(t),m=e.has(t)?e._pools[i].length:0;c.reject((0,Jl.newError)("Connection acquisition timed out in "+e._acquisitionTimeout+" ms. Pool status: Active conn count = "+_+", Idle conn count = "+m+"."))}},e._acquisitionTimeout);c=new B2(i,a,f,l,e._log),o[i].push(c)})})},r.prototype.purge=function(t){return this._purgeKey(t.asKey())},r.prototype.close=function(){return au(this,void 0,void 0,function(){var t=this;return cu(this,function(e){switch(e.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(n){return t._purgeKey(n)}))];case 1:return[2,e.sent()]}})})},r.prototype.keepAll=function(t){var e=this,n=t.map(function(u){return u.asKey()}),i=Object.keys(this._pools),o=i.filter(function(u){return n.indexOf(u)===-1});return Promise.all(o.map(function(u){return e._purgeKey(u)}))},r.prototype.has=function(t){return t.asKey()in this._pools},r.prototype.activeResourceCount=function(t){return this._activeResourceCounts[t.asKey()]||0},r.prototype._acquire=function(t){return au(this,void 0,void 0,function(){var e,n,i,o,u,a,f=this;return cu(this,function(c){switch(c.label){case 0:if(this._closed)throw(0,Jl.newError)("Pool is closed, it is no more able to serve requests.");e=t.asKey(),n=this._pools[e],i=this._poolState[e],n||(n=[],i=new eg,this._pools[e]=n,this._pendingCreates[e]=0,this._poolState[e]=i),c.label=1;case 1:return n.length?(o=n.pop(),this._validate(o)?(this._removeIdleObserver&&this._removeIdleObserver(o),JO(e,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(o+" acquired from the pool "+e),[2,o]):[3,2]):[3,5];case 2:return[4,this._destroy(o)];case 3:c.sent(),c.label=4;case 4:return[3,1];case 5:if(this._maxSize>0&&(u=this.activeResourceCount(t)+this._pendingCreates[e],u>=this._maxSize))return[2,null];this._pendingCreates[e]=this._pendingCreates[e]+1,c.label=6;case 6:return c.trys.push([6,,8,9]),[4,this._create(t,function(l,p){return f._release(i,l,p)})];case 7:return a=c.sent(),JO(e,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(a+" created for the pool "+e),[3,9];case 8:return this._pendingCreates[e]=this._pendingCreates[e]-1,[7];case 9:return[2,a]}})})},r.prototype._release=function(t,e,n){return au(this,void 0,void 0,function(){var i,o,u=this;return cu(this,function(a){switch(a.label){case 0:return i=e.asKey(),o=this._pools[i],o&&t&&t.isActive()?this._validate(n)?[3,2]:(this._log.isDebugEnabled()&&this._log.debug(n+" destroyed and can't be released to the pool "+i+" because it is not functional"),[4,this._destroy(n)]):[3,4];case 1:return a.sent(),[3,3];case 2:this._installIdleObserver&&this._installIdleObserver(n,{onError:function(f){u._log.debug("Idle connection "+n+" destroyed because of error: "+f);var c=u._pools[i];c&&(u._pools[i]=c.filter(function(l){return l!==n})),u._destroy(n).catch(function(){})}}),o.push(n),this._log.isDebugEnabled()&&this._log.debug(n+" released to the pool "+i),a.label=3;case 3:return[3,6];case 4:return this._log.isDebugEnabled()&&this._log.debug(n+" destroyed and can't be released to the pool "+i+" because pool has been purged"),[4,this._destroy(n)];case 5:a.sent(),a.label=6;case 6:return F2(i,this._activeResourceCounts),this._processPendingAcquireRequests(e),[2]}})})},r.prototype._purgeKey=function(t){return au(this,void 0,void 0,function(){var e,n,i,o;return cu(this,function(u){switch(u.label){case 0:for(e=this._pools[t]||[],n=this._poolState[t]||new eg,i=[];e.length;)o=e.pop(),this._removeIdleObserver&&this._removeIdleObserver(o),i.push(this._destroy(o));return n.close(),delete this._pools[t],delete this._poolState[t],[4,Promise.all(i)];case 1:return u.sent(),[2]}})})},r.prototype._processPendingAcquireRequests=function(t){var e=this,n=t.asKey(),i=this._acquireRequests[n],o=this._poolState[n];if(i){var u=i.shift();u?this._acquire(t).catch(function(a){return u.reject(a),null}).then(function(a){a&&(u.isCompleted()?e._release(o,t,a):u.resolve(a))}):delete this._acquireRequests[n]}},r}();function JO(r,t){var e=t[r]||0;t[r]=e+1}s(JO,"resourceAcquired");function F2(r,t){var e=t[r]||0,n=e-1;n>0?t[r]=n:delete t[r]}s(F2,"resourceReleased");var B2=function(){function r(t,e,n,i,o){this._key=t,this._resolve=e,this._reject=n,this._timeoutId=i,this._log=o,this._completed=!1}return s(r,"PendingRequest"),r.prototype.isCompleted=function(){return this._completed},r.prototype.resolve=function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug(t+" acquired from the pool "+this._key),this._resolve(t))},r.prototype.reject=function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(t))},r}(),eg=function(){function r(){this._active=!0}return s(r,"PoolState"),r.prototype.isActive=function(){return this._active},r.prototype.close=function(){this._active=!1},r}();ct.default=L2});var th=h(K=>{"use strict";var V2=K&&K.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),W2=K&&K.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),H2=K&&K.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&V2(t,r,e);return W2(t,r),t},z2=K&&K.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(K,"__esModule",{value:!0});K.DEFAULT_MAX_SIZE=K.DEFAULT_ACQUISITION_TIMEOUT=K.PoolConfig=K.Pool=void 0;var eh=H2(Xl());K.PoolConfig=eh.default;Object.defineProperty(K,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return eh.DEFAULT_ACQUISITION_TIMEOUT}});Object.defineProperty(K,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return eh.DEFAULT_MAX_SIZE}});var rg=z2(tg());K.Pool=rg.default;K.default=rg.default});var rh=h(wo=>{"use strict";var Y2=wo&&wo.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(wo,"__esModule",{value:!0});var Z2=R(),G2=function(r){Y2(t,r);function t(e){var n=r.call(this)||this;return n._connection=e,n}return s(t,"SingleConnectionProvider"),t.prototype.acquireConnection=function(e){var n=e===void 0?{}:e,i=n.accessMode,o=n.database,u=n.bookmarks,a=this._connection;return this._connection=null,Promise.resolve(a)},t}(Z2.ConnectionProvider);wo.default=G2});var fu=h(nh=>{"use strict";Object.defineProperty(nh,"__esModule",{value:!0});var $2=function(){function r(t){this._errorHandler=t}return s(r,"Connection"),Object.defineProperty(r.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.isOpen=function(){throw new Error("not implemented")},r.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(r.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,e){throw new Error("not implemented")},r.prototype.write=function(t,e,n){throw new Error("not implemented")},r.prototype.resetAndFlush=function(){throw new Error("not implemented")},r.prototype.close=function(){throw new Error("not implemented")},r.prototype.handleAndTransformError=function(t,e){return this._errorHandler?this._errorHandler.handleAndTransformError(t,e):t},r}();nh.default=$2});var sg=h(Se=>{"use strict";var K2=Se&&Se.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Q2=Se&&Se.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function a(l){try{c(n.next(l))}catch(p){u(p)}}s(a,"fulfilled");function f(l){try{c(n.throw(l))}catch(p){u(p)}}s(f,"rejected");function c(l){l.done?o(l.value):i(l.value).then(a,f)}s(c,"step"),c((n=n.apply(r,t||[])).next())})},X2=Se&&Se.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(l){return f([c,l])}}function f(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ig=Se&&Se.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Se,"__esModule",{value:!0});Se.createChannelConnection=void 0;var lu=$r(),To=R(),J2=ig(fu()),ng=ig(ou()),eH=To.error.PROTOCOL_ERROR,tH=To.internal.logger.Logger,rH=0;function nH(r,t,e,n,i,o){i===void 0&&(i=null),o===void 0&&(o=s(function(f){return new lu.Channel(f)},"createChannel"));var u=new lu.ChannelConfig(r,t,e.errorCode()),a=o(u);return ng.default.handshake(a).then(function(f){var c=f.protocolVersion,l=f.consumeRemainingBuffer,p=new lu.Chunker(a),_=new lu.Dechunker,m=s(function(C){return ng.default.create({version:c,channel:a,chunker:p,dechunker:_,disableLosslessIntegers:t.disableLosslessIntegers,useBigInt:t.useBigInt,serversideRouting:i,server:C.server,log:C.logger,observer:{onPendingObserversChange:C._handleOngoingRequestsNumberChange.bind(C),onError:C._handleFatalError.bind(C),onFailure:C._resetOnFailure.bind(C),onProtocolError:C._handleProtocolError.bind(C),onErrorApplyTransformation:function(Y){return C.handleAndTransformError(Y,C._address)}}})},"createProtocol"),S=new og(a,e,r,n,t.disableLosslessIntegers,i,p,m);return l(function(C){return _.write(C)}),S}).catch(function(f){return a.close().then(function(){throw f})})}s(nH,"createChannelConnection");Se.createChannelConnection=nH;var og=function(r){K2(t,r);function t(e,n,i,o,u,a,f,c){u===void 0&&(u=!1),a===void 0&&(a=null);var l=r.call(this,n)||this;return l._id=rH++,l._address=i,l._server={address:i.asHostPort()},l.creationTimestamp=Date.now(),l._disableLosslessIntegers=u,l._ch=e,l._chunker=f,l._log=iH(l,o),l._serversideRouting=a,l._dbConnectionId=null,l._protocol=c(l),l._isBroken=!1,l._log.isDebugEnabled()&&l._log.debug("created towards "+i),l}return s(t,"ChannelConnection"),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(e){this._dbConnectionId=e},enumerable:!1,configurable:!0}),t.prototype.connect=function(e,n){return this._initialize(e,n)},t.prototype._initialize=function(e,n){var i=this,o=this;return new Promise(function(u,a){i._protocol.initialize({userAgent:e,authToken:n,onError:function(f){return a(f)},onComplete:function(f){if(f){var c=f.server;(!i.version||c)&&(i.version=c);var l=f.connection_id;if(i.databaseId||(i.databaseId=l),f.hints){var p=f.hints["connection.recv_timeout_seconds"];if(p!=null){var _=(0,To.toNumber)(p);Number.isInteger(_)&&_>0?i._ch.setupReceiveTimeout(_*1e3):i._log.info("Server located at "+i._address+" supplied an invalid connection receive timeout value ("+_+"). Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}}}u(o)}})})},t.prototype.protocol=function(){return this._protocol},Object.defineProperty(t.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._server.version},set:function(e){this._server.version=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),t.prototype._handleFatalError=function(e){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||e,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by "+this._error+" ("+To.json.stringify(this._error)+")"),this._protocol.notifyFatalError(this._error)},t.prototype._queueObserver=function(e){return this._protocol.queueObserverIfProtocolIsNotBroken(e)},t.prototype.hasOngoingObservableRequests=function(){return this._protocol.hasOngoingObservableRequests()},t.prototype.resetAndFlush=function(){var e=this;return new Promise(function(n,i){e._protocol.reset({onError:function(o){if(e._isBroken)i(o);else{var u=e._handleProtocolError("Received FAILURE as a response for RESET: "+o);i(u)}},onComplete:function(){n()}})})},t.prototype._resetOnFailure=function(){var e=this;this.isOpen()&&this._protocol.reset({onError:function(){e._protocol.resetFailure()},onComplete:function(){e._protocol.resetFailure()}})},t.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},t.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},t.prototype._handleOngoingRequestsNumberChange=function(e){e===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout()},t.prototype.close=function(){return Q2(this,void 0,void 0,function(){return X2(this,function(e){switch(e.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return e.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},t.prototype.toString=function(){return"Connection ["+this.id+"]["+(this.databaseId||"")+"]"},t.prototype._handleProtocolError=function(e){this._protocol.resetFailure(),this._updateCurrentObserver();var n=(0,To.newError)(e,eH);return this._handleFatalError(n),n},t}(J2.default);Se.default=og;function iH(r,t){return new tH(t._level,function(e,n){return t._loggerFunction(e,r+" "+n)})}s(iH,"createConnectionLogger")});var ug=h(lr=>{"use strict";var oH=lr&&lr.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),sH=lr&&lr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(lr,"__esModule",{value:!0});var uH=sH(fu()),aH=function(r){oH(t,r);function t(e,n){var i=r.call(this,n)||this;return n&&(i._originalErrorHandler=e._errorHandler,e._errorHandler=i._errorHandler),i._delegate=e,i}return s(t,"DelegateConnection"),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(e){this._delegate.databaseId=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._delegate.version},set:function(e){this._delegate.version=e},enumerable:!1,configurable:!0}),t.prototype.isOpen=function(){return this._delegate.isOpen()},t.prototype.protocol=function(){return this._delegate.protocol()},t.prototype.connect=function(e,n){return this._delegate.connect(e,n)},t.prototype.write=function(e,n,i){return this._delegate.write(e,n,i)},t.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},t.prototype.close=function(){return this._delegate.close()},t.prototype._release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate._release()},t}(uH.default);lr.default=aH});var cg=h(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});var ag=R(),cH=ag.error.SERVICE_UNAVAILABLE,fH=ag.error.SESSION_EXPIRED,lH=function(){function r(t,e,n,i){this._errorCode=t,this._handleUnavailability=e||ih,this._handleWriteFailure=n||ih,this._handleAuthorizationExpired=i||ih}return s(r,"ConnectionErrorHandler"),r.create=function(t){var e=t.errorCode,n=t.handleUnavailability,i=t.handleWriteFailure,o=t.handleAuthorizationExpired;return new r(e,n,i,o)},r.prototype.errorCode=function(){return this._errorCode},r.prototype.handleAndTransformError=function(t,e){return hH(t)?this._handleAuthorizationExpired(t,e):pH(t)?this._handleUnavailability(t,e):_H(t)?this._handleWriteFailure(t,e):t},r}();oh.default=lH;function hH(r){return r&&(r.code==="Neo.ClientError.Security.AuthorizationExpired"||r.code==="Neo.ClientError.Security.TokenExpired")}s(hH,"isAutorizationExpiredError");function pH(r){return r?r.code===fH||r.code===cH||r.code==="Neo.TransientError.General.DatabaseUnavailable":!1}s(pH,"isAvailabilityError");function _H(r){return r?r.code==="Neo.ClientError.Cluster.NotALeader"||r.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase":!1}s(_H,"isFailureToWrite");function ih(r){return r}s(ih,"noOpHandler")});var hu=h(Z=>{"use strict";var dH=Z&&Z.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),vH=Z&&Z.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),bH=Z&&Z.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&dH(t,r,e);return vH(t,r),t},sh=Z&&Z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Z,"__esModule",{value:!0});Z.createChannelConnection=Z.ConnectionErrorHandler=Z.DelegateConnection=Z.ChannelConnection=Z.Connection=void 0;var fg=sh(fu());Z.Connection=fg.default;var lg=bH(sg());Z.ChannelConnection=lg.default;Object.defineProperty(Z,"createChannelConnection",{enumerable:!0,get:function(){return lg.createChannelConnection}});var yH=sh(ug());Z.DelegateConnection=yH.default;var mH=sh(cg());Z.ConnectionErrorHandler=mH.default;Z.default=fg.default});var pu=h(se=>{"use strict";var OH=se&&se.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),gH=se&&se.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),SH=se&&se.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),EH=se&&se.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&gH(t,r,e);return SH(t,r),t},wH=se&&se.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function a(l){try{c(n.next(l))}catch(p){u(p)}}s(a,"fulfilled");function f(l){try{c(n.throw(l))}catch(p){u(p)}}s(f,"rejected");function c(l){l.done?o(l.value):i(l.value).then(a,f)}s(c,"step"),c((n=n.apply(r,t||[])).next())})},TH=se&&se.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(l){return f([c,l])}}function f(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(se,"__esModule",{value:!0});var hg=hu(),pg=EH(th()),_g=R(),PH=_g.error.SERVICE_UNAVAILABLE,CH=function(r){OH(t,r);function t(e,n){var i=e.id,o=e.config,u=e.log,a=e.userAgent,f=e.authToken;n===void 0&&(n=null);var c=r.call(this)||this;return c._id=i,c._config=o,c._log=u,c._userAgent=a,c._authToken=f,c._createChannelConnection=n||function(l){return(0,hg.createChannelConnection)(l,c._config,c._createConnectionErrorHandler(),c._log)},c._connectionPool=new pg.default({create:c._createConnection.bind(c),destroy:c._destroyConnection.bind(c),validate:c._validateConnection.bind(c),installIdleObserver:t._installIdleObserverOnConnection.bind(c),removeIdleObserver:t._removeIdleObserverOnConnection.bind(c),config:pg.PoolConfig.fromDriverConfig(o),log:c._log}),c._openConnections={},c}return s(t,"PooledConnectionProvider"),t.prototype._createConnectionErrorHandler=function(){return new hg.ConnectionErrorHandler(PH)},t.prototype._createConnection=function(e,n){var i=this;return this._createChannelConnection(e).then(function(o){return o._release=function(){return n(e,o)},i._openConnections[o.id]=o,o.connect(i._userAgent,i._authToken).catch(function(u){throw i._destroyConnection(o),u})})},t.prototype._validateConnection=function(e){if(!e.isOpen())return!1;var n=this._config.maxConnectionLifetime,i=Date.now()-e.creationTimestamp;return i<=n},t.prototype._destroyConnection=function(e){return delete this._openConnections[e.id],e.close()},t.prototype.close=function(){return wH(this,void 0,void 0,function(){return TH(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.close()];case 1:return e.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(n){return n.close()}))];case 2:return e.sent(),[2]}})})},t._installIdleObserverOnConnection=function(e,n){e._queueObserver(n)},t._removeIdleObserverOnConnection=function(e){e._updateCurrentObserver()},t}(_g.ConnectionProvider);se.default=CH});var dg=h(Ue=>{"use strict";var IH=Ue&&Ue.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_u=Ue&&Ue.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function a(l){try{c(n.next(l))}catch(p){u(p)}}s(a,"fulfilled");function f(l){try{c(n.throw(l))}catch(p){u(p)}}s(f,"rejected");function c(l){l.done?o(l.value):i(l.value).then(a,f)}s(c,"step"),c((n=n.apply(r,t||[])).next())})},du=Ue&&Ue.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(l){return f([c,l])}}function f(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},RH=Ue&&Ue.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ue,"__esModule",{value:!0});var AH=RH(pu()),uh=hu(),ah=R(),ch=ah.internal.constants,jH=ch.BOLT_PROTOCOL_V3,NH=ch.BOLT_PROTOCOL_V4_0,qH=ch.BOLT_PROTOCOL_V4_4,xH=ah.error.SERVICE_UNAVAILABLE,D9=ah.error.newError,DH=function(r){IH(t,r);function t(e){var n=e.id,i=e.config,o=e.log,u=e.address,a=e.userAgent,f=e.authToken,c=r.call(this,{id:n,config:i,log:o,userAgent:a,authToken:f})||this;return c._address=u,c}return s(t,"DirectConnectionProvider"),t.prototype.acquireConnection=function(e){var n=this,i=e===void 0?{}:e,o=i.accessMode,u=i.database,a=i.bookmarks,f=uh.ConnectionErrorHandler.create({errorCode:xH,handleAuthorizationExpired:function(c,l){return n._handleAuthorizationExpired(c,l,u)}});return this._connectionPool.acquire(this._address).then(function(c){return new uh.DelegateConnection(c,f)})},t.prototype._handleAuthorizationExpired=function(e,n,i){return this._log.warn("Direct driver "+this._id+" will close connection to "+n+" for database '"+i+"' because of an error "+e.code+" '"+e.message+"'"),this._connectionPool.purge(n).catch(function(){}),e},t.prototype._hasProtocolVersion=function(e){return _u(this,void 0,void 0,function(){var n,i;return du(this,function(o){switch(o.label){case 0:return[4,(0,uh.createChannelConnection)(this._address,this._config,this._createConnectionErrorHandler(),this._log)];case 1:return n=o.sent(),i=n.protocol()?n.protocol().version:null,[4,n.close()];case 2:return o.sent(),i?[2,e(i)]:[2,!1]}})})},t.prototype.supportsMultiDb=function(){return _u(this,void 0,void 0,function(){return du(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=NH})];case 1:return[2,e.sent()]}})})},t.prototype.supportsTransactionConfig=function(){return _u(this,void 0,void 0,function(){return du(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=jH})];case 1:return[2,e.sent()]}})})},t.prototype.supportsUserImpersonation=function(){return _u(this,void 0,void 0,function(){return du(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=qH})];case 1:return[2,e.sent()]}})})},t}(AH.default);Ue.default=DH});var dh=h(ft=>{"use strict";var fh=ft&&ft.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){u={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o},lh=ft&&ft.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(ft,"__esModule",{value:!0});ft.createValidRoutingTable=void 0;var Te=R(),bg=Te.internal.constants,MH=bg.ACCESS_MODE_WRITE,kH=bg.ACCESS_MODE_READ,hh=Te.internal.serverAddress.ServerAddress,_h=Te.error.PROTOCOL_ERROR,UH=1,yg=function(){function r(t){var e=t===void 0?{}:t,n=e.database,i=e.routers,o=e.readers,u=e.writers,a=e.expirationTime,f=e.ttl;this.database=n||null,this.databaseName=n||"default database",this.routers=i||[],this.readers=o||[],this.writers=u||[],this.expirationTime=a||(0,Te.int)(0),this.ttl=f}return s(r,"RoutingTable"),r.fromRawRoutingTable=function(t,e,n){return mg(t,e,n)},r.prototype.forget=function(t){this.readers=vu(this.readers,t),this.writers=vu(this.writers,t)},r.prototype.forgetRouter=function(t){this.routers=vu(this.routers,t)},r.prototype.forgetWriter=function(t){this.writers=vu(this.writers,t)},r.prototype.isStaleFor=function(t){return this.expirationTime.lessThan(Date.now())||this.routers.length<UH||t===kH&&this.readers.length===0||t===MH&&this.writers.length===0},r.prototype.isExpiredFor=function(t){return this.expirationTime.add(t).lessThan(Date.now())},r.prototype.allServers=function(){return lh(lh(lh([],fh(this.routers),!1),fh(this.readers),!1),fh(this.writers),!1)},r.prototype.toString=function(){return"RoutingTable["+("database="+this.databaseName+", ")+("expirationTime="+this.expirationTime+", ")+("currentTime="+Date.now()+", ")+("routers=["+this.routers+"], ")+("readers=["+this.readers+"], ")+("writers=["+this.writers+"]]")},r}();ft.default=yg;function vu(r,t){return r.filter(function(e){return e.asKey()!==t.asKey()})}s(vu,"removeFromArray");function mg(r,t,e){var n=e.ttl,i=FH(e,t),o=LH(e,t),u=o.routers,a=o.readers,f=o.writers;return vg(u,"routers",t),vg(a,"readers",t),new yg({database:r||e.db,routers:u,readers:a,writers:f,expirationTime:i,ttl:n})}s(mg,"createValidRoutingTable");ft.createValidRoutingTable=mg;function LH(r,t){try{var e=[],n=[],i=[];return r.servers.forEach(function(o){var u=o.role,a=o.addresses;u==="ROUTE"?e=ph(a).map(function(f){return hh.fromUrl(f)}):u==="WRITE"?i=ph(a).map(function(f){return hh.fromUrl(f)}):u==="READ"&&(n=ph(a).map(function(f){return hh.fromUrl(f)}))}),{routers:e,readers:n,writers:i}}catch(o){throw(0,Te.newError)("Unable to parse servers entry from router "+t+` from addresses:
`+Te.json.stringify(r.servers)+`
Error message: `+o.message,_h)}}s(LH,"parseServers");function FH(r,t){try{var e=(0,Te.int)(Date.now()),n=(0,Te.int)(r.ttl).multiply(1e3).add(e);return n.lessThan(e)?Te.Integer.MAX_VALUE:n}catch(i){throw(0,Te.newError)("Unable to parse TTL entry from router "+t+` from raw routing table:
`+Te.json.stringify(r)+`
Error message: `+i.message,_h)}}s(FH,"calculateExpirationTime");function vg(r,t,e){if(r.length===0)throw(0,Te.newError)("Received no "+t+" from router "+e,_h)}s(vg,"assertNonEmpty");function ph(r){if(!Array.isArray(r))throw new TypeError("Array expected but got: "+r);return Array.from(r)}s(ph,"parseArray")});var gg=h(Po=>{"use strict";var BH=Po&&Po.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Po,"__esModule",{value:!0});var VH=BH(dh()),WH=ou(),Og=R(),HH=Og.error.SERVICE_UNAVAILABLE,zH="Neo.ClientError.Procedure.ProcedureNotFound",YH="Neo.ClientError.Database.DatabaseNotFound",ZH=function(){function r(t){this._routingContext=t}return s(r,"Rediscovery"),r.prototype.lookupRoutingTableOnRouter=function(t,e,n,i){var o=this;return t._acquireConnection(function(u){return o._requestRawRoutingTable(u,t,e,n,i).then(function(a){return a.isNull?null:VH.default.fromRawRoutingTable(e,n,a)})})},r.prototype._requestRawRoutingTable=function(t,e,n,i,o){var u=this;return new Promise(function(a,f){t.protocol().requestRoutingInformation({routingContext:u._routingContext,databaseName:n,impersonatedUser:o,sessionContext:{bookmark:e._lastBookmark,mode:e._mode,database:e._database,afterComplete:e._onComplete},onCompleted:a,onError:function(c){c.code===YH?f(c):c.code===zH?f((0,Og.newError)("Server at "+i.asHostPort()+" can't perform routing. Make sure you are connecting to a causal cluster",HH)):a(WH.RawRoutingTable.ofNull())}})})},r}();Po.default=ZH});var wg=h(lt=>{"use strict";var Sg=lt&&lt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(lt,"__esModule",{value:!0});lt.RoutingTable=lt.Rediscovery=void 0;var Eg=Sg(gg());lt.Rediscovery=Eg.default;var GH=Sg(dh());lt.RoutingTable=GH.default;lt.default=Eg.default});var jg=h(B=>{"use strict";var $H=B&&B.__extends||function(){var r=s(function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)},"extendStatics");return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}s(n,"__"),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),bu=B&&B.__assign||function(){return bu=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},bu.apply(this,arguments)},KH=B&&B.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),QH=B&&B.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),XH=B&&B.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&KH(t,r,e);return QH(t,r),t},_e=B&&B.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,u){function a(l){try{c(n.next(l))}catch(p){u(p)}}s(a,"fulfilled");function f(l){try{c(n.throw(l))}catch(p){u(p)}}s(f,"rejected");function c(l){l.done?o(l.value):i(l.value).then(a,f)}s(c,"step"),c((n=n.apply(r,t||[])).next())})},de=B&&B.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(c){return function(l){return f([c,l])}}function f(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Tg=B&&B.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Pg=B&&B.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){u={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o},Ag=B&&B.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(B,"__esModule",{value:!0});var Pe=R(),Cg=XH(wg()),JH=$r(),e8=Ag(rh()),t8=Ag(pu()),r8=yl(),hr=hu(),n8=Pe.error.SERVICE_UNAVAILABLE,Co=Pe.error.SESSION_EXPIRED,i8=Pe.internal.bookmark.Bookmark,Io=Pe.internal.constants,Ig=Io.ACCESS_MODE_READ,Rg=Io.ACCESS_MODE_WRITE,o8=Io.BOLT_PROTOCOL_V3,s8=Io.BOLT_PROTOCOL_V4_0,u8=Io.BOLT_PROTOCOL_V4_4,a8="Neo.ClientError.Security.Unauthorized",c8="Neo.ClientError.Database.DatabaseNotFound",f8="system",vh=null,l8=(0,Pe.int)(3e4),h8=function(r){$H(t,r);function t(e){var n=e.id,i=e.address,o=e.routingContext,u=e.hostNameResolver,a=e.config,f=e.log,c=e.userAgent,l=e.authToken,p=e.routingTablePurgeDelay,_=r.call(this,{id:n,config:a,log:f,userAgent:c,authToken:l},function(m){return(0,hr.createChannelConnection)(m,_._config,_._createConnectionErrorHandler(),_._log,_._routingContext)})||this;return _._routingContext=bu(bu({},o),{address:i.toString()}),_._seedRouter=i,_._rediscovery=new Cg.default(_._routingContext),_._loadBalancingStrategy=new r8.LeastConnectedLoadBalancingStrategy(_._connectionPool),_._hostNameResolver=u,_._dnsResolver=new JH.HostNameResolver,_._log=f,_._useSeedRouter=!0,_._routingTableRegistry=new p8(p?(0,Pe.int)(p):l8),_}return s(t,"RoutingConnectionProvider"),t.prototype._createConnectionErrorHandler=function(){return new hr.ConnectionErrorHandler(Co)},t.prototype._handleUnavailability=function(e,n,i){return this._log.warn("Routing driver "+this._id+" will forget "+n+" for database '"+i+"' because of an error "+e.code+" '"+e.message+"'"),this.forget(n,i||vh),e},t.prototype._handleAuthorizationExpired=function(e,n,i){return this._log.warn("Routing driver "+this._id+" will close connections to "+n+" for database '"+i+"' because of an error "+e.code+" '"+e.message+"'"),this._connectionPool.purge(n).catch(function(){}),e},t.prototype._handleWriteFailure=function(e,n,i){return this._log.warn("Routing driver "+this._id+" will forget writer "+n+" for database '"+i+"' because of an error "+e.code+" '"+e.message+"'"),this.forgetWriter(n,i||vh),(0,Pe.newError)("No longer possible to write to server at "+n,Co)},t.prototype.acquireConnection=function(e){var n=e===void 0?{}:e,i=n.accessMode,o=n.database,u=n.bookmarks,a=n.impersonatedUser,f=n.onDatabaseNameResolved;return _e(this,void 0,void 0,function(){var c,l,p,_,m,S,C,Y,T=this;return de(this,function(D){switch(D.label){case 0:return p={database:o||vh},_=new hr.ConnectionErrorHandler(Co,function(W,te){return T._handleUnavailability(W,te,p.database)},function(W,te){return T._handleWriteFailure(W,te,p.database)},function(W,te){return T._handleAuthorizationExpired(W,te,p.database)}),[4,this._freshRoutingTable({accessMode:i,database:p.database,bookmark:u,impersonatedUser:a,onDatabaseNameResolved:function(W){p.database=p.database||W,f&&f(W)}})];case 1:if(m=D.sent(),i===Ig)l=this._loadBalancingStrategy.selectReader(m.readers),c="read";else if(i===Rg)l=this._loadBalancingStrategy.selectWriter(m.writers),c="write";else throw(0,Pe.newError)("Illegal mode "+i);if(!l)throw(0,Pe.newError)("Failed to obtain connection towards "+c+" server. Known routing table is: "+m,Co);D.label=2;case 2:return D.trys.push([2,4,,5]),[4,this._acquireConnectionToServer(l,c,m)];case 3:return S=D.sent(),[2,new hr.DelegateConnection(S,_)];case 4:throw C=D.sent(),Y=_.handleAndTransformError(C,l),Y;case 5:return[2]}})})},t.prototype._hasProtocolVersion=function(e){return _e(this,void 0,void 0,function(){var n,i,o,u,a,f;return de(this,function(c){switch(c.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:n=c.sent(),o=0,c.label=2;case 2:if(!(o<n.length))return[3,8];c.label=3;case 3:return c.trys.push([3,6,,7]),[4,(0,hr.createChannelConnection)(n[o],this._config,this._createConnectionErrorHandler(),this._log)];case 4:return u=c.sent(),a=u.protocol()?u.protocol().version:null,[4,u.close()];case 5:return c.sent(),a?[2,e(a)]:[2,!1];case 6:return f=c.sent(),i=f,[3,7];case 7:return o++,[3,2];case 8:if(i)throw i;return[2,!1]}})})},t.prototype.supportsMultiDb=function(){return _e(this,void 0,void 0,function(){return de(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=s8})];case 1:return[2,e.sent()]}})})},t.prototype.supportsTransactionConfig=function(){return _e(this,void 0,void 0,function(){return de(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=o8})];case 1:return[2,e.sent()]}})})},t.prototype.supportsUserImpersonation=function(){return _e(this,void 0,void 0,function(){return de(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=u8})];case 1:return[2,e.sent()]}})})},t.prototype.forget=function(e,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(i){return i.forget(e)}}),this._connectionPool.purge(e).catch(function(){})},t.prototype.forgetWriter=function(e,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(i){return i.forgetWriter(e)}})},t.prototype._acquireConnectionToServer=function(e,n,i){return this._connectionPool.acquire(e)},t.prototype._freshRoutingTable=function(e){var n=e===void 0?{}:e,i=n.accessMode,o=n.database,u=n.bookmark,a=n.impersonatedUser,f=n.onDatabaseNameResolved,c=this._routingTableRegistry.get(o,function(){return new Cg.RoutingTable({database:o})});return c.isStaleFor(i)?(this._log.info('Routing table is stale for database: "'+o+'" and access mode: "'+i+'": '+c),this._refreshRoutingTable(c,u,a,f)):c},t.prototype._refreshRoutingTable=function(e,n,i,o){var u=e.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(u,e,n,i,o):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(u,e,n,i,o)},t.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(e,n,i,o,u){return _e(this,void 0,void 0,function(){var a,f;return de(this,function(c){switch(c.label){case 0:return a=[],[4,this._fetchRoutingTableUsingSeedRouter(a,this._seedRouter,n,i,o)];case 1:return f=c.sent(),f?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(e,n,i,o)];case 3:f=c.sent(),c.label=4;case 4:return[4,this._applyRoutingTableIfPossible(n,f,u)];case 5:return[2,c.sent()]}})})},t.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(e,n,i,o,u){return _e(this,void 0,void 0,function(){var a;return de(this,function(f){switch(f.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(e,n,i,o)];case 1:return a=f.sent(),a?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(e,this._seedRouter,n,i,o)];case 2:a=f.sent(),f.label=3;case 3:return[4,this._applyRoutingTableIfPossible(n,a,u)];case 4:return[2,f.sent()]}})})},t.prototype._fetchRoutingTableUsingKnownRouters=function(e,n,i,o){return _e(this,void 0,void 0,function(){var u,a;return de(this,function(f){switch(f.label){case 0:return[4,this._fetchRoutingTable(e,n,i,o)];case 1:return u=f.sent(),u?[2,u]:(a=e.length-1,t._forgetRouter(n,e,a),[2,null])}})})},t.prototype._fetchRoutingTableUsingSeedRouter=function(e,n,i,o,u){return _e(this,void 0,void 0,function(){var a,f;return de(this,function(c){switch(c.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return a=c.sent(),f=a.filter(function(l){return e.indexOf(l)<0}),[4,this._fetchRoutingTable(f,i,o,u)];case 2:return[2,c.sent()]}})})},t.prototype._resolveSeedRouter=function(e){return _e(this,void 0,void 0,function(){var n,i,o=this;return de(this,function(u){switch(u.label){case 0:return[4,this._hostNameResolver.resolve(e)];case 1:return n=u.sent(),[4,Promise.all(n.map(function(a){return o._dnsResolver.resolve(a)}))];case 2:return i=u.sent(),[2,[].concat.apply([],i)]}})})},t.prototype._fetchRoutingTable=function(e,n,i,o){var u=this;return e.reduce(function(a,f,c){return _e(u,void 0,void 0,function(){var l,p,_,m;return de(this,function(S){switch(S.label){case 0:return[4,a];case 1:return l=S.sent(),l?[2,l]:(p=c-1,t._forgetRouter(n,e,p),[4,this._createSessionForRediscovery(f,i,o)]);case 2:if(_=S.sent(),!_)return[3,8];S.label=3;case 3:return S.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(_,n.database,f,o)];case 4:return[2,S.sent()];case 5:if(m=S.sent(),m&&m.code===c8)throw m;return this._log.warn("unable to fetch routing table because of an error "+m),[2,null];case 6:return _.close(),[7];case 7:return[3,9];case 8:return[2,null];case 9:return[2]}})})},Promise.resolve(null))},t.prototype._createSessionForRediscovery=function(e,n,i){return _e(this,void 0,void 0,function(){var o,u,a,f,c,l=this;return de(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),[4,this._connectionPool.acquire(e)];case 1:return o=p.sent(),u=hr.ConnectionErrorHandler.create({errorCode:Co,handleAuthorizationExpired:function(_,m){return l._handleAuthorizationExpired(_,m)}}),a=new e8.default(new hr.DelegateConnection(o,u)),f=o.protocol().version,f<4?[2,new Pe.Session({mode:Rg,bookmark:i8.empty(),connectionProvider:a})]:[2,new Pe.Session({mode:Ig,database:f8,bookmark:n,connectionProvider:a,impersonatedUser:i})];case 2:if(c=p.sent(),c&&c.code===a8)throw c;return[2,null];case 3:return[2]}})})},t.prototype._applyRoutingTableIfPossible=function(e,n,i){return _e(this,void 0,void 0,function(){return de(this,function(o){switch(o.label){case 0:if(!n)throw(0,Pe.newError)("Could not perform discovery. No routing servers available. Known routing table: "+e,n8);return n.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(n,i)];case 1:return o.sent(),[2,n]}})})},t.prototype._updateRoutingTable=function(e,n){return _e(this,void 0,void 0,function(){return de(this,function(i){switch(i.label){case 0:return[4,this._connectionPool.keepAll(e.allServers())];case 1:return i.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(e),n(e.database),this._log.info("Updated routing table "+e),[2]}})})},t._forgetRouter=function(e,n,i){var o=n[i];e&&o&&e.forgetRouter(o)},t}(t8.default);B.default=h8;var p8=function(){function r(t){this._tables=new Map,this._routingTablePurgeDelay=t}return s(r,"RoutingTableRegistry"),r.prototype.register=function(t){return this._tables.set(t.database,t),this},r.prototype.apply=function(t,e){var n=e===void 0?{}:e,i=n.applyWhenExists,o=n.applyWhenDontExists,u=o===void 0?function(){}:o;return this._tables.has(t)?i(this._tables.get(t)):typeof t=="string"||t===null?u():this._forEach(i),this},r.prototype.get=function(t,e){return this._tables.has(t)?this._tables.get(t):typeof e=="function"?e():e},r.prototype.removeExpired=function(){var t=this;return this._removeIf(function(e){return e.isExpiredFor(t._routingTablePurgeDelay)})},r.prototype._forEach=function(t){var e,n;try{for(var i=Tg(this._tables),o=i.next();!o.done;o=i.next()){var u=Pg(o.value,2),a=u[1];t(a)}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return this},r.prototype._remove=function(t){return this._tables.delete(t),this},r.prototype._removeIf=function(t){var e,n;try{for(var i=Tg(this._tables),o=i.next();!o.done;o=i.next()){var u=Pg(o.value,2),a=u[0],f=u[1];t(f)&&this._remove(a)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return this},r}()});var Ng=h(Ce=>{"use strict";var yu=Ce&&Ce.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.RoutingConnectionProvider=Ce.DirectConnectionProvider=Ce.PooledConnectionProvider=Ce.SingleConnectionProvider=void 0;var _8=rh();Object.defineProperty(Ce,"SingleConnectionProvider",{enumerable:!0,get:function(){return yu(_8).default}});var d8=pu();Object.defineProperty(Ce,"PooledConnectionProvider",{enumerable:!0,get:function(){return yu(d8).default}});var v8=dg();Object.defineProperty(Ce,"DirectConnectionProvider",{enumerable:!0,get:function(){return yu(v8).default}});var b8=jg();Object.defineProperty(Ce,"RoutingConnectionProvider",{enumerable:!0,get:function(){return yu(b8).default}})});var xg=h(V=>{"use strict";var qg=V&&V.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),y8=V&&V.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),tn=V&&V.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&qg(t,r,e);return y8(t,r),t},m8=V&&V.__exportStar||function(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&qg(t,r,e)};Object.defineProperty(V,"__esModule",{value:!0});V.pool=V.packstream=V.channel=V.buf=V.bolt=V.loadBalancing=void 0;V.loadBalancing=tn(yl());V.bolt=tn(ou());V.buf=tn(Bs());V.channel=tn($r());V.packstream=tn(Gs());V.pool=tn(th());m8(Ng(),V)});var Yg=h(g=>{"use strict";var mu=Rt();Object.defineProperty(g,"__esModule",{value:!0});g.driver=Lg;Object.defineProperty(g,"Driver",{enumerable:!0,get:s(function(){return Ro.Driver},"get")});Object.defineProperty(g,"Neo4jError",{enumerable:!0,get:s(function(){return y.Neo4jError},"get")});Object.defineProperty(g,"error",{enumerable:!0,get:s(function(){return y.error},"get")});Object.defineProperty(g,"Integer",{enumerable:!0,get:s(function(){return y.Integer},"get")});Object.defineProperty(g,"int",{enumerable:!0,get:s(function(){return y.int},"get")});Object.defineProperty(g,"isInt",{enumerable:!0,get:s(function(){return y.isInt},"get")});Object.defineProperty(g,"isPoint",{enumerable:!0,get:s(function(){return y.isPoint},"get")});Object.defineProperty(g,"Point",{enumerable:!0,get:s(function(){return y.Point},"get")});Object.defineProperty(g,"Date",{enumerable:!0,get:s(function(){return y.Date},"get")});Object.defineProperty(g,"DateTime",{enumerable:!0,get:s(function(){return y.DateTime},"get")});Object.defineProperty(g,"Duration",{enumerable:!0,get:s(function(){return y.Duration},"get")});Object.defineProperty(g,"isDate",{enumerable:!0,get:s(function(){return y.isDate},"get")});Object.defineProperty(g,"isDateTime",{enumerable:!0,get:s(function(){return y.isDateTime},"get")});Object.defineProperty(g,"isDuration",{enumerable:!0,get:s(function(){return y.isDuration},"get")});Object.defineProperty(g,"isLocalDateTime",{enumerable:!0,get:s(function(){return y.isLocalDateTime},"get")});Object.defineProperty(g,"isLocalTime",{enumerable:!0,get:s(function(){return y.isLocalTime},"get")});Object.defineProperty(g,"isTime",{enumerable:!0,get:s(function(){return y.isTime},"get")});Object.defineProperty(g,"LocalDateTime",{enumerable:!0,get:s(function(){return y.LocalDateTime},"get")});Object.defineProperty(g,"LocalTime",{enumerable:!0,get:s(function(){return y.LocalTime},"get")});Object.defineProperty(g,"Time",{enumerable:!0,get:s(function(){return y.Time},"get")});Object.defineProperty(g,"Node",{enumerable:!0,get:s(function(){return y.Node},"get")});Object.defineProperty(g,"Path",{enumerable:!0,get:s(function(){return y.Path},"get")});Object.defineProperty(g,"PathSegment",{enumerable:!0,get:s(function(){return y.PathSegment},"get")});Object.defineProperty(g,"Relationship",{enumerable:!0,get:s(function(){return y.Relationship},"get")});Object.defineProperty(g,"UnboundRelationship",{enumerable:!0,get:s(function(){return y.UnboundRelationship},"get")});Object.defineProperty(g,"Record",{enumerable:!0,get:s(function(){return y.Record},"get")});Object.defineProperty(g,"ResultSummary",{enumerable:!0,get:s(function(){return y.ResultSummary},"get")});Object.defineProperty(g,"Plan",{enumerable:!0,get:s(function(){return y.Plan},"get")});Object.defineProperty(g,"ProfiledPlan",{enumerable:!0,get:s(function(){return y.ProfiledPlan},"get")});Object.defineProperty(g,"QueryStatistics",{enumerable:!0,get:s(function(){return y.QueryStatistics},"get")});Object.defineProperty(g,"Notification",{enumerable:!0,get:s(function(){return y.Notification},"get")});Object.defineProperty(g,"ServerInfo",{enumerable:!0,get:s(function(){return y.ServerInfo},"get")});Object.defineProperty(g,"Result",{enumerable:!0,get:s(function(){return y.Result},"get")});Object.defineProperty(g,"auth",{enumerable:!0,get:s(function(){return y.auth},"get")});Object.defineProperty(g,"Session",{enumerable:!0,get:s(function(){return y.Session},"get")});Object.defineProperty(g,"Transaction",{enumerable:!0,get:s(function(){return y.Transaction},"get")});Object.defineProperty(g,"RxSession",{enumerable:!0,get:s(function(){return Mg.default},"get")});Object.defineProperty(g,"RxTransaction",{enumerable:!0,get:s(function(){return kg.default},"get")});Object.defineProperty(g,"RxResult",{enumerable:!0,get:s(function(){return Ug.default},"get")});g.default=g.temporal=g.spatial=g.session=g.types=g.logging=g.integer=void 0;var Ro=Wy(),O8=mu(Hy()),y=R(),Dg=xg(),Mg=mu(_l()),kg=mu(ll()),Ug=mu(As()),Ou=y.internal.util,g8=Ou.ENCRYPTION_ON,Z9=Ou.ENCRYPTION_OFF,S8=Ou.assertString,E8=Ou.isEmptyObjectOrNull,w8=y.internal.serverAddress.ServerAddress,T8=y.internal.urlUtil;function Lg(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};S8(r,"Bolt URL");var n=T8.parseDatabaseUrl(r),i=!1,o=!1,u;switch(n.scheme){case"bolt":break;case"bolt+s":o=!0,u="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":o=!0,u="TRUST_ALL_CERTIFICATES";break;case"neo4j":i=!0;break;case"neo4j+s":o=!0,u="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",i=!0;break;case"neo4j+ssc":o=!0,u="TRUST_ALL_CERTIFICATES",i=!0;break;default:throw new Error("Unknown scheme: ".concat(n.scheme))}if(o){if("encrypted"in e||"trust"in e)throw new Error("Encryption/trust can only be configured either through URL or config, not both");e.encrypted=g8,e.trust=u}t=t||{},t.scheme=t.scheme||"none",e.userAgent=e.userAgent||P8;var a=w8.fromUrl(n.hostAndPort),f={address:a,typename:i?"Routing":"Direct",routing:i};return new Ro.Driver(f,e,c());function c(){if(i)return function(l,p,_,m){return new Dg.RoutingConnectionProvider({id:l,config:p,log:_,hostNameResolver:m,authToken:t,address:a,userAgent:p.userAgent,routingContext:n.query})};if(!E8(n.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(r,"'"));return function(l,p,_){return new Dg.DirectConnectionProvider({id:l,config:p,log:_,authToken:t,address:a,userAgent:p.userAgent})}}}s(Lg,"driver");var P8="neo4j-javascript/"+O8.default,Fg={console:function(r){function t(e){return r.apply(this,arguments)}return s(t,"console"),t.toString=function(){return r.toString()},t}(function(r){return{level:r,logger:s(function(e,n){return console.log("".concat(global.Date.now()," ").concat(e.toUpperCase()," ").concat(n))},"logger")}})};g.logging=Fg;var Bg={Node:y.Node,Relationship:y.Relationship,UnboundRelationship:y.UnboundRelationship,PathSegment:y.PathSegment,Path:y.Path,Result:y.Result,ResultSummary:y.ResultSummary,Record:y.Record,Point:y.Point,Date:y.Date,DateTime:y.DateTime,Duration:y.Duration,LocalDateTime:y.LocalDateTime,LocalTime:y.LocalTime,Time:y.Time,Integer:y.Integer};g.types=Bg;var Vg={READ:Ro.READ,WRITE:Ro.WRITE};g.session=Vg;var Wg={toNumber:y.toNumber,toString:y.toString,inSafeRange:y.inSafeRange};g.integer=Wg;var Hg={isPoint:y.isPoint};g.spatial=Hg;var zg={isDuration:y.isDuration,isLocalTime:y.isLocalTime,isTime:y.isTime,isDate:y.isDate,isLocalDateTime:y.isLocalDateTime,isDateTime:y.isDateTime};g.temporal=zg;var C8={driver:Lg,int:y.int,isInt:y.isInt,isPoint:y.isPoint,isDuration:y.isDuration,isLocalTime:y.isLocalTime,isTime:y.isTime,isDate:y.isDate,isLocalDateTime:y.isLocalDateTime,isDateTime:y.isDateTime,integer:Wg,Neo4jError:y.Neo4jError,auth:y.auth,logging:Fg,types:Bg,session:Vg,error:y.error,spatial:Hg,temporal:zg,Driver:Ro.Driver,Session:y.Session,Transaction:y.Transaction,Result:y.Result,RxSession:Mg.default,RxTransaction:kg.default,RxResult:Ug.default,ResultSummary:y.ResultSummary,Plan:y.Plan,ProfiledPlan:y.ProfiledPlan,QueryStatistics:y.QueryStatistics,Notification:y.Notification,ServerInfo:y.ServerInfo,Record:y.Record,Node:y.Node,Relationship:y.Relationship,UnboundRelationship:y.UnboundRelationship,Path:y.Path,PathSegment:y.PathSegment,Point:y.Point,Integer:y.Integer,Duration:y.Duration,LocalTime:y.LocalTime,Time:y.Time,Date:y.Date,LocalDateTime:y.LocalDateTime,DateTime:y.DateTime},I8=C8;g.default=I8});var eS=h((Q9,Jg)=>{"use strict";var bh=Yg(),K9=require("fs"),ze,yh=!1,gu,Oh="EXECUTE_TIME_OUT",mh,R8=s(({lodash:r})=>gu=r,"setDependencies"),A8=s(r=>mh=(r==null?void 0:r.queryRequestTimeout)||3e5,"setTimeOut"),j8=s((r,t)=>t(r.host,r.port).then(()=>new Promise((e,n)=>{let i=Q8(r),o=r.username,u=r.password,f={...Y8(r),maxConnectionPoolSize:500,connectionAcquisitionTimeout:2*60*1e3};ze=bh.driver(i,bh.auth.basic(o,u),f),ze.verifyConnectivity().then(()=>{e()}).catch(c=>{ze=null,n(c)})})),"connectToInstance"),N8=s(async(r,t,e)=>{try{if(r.ssh){let{options:n}=await e.openTunnel({sshAuthMethod:r.ssh_method==="privateKey"?"IDENTITY_FILE":"USER_PASSWORD",sshTunnelHostname:r.ssh_host,sshTunnelPort:r.ssh_port,sshTunnelUsername:r.ssh_user,sshTunnelPassword:r.ssh_password,sshTunnelIdentityFile:r.ssh_key_file,sshTunnelPassphrase:r.ssh_key_passphrase,host:r.host,port:r.port});yh=!0,r={...r,...n}}return j8(r,t)}catch(n){throw n.step="Connection Error",n}},"connect"),q8=s(async r=>{ze&&(ze.close(),ze=null),yh&&(await r.closeConsumer(),yh=!1)},"close"),ue=s(async(r,t=void 0,e=!1)=>{e||(t=void 0);let n=new Promise((u,a)=>setTimeout(()=>a(x8(mh)),mh)),i=[],o;try{o=ze.session({database:t});let u=new Promise((a,f)=>{o.run(r).subscribe({onNext:c=>{i.push(c.toObject())},onCompleted:()=>{o.close(),o=null,a(i)},onError:c=>{o.close(),o=null,f(c)}})});return await Promise.race([u,n])}catch(u){throw u.code===Oh&&o&&o.close(),u}},"execute"),x8=s(r=>{let t=new Error(`execute timeout: ${r}ms exceeded`);return t.code=Oh,t},"getExecuteTimeoutError"),Ao=s(r=>{let t=Array.isArray(r)?[]:{};for(let e in r){let n=r[e];bh.isInt(n)?n=n.toInt():typeof n=="object"&&(n=Ao(n)),t[e]=n}return t},"castInteger"),D8=s(async(r,t)=>{try{return await ue("MATCH (n) RETURN DISTINCT labels(n) as label",r,t).then(n=>{let i=[];return n.forEach(o=>{i=i.concat(o.label)}),i})}catch(e){throw e.step=e.step||"Error of retrieving labels",e}},"getLabels"),M8=s((r,t,e)=>ue(`call apoc.meta.subGraph({labels: ["${t.join('","')}]})`,r,e).then(n=>n,n=>{if((n==null?void 0:n.code)===Oh)throw n;return ue("CALL db.schema.visualization()",r,e)}).then(n=>{let i=n[0].nodes,o=n[0].relationships,u=[];return o.forEach(a=>{let f={start:"",relationship:a.type,end:""};i.forEach(c=>{a.start.compare(c.identity)===0&&(f.start=c.labels[0]),a.end.compare(c.identity)===0&&(f.end=c.labels[0])}),u.push(f)}),u}),"getSchema"),k8=s(async(r,t)=>{try{return t?await L8():await ue('call dbms.listConfig("active_database")').then(e=>[gu.get(e[0],"value",r)],()=>[r])}catch(e){e.step=e.step||"Error of retrieving database name"}},"getDatabaseName"),U8=s(()=>ze.supportsMultiDb(),"supportsMultiDb"),L8=s(async()=>(await ue("SHOW DATABASES","system",!0)).filter(({name:t,currentStatus:e})=>t!=="system"&&e==="online").map(({name:t})=>t),"getActiveMultiDbsNames"),F8=s((r,t=100,e,n)=>ue(`MATCH (row:\`${r}\`) RETURN row LIMIT ${t}`,e,n).then(i=>i.map(o=>Ao(o.row.properties))),"getNodes"),B8=s((r,t,e,n=100,i,o)=>ue(`MATCH (:\`${r}\`)-[row:\`${t}\`]-(:\`${e}\`) RETURN row LIMIT ${n}`,i,o).then(u=>u.map(a=>Ao(a.row.properties))),"getRelationshipData"),V8=s((r,t,e)=>ue(`MATCH (a:\`${r}\`) RETURN count(a) AS count`,t,e).then(n=>Ao(n[0]).count),"getNodesCount"),W8=s((r,t,e,n,i)=>ue(`MATCH (:\`${r}\`)-[rel:\`${t}\`]-(:\`${e}\`) RETURN count(rel) AS count`,n,i).then(o=>Ao(o[0]).count),"getCountRelationshipsData"),H8=s((r,t,e)=>ue(e==="5.x"?"SHOW INDEXES":"CALL db.indexes()",r,t),"getIndexes"),z8=s((r,t,e)=>ue(e==="5.x"?"SHOW CONSTRAINTS":"CALL db.constraints()",r,t),"getConstraints"),Y8=s(r=>{var e;if((e=r.host)!=null&&e.startsWith("neo4j+s://")&&!["TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SERVER_CLIENT_CERTIFICATES"].includes(r.sslType))return{};let t={encrypted:"ENCRYPTION_ON",trust:r.sslType};switch(r.sslType){case"TRUST_ALL_CERTIFICATES":case"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES":return t;case"TRUST_CUSTOM_CA_SIGNED_CERTIFICATES":return t.trustedCertificates=[r.certAuthority],t;case"TRUST_SERVER_CLIENT_CERTIFICATES":return t.trustedCertificates=[r.certAuthority],t.key=r.clientPrivateKey,t.cert=r.clientCert,t.passphrase=r.passphrase,t;case"Off":default:return{}}},"getSSLConfig"),Z8=s(async()=>{try{let r=await ue("call dbms.components() yield versions unwind versions as version return version"),t=gu.get(r,"[0].version"),e=t.split(".");return e[0]==="4"&&e[1]==="3"?"4.3":e[0]==="4"&&e[1]>="4"?"4.4":t.startsWith("4")?"4.0-4.2":t.startsWith("5")?"5.x":"3.x"}catch{return"3.x"}},"getDbVersion"),G8=s(()=>ze._connectionProvider.acquireConnection().then(r=>ze._validateConnection(r)),"checkConnection"),$8=s(r=>Zg(r)||Gg(r)||$g(r)||Kg(r)||Qg(r)||Xg(r),"isTemporalTypeField"),K8=s(r=>{let t=s(e=>({type:"string",childType:"temporal",mode:e}),"getFieldProps");switch(!0){case Zg(r):return t("date");case Gg(r):return t("datetime");case $g(r):return t("duration");case Kg(r):return t("localdatetime");case Qg(r):return t("localtime");case Xg(r):return t("time")}},"getTemporalFieldSchema"),Zg=s(r=>rn(["year","month","day","toString"],r),"isDate"),Gg=s(r=>rn(["year","month","day","hour","minute","second","nanosecond","timeZoneOffsetSeconds","timeZoneId","toString"],r),"isDateTime"),$g=s(r=>rn(["months","days","seconds","nanoseconds","toString"],r),"isDuration"),Kg=s(r=>rn(["year","month","day","hour","minute","second","nanosecond","toString"],r),"isLocalDateTime"),Qg=s(r=>rn(["hour","minute","second","nanosecond","toString"],r),"isLocalTime"),Xg=s(r=>rn(["hour","minute","second","nanosecond","timeZoneOffsetSeconds","toString"],r),"isTime"),rn=s((r,t)=>{let e=Object.keys(t);return e.length===r.length&&gu.intersection(r,e).length===r.length},"isTemporalField"),Q8=s(r=>{let t="";return/^neo4j(\+s|s|)(\+ssc|ssc|):\/\//i.test(r.host)?t=r.host:t=`bolt://${r.host}`,r.port&&(t=`${t}:${r.port}`),t},"getConnectionURI");Jg.exports={checkConnection:G8,connect:N8,close:q8,getLabels:D8,getRelationshipData:B8,getSchema:M8,getDatabaseName:k8,getNodes:F8,getNodesCount:V8,getCountRelationshipsData:W8,getIndexes:H8,getConstraints:z8,supportsMultiDb:U8,getDbVersion:Z8,setDependencies:R8,setTimeOut:A8,isTemporalTypeField:$8,getTemporalFieldSchema:K8,execute:ue}});var rS=h((J9,tS)=>{"use strict";var ht=eS(),X8={async applyToInstance(r,t,e,n){var i;try{e.log("info",{message:"Applying cypher script has been started"},"Neo4j script"),ht.setDependencies(t),await ht.connect(r,()=>Promise.resolve(),n);let o=await ht.supportsMultiDb(),u=(i=r.containerData)==null?void 0:i[0],a=(u==null?void 0:u.code)||(u==null?void 0:u.name)||"neo4j",f=r.script.split(";").map(l=>l.split(`
`).filter(_=>{let m=_.trim();return m.length>0&&!m.startsWith("//")&&!m.startsWith(":")}).join(`
`)).filter(l=>l.trim().length>0),c=0;for(let l of f)try{ht.setTimeOut(),await ht.execute(l,a,o),e.progress({message:`Completed queries: ${++c} / ${f.length}`})}catch(p){throw{...p,statement:l,message:p.message}}e.log("info",{message:"Cypher script has been applied successfully!"},"Neo4j script")}catch(o){throw e.log("error",{error:{message:o.message,stack:o.stack},details:{...o,message:o.message}},"Cypher script: query has been executed with error"),{...o,type:"simpleError",message:o.message}}finally{ht.close(n)}},async testConnection(r,t,e){ht.setDependencies(t),await ht.connect(r,()=>Promise.resolve(),e),await ht.close(e)}};tS.exports=X8});var{dependencies:Su,setDependencies:gh}=Th(),nS=rS(),ae,sS=s(({lodash:r})=>ae=r,"setAppDependencies");module.exports={generateContainerScript(r,t,e,n){var f;gh(n),sS(Su);let{collections:i,relationships:o,jsonData:u}=r,a=(f=r.modelData[0])==null?void 0:f.dbVersion;t.clear();try{i=i.map(JSON.parse),o=o.map(JSON.parse);let c=this.generateCreateBatch(i,o,u,t),l=this.generateConstraints(a,i,o),p=this.getIndexes(a,i,o);e(null,this.getScript(c,l,p,a))}catch(c){t.log("error",{message:c.message,stack:c.stack},"Forward-Engineering Error"),setTimeout(()=>{e({message:c.message,stack:c.stack})},150);return}},getScript(r,t,e,n){let i=s(u=>`:begin
`+u+`;
:commit
`,"getTransaction"),o=i(`// cat <path to cypher file> | ./bin/cypher-shell -a <address> -u <user> -p <password>

`+r);return Array.isArray(t)&&t.length&&(o+=i(t.join(`;
`))),Array.isArray(e)&&e.length&&(o+=i(e.join(`;
`))),o},generateCreateBatch(r,t,e,n){let i={},o=r.map(l=>{i[l.collectionName]=l.isActivated;let p="";return e[l.GUID]&&(p=" "+this.prepareData(e[l.GUID],l,l.isActivated,n)),{statement:`(${E(l.collectionName).toLowerCase()}:${E(l.collectionName)}${p})`+",",isActivated:l.isActivated}}),u=this.createMap(r,t).reduce((l,p)=>{if(p.relationship&&p.child){let _=p.parent.collectionName,m=p.child.collectionName,S=p.relationship.name,C="",Y=ae.get(p,"parent.isActivated",!0),T=ae.get(p,"child.isActivated",!0),D=Y&&T,W=`(${E(_).toLowerCase()})`,te=`(${E(m).toLowerCase()})`;p.relationship&&e[p.relationship.GUID]&&(C=" "+this.prepareData(e[p.relationship.GUID],p.relationship,D,n));let pt=`[:${E(S)}${C}]`;l.push({statement:`${W}-${pt}->${te},`,isActivated:D}),p.bidirectional&&l.push({statement:`(${E(m).toLowerCase()})-${pt}->(${E(_).toLowerCase()}),`,isActivated:D})}return l},o),a=u.filter(l=>l.isActivated).map(l=>l.statement).join(`

`).slice(0,-1),f=u.filter(l=>!l.isActivated).map(l=>l.statement).join(`

`).slice(0,-1),c=`CREATE ${a+(f.length?`

`+this.commentIfDeactivated(f,!1):"")}`;return Object.keys(i).length&&(c+=`
 RETURN ${Object.keys(i).filter(l=>i[l]).map(E).join(",").toLowerCase()}`),c},applyToInstance(r,t,e,n){gh(n),t.clear(),t.log("info",r,"connectionInfo",r.hiddenKeys);let i=n.require("@hackolade/ssh-service");nS.applyToInstance(r,Su,t,i).then(o=>{e(null,o)}).catch(o=>{e({...o,type:"simpleError"})})},testConnection(r,t,e,n){gh(n),t.log("info",r,"connectionInfo",r.hiddenKeys);let i=n.require("@hackolade/ssh-service");nS.testConnection(r,Su,i).then(e,o=>{t.log("error",o,"Neo4j test connection error"),e({...o,type:"simpleError"})})},prepareData(r,t,e,n){let i=JSON.parse(r);if(!Object.keys(i).length)return"{}";let o=Object.keys(i).reduce((f,c)=>{if(Object(i[c])===i[c]&&!Array.isArray(i[c])){let l=ae.get(t,`properties.${c}.isActivated`,!0);f.push({statement:`${E(c)}: ${this.getObjectValueBySchema(i[c],iS(t,c))}`,isActivated:e?l:!0})}else if(Array.isArray(i[c])){let l=ae.get(t,`properties.${c}.isActivated`,!0);f.push({statement:`${E(c)}: [ ${this.getArrayValueBySchema(i[c],iS(t,c).items||[]).join(", ")} ]`,isActivated:e?l:!0})}else{let l=ae.get(t,`properties.${c}.isActivated`,!0),p=ae.get(t,["properties",c])||ae.get(t,["patternProperties",c]);p||n.log("error",`Can't resolve field:
`,{field:c}),f.push({statement:`${E(c)}: ${J8(p,i[c])}`,isActivated:e?l:!0})}return f},[]),u=o.filter(f=>f.isActivated).map(f=>f.statement).join(`,
	`),a=o.filter(f=>!f.isActivated).map(f=>f.statement).join(`,
	`);return`{
	`+u+(a.length?`
`+this.commentIfDeactivated(a,!1)+`
}`:`
}`)},createMap(r,t){let e={},n={},i={};return t.forEach(o=>{e[o.parentCollection]||(e[o.parentCollection]=[]),e[o.parentCollection].push(o),n[o.parentCollection]=!0,n[o.childCollection]=!0}),r.map(o=>(i[o.GUID]=o,o)).reduce((o,u)=>{let a=e[u.GUID]||null;return a?a.forEach(f=>{let c=i[f.childCollection];o.push({parent:u,relationship:f,child:c,bidirectional:f&&f.customProperties&&f.customProperties.biDirectional&&c.GUID!==u.GUID})}):n[u.GUID]||o.push({parent:u,relationship:null,child:null,bidirectional:!1}),o},[])},toCypherJson(r){return Object(r)===r&&!Array.isArray(r)?"{ "+Object.keys(r).reduce((t,e)=>(t.push(`${E(e)}: ${this.toCypherJson(r[e])}`),t),[]).join(", ")+" }":JSON.stringify(r)},generateConstraints(r,t,e){let n=[],i=t.reduce((u,a)=>(u[a.GUID]=a.isActivated,u),{}),o=this.getExistsConstraint;return uS(r)||(o=this.getExistsConstraint43),t.forEach(u=>{u.constraint&&Array.isArray(u.constraint)&&u.constraint.forEach(a=>{let f=this.getNodeKeyConstraint({collection:u,constraint:a},r);f&&n.push(f)}),Array.isArray(u.required)&&u.required.forEach(a=>{if(a){let f=ae.get(u,`properties.${a}.isActivated`,!0);n.push(this.commentIfDeactivated(o({labelName:u.collectionName,fieldName:a,type:"node"},r),u.isActivated&&f))}}),u.properties&&Object.keys(u.properties).forEach(a=>{if(u.properties[a].unique){let f=ae.get(u,`properties.${a}.isActivated`,!0);n.push(this.commentIfDeactivated(this.getUniqueConstraint({labelName:u.collectionName,fieldName:a},r),u.isActivated&&f))}})}),e.forEach(u=>{let a=i[u.childCollection]&&i[u.parentCollection];Array.isArray(u.required)&&u.required.forEach(f=>{if(f){let c=ae.get(u,`properties.${f}.isActivated`,!0);n.push(this.commentIfDeactivated(o({labelName:u.name,fieldName:f,type:"relationship"},r),c&&a))}})}),n},getNodeKeyConstraint({collection:r,constraint:t},e){let n=[];if(t.compositeNodeKey){n=this.findFields(r,t.compositeNodeKey.map(o=>o.keyId));let i=Sh(e);if(Array.isArray(n)&&n.length){let o=r.collectionName,u=r.collectionName.toLowerCase(),a=oS(e);return this.commentIfDeactivated(`CREATE CONSTRAINT ${t.name?E(t.name):""}${a}${i.FOR} (${E(u)}:${E(o)}) ${i.REQUIRED} (${n.map(f=>`${E(u)}.${E(f.name)}`).join(", ")}) IS NODE KEY`,n.every(f=>f.isActivated))}}},getExistsConstraint({labelName:r,fieldName:t,type:e}){let n=r.toLowerCase();switch(e){case"node":return`CREATE CONSTRAINT ON (${E(n)}:${E(r)}) ASSERT exists(${E(n)}.${E(t)})`;case"relationship":return`CREATE CONSTRAINT ON ()-[${E(n)}:${E(r)}]-() ASSERT exists(${E(n)}.${E(t)})`;default:return null}},getExistsConstraint43({labelName:r,fieldName:t,type:e},n){let i=Sh(n),o=r.toLowerCase();switch(e){case"node":return`CREATE CONSTRAINT IF NOT EXISTS ${i.FOR} (${E(o)}:${E(r)}) ${i.REQUIRED} ${E(o)}.${E(t)} IS NOT NULL`;case"relationship":return`CREATE CONSTRAINT IF NOT EXISTS ${i.FOR} ()-[${E(o)}:${E(r)}]-() ${i.REQUIRED} ${E(o)}.${E(t)} IS NOT NULL`;default:return null}},getUniqueConstraint({labelName:r,fieldName:t},e){let n=Sh(e),i=r.toLowerCase();return`CREATE CONSTRAINT${oS(e)}${n.FOR} (${E(i)}:${E(r)}) ${n.REQUIRED} ${E(i)}.${E(t)} IS UNIQUE`},findFields(r,t){let e=[],n;r.items?Array.isArray(r.items)?n=r.items:n=[r.items]:n=r.properties;for(let i in n){let o=n[i],u=t.indexOf(o.GUID);if(u!==-1&&(e.indexOf(i)===-1&&e.push({name:i,isActivated:o.isActivated}),t.splice(u,1)),(o.properties||o.items)&&this.findFields(o,t).length&&e.indexOf(o.name)===-1&&e.push({name:o.name,isActivated:o.isActivated}),!t.length)return e}return e},getIndexes(r,t,e){let n=[],i=this.getIndex3x.bind(this),o={collections:t};return r!=="3.x"&&(i=this.getIndex4x.bind(this),["4.3","4.4","5.x"].includes(r)&&(o.relationships=e)),Object.keys(o).forEach(u=>{o[u].forEach(a=>{a.index&&a.index.forEach(f=>{if(f.key){let c=this.findFields(a,f.key.map(l=>l.keyId));if(c.length){let l=i({entity:a,index:f,fields:c,isActivated:f.isActivated!==!1&&a.isActivated!==!1,type:u,dbVersion:r});n.push(l)}}})})}),n},getIndex3x({entity:r,fields:t,isActivated:e}){return this.commentIfDeactivated(`CREATE INDEX ON :${E(r.collectionName)}(${t.map(n=>E(n.name)).join(", ")})`,e&&t.every(n=>n.isActivated))},getIndex4x({entity:r,index:t,fields:e,isActivated:n,type:i,dbVersion:o}){var c;let u=((c=r.name||r.collectionName)==null?void 0:c.toLowerCase())||"entity",a=this.getIndexType(t,o),f=a?` ${a} `:" ";switch(i){case"collections":return this.commentIfDeactivated(`CREATE${f}INDEX ${E(t.name||u)} IF NOT EXISTS FOR (${E(u)}:${E(r.collectionName)}) ON (${E(u)}.${e.map(l=>E(l.name)).join(`, ${E(u)}.`)})`,n&&e.every(l=>l.isActivated));case"relationships":return this.commentIfDeactivated(`CREATE${f}INDEX ${E(t.name||u)} IF NOT EXISTS FOR ()-[${E(u)}:${E(r.name)}]-() ON (${E(u)}.${e.map(l=>E(l.name)).join(`, ${E(u)}.`)})`,n&&e.every(l=>l.isActivated))}return null},getIndexType(r,t){return t==="5.x"&&r.type||""},getObjectValueBySchema(r,t){return t&&t.type==="spatial"&&t.mode==="point"?`point(${this.toCypherJson(this.fixPoint(r))})`:`apoc.convert.toJson(${this.toCypherJson(r)})`},fixPoint(r){if(!(r&&typeof r=="object"&&!Array.isArray(r)))return r;let e=s(i=>isNaN(i)?i:Number(i)>90?90:Number(i)<-90?-90:Number(i),"fix"),n={...r};return n.longitude!==void 0&&(n.longitude=e(n.longitude)),n.latitude!==void 0&&(n.latitude=e(n.latitude)),n},getArrayValueBySchema(r,t){return r.map((e,n)=>Object(e)===e&&!Array.isArray(e)?this.getObjectValueBySchema(e,Array.isArray(t)?t[n]:t):Array.isArray(e)?`[ ${this.getArrayValueBySchema(e,(Array.isArray(t)?t[n]:t).items).join(", ")} ]`:JSON.stringify(e))},commentIfDeactivated(r,t){return!t&&!r.includes(`
`)?`// ${r}`:t?r:r.split(/\n/).reduce((n,i)=>n+`// ${i}
`,"")}};var E=s(r=>`\`${r}\``,"screen"),iS=s((r,t)=>(sS(Su),ae.has(r,`properties.${t}`)?r.properties[t]:ae.has(r,`allOf.${t}`)?r.allOf[t]:ae.has(r,`anyOf.${t}`)?r.anyOf[t]:ae.has(r,`oneOf.${t}`)?r.oneOf[t]:{}),"getProperty"),oS=s(r=>uS(r)?" ":" IF NOT EXISTS ","getOptionalIdempotentConstraintStatement"),uS=s(r=>["3.x","4.0-4.2"].includes(r),"isDBVersionLessThan4point3"),J8=s((r,t)=>{let e=JSON.stringify(t);return r&&[r.type,r.childType].includes("temporal")?e6(r.mode,e):e},"getStatementValue"),e6=s((r,t)=>{let n=t===JSON.stringify("2014-12-03"),i=JSON.stringify("P1D"),o=JSON.stringify("12:00");switch(r){case"date":return`date(${t})`;case"datetime":return`datetime(${t})`;case"localdatetime":return`localdatetime(${t})`;case"localtime":return`localtime(${n?o:t})`;case"time":return`time(${n?o:t})`;case"duration":return`duration(${n?i:t})`;default:return t}},"getTemporalFieldFunctionStatement"),Sh=s(r=>r==="5.x"?{FOR:"FOR",REQUIRED:"REQUIRE"}:{FOR:"ON",REQUIRED:"ASSERT"},"getConstraintStatementConfig");
